<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Atomic Increment Operator</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet" href="css/eclipse-defaults.css" />
    <link type="text/css" rel="stylesheet" href="css/common.css" />
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print" />
</head>
<body>
    <div class="container">
        <div class="header"></div>

        <div id="src-49153858" class="content">
                        <h1>Atomic Increment Operator</h1>
    <p  >Mobile Backend Services supports the Mongo <tt class=" ">$inc</tt> atomic increment operator.    </p>
    <div class="section section-2 " id="src-49153858_safe-id-QXRvbWljSW5jcmVtZW50T3BlcmF0b3ItJGluYw">
        <h2 class="heading "><span>$inc</span></h2>
    <p  >You can use <tt class=" ">$inc</tt> to increment (or decrement) a <a  class="document-link " href="Custom_Objects_and_Fields.html">custom field</a> by a specified value in a single update operation.    </p>
<ul class=" "><li class=" ">    <p  >The operator accepts positive and negative increment amounts    </p>
</li><li class=" ">    <p  >It can only be applied to a single field per method call.    </p>
</li></ul>    <p  ><tt class=" ">$inc</tt> is specified with the following form, where <tt class=" ">fieldName</tt> is the name of the field to update and <tt class=" ">value</tt> is a positive (or negative) number to increment (or decrement) <tt class=" ">fieldName</tt> by:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="string">"fieldName"</code><code class="plain">: { </code><code class="string">"$inc:"</code><code class="plain"> value}</code></div>
</div>
    </div>
    <p  >The operator must be enclosed in quotes, as shown above. The following methods support the <tt class=" ">$inc</tt> operator:    </p>
<ul class=" "><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Checkins-method-update">Checkins.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/CustomObjects-method-update">CustomObjects.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Events-method-update">Events.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Files-method-update">Files.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/PhotoCollections-method-update">PhotoCollections.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Photos-method-update">Photos.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Places-method-update">Places.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Posts-method-update">Posts.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Reviews-method-update">Reviews.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Users-method-update">Users.update</a>    </p>
</li><li class=" ">    <p  ><a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Statuses-method-update">Statuses.update</a>    </p>
</li></ul>    <div class="section section-3 " id="src-49153858_AtomicIncrementOperator-Examples">
        <h3 class="heading "><span>Examples</span></h3>
    <p  >The following example increments the <tt class=" ">score</tt> custom field by 10 in a <a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/CustomObjects">CustomObjects</a> update to a custom object called <tt class=" ">family</tt>:    </p>
    <div  class="tablewrap">
        <table >
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr >
            <td   rowspan="1" colspan="1">
        <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ curl -b c.txt -c c.txt -X PUT -F </code><code class="string">"id=511117915554f74313000009"</code><code class="plain"> -F </code><code class="string">"fields={"</code><code class="plain">favorite</code><code class="string">":"</code><code class="plain">play xbox 360", </code></div>
<div class="line"><code class="string">"pet"</code><code class="plain">:</code><code class="string">"shark"</code><code class="plain"> ,</code><code class="string">"score"</code><code class="plain">:{</code><code class="string">'$inc'</code><code class="plain">:10}}" </code></div>
<div class="line"><code class="string">"api.cloud.appcelerator.com/v1/objects/family/update.json?key=TENIhpXtjFbkBbztvfZMwnciOjE9aHjd"</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  </code><code class="string">"meta"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"code"</code><code class="plain">: 200,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"status"</code><code class="plain">: </code><code class="string">"ok"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"method_name"</code><code class="plain">: </code><code class="string">"updateCustomObject"</code></div>
<div class="line"><code class="plain">  },</code></div>
<div class="line"><code class="plain">  </code><code class="string">"response"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"family"</code><code class="plain">: [</code></div>
<div class="line"><code class="plain">      {</code></div>
<div class="line"><code class="plain">        </code><code class="string">"family_name"</code><code class="plain">: </code><code class="string">"ACS"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"score"</code><code class="plain">: 10,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"age"</code><code class="plain">: 40,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"cars"</code><code class="plain">: 1,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"favorite"</code><code class="plain">: </code><code class="string">"play xbox 360"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"pet"</code><code class="plain">: </code><code class="string">"shark"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511117915554f74313000009"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:30:41+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:30:41+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"user"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">          </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511117905554f74313000003"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"first_name"</code><code class="plain">: </code><code class="string">"Alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"last_name"</code><code class="plain">: </code><code class="string">"Gal"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:30:40+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:30:41+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"external_accounts"</code><code class="plain">: [</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">          ],</code></div>
<div class="line"><code class="plain">          </code><code class="string">"confirmed_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:30:40+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"username"</code><code class="plain">: </code><code class="string">"alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"email"</code><code class="plain">: </code><code class="string">"alice@gal.com"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"admin"</code><code class="plain">: </code><code class="string">"false"</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">      }</code></div>
<div class="line"><code class="plain">    ]</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >The following example decrements the <tt class=" ">score</tt> custom field by 20 in a <a class="external-link external-link" href="http://docs.appcelerator.com/arrowdb/latest/#!/api/Checkins">Checkins</a> update:    </p>
    <div  class="tablewrap">
        <table >
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr >
            <td   rowspan="1" colspan="1">
        <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ curl -b c.txt -c c.txt -X PUT -F </code><code class="string">"checkin_id=511111945554f742d300000b"</code><code class="plain"> -F </code></div>
<div class="line"><code class="string">"custom_fields={"</code><code class="plain">favorite</code><code class="string">":"</code><code class="plain">play xbox 360</code><code class="string">", "</code><code class="plain">pet</code><code class="string">":"</code><code class="plain">shark</code><code class="string">" ,"</code><code class="plain">score</code><code class="string">":{'$inc':-20}}"</code><code class="plain"> </code></div>
<div class="line"><code class="string">"https://api.cloud.appcelerator.com/v1/checkins/update.json?key=TENIhpXtjFbkBbztvfZMwnciOjE9aHjd"</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  </code><code class="string">"meta"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"code"</code><code class="plain">: 200,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"status"</code><code class="plain">: </code><code class="string">"ok"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"method_name"</code><code class="plain">: </code><code class="string">"updateCheckin"</code></div>
<div class="line"><code class="plain">  },</code></div>
<div class="line"><code class="plain">  </code><code class="string">"response"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"checkins"</code><code class="plain">: [</code></div>
<div class="line"><code class="plain">      {</code></div>
<div class="line"><code class="plain">        </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511111945554f742d300000b"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:08+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:08+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        </code><code class="string">"place"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">          </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511111935554f742d3000009"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"name"</code><code class="plain">: </code><code class="string">"Maya Restaurant"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:07+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:07+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"address"</code><code class="plain">: </code><code class="string">"303 2nd Street"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"city"</code><code class="plain">: </code><code class="string">"San Francisco"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"state"</code><code class="plain">: </code><code class="string">"CA"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"country"</code><code class="plain">: </code><code class="string">"United States"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"phone_number"</code><code class="plain">: </code><code class="string">"(415) 543-2928"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"latitude"</code><code class="plain">: 37.784732,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"longitude"</code><code class="plain">: -122.395441,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"google_cid"</code><code class="plain">: </code><code class="string">"7106049823222705125"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"user"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">            </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511111925554f742d3000003"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"first_name"</code><code class="plain">: </code><code class="string">"Alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"last_name"</code><code class="plain">: </code><code class="string">"Gal"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:06+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:08+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"external_accounts"</code><code class="plain">: [</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">            ],</code></div>
<div class="line"><code class="plain">            </code><code class="string">"confirmed_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:06+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"username"</code><code class="plain">: </code><code class="string">"alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"email"</code><code class="plain">: </code><code class="string">"alice@gal.com"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"admin"</code><code class="plain">: </code><code class="string">"false"</code></div>
<div class="line"><code class="plain">          }</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        </code><code class="string">"user"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">          </code><code class="string">"id"</code><code class="plain">: </code><code class="string">"511111925554f742d3000003"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"first_name"</code><code class="plain">: </code><code class="string">"Alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"last_name"</code><code class="plain">: </code><code class="string">"Gal"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"created_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:06+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"updated_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:08+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"external_accounts"</code><code class="plain">: [</code></div>
<div class="line"> </div>
<div class="line"><code class="plain">          ],</code></div>
<div class="line"><code class="plain">          </code><code class="string">"confirmed_at"</code><code class="plain">: </code><code class="string">"2013-02-05T14:05:06+0000"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"username"</code><code class="plain">: </code><code class="string">"alice"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"email"</code><code class="plain">: </code><code class="string">"alice@gal.com"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"admin"</code><code class="plain">: </code><code class="string">"false"</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        </code><code class="string">"custom_fields"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">          </code><code class="string">"family_name"</code><code class="plain">: </code><code class="string">"ACS"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"score"</code><code class="plain">: 15,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"age"</code><code class="plain">: 40,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"cars"</code><code class="plain">: 1,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"favorite"</code><code class="plain">: </code><code class="string">"play xbox 360"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          </code><code class="string">"pet"</code><code class="plain">: </code><code class="string">"shark"</code></div>
<div class="line"><code class="plain">        }</code></div>
<div class="line"><code class="plain">      }</code></div>
<div class="line"><code class="plain">    ]</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <p  >If you apply $inc to multiple fields in one Update call, you will get an error:    </p>
    <div  class="tablewrap">
        <table >
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr >
            <td   rowspan="1" colspan="1">
        <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ curl -b c.txt -c c.txt -X PUT -F </code><code class="string">"checkin_id=511111945554f742d300000b"</code><code class="plain"> -F </code></div>
<div class="line"><code class="string">"custom_fields={"</code><code class="plain">favorite</code><code class="string">":"</code><code class="plain">play xbox 360</code><code class="string">", "</code><code class="plain">pet</code><code class="string">":"</code><code class="plain">shark</code><code class="string">" ,"</code><code class="plain">score</code><code class="string">":{$inc:10}, "</code><code class="plain">age</code><code class="string">":{$inc:10}}"</code><code class="plain"> </code></div>
<div class="line"><code class="string">"http://api.cloud.appcelerator.com/v1/checkins/update.json?key=HSejkGE9ghavAelMJv7bZYNM5HyMhqYq"</code></div>
<div class="line"><code class="plain">{</code></div>
<div class="line"><code class="plain">  </code><code class="string">"meta"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"status"</code><code class="plain">: </code><code class="string">"fail"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"code"</code><code class="plain">: 400,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"message"</code><code class="plain">: </code><code class="string">"$inc operation only support to increase one field once."</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"method_name"</code><code class="plain">: </code><code class="string">"updateCheckin"</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    </div>
    </div>
        </div>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
