<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>API Runtime Services Troubleshooting</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta content="Scroll EclipseHelp Exporter" name="generator"/>

    <link type="text/css" rel="stylesheet" href="css/eclipse-defaults.css" />
    <link type="text/css" rel="stylesheet" href="css/common.css" />
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print" />
</head>
<body>
    <div class="container">
        <div class="header"></div>

        <div id="src-46245598" class="content">
                        <h1>API Runtime Services Troubleshooting</h1>
    <p  >    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Introduction">Introduction</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Exceptionsthrownupondeployment">Exceptions thrown upon deployment</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYXBwLmpzb3V0c2lkZXN0YXJ0KCltZXRob2Q">Exception in app.js outside start() method</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluc2lkZWFwcC5qc3N0YXJ0KCltZXRob2Q">Exception inside app.js start() method</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYWNvbnRyb2xsZXIsb3V0c2lkZWFmdW5jdGlvbg">Exception in a controller, outside a function</a>    </p>
</li></ul></li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Exceptionsthrownatruntime">Exceptions thrown at runtime</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Exceptioninsynchronouscallshandlingrequests">Exception in synchronous calls handling requests</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYXN5bmNocm9ub3VzY2FsbGJhY2tzaGFuZGxpbmdyZXF1ZXN0cyhvcmJhY2tncm91bmRqb2JzKQ">Exception in asynchronous callbacks handling requests (or background jobs)</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Applicationcrasheswhilehandlingrequests">Application crashes while handling requests</a>    </p>
</li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Applicationcrasheswhilerunningbackgroundjobs">Application crashes while running background jobs</a>    </p>
</li></ul></li><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_APIRuntimeServicesTroubleshooting-Installationerrors">Installation errors</a>    </p>
<ul class="toc-indentation "><li class=" ">    <p  ><a  class="document-link " href="API_Runtime_Services_Troubleshooting.html#src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUVycm9yOkVOT0VOVCxub3N1Y2hmaWxlb3JkaXJlY3Rvcnk">Error: ENOENT, no such file or directory</a>    </p>
</li></ul></li></ul>    <div class="section section-2 " id="src-46245598_APIRuntimeServicesTroubleshooting-Introduction">
        <h2 class="heading "><span>Introduction</span></h2>
    <p  >This document summarizes the kinds of exceptions you may encounter when deploying or running an API Runtime Services application, or when installing or upgrading the <tt class=" ">acs</tt> NPM package on your system.    </p>
    <p  >The <tt class=" ">appc cloud list</tt> and <tt class=" ">appc cloud loglist</tt> CLI commands are used to troubleshoot deployment or runtime issues. Note that <tt class=" ">appc cloud loglist</tt> may not immediately retrieve the latest logs from the server; you may need to wait a few seconds and try running the command again. Also, users should not expect this command to pull logs from the start date; the output will always return the latest logs. For example, if a start date is used and there are more than a 1000 lines up through today's date from the start date, the logs will only return a page with lines starting from today's date going back to the start date and not from the start date to today.    </p>
    </div>
    <div class="section section-2 " id="src-46245598_APIRuntimeServicesTroubleshooting-Exceptionsthrownupondeployment">
        <h2 class="heading "><span>Exceptions thrown upon deployment</span></h2>
    <div class="section section-3 " id="src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYXBwLmpzb3V0c2lkZXN0YXJ0KCltZXRob2Q">
        <h3 class="heading "><span>Exception in app.js outside start() method</span></h3>
    <p  >The following code references an undefined variable outside application's <tt class=" ">start()</tt> method.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> start(app, express) {</code></div>
<div class="line"><code class="plain">	app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">)); </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">adsgasdg; </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >In this scenario, the <strong class=" ">Message</strong> field of <tt class=" ">appc cloud list</tt> and <tt class=" ">appc acs loglist</tt> output indicates a <tt class=" ">ReferenceError</tt> and the name and location of the reference. The <strong class=" ">Status</strong> field of the <tt class=" ">appc cloud list</tt> command is set to <strong class=" ">&quot;Failed to deploy&quot;</strong>.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="plain">//a3110b813195ca3a774913a767e49a1ce5f17e63</code><code class="plain">.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec 24 2013 21:15:19 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: 0.10.22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: 1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: 1</code></div>
<div class="line"><code class="plain">-- Active version: 0.1.0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec 26 2013 09:18:26 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Status: Failed to deploy</code></div>
<div class="line"><code class="plain">-- Message: ReferenceError: adsgasdg is not defined at </code><code class="plain">/app</code><code class="plain">.js:6:1</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:18:030.335 [INFO] [4454] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:18:030.635 [ERROR] [4454] Failed to load main script. ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at </code><code class="plain">/app</code><code class="plain">.js:6:1</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:18:030.636 [ERROR] [4454] ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at </code><code class="plain">/app</code><code class="plain">.js:6:1</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluc2lkZWFwcC5qc3N0YXJ0KCltZXRob2Q">
        <h3 class="heading "><span>Exception inside app.js start() method</span></h3>
    <p  >The following code references an undefined variable inside application's <tt class=" ">start()</tt> method.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> start(app, express) {</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    adsgasdg;   </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">    app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">));     </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >In this scenario, the <strong class=" ">Message</strong> field of <tt class=" ">appc cloud list</tt> and <tt class=" ">appc cloud loglist</tt> output indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception. The <strong class=" ">Status</strong> field of the <tt class=" ">appc cloud list</tt> command is set to <strong class=" ">&quot;Failed to deploy&quot;</strong>.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">40</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Status: Failed to deploy</code></div>
<div class="line"><code class="plain">-- Message: ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">043.923</code><code class="plain"> [INFO] [</code><code class="value">4488</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">044.224</code><code class="plain"> [ERROR] [</code><code class="value">4488</code><code class="plain">] Failed to run start(). ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">20</code><code class="plain">:</code><code class="value">044.225</code><code class="plain"> [ERROR] [</code><code class="value">4488</code><code class="plain">] ReferenceError: adsgasdg is not defined</code></div>
<div class="line"><code class="plain">at Object.start (/app.js:</code><code class="value">4</code><code class="plain">:</code><code class="value">5</code><code class="plain">)</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYWNvbnRyb2xsZXIsb3V0c2lkZWFmdW5jdGlvbg">
        <h3 class="heading "><span>Exception in a controller, outside a function</span></h3>
    <p  >The following code references an undefined variable inside a controller, outside any function definition:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">function index(req, res) {</code></div>
<div class="line"><code class="plain">    res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Node.ACS! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">asgasg;dkg;as   </code><code class="comments">// This line causes exception.</code></div>
</div>
    </div>
    <p  >When accessing the application and hitting the controller over HTTP, it returns the following error:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">Cannot get / </code></div>
</div>
    </div>
    <p  >In this scenario, the <tt class=" ">appc cloud list</tt> output doesn't indicate a problem, but <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="comments">//a3110b813195ca3a774913a767e49a1ce5f17e63.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec </code><code class="value">24</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">21</code><code class="plain">:</code><code class="value">15</code><code class="plain">:</code><code class="value">19</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: </code><code class="value">0.10</code><code class="plain">.</code><code class="value">22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: </code><code class="value">1</code></div>
<div class="line"><code class="plain">-- Active version: </code><code class="value">0.1</code><code class="plain">.</code><code class="value">0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec </code><code class="value">26</code><code class="plain"> </code><code class="value">2013</code><code class="plain"> </code><code class="value">09</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">54</code><code class="plain"> GMT+</code><code class="value">0800</code><code class="plain"> (CST)</code></div>
<div class="line"><code class="plain">-- Servers:</code></div>
<div class="line"><code class="plain">No. </code><code class="value">1</code><code class="plain"> ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">059.035</code><code class="plain"> [INFO] [</code><code class="value">4503</code><code class="plain">] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="value">12</code><code class="plain">/</code><code class="value">26</code><code class="plain">/</code><code class="value">2013</code><code class="plain"> </code><code class="value">05</code><code class="plain">:</code><code class="value">24</code><code class="plain">:</code><code class="value">059.427</code><code class="plain"> [ERROR] [</code><code class="value">4503</code><code class="plain">] Failed to load controller </code><code class="string">"application.js"</code><code class="plain">.</code></div>
<div class="line"><code class="plain">    ReferenceError: asgasg is not defined at /controllers/application.js:</code><code class="value">5</code><code class="plain">:</code><code class="value">1</code><code class="plain"> </code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-2 " id="src-46245598_APIRuntimeServicesTroubleshooting-Exceptionsthrownatruntime">
        <h2 class="heading "><span>Exceptions thrown at runtime</span></h2>
    <div class="section section-3 " id="src-46245598_APIRuntimeServicesTroubleshooting-Exceptioninsynchronouscallshandlingrequests">
        <h3 class="heading "><span>Exception in synchronous calls handling requests</span></h3>
    <p  >The following code references an undefined variable inside a controller function.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="keyword">function</code><code class="plain"> index(req, res) {</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">   asgasg;dkg;as    </code><code class="comments">// This line causes exception.</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">   res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Arrow Cloud! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >In this scenario, the <tt class=" ">appc cloud list</tt> output doesn't indicate a problem, but <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the name and location of the exception.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc cloud list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="plain">//a3110b813195ca3a774913a767e49a1ce5f17e63</code><code class="plain">.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec 24 2013 21:15:19 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: 0.10.22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: 1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: 1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: 1</code></div>
<div class="line"><code class="plain">-- Active version: 0.1.0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec 26 2013 09:29:52 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Servers:</code></div>
<div class="line"><code class="plain">No. 1 ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:33:003.721 [INFO] [4541] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:33:004.122 [INFO] [4541] App started</code></div>
<div class="line"><code class="plain">ReferenceError: asgasg is not defined at index (</code><code class="plain">/controllers/application</code><code class="plain">.js:3:5)</code></div>
<div class="line"><code class="plain">[PERF] GET / 9 ms</code></div>
</div>
    </div>
    <p  >The response when accessing the application and hitting that function indicates the name and location of the reference error:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">ReferenceError: asgasg is not defined</code></div>
<div class="line"><code class="plain">    at index (/controllers/application.js:</code><code class="value">2</code><code class="plain">:</code><code class="value">4</code><code class="plain">)</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUV4Y2VwdGlvbmluYXN5bmNocm9ub3VzY2FsbGJhY2tzaGFuZGxpbmdyZXF1ZXN0cyhvcmJhY2tncm91bmRqb2JzKQ">
        <h3 class="heading "><span>Exception in asynchronous callbacks handling requests (or background jobs)</span></h3>
    <p  >The following code sample uses the <tt class=" ">setTimeout()</tt> method to asynchronously call a function that contains an exception.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="keyword">function</code><code class="plain"> index(req, res) {</code></div>
<div class="line"><code class="plain">    setTimeout(</code><code class="keyword">function</code><code class="plain">(){</code></div>
<div class="line"><code class="plain">        respond(res);</code></div>
<div class="line"><code class="plain">    }, 2000);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> respond(res) {</code></div>
<div class="line"><code class="plain">    asgasg;af   </code><code class="comments">//This line causes exception.</code></div>
<div class="line"><code class="plain">    res.render(</code><code class="string">'index'</code><code class="plain">, { title: </code><code class="string">'Welcome to Node.ACS! '</code><code class="plain"> + process.version });</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
    </div>
    <p  class="prettyprint prettyprinted">In this scenario when accessing the application over HTTP and hitting the function, the following error is returned:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">An error has occurred: {</code><code class="string">"code"</code><code class="plain">:</code><code class="string">"ECONNRESET"</code><code class="plain">} </code></div>
</div>
    </div>
    <p  >In this scenario, the <tt class=" ">appc cloud loglist</tt> indicates a <tt class=" ">ReferenceError</tt> and the corresponding stack trace; <tt class=" ">appc cloud list</tt> does not indicate any problem.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc cloud loglist testapp</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:44:043.639 [INFO] [4606] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:44:044.054 [INFO] [4606] App started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:44:053.999 [ERROR] [4606] ReferenceError: asgasg is not defined</code></div>
<div class="line"><code class="plain">at respond (</code><code class="plain">/controllers/application</code><code class="plain">.js:8:5)</code></div>
<div class="line"><code class="plain">at null._onTimeout (</code><code class="plain">/controllers/application</code><code class="plain">.js:3:9)</code></div>
<div class="line"><code class="plain">at Timer.listOnTimeout [as ontimeout] (timers.js:110:15)</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:44:059.627 [INFO] [4614] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:45:000.029 [INFO] [4614] App started</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="plain">//a3110b813195ca3a774913a767e49a1ce5f17e63</code><code class="plain">.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec 24 2013 21:15:19 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: 0.10.22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: 1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: 1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: 1</code></div>
<div class="line"><code class="plain">-- Active version: 0.1.0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec 26 2013 09:29:52 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Servers:</code></div>
<div class="line"><code class="plain">No. 1 ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-46245598_APIRuntimeServicesTroubleshooting-Applicationcrasheswhilehandlingrequests">
        <h3 class="heading "><span>Application crashes while handling requests</span></h3>
    <p  >The following code has request handler that quickly uses up available memory, causing the application to crash.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="keyword">function</code><code class="plain"> index(req, res) {</code></div>
<div class="line"><code class="plain">    respond(res);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> respond(res) {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> cur = 167772160;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> bcast = 184549375;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> addresses = [];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">while</code><code class="plain"> (cur &lt;= bcast){</code></div>
<div class="line"><code class="plain">        cur += 1;</code></div>
<div class="line"><code class="plain">        addresses.push(cur);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    console.log(addresses.length);</code></div>
<div class="line"><code class="plain">    console.log(addresses); </code><code class="comments">// memory goes from a few megs to over a gig in seconds when trying to print this</code></div>
<div class="line"><code class="plain">    res.send(addresses);</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
    </div>
    <p  >The <tt class=" ">appc cloud loglist</tt> output indicates &quot;FATAL ERROR: JS Allocation failed - process out of memory&quot;; <tt class=" ">appc cloud list</tt> doesn't indicate any problem.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ acs loglist testapp</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:58:042.432 [INFO] [4628] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:58:042.828 [INFO] [4628] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:59:000.030 [INFO] [4636] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 05:59:000.434 [INFO] [4636] App started</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="plain">//a3110b813195ca3a774913a767e49a1ce5f17e63</code><code class="plain">.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec 24 2013 21:15:19 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: 0.10.22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: 1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: 1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: 1</code></div>
<div class="line"><code class="plain">-- Active version: 0.1.0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec 26 2013 09:29:52 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Servers:</code></div>
<div class="line"><code class="plain">No. 1 ID: 52b81468754c4184e58e8789 Status: Deployed</code></div>
</div>
    </div>
    </div>
    <div class="section section-3 " id="src-46245598_APIRuntimeServicesTroubleshooting-Applicationcrasheswhilerunningbackgroundjobs">
        <h3 class="heading "><span>Application crashes while running background jobs</span></h3>
    <p  >The following code causes the application to run out of memory and crash while processing a <tt class=" ">setTimeout()</tt> function call.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="comments">// initialize app</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> start(app, express) {</code></div>
<div class="line"><code class="plain">    app.use(express.favicon(__dirname + </code><code class="string">'/public/images/favicon.ico'</code><code class="plain">));     </code><code class="comments">//set favicon</code></div>
<div class="line"><code class="plain">    setTimeout(dosth, 5000);</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="comments">// release resources</code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> stop() {</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="keyword">function</code><code class="plain"> dosth() {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> cur = 167772160;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> bcast = 184549375;</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">var</code><code class="plain"> addresses = [];</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">while</code><code class="plain"> (cur &lt;= bcast){</code></div>
<div class="line"><code class="plain">        cur += 1;</code></div>
<div class="line"><code class="plain">        addresses.push(cur);</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">    console.log(addresses.length);</code></div>
<div class="line"><code class="plain">    console.log(addresses); </code><code class="comments">// memory goes from a few megs to over a gig in seconds when trying to print this</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
    <p  >The <tt class=" ">appc cloud loglist</tt> output indicates &quot;FATAL ERROR: JS Allocation failed - process out of memory&quot;; <tt class=" ">appc cloud list</tt> doesn't indicate any problem.    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">$ appc cloud loglist testapp</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 06:04:043.934 [INFO] [4667] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 06:04:044.332 [INFO] [4667] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 06:05:000.529 [INFO] [4671] ------------ Run MVC App ------------</code></div>
<div class="line"><code class="plain">info: socket.io started</code></div>
<div class="line"><code class="plain">12</code><code class="plain">/26/2013</code><code class="plain"> 06:05:000.927 [INFO] [4671] App started</code></div>
<div class="line"><code class="plain">FATAL ERROR: JS Allocation failed - process out of memory</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain">$ acs list testapp</code></div>
<div class="line"><code class="plain">App name: testapp</code></div>
<div class="line"><code class="plain">-- URL: http:</code><code class="plain">//a3110b813195ca3a774913a767e49a1ce5f17e63</code><code class="plain">.cloud-services.appcelerator.com</code></div>
<div class="line"><code class="plain">-- Created at: Tue Dec 24 2013 21:15:19 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Node Version: 0.10.22</code></div>
<div class="line"><code class="plain">-- Maximum allowed number of servers: 1</code></div>
<div class="line"><code class="plain">-- Desired number of servers: 1</code></div>
<div class="line"><code class="plain">-- Current number of deployed servers: 1</code></div>
<div class="line"><code class="plain">-- Active version: 0.1.0</code></div>
<div class="line"><code class="plain">-- Published at: Thu Dec 26 2013 09:29:52 GMT+0800 (CST)</code></div>
<div class="line"><code class="plain">-- Servers:</code></div>
<div class="line"><code class="plain">No. 1 ID: 52b81468754c4184e58e8789 Status: Deployed </code></div>
</div>
    </div>
    </div>
    </div>
    <div class="section section-2 " id="src-46245598_APIRuntimeServicesTroubleshooting-Installationerrors">
        <h2 class="heading "><span>Installation errors</span></h2>
    <p  >This section describes issues you may encounter when installing or upgrading API Runtime Services using NPM.    </p>
    <div class="section section-3 " id="src-46245598_safe-id-QVBJUnVudGltZVNlcnZpY2VzVHJvdWJsZXNob290aW5nLUVycm9yOkVOT0VOVCxub3N1Y2hmaWxlb3JkaXJlY3Rvcnk">
        <h3 class="heading "><span>Error: ENOENT, no such file or directory</span></h3>
    <p  >API Runtime Services installation fails with the following error:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="plain">...</code></div>
<div class="line"><code class="plain">fs.js:427</code></div>
<div class="line"><code class="plain">  </code><code class="keyword">return</code><code class="plain"> binding.open(pathModule._makeLong(path), stringToFlags(flags), mode);</code></div>
<div class="line"><code class="plain">                 ^</code></div>
<div class="line"><code class="plain">Error: ENOENT, no such file or directory </code><code class="string">'/usr/local/lib/node_modules/acs/bin/acsx'</code></div>
<div class="line"><code class="plain">    at Object.fs.openSync (fs.js:427:18)</code></div>
<div class="line"><code class="plain">    at Object.fs.readFileSync (fs.js:284:15)</code></div>
<div class="line"><code class="plain">    at Object.&lt;anonymous&gt; (/usr/local/lib/node_modules/acs/scripts/config.js:21:19)</code></div>
<div class="line"><code class="plain">    at Module._compile (module.js:456:26)</code></div>
<div class="line"><code class="plain">    at Object.Module._extensions..js (module.js:474:10)</code></div>
<div class="line"><code class="plain">    at Module.load (module.js:356:32)</code></div>
<div class="line"><code class="plain">    at Function.Module._load (module.js:312:12)</code></div>
<div class="line"><code class="plain">    at Function.Module.runMain (module.js:497:10)</code></div>
<div class="line"><code class="plain">    at startup (node.js:119:16)</code></div>
<div class="line"><code class="plain">    at node.js:902:3</code></div>
</div>
    </div>
    <p  >To resolve, try deleting your <tt class=" ">~/.npm</tt> folder and cleaning the NPM cache, then re-installing:    </p>
    <div  class="confbox programlisting defaultnew syntaxhighlighter scroll-html-formatted-code">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code">
<div class="line"><code class="functions">rm</code><code class="plain"> -rf ~/.npm</code></div>
<div class="line"><code class="plain">npm cache </code><code class="functions">clear</code></div>
<div class="line"><code class="functions">sudo</code><code class="plain"> npm -g </code><code class="functions">install</code><code class="plain"> acs</code></div>
</div>
    </div>
    </div>
    </div>
        </div>
    
        <div class="footer">
            Created with <a href="http://k15t.com/display/web/Scroll-Wiki-EclipseHelp-Exporter-for-Confluence">Scroll EclipseHelp Exporter for Confluence</a>.
        </div>
    </div>
</body>
</html>
