;try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/jirachart.js' */
AJS.toInit(function(){AJS.$(".jira-chart-macro-img").load(function(a){AJS.log("Jira Chart Macro - chart image loaded");AJS.$(".insert-jira-chart-macro-button",window.parent.document).enable()}).error(function(d){AJS.log("Jira Chart Macro - chart image loaded error");AJS.$(".insert-jira-chart-macro-button",window.parent.document).disable();var e=AJS.$(d.target);var c=e.parent();var b=c.parent();c.remove();var a="Unable to render JIRA chart macro due to an execution error.";AJS.messages.error(b,{body:a})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jirachart-resources', location = '/jirachart/twodimensionalchart-showlink.js' */
var TwoDimensionalShowLink=(function(e){var d=function(i){var h=e("#two-dimensional-chart-"+i);var g=h.position();e("<div />",{id:"twodimensional-dark-layout-"+i,"class":"jim-sortable-dark-layout",css:{top:g.top+"px",left:g.left+"px",width:h.width()+"px",height:h.height()+"px"}}).appendTo(h.parent())};var a=function(g){e("#twodimensional-dark-layout-"+g).remove()};var b=function(){var h=e(this).attr("data-chart-id");d(h);var g={pageId:e("#chart-page-id-"+h).val(),wikiMarkup:e("#chart-wiki-"+h).val(),isShowMore:e(this).attr("data-is-show-more")};AJS.$.ajax({type:"POST",dataType:"html",url:Confluence.getContextPath()+"/plugins/servlet/twoDimensionalShowMoreRenderer",data:g,success:function(i){if(e(i).find(".aui-message.error").length){var j=e(i).find(".message").text();e("#two-dimensional-chart-"+h).find(".show-error").html(j)}else{var k=e(i).find(".show-link-container a").attr("data-chart-id");e("#two-dimensional-chart-"+h).replaceWith(i);c(k)}a(h)},error:function(){e("#two-dimensional-chart-"+h).find(".show-error").html("Unable to render JIRA chart macro, execution has been timeout.");a(h)}})};var c=function(g){e("#show-link-"+g).on("click",b)};var f=function(){e(".show-link-container a").each(function(){c(e(this).attr("data-chart-id"))})};return{init:f}})(AJS.$);AJS.$(function(){TwoDimensionalShowLink.init()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:mail-page-resources', location = 'templates/sharepage/share-dialog.soy' */
// This file was automatically generated from share-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Share == 'undefined') { Confluence.Templates.Share = {}; }
if (typeof Confluence.Templates.Share.Dialog == 'undefined') { Confluence.Templates.Share.Dialog = {}; }


Confluence.Templates.Share.Dialog.shareContentPopup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" class="aui share-content-popup"><div class="field-group"><div class="autocomplete-user-target"><input class="text autocomplete-sharepage" id="users" data-max="10" data-dropdown-target=".autocomplete-user-target" data-none-message="', soy.$$escapeHtml("No matches"), '" placeholder="', soy.$$escapeHtml("User name, group or email"), '"/></div><ol class="recipients"></ol></div><div class="field-group"><textarea class="textarea" id="note" placeholder="', soy.$$escapeHtml("Add an optional note"), '"/></div><div class="field-group button-panel"><div class="progress-messages-icon"></div><div class="progress-messages"></div><input class="button submit" type="submit" value="', soy.$$escapeHtml("Share"), '" disabled/><a class="close-dialog" href="#">', soy.$$escapeHtml("Cancel"), '</a></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientUser = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-userkey="', soy.$$escapeHtml(opt_data.userKey), '" style="display: none" class="recipient-user"><img src="', soy.$$escapeHtml(opt_data.thumbnailLink.href), '" title="', soy.$$escapeHtml(opt_data.title), '"/><span class="title" title="', soy.$$escapeHtml(opt_data.title), '">', soy.$$escapeHtml(opt_data.title), '</span><span class="remove-recipient"/></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientEmail = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-email="', soy.$$escapeHtml(opt_data.email), '" style="display: none" class="recipient-email"><img src="', soy.$$escapeHtml(opt_data.icon), '" title="', soy.$$escapeHtml(opt_data.email), '"/><span class="title" title="', soy.$$escapeHtml(opt_data.email), '">', soy.$$escapeHtml(opt_data.email), '</span><span class="remove-recipient"/></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Share.Dialog.recipientGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li data-group="', soy.$$escapeHtml(opt_data.title), '" style="display: none" class="recipient-group"><span><img src="', soy.$$escapeHtml(opt_data.thumbnailLink.href), '" title="', soy.$$escapeHtml(opt_data.title), '"/><span>', soy.$$escapeHtml(opt_data.title), '</span><span class="remove-recipient"/></span></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:mail-page-resources', location = 'js/mailpage.js' */
AJS.Confluence.SharePage={};AJS.Confluence.SharePage.autocompleteUser=function(d){d=d||document.body;var e=AJS.$,a=/^([a-zA-Z0-9_\.\-\+\!#\$%&'\*/=\?\^_`{|}~])+\@.*/;var c=function(j){if(!j||!j.result){throw new Error("Invalid JSON format")}var f=[];for(var g=0;g<j.result.length;g++){var h=j.result[g];if(h.type=="group"){h=b(h)}}f.push(j.result);return f};function b(f){if(f.name=="confluence-users"||f.name=="confluence-administrators"){return f}f.title=f.name;f.group=f.name;f.thumbnailLink={href:Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.plugins.share-page:mail-page-resources/images/group.png",type:"image/png",rel:"thumbnail"};f.link=[{href:Confluence.getContextPath(),rel:"self"}];return f}e("input.autocomplete-sharepage[data-autocomplete-user-bound!=true]",d).each(function(){var h=e(this).attr("data-autocomplete-sharepage-bound","true").attr("autocomplete","off");var g=h.attr("data-max")||10,j=h.attr("data-alignment")||"left",i=h.attr("data-dropdown-target"),f=null;if(i){f=e(i)}else{f=e("<div></div>");h.after(f)}f.addClass("aui-dd-parent autocomplete");h.quicksearch(AJS.REST.getBaseUrl()+"search/user-or-group.json",function(){h.trigger("open.autocomplete-sharepage")},{makeParams:function(k){return{"max-results":g,query:k.replace("{|}","")}},dropdownPlacement:function(k){f.append(k)},makeRestMatrixFromData:c,addDropdownData:function(l){var k=e.trim(h.val());if(a.test(k)){l.push([{name:k,email:k,href:"#",icon:Confluence.getContextPath()+"/download/resources/com.atlassian.confluence.plugins.share-page:mail-page-resources/images/envelope.png"}])}if(!l.length){var m=h.attr("data-none-message");if(m){l.push([{name:m,className:"no-results",href:"#"}])}}return l},ajsDropDownOptions:{alignment:j,displayHandler:function(k){if(k.restObj&&k.restObj.username){return k.name+" ("+k.restObj.username+")"}return k.name},selectionHandler:function(m,l){if(l.find(".search-for").length){h.trigger("selected.autocomplete-sharepage",{searchFor:h.val()});return}if(l.find(".no-results").length){this.hide();m.preventDefault();return}var k=e("span:eq(0)",l).data("properties");if(!k.email){k=k.restObj}h.trigger("selected.autocomplete-sharepage",{content:k});this.hide();m.preventDefault()}}})})};(function(a){jQuery.fn.extend({elastic:function(){var b=["paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","lineHeight","fontFamily","width","fontWeight","border-top-width","border-right-width","border-bottom-width","border-left-width","borderTopStyle","borderTopColor","borderRightStyle","borderRightColor","borderBottomStyle","borderBottomColor","borderLeftStyle","borderLeftColor"];return this.each(function(){if(this.type!=="textarea"){return false}var g=jQuery(this),c=jQuery("<div />").css({position:"absolute",display:"none","word-wrap":"break-word","white-space":"pre-wrap"}),j=parseInt(g.css("line-height"),10)||parseInt(g.css("font-size"),"10"),l=parseInt(g.css("height"),10)||j*3,k=parseInt(g.css("max-height"),10)||Number.MAX_VALUE,d=0;if(k<0){k=Number.MAX_VALUE}c.appendTo(g.parent());var f=b.length;while(f--){c.css(b[f].toString(),g.css(b[f].toString()))}function h(){var i=Math.floor(parseInt(g.width(),10));if(c.width()!==i){c.css({width:i+"px"});e(true)}}function m(i,o){var n=Math.floor(parseInt(i,10));if(g.height()!==n){g.css({height:n+"px",overflow:o})}}function e(p){var o=g.val().replace(/&/g,"&amp;").replace(/ {2}/g,"&nbsp;").replace(/<|>/g,"&gt;").replace(/\n/g,"<br />");var i=c.html().replace(/<br>/ig,"<br />");if(p||o+"&nbsp;"!==i){c.html(o+"&nbsp;");if(Math.abs(c.height()+j-g.height())>3){var n=c.height()+j;if(n>=k){m(k,"auto")}else{if(n<=l){m(l,"hidden")}else{m(n,"hidden")}}}}}g.css({overflow:"hidden"});g.bind("keyup change cut paste",function(){e()});a(window).bind("resize",h);g.bind("resize",h);g.bind("update",e);g.bind("input paste",function(i){setTimeout(e,250)});e()})}})})(AJS.$);(function(f){var e,c={hideCallback:a,width:250,hideDelay:3600000,calculatePositions:function(h,o,w,s){var p;var y;var u;var l=-7;var m;var q;var x=o.target.offset();var g=o.target.outerWidth();var j=x.left+g/2;var t=(window.pageYOffset||document.documentElement.scrollTop)+f(window).height();var k=10;u=x.top+o.target.outerHeight()+s.offsetY;p=x.left+s.offsetX;var n=x.top>h.height();var i=(u+h.height())<t;q=(!i&&n)||(s.onTop&&n);var r=f(window).width()-(p+s.width+k);if(q){u=x.top-h.height()-8;var v=s.displayShadow?(AJS.$.browser.msie?10:9):0;l=h.height()-v}m=j-p+s.arrowOffsetX;if(s.isRelativeToMouse){if(r<0){y=k;p="auto";m=w.x-(f(window).width()-s.width)}else{p=w.x-20;y="auto";m=w.x-p}}else{if(r<0){y=k;p="auto";m=j-(f(window).width()-h.outerWidth())}else{if(s.width<=g/2){m=s.width/2;p=j-s.width/2}}}return{displayAbove:q,popupCss:{left:p,right:y,top:u},arrowCss:{position:"absolute",left:m,right:"auto",top:l}}}};var a=function(){f(".dashboard-actions .explanation").hide()};var d=function(j,h,i){if(j.find("input").length){i();return}j.append(Confluence.Templates.Share.Dialog.shareContentPopup());AJS.Confluence.SharePage.autocompleteUser();var k=function(m){AJS.Confluence.SharePage.current.hide();if(m){setTimeout(function(){j.empty()},300)}return false};f(document).keyup(function(m){if(m.keyCode==27){k(true);f(document).unbind("keyup",arguments.callee);return false}return true});j.find(".close-dialog").click(function(){k(true)});j.find("#note").elastic();j.find("form").submit(function(){var r=[];j.find(".recipients li").each(function(s,t){r.push(f(t).attr("data-userKey"))});if(r.length<=0){return false}f("button,input,textarea",this).attr("disabled","disabled");j.find(".progress-messages-icon").removeClass("error");j.find(".progress-messages").text("Sending");j.find(".progress-messages").attr("title","Sending");var o=Raphael.spinner(j.find(".progress-messages-icon")[0],7,"#666");j.find(".progress-messages-icon").css("position","absolute").css("left","0").css("margin-top","3px");j.find(".progress-messages").css("padding-left",j.find(".progress-messages-icon").innerWidth()+5);var r=[];j.find(".recipients li[data-userKey]").each(function(s,t){r.push(f(t).attr("data-userKey"))});var q=[];j.find(".recipients li[data-email]").each(function(s,t){q.push(f(t).attr("data-email"))});var m=[];j.find(".recipients li[data-group]").each(function(s,t){m.push(f(t).attr("data-group"))});var n=j.find("#note");var p={users:r,emails:q,groups:m,note:n.hasClass("placeholded")?"":n.val(),entityId:AJS.params.pageId};f.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:Confluence.getContextPath()+"/rest/share-page/latest/share",data:JSON.stringify(p),dataType:"text",success:function(){setTimeout(function(){o();j.find(".progress-messages-icon").addClass("done");j.find(".progress-messages").text("Sent");j.find(".progress-messages").attr("title","Sent");setTimeout(function(){j.find(".progress-messages").text("");j.find(".progress-messages-icon").removeClass("done");j.find("#note").val("");f("button,input,textarea",j).removeAttr("disabled");k(false)},1000)},500)},error:function(t,s){o();j.find(".progress-messages-icon").addClass("error");j.find(".progress-messages").text("Error sending");j.find(".progress-messages").attr("title","Error sending"+": "+s);f("button,input,textarea",j).removeAttr("disabled")}});return false});var l=j.find("#users");var g=j.find("input.submit");l.bind("selected.autocomplete-sharepage",function(n,m){var o=function(r,q,s){var u=j.find(".recipients"),t,p;t="li[data-"+r+'="'+s.content[r]+'"]';if(u.find(t).length>0){u.find(t).hide()}else{u.append(q(s.content))}p=u.find(t);p.find(".remove-recipient").click(function(){p.remove();if(u.find("li").length==0){g.attr("disabled","true")}AJS.Confluence.SharePage.current.refresh();l.focus();return false});p.fadeIn(200)};if(m.content.email){o("email",Confluence.Templates.Share.Dialog.recipientEmail,m)}else{if(m.content.type=="group"){o("group",Confluence.Templates.Share.Dialog.recipientGroup,m)}else{o("userKey",Confluence.Templates.Share.Dialog.recipientUser,m)}}AJS.Confluence.SharePage.current.refresh();g.removeAttr("disabled");l.val("");return false});l.bind("open.autocomplete-sharepage",function(n,m){if(f("a:not(.no-results)",AJS.dropDown.current.links).length>0){AJS.dropDown.current.moveDown()}});l.keypress(function(m){return m.keyCode!=13});f(document).bind("showLayer",function(o,n,m){if(n=="inlineDialog"&&m.popup==AJS.Confluence.SharePage.current){m.popup.find("#users").focus()}});f(h).parents().filter(function(){return this.scrollTop>0}).scrollTop(0);i()};var b=function(g){var h=f("#splitter-content");if(h.length!==0){g.container=h;g.offsetY=AJS.InlineDialog.opts.offsetY-h.offset().top}return g};AJS.Confluence.SharePage.initDialog=function(g,i,h){if(g.length){var j=f.extend(false,b(c),h);AJS.Confluence.SharePage.current=AJS.InlineDialog(g,i,d,j)}};AJS.toInit(function(g){AJS.Confluence.SharePage.initDialog(g("#shareContentLink"),"shareContentPopup")})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/angular-version-pre.js' */
(function(a,b){})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/jquery-1.6.4.js' */
/*!
 * jQuery JavaScript Library v1.6.4
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Mon Sep 12 18:54:48 2011 -0400
 */
(function(a7,K){if(AJS.params.buildNumber>=3273){return}var ap=a7.document,bq=a7.navigator,bh=a7.location;var b=(function(){var bB=function(bX,bY){return new bB.fn.init(bX,bY,bz)},bR=a7.jQuery,bD=a7.$,bz,bV=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bJ=/\S/,bF=/^\s+/,bA=/\s+$/,bE=/\d/,bw=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bK=/^[\],:{}\s]*$/,bT=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bM=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bG=/(?:^|:|,)(?:\s*\[)+/g,bu=/(webkit)[ \/]([\w.]+)/,bO=/(opera)(?:.*version)?[ \/]([\w.]+)/,bN=/(msie) ([\w.]+)/,bP=/(mozilla)(?:.*? rv:([\w.]+))?/,bx=/-([a-z]|[0-9])/ig,bW=/^-ms-/,bQ=function(bX,bY){return(bY+"").toUpperCase()},bU=bq.userAgent,bS,by,e,bI=Object.prototype.toString,bC=Object.prototype.hasOwnProperty,bv=Array.prototype.push,bH=Array.prototype.slice,bL=String.prototype.trim,br=Array.prototype.indexOf,bt={};bB.fn=bB.prototype={constructor:bB,init:function(bX,b1,b0){var bZ,b2,bY,b3;if(!bX){return this}if(bX.nodeType){this.context=this[0]=bX;this.length=1;return this}if(bX==="body"&&!b1&&ap.body){this.context=ap;this[0]=ap.body;this.selector=bX;this.length=1;return this}if(typeof bX==="string"){if(bX.charAt(0)==="<"&&bX.charAt(bX.length-1)===">"&&bX.length>=3){bZ=[null,bX,null]}else{bZ=bV.exec(bX)}if(bZ&&(bZ[1]||!b1)){if(bZ[1]){b1=b1 instanceof bB?b1[0]:b1;b3=(b1?b1.ownerDocument||b1:ap);bY=bw.exec(bX);if(bY){if(bB.isPlainObject(b1)){bX=[ap.createElement(bY[1])];bB.fn.attr.call(bX,b1,true)}else{bX=[b3.createElement(bY[1])]}}else{bY=bB.buildFragment([bZ[1]],[b3]);bX=(bY.cacheable?bB.clone(bY.fragment):bY.fragment).childNodes}return bB.merge(this,bX)}else{b2=ap.getElementById(bZ[2]);if(b2&&b2.parentNode){if(b2.id!==bZ[2]){return b0.find(bX)}this.length=1;this[0]=b2}this.context=ap;this.selector=bX;return this}}else{if(!b1||b1.jquery){return(b1||b0).find(bX)}else{return this.constructor(b1).find(bX)}}}else{if(bB.isFunction(bX)){return b0.ready(bX)}}if(bX.selector!==K){this.selector=bX.selector;this.context=bX.context}return bB.makeArray(bX,this)},selector:"",jquery:"1.6.4",length:0,size:function(){return this.length},toArray:function(){return bH.call(this,0)},get:function(bX){return bX==null?this.toArray():(bX<0?this[this.length+bX]:this[bX])},pushStack:function(bY,b0,bX){var bZ=this.constructor();if(bB.isArray(bY)){bv.apply(bZ,bY)}else{bB.merge(bZ,bY)}bZ.prevObject=this;bZ.context=this.context;if(b0==="find"){bZ.selector=this.selector+(this.selector?" ":"")+bX}else{if(b0){bZ.selector=this.selector+"."+b0+"("+bX+")"}}return bZ},each:function(bY,bX){return bB.each(this,bY,bX)},ready:function(bX){bB.bindReady();by.done(bX);return this},eq:function(bX){return bX===-1?this.slice(bX):this.slice(bX,+bX+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bH.apply(this,arguments),"slice",bH.call(arguments).join(","))},map:function(bX){return this.pushStack(bB.map(this,function(bZ,bY){return bX.call(bZ,bY,bZ)}))},end:function(){return this.prevObject||this.constructor(null)},push:bv,sort:[].sort,splice:[].splice};bB.fn.init.prototype=bB.fn;bB.extend=bB.fn.extend=function(){var b6,bZ,bX,bY,b3,b4,b2=arguments[0]||{},b1=1,b0=arguments.length,b5=false;if(typeof b2==="boolean"){b5=b2;b2=arguments[1]||{};b1=2}if(typeof b2!=="object"&&!bB.isFunction(b2)){b2={}}if(b0===b1){b2=this;--b1}for(;b1<b0;b1++){if((b6=arguments[b1])!=null){for(bZ in b6){bX=b2[bZ];bY=b6[bZ];if(b2===bY){continue}if(b5&&bY&&(bB.isPlainObject(bY)||(b3=bB.isArray(bY)))){if(b3){b3=false;b4=bX&&bB.isArray(bX)?bX:[]}else{b4=bX&&bB.isPlainObject(bX)?bX:{}}b2[bZ]=bB.extend(b5,b4,bY)}else{if(bY!==K){b2[bZ]=bY}}}}}return b2};bB.extend({noConflict:function(bX){if(a7.$===bB){a7.$=bD}if(bX&&a7.jQuery===bB){a7.jQuery=bR}return bB},isReady:false,readyWait:1,holdReady:function(bX){if(bX){bB.readyWait++}else{bB.ready(true)}},ready:function(bX){if((bX===true&&!--bB.readyWait)||(bX!==true&&!bB.isReady)){if(!ap.body){return setTimeout(bB.ready,1)}bB.isReady=true;if(bX!==true&&--bB.readyWait>0){return}by.resolveWith(ap,[bB]);if(bB.fn.trigger){bB(ap).trigger("ready").unbind("ready")}}},bindReady:function(){if(by){return}by=bB._Deferred();if(ap.readyState==="complete"){return setTimeout(bB.ready,1)}if(ap.addEventListener){ap.addEventListener("DOMContentLoaded",e,false);a7.addEventListener("load",bB.ready,false)}else{if(ap.attachEvent){ap.attachEvent("onreadystatechange",e);a7.attachEvent("onload",bB.ready);var bX=false;try{bX=a7.frameElement==null}catch(bY){}if(ap.documentElement.doScroll&&bX){bs()}}}},isFunction:function(bX){return bB.type(bX)==="function"},isArray:Array.isArray||function(bX){return bB.type(bX)==="array"},isWindow:function(bX){return bX&&typeof bX==="object"&&"setInterval" in bX},isNaN:function(bX){return bX==null||!bE.test(bX)||isNaN(bX)},type:function(bX){return bX==null?String(bX):bt[bI.call(bX)]||"object"},isPlainObject:function(bZ){if(!bZ||bB.type(bZ)!=="object"||bZ.nodeType||bB.isWindow(bZ)){return false}try{if(bZ.constructor&&!bC.call(bZ,"constructor")&&!bC.call(bZ.constructor.prototype,"isPrototypeOf")){return false}}catch(bY){return false}var bX;for(bX in bZ){}return bX===K||bC.call(bZ,bX)},isEmptyObject:function(bY){for(var bX in bY){return false}return true},error:function(bX){throw bX},parseJSON:function(bX){if(typeof bX!=="string"||!bX){return null}bX=bB.trim(bX);if(a7.JSON&&a7.JSON.parse){return a7.JSON.parse(bX)}if(bK.test(bX.replace(bT,"@").replace(bM,"]").replace(bG,""))){return(new Function("return "+bX))()}bB.error("Invalid JSON: "+bX)},parseXML:function(bZ){var bX,bY;try{if(a7.DOMParser){bY=new DOMParser();bX=bY.parseFromString(bZ,"text/xml")}else{bX=new ActiveXObject("Microsoft.XMLDOM");bX.async="false";bX.loadXML(bZ)}}catch(b0){bX=K}if(!bX||!bX.documentElement||bX.getElementsByTagName("parsererror").length){bB.error("Invalid XML: "+bZ)}return bX},noop:function(){},globalEval:function(bX){if(bX&&bJ.test(bX)){(a7.execScript||function(bY){a7["eval"].call(a7,bY)})(bX)}},camelCase:function(bX){return bX.replace(bW,"ms-").replace(bx,bQ)},nodeName:function(bY,bX){return bY.nodeName&&bY.nodeName.toUpperCase()===bX.toUpperCase()},each:function(b0,b3,bZ){var bY,b1=0,b2=b0.length,bX=b2===K||bB.isFunction(b0);if(bZ){if(bX){for(bY in b0){if(b3.apply(b0[bY],bZ)===false){break}}}else{for(;b1<b2;){if(b3.apply(b0[b1++],bZ)===false){break}}}}else{if(bX){for(bY in b0){if(b3.call(b0[bY],bY,b0[bY])===false){break}}}else{for(;b1<b2;){if(b3.call(b0[b1],b1,b0[b1++])===false){break}}}}return b0},trim:bL?function(bX){return bX==null?"":bL.call(bX)}:function(bX){return bX==null?"":bX.toString().replace(bF,"").replace(bA,"")},makeArray:function(b0,bY){var bX=bY||[];if(b0!=null){var bZ=bB.type(b0);if(b0.length==null||bZ==="string"||bZ==="function"||bZ==="regexp"||bB.isWindow(b0)){bv.call(bX,b0)}else{bB.merge(bX,b0)}}return bX},inArray:function(bZ,b0){if(!b0){return -1}if(br){return br.call(b0,bZ)}for(var bX=0,bY=b0.length;bX<bY;bX++){if(b0[bX]===bZ){return bX}}return -1},merge:function(b1,bZ){var b0=b1.length,bY=0;if(typeof bZ.length==="number"){for(var bX=bZ.length;bY<bX;bY++){b1[b0++]=bZ[bY]}}else{while(bZ[bY]!==K){b1[b0++]=bZ[bY++]}}b1.length=b0;return b1},grep:function(bY,b3,bX){var bZ=[],b2;bX=!!bX;for(var b0=0,b1=bY.length;b0<b1;b0++){b2=!!b3(bY[b0],b0);if(bX!==b2){bZ.push(bY[b0])}}return bZ},map:function(bX,b4,b5){var b2,b3,b1=[],bZ=0,bY=bX.length,b0=bX instanceof bB||bY!==K&&typeof bY==="number"&&((bY>0&&bX[0]&&bX[bY-1])||bY===0||bB.isArray(bX));if(b0){for(;bZ<bY;bZ++){b2=b4(bX[bZ],bZ,b5);if(b2!=null){b1[b1.length]=b2}}}else{for(b3 in bX){b2=b4(bX[b3],b3,b5);if(b2!=null){b1[b1.length]=b2}}}return b1.concat.apply([],b1)},guid:1,proxy:function(b1,b0){if(typeof b0==="string"){var bZ=b1[b0];b0=b1;b1=bZ}if(!bB.isFunction(b1)){return K}var bX=bH.call(arguments,2),bY=function(){return b1.apply(b0,bX.concat(bH.call(arguments)))};bY.guid=b1.guid=b1.guid||bY.guid||bB.guid++;return bY},access:function(bX,b5,b3,bZ,b2,b4){var bY=bX.length;if(typeof b5==="object"){for(var b0 in b5){bB.access(bX,b0,b5[b0],bZ,b2,b3)}return bX}if(b3!==K){bZ=!b4&&bZ&&bB.isFunction(b3);for(var b1=0;b1<bY;b1++){b2(bX[b1],b5,bZ?b3.call(bX[b1],b1,b2(bX[b1],b5)):b3,b4)}return bX}return bY?b2(bX[0],b5):K},now:function(){return(new Date()).getTime()},uaMatch:function(bY){bY=bY.toLowerCase();var bX=bu.exec(bY)||bO.exec(bY)||bN.exec(bY)||bY.indexOf("compatible")<0&&bP.exec(bY)||[];return{browser:bX[1]||"",version:bX[2]||"0"}},sub:function(){function bX(b0,b1){return new bX.fn.init(b0,b1)}bB.extend(true,bX,this);bX.superclass=this;bX.fn=bX.prototype=this();bX.fn.constructor=bX;bX.sub=this.sub;bX.fn.init=function bZ(b0,b1){if(b1&&b1 instanceof bB&&!(b1 instanceof bX)){b1=bX(b1)}return bB.fn.init.call(this,b0,b1,bY)};bX.fn.init.prototype=bX.fn;var bY=bX(ap);return bX},browser:{}});bB.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bY,bX){bt["[object "+bX+"]"]=bX.toLowerCase()});bS=bB.uaMatch(bU);if(bS.browser){bB.browser[bS.browser]=true;bB.browser.version=bS.version}if(bB.browser.webkit){bB.browser.safari=true}if(bJ.test("\xA0")){bF=/^[\s\xA0]+/;bA=/[\s\xA0]+$/}bz=bB(ap);if(ap.addEventListener){e=function(){ap.removeEventListener("DOMContentLoaded",e,false);bB.ready()}}else{if(ap.attachEvent){e=function(){if(ap.readyState==="complete"){ap.detachEvent("onreadystatechange",e);bB.ready()}}}}function bs(){if(bB.isReady){return}try{ap.documentElement.doScroll("left")}catch(bX){setTimeout(bs,1);return}bB.ready()}return bB})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aE=[].slice;b.extend({_Deferred:function(){var bt=[],bu,br,bs,e={done:function(){if(!bs){var bw=arguments,bx,bA,bz,by,bv;if(bu){bv=bu;bu=0}for(bx=0,bA=bw.length;bx<bA;bx++){bz=bw[bx];by=b.type(bz);if(by==="array"){e.done.apply(e,bz)}else{if(by==="function"){bt.push(bz)}}}if(bv){e.resolveWith(bv[0],bv[1])}}return this},resolveWith:function(bw,bv){if(!bs&&!bu&&!br){bv=bv||[];br=1;try{while(bt[0]){bt.shift().apply(bw,bv)}}finally{bu=[bw,bv];br=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return !!(br||bu)},cancel:function(){bs=1;bt=[];return this}};return e},Deferred:function(br){var e=b._Deferred(),bt=b._Deferred(),bs;b.extend(e,{then:function(bv,bu){e.done(bv).fail(bu);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bt.done,rejectWith:bt.resolveWith,reject:bt.resolve,isRejected:bt.isResolved,pipe:function(bv,bu){return b.Deferred(function(bw){b.each({done:[bv,"resolve"],fail:[bu,"reject"]},function(by,bB){var bx=bB[0],bA=bB[1],bz;if(b.isFunction(bx)){e[by](function(){bz=bx.apply(this,arguments);if(bz&&b.isFunction(bz.promise)){bz.promise().then(bw.resolve,bw.reject)}else{bw[bA+"With"](this===e?bw:this,[bz])}})}else{e[by](bw[bA])}})}).promise()},promise:function(bv){if(bv==null){if(bs){return bs}bs=bv={}}var bu=a.length;while(bu--){bv[a[bu]]=e[a[bu]]}return bv}});e.done(bt.cancel).fail(e.cancel);delete e.cancel;if(br){br.call(e,e)}return e},when:function(bw){var br=arguments,bs=0,bv=br.length,bu=bv,e=bv<=1&&bw&&b.isFunction(bw.promise)?bw:b.Deferred();function bt(bx){return function(by){br[bx]=arguments.length>1?aE.call(arguments,0):by;if(!(--bu)){e.resolveWith(e,aE.call(br,0))}}}if(bv>1){for(;bs<bv;bs++){if(br[bs]&&b.isFunction(br[bs].promise)){br[bs].promise().then(bt(bs),e.reject)}else{--bu}}if(!bu){e.resolveWith(e,br)}}else{if(e!==bw){e.resolveWith(e,bv?[bw]:[])}}return e.promise()}});b.support=(function(){var bB=ap.createElement("div"),bI=ap.documentElement,bu,bJ,bC,bs,bA,bv,by,br,bz,bD,bx,bH,bF,bt,bw,bE,bK;bB.setAttribute("className","t");bB.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bu=bB.getElementsByTagName("*");bJ=bB.getElementsByTagName("a")[0];if(!bu||!bu.length||!bJ){return{}}bC=ap.createElement("select");bs=bC.appendChild(ap.createElement("option"));bA=bB.getElementsByTagName("input")[0];by={leadingWhitespace:(bB.firstChild.nodeType===3),tbody:!bB.getElementsByTagName("tbody").length,htmlSerialize:!!bB.getElementsByTagName("link").length,style:/top/.test(bJ.getAttribute("style")),hrefNormalized:(bJ.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bJ.style.opacity),cssFloat:!!bJ.style.cssFloat,checkOn:(bA.value==="on"),optSelected:bs.selected,getSetAttribute:bB.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bA.checked=true;by.noCloneChecked=bA.cloneNode(true).checked;bC.disabled=true;by.optDisabled=!bs.disabled;try{delete bB.test}catch(bG){by.deleteExpando=false}if(!bB.addEventListener&&bB.attachEvent&&bB.fireEvent){bB.attachEvent("onclick",function(){by.noCloneEvent=false});bB.cloneNode(true).fireEvent("onclick")}bA=ap.createElement("input");bA.value="t";bA.setAttribute("type","radio");by.radioValue=bA.value==="t";bA.setAttribute("checked","checked");bB.appendChild(bA);br=ap.createDocumentFragment();br.appendChild(bB.firstChild);by.checkClone=br.cloneNode(true).cloneNode(true).lastChild.checked;bB.innerHTML="";bB.style.width=bB.style.paddingLeft="1px";bz=ap.getElementsByTagName("body")[0];bx=ap.createElement(bz?"div":"body");bH={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(bz){b.extend(bH,{position:"absolute",left:"-1000px",top:"-1000px"})}for(bE in bH){bx.style[bE]=bH[bE]}bx.appendChild(bB);bD=bz||bI;bD.insertBefore(bx,bD.firstChild);by.appendChecked=bA.checked;by.boxModel=bB.offsetWidth===2;if("zoom" in bB.style){bB.style.display="inline";bB.style.zoom=1;by.inlineBlockNeedsLayout=(bB.offsetWidth===2);bB.style.display="";bB.innerHTML="<div style='width:4px;'></div>";by.shrinkWrapBlocks=(bB.offsetWidth!==2)}bB.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bF=bB.getElementsByTagName("td");bK=(bF[0].offsetHeight===0);bF[0].style.display="";bF[1].style.display="none";by.reliableHiddenOffsets=bK&&(bF[0].offsetHeight===0);bB.innerHTML="";if(ap.defaultView&&ap.defaultView.getComputedStyle){bv=ap.createElement("div");bv.style.width="0";bv.style.marginRight="0";bB.appendChild(bv);by.reliableMarginRight=(parseInt((ap.defaultView.getComputedStyle(bv,null)||{marginRight:0}).marginRight,10)||0)===0}bx.innerHTML="";bD.removeChild(bx);if(bB.attachEvent){for(bE in {submit:1,change:1,focusin:1}){bw="on"+bE;bK=(bw in bB);if(!bK){bB.setAttribute(bw,"return;");bK=(typeof bB[bw]==="function")}by[bE+"Bubbles"]=bK}}bx=br=bC=bs=bz=bv=bB=bA=null;return by})();b.boxModel=b.support.boxModel;var aL=/^(?:\{.*\}|\[.*\])$/,av=/([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!S(e)},data:function(bt,br,bv,bu){if(!b.acceptData(bt)){return}var bw,by,bz=b.expando,bx=typeof br==="string",bA=bt.nodeType,e=bA?b.cache:bt,bs=bA?bt[b.expando]:bt[b.expando]&&b.expando;if((!bs||(bu&&bs&&(e[bs]&&!e[bs][bz])))&&bx&&bv===K){return}if(!bs){if(bA){bt[b.expando]=bs=++b.uuid}else{bs=b.expando}}if(!e[bs]){e[bs]={};if(!bA){e[bs].toJSON=b.noop}}if(typeof br==="object"||typeof br==="function"){if(bu){e[bs][bz]=b.extend(e[bs][bz],br)}else{e[bs]=b.extend(e[bs],br)}}bw=e[bs];if(bu){if(!bw[bz]){bw[bz]={}}bw=bw[bz]}if(bv!==K){bw[b.camelCase(br)]=bv}if(br==="events"&&!bw[br]){return bw[bz]&&bw[bz].events}if(bx){by=bw[br];if(by==null){by=bw[b.camelCase(br)]}}else{by=bw}return by},removeData:function(bu,bs,bv){if(!b.acceptData(bu)){return}var bw,bx=b.expando,by=bu.nodeType,br=by?b.cache:bu,bt=by?bu[b.expando]:b.expando;if(!br[bt]){return}if(bs){bw=bv?br[bt][bx]:br[bt];if(bw){if(!bw[bs]){bs=b.camelCase(bs)}delete bw[bs];if(!S(bw)){return}}}if(bv){delete br[bt][bx];if(!S(br[bt])){return}}var e=br[bt][bx];if(b.support.deleteExpando||!br.setInterval){delete br[bt]}else{br[bt]=null}if(e){br[bt]={};if(!by){br[bt].toJSON=b.noop}br[bt][bx]=e}else{if(by){if(b.support.deleteExpando){delete bu[b.expando]}else{if(bu.removeAttribute){bu.removeAttribute(b.expando)}else{bu[b.expando]=null}}}}},_data:function(br,e,bs){return b.data(br,e,bs,true)},acceptData:function(br){if(br.nodeName){var e=b.noData[br.nodeName.toLowerCase()];if(e){return !(e===true||br.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bu,bw){var bv=null;if(typeof bu==="undefined"){if(this.length){bv=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bs;for(var bt=0,br=e.length;bt<br;bt++){bs=e[bt].name;if(bs.indexOf("data-")===0){bs=b.camelCase(bs.substring(5));a1(this[0],bs,bv[bs])}}}}return bv}else{if(typeof bu==="object"){return this.each(function(){b.data(this,bu)})}}var bx=bu.split(".");bx[1]=bx[1]?"."+bx[1]:"";if(bw===K){bv=this.triggerHandler("getData"+bx[1]+"!",[bx[0]]);if(bv===K&&this.length){bv=b.data(this[0],bu);bv=a1(this[0],bu,bv)}return bv===K&&bx[1]?this.data(bx[0]):bv}else{return this.each(function(){var bz=b(this),by=[bx[0],bw];bz.triggerHandler("setData"+bx[1]+"!",by);b.data(this,bu,bw);bz.triggerHandler("changeData"+bx[1]+"!",by)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a1(bt,bs,bu){if(bu===K&&bt.nodeType===1){var br="data-"+bs.replace(av,"-$1").toLowerCase();bu=bt.getAttribute(br);if(typeof bu==="string"){try{bu=bu==="true"?true:bu==="false"?false:bu==="null"?null:!b.isNaN(bu)?parseFloat(bu):aL.test(bu)?b.parseJSON(bu):bu}catch(bv){}b.data(bt,bs,bu)}else{bu=K}}return bu}function S(br){for(var e in br){if(e!=="toJSON"){return false}}return true}function bd(bu,bt,bw){var bs=bt+"defer",br=bt+"queue",e=bt+"mark",bv=b.data(bu,bs,K,true);if(bv&&(bw==="queue"||!b.data(bu,br,K,true))&&(bw==="mark"||!b.data(bu,e,K,true))){setTimeout(function(){if(!b.data(bu,br,K,true)&&!b.data(bu,e,K,true)){b.removeData(bu,bs,true);bv.resolve()}},0)}}b.extend({_mark:function(br,e){if(br){e=(e||"fx")+"mark";b.data(br,e,(b.data(br,e,K,true)||0)+1,true)}},_unmark:function(bu,bt,br){if(bu!==true){br=bt;bt=bu;bu=false}if(bt){br=br||"fx";var e=br+"mark",bs=bu?0:((b.data(bt,e,K,true)||1)-1);if(bs){b.data(bt,e,bs,true)}else{b.removeData(bt,e,true);bd(bt,br,"mark")}}},queue:function(br,e,bt){if(br){e=(e||"fx")+"queue";var bs=b.data(br,e,K,true);if(bt){if(!bs||b.isArray(bt)){bs=b.data(br,e,b.makeArray(bt),true)}else{bs.push(bt)}}return bs||[]}},dequeue:function(bt,bs){bs=bs||"fx";var e=b.queue(bt,bs),br=e.shift(),bu;if(br==="inprogress"){br=e.shift()}if(br){if(bs==="fx"){e.unshift("inprogress")}br.call(bt,function(){b.dequeue(bt,bs)})}if(!e.length){b.removeData(bt,bs+"queue",true);bd(bt,bs,"queue")}}});b.fn.extend({queue:function(e,br){if(typeof e!=="string"){br=e;e="fx"}if(br===K){return b.queue(this[0],e)}return this.each(function(){var bs=b.queue(this,e,br);if(e==="fx"&&bs[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(br,e){br=b.fx?b.fx.speeds[br]||br:br;e=e||"fx";return this.queue(e,function(){var bs=this;setTimeout(function(){b.dequeue(bs,e)},br)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bz,bs){if(typeof bz!=="string"){bs=bz;bz=K}bz=bz||"fx";var e=b.Deferred(),br=this,bu=br.length,bx=1,bv=bz+"defer",bw=bz+"queue",by=bz+"mark",bt;function bA(){if(!(--bx)){e.resolveWith(br,[br])}}while(bu--){if((bt=b.data(br[bu],bv,K,true)||(b.data(br[bu],bw,K,true)||b.data(br[bu],by,K,true))&&b.data(br[bu],bv,b._Deferred(),true))){bx++;bt.done(bA)}}bA();return e.promise()}});var aJ=/[\n\t\r]/g,ab=/\s+/,aN=/\r/g,g=/^(?:button|input)$/i,D=/^(?:button|input|object|select|textarea)$/i,l=/^a(?:rea)?$/i,aj=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ba,aU;b.fn.extend({attr:function(e,br){return b.access(this,e,br,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,br){return b.access(this,e,br,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=K;delete this[e]}catch(br){}})},addClass:function(bu){var bw,bs,br,bt,bv,bx,e;if(b.isFunction(bu)){return this.each(function(by){b(this).addClass(bu.call(this,by,this.className))})}if(bu&&typeof bu==="string"){bw=bu.split(ab);for(bs=0,br=this.length;bs<br;bs++){bt=this[bs];if(bt.nodeType===1){if(!bt.className&&bw.length===1){bt.className=bu}else{bv=" "+bt.className+" ";for(bx=0,e=bw.length;bx<e;bx++){if(!~bv.indexOf(" "+bw[bx]+" ")){bv+=bw[bx]+" "}}bt.className=b.trim(bv)}}}}return this},removeClass:function(bv){var bw,bs,br,bu,bt,bx,e;if(b.isFunction(bv)){return this.each(function(by){b(this).removeClass(bv.call(this,by,this.className))})}if((bv&&typeof bv==="string")||bv===K){bw=(bv||"").split(ab);for(bs=0,br=this.length;bs<br;bs++){bu=this[bs];if(bu.nodeType===1&&bu.className){if(bv){bt=(" "+bu.className+" ").replace(aJ," ");for(bx=0,e=bw.length;bx<e;bx++){bt=bt.replace(" "+bw[bx]+" "," ")}bu.className=b.trim(bt)}else{bu.className=""}}}}return this},toggleClass:function(bt,br){var bs=typeof bt,e=typeof br==="boolean";if(b.isFunction(bt)){return this.each(function(bu){b(this).toggleClass(bt.call(this,bu,this.className,br),br)})}return this.each(function(){if(bs==="string"){var bw,bv=0,bu=b(this),bx=br,by=bt.split(ab);while((bw=by[bv++])){bx=e?bx:!bu.hasClass(bw);bu[bx?"addClass":"removeClass"](bw)}}else{if(bs==="undefined"||bs==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bt===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bt=" "+e+" ";for(var bs=0,br=this.length;bs<br;bs++){if(this[bs].nodeType===1&&(" "+this[bs].className+" ").replace(aJ," ").indexOf(bt)>-1){return true}}return false},val:function(bt){var e,br,bs=this[0];if(!arguments.length){if(bs){e=b.valHooks[bs.nodeName.toLowerCase()]||b.valHooks[bs.type];if(e&&"get" in e&&(br=e.get(bs,"value"))!==K){return br}br=bs.value;return typeof br==="string"?br.replace(aN,""):br==null?"":br}return K}var bu=b.isFunction(bt);return this.each(function(bw){var bv=b(this),bx;if(this.nodeType!==1){return}if(bu){bx=bt.call(this,bw,bv.val())}else{bx=bt}if(bx==null){bx=""}else{if(typeof bx==="number"){bx+=""}else{if(b.isArray(bx)){bx=b.map(bx,function(by){return by==null?"":by+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bx,"value")===K){this.value=bx}})}});b.extend({valHooks:{option:{get:function(e){var br=e.attributes.value;return !br||br.specified?e.value:e.text}},select:{get:function(e){var bw,bu=e.selectedIndex,bx=[],by=e.options,bt=e.type==="select-one";if(bu<0){return null}for(var br=bt?bu:0,bv=bt?bu+1:by.length;br<bv;br++){var bs=by[br];if(bs.selected&&(b.support.optDisabled?!bs.disabled:bs.getAttribute("disabled")===null)&&(!bs.parentNode.disabled||!b.nodeName(bs.parentNode,"optgroup"))){bw=b(bs).val();if(bt){return bw}bx.push(bw)}}if(bt&&!bx.length&&by.length){return b(by[bu]).val()}return bx},set:function(br,bs){var e=b.makeArray(bs);b(br).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){br.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bw,bt,bx,bv){var br=bw.nodeType;if(!bw||br===3||br===8||br===2){return K}if(bv&&bt in b.attrFn){return b(bw)[bt](bx)}if(!("getAttribute" in bw)){return b.prop(bw,bt,bx)}var bs,e,bu=br!==1||!b.isXMLDoc(bw);if(bu){bt=b.attrFix[bt]||bt;e=b.attrHooks[bt];if(!e){if(aj.test(bt)){e=aU}else{if(ba){e=ba}}}}if(bx!==K){if(bx===null){b.removeAttr(bw,bt);return K}else{if(e&&"set" in e&&bu&&(bs=e.set(bw,bx,bt))!==K){return bs}else{bw.setAttribute(bt,""+bx);return bx}}}else{if(e&&"get" in e&&bu&&(bs=e.get(bw,bt))!==null){return bs}else{bs=bw.getAttribute(bt);return bs===null?K:bs}}},removeAttr:function(br,e){var bs;if(br.nodeType===1){e=b.attrFix[e]||e;b.attr(br,e,"");br.removeAttribute(e);if(aj.test(e)&&(bs=b.propFix[e]||e) in br){br[bs]=false}}},attrHooks:{type:{set:function(e,br){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&br==="radio"&&b.nodeName(e,"input")){var bs=e.value;e.setAttribute("type",br);if(bs){e.value=bs}return br}}}},value:{get:function(br,e){if(ba&&b.nodeName(br,"button")){return ba.get(br,e)}return e in br?br.value:null},set:function(br,bs,e){if(ba&&b.nodeName(br,"button")){return ba.set(br,bs,e)}br.value=bs}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bv,bt,bw){var br=bv.nodeType;if(!bv||br===3||br===8||br===2){return K}var bs,e,bu=br!==1||!b.isXMLDoc(bv);if(bu){bt=b.propFix[bt]||bt;e=b.propHooks[bt]}if(bw!==K){if(e&&"set" in e&&(bs=e.set(bv,bw,bt))!==K){return bs}else{return(bv[bt]=bw)}}else{if(e&&"get" in e&&(bs=e.get(bv,bt))!==null){return bs}else{return bv[bt]}}},propHooks:{tabIndex:{get:function(br){var e=br.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):D.test(br.nodeName)||l.test(br.nodeName)&&br.href?0:K}}}});b.attrHooks.tabIndex=b.propHooks.tabIndex;aU={get:function(br,e){var bs;return b.prop(br,e)===true||(bs=br.getAttributeNode(e))&&bs.nodeValue!==false?e.toLowerCase():K},set:function(br,bt,e){var bs;if(bt===false){b.removeAttr(br,e)}else{bs=b.propFix[e]||e;if(bs in br){br[bs]=true}br.setAttribute(e,e.toLowerCase())}return e}};if(!b.support.getSetAttribute){ba=b.valHooks.button={get:function(bs,br){var e;e=bs.getAttributeNode(br);return e&&e.nodeValue!==""?e.nodeValue:K},set:function(bs,bt,br){var e=bs.getAttributeNode(br);if(!e){e=ap.createAttribute(br);bs.setAttributeNode(e)}return(e.nodeValue=bt+"")}};b.each(["width","height"],function(br,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bs,bt){if(bt===""){bs.setAttribute(e,"auto");return bt}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(br,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bt){var bs=bt.getAttribute(e,2);return bs===null?K:bs}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||K},set:function(e,br){return(e.style.cssText=""+br)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(br){var e=br.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,br){if(b.isArray(br)){return(e.checked=b.inArray(b(e).val(),br)>=0)}}})});var aW=/\.(.*)$/,a9=/^(?:textarea|input|select)$/i,N=/\./g,be=/ /g,aB=/[^\w\s.|`]/g,G=function(e){return e.replace(aB,"\\$&")};b.event={add:function(bt,bx,bC,bv){if(bt.nodeType===3||bt.nodeType===8){return}if(bC===false){bC=bg}else{if(!bC){return}}var br,bB;if(bC.handler){br=bC;bC=br.handler}if(!bC.guid){bC.guid=b.guid++}var by=b._data(bt);if(!by){return}var bD=by.events,bw=by.handle;if(!bD){by.events=bD={}}if(!bw){by.handle=bw=function(bE){return typeof b!=="undefined"&&(!bE||b.event.triggered!==bE.type)?b.event.handle.apply(bw.elem,arguments):K}}bw.elem=bt;bx=bx.split(" ");var bA,bu=0,e;while((bA=bx[bu++])){bB=br?b.extend({},br):{handler:bC,data:bv};if(bA.indexOf(".")>-1){e=bA.split(".");bA=e.shift();bB.namespace=e.slice(0).sort().join(".")}else{e=[];bB.namespace=""}bB.type=bA;if(!bB.guid){bB.guid=bC.guid}var bs=bD[bA],bz=b.event.special[bA]||{};if(!bs){bs=bD[bA]=[];if(!bz.setup||bz.setup.call(bt,bv,e,bw)===false){if(bt.addEventListener){bt.addEventListener(bA,bw,false)}else{if(bt.attachEvent){bt.attachEvent("on"+bA,bw)}}}}if(bz.add){bz.add.call(bt,bB);if(!bB.handler.guid){bB.handler.guid=bC.guid}}bs.push(bB);b.event.global[bA]=true}bt=null},global:{},remove:function(bF,bA,bs,bw){if(bF.nodeType===3||bF.nodeType===8){return}if(bs===false){bs=bg}var bI,bv,bx,bC,bD=0,bt,by,bB,bu,bz,e,bH,bE=b.hasData(bF)&&b._data(bF),br=bE&&bE.events;if(!bE||!br){return}if(bA&&bA.type){bs=bA.handler;bA=bA.type}if(!bA||typeof bA==="string"&&bA.charAt(0)==="."){bA=bA||"";for(bv in br){b.event.remove(bF,bv+bA)}return}bA=bA.split(" ");while((bv=bA[bD++])){bH=bv;e=null;bt=bv.indexOf(".")<0;by=[];if(!bt){by=bv.split(".");bv=by.shift();bB=new RegExp("(^|\\.)"+b.map(by.slice(0).sort(),G).join("\\.(?:.*\\.)?")+"(\\.|$)")}bz=br[bv];if(!bz){continue}if(!bs){for(bC=0;bC<bz.length;bC++){e=bz[bC];if(bt||bB.test(e.namespace)){b.event.remove(bF,bH,e.handler,bC);bz.splice(bC--,1)}}continue}bu=b.event.special[bv]||{};for(bC=bw||0;bC<bz.length;bC++){e=bz[bC];if(bs.guid===e.guid){if(bt||bB.test(e.namespace)){if(bw==null){bz.splice(bC--,1)}if(bu.remove){bu.remove.call(bF,e)}}if(bw!=null){break}}}if(bz.length===0||bw!=null&&bz.length===1){if(!bu.teardown||bu.teardown.call(bF,by)===false){b.removeEvent(bF,bv,bE.handle)}bI=null;delete br[bv]}}if(b.isEmptyObject(br)){var bG=bE.handle;if(bG){bG.elem=null}delete bE.events;delete bE.handle;if(b.isEmptyObject(bE)){b.removeData(bF,K,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bx,bv,bC){var bA=e.type||e,bs=[],br;if(bA.indexOf("!")>=0){bA=bA.slice(0,-1);br=true}if(bA.indexOf(".")>=0){bs=bA.split(".");bA=bs.shift();bs.sort()}if((!bv||b.event.customEvent[bA])&&!b.event.global[bA]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bA,e):new b.Event(bA);e.type=bA;e.exclusive=br;e.namespace=bs.join(".");e.namespace_re=new RegExp("(^|\\.)"+bs.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bC||!bv){e.preventDefault();e.stopPropagation()}if(!bv){b.each(b.cache,function(){var bE=b.expando,bD=this[bE];if(bD&&bD.events&&bD.events[bA]){b.event.trigger(e,bx,bD.handle.elem)}});return}if(bv.nodeType===3||bv.nodeType===8){return}e.result=K;e.target=bv;bx=bx!=null?b.makeArray(bx):[];bx.unshift(e);var bB=bv,bt=bA.indexOf(":")<0?"on"+bA:"";do{var by=b._data(bB,"handle");e.currentTarget=bB;if(by){by.apply(bB,bx)}if(bt&&b.acceptData(bB)&&bB[bt]&&bB[bt].apply(bB,bx)===false){e.result=false;e.preventDefault()}bB=bB.parentNode||bB.ownerDocument||bB===e.target.ownerDocument&&a7}while(bB&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var bu,bz=b.event.special[bA]||{};if((!bz._default||bz._default.call(bv.ownerDocument,e)===false)&&!(bA==="click"&&b.nodeName(bv,"a"))&&b.acceptData(bv)){try{if(bt&&bv[bA]){bu=bv[bt];if(bu){bv[bt]=null}b.event.triggered=bA;bv[bA]()}}catch(bw){}if(bu){bv[bt]=bu}b.event.triggered=K}}return e.result},handle:function(bx){bx=b.event.fix(bx||a7.event);var br=((b._data(this,"events")||{})[bx.type]||[]).slice(0),bw=!bx.exclusive&&!bx.namespace,bu=Array.prototype.slice.call(arguments,0);bu[0]=bx;bx.currentTarget=this;for(var bt=0,e=br.length;bt<e;bt++){var bv=br[bt];if(bw||bx.namespace_re.test(bv.namespace)){bx.handler=bv.handler;bx.data=bv.data;bx.handleObj=bv;var bs=bv.handler.apply(this,bu);if(bs!==K){bx.result=bs;if(bs===false){bx.preventDefault();bx.stopPropagation()}}if(bx.isImmediatePropagationStopped()){break}}}return bx.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bu){if(bu[b.expando]){return bu}var br=bu;bu=b.Event(br);for(var bs=this.props.length,bw;bs;){bw=this.props[--bs];bu[bw]=br[bw]}if(!bu.target){bu.target=bu.srcElement||ap}if(bu.target.nodeType===3){bu.target=bu.target.parentNode}if(!bu.relatedTarget&&bu.fromElement){bu.relatedTarget=bu.fromElement===bu.target?bu.toElement:bu.fromElement}if(bu.pageX==null&&bu.clientX!=null){var bt=bu.target.ownerDocument||ap,bv=bt.documentElement,e=bt.body;bu.pageX=bu.clientX+(bv&&bv.scrollLeft||e&&e.scrollLeft||0)-(bv&&bv.clientLeft||e&&e.clientLeft||0);bu.pageY=bu.clientY+(bv&&bv.scrollTop||e&&e.scrollTop||0)-(bv&&bv.clientTop||e&&e.clientTop||0)}if(bu.which==null&&(bu.charCode!=null||bu.keyCode!=null)){bu.which=bu.charCode!=null?bu.charCode:bu.keyCode}if(!bu.metaKey&&bu.ctrlKey){bu.metaKey=bu.ctrlKey}if(!bu.which&&bu.button!==K){bu.which=(bu.button&1?1:(bu.button&2?3:(bu.button&4?2:0)))}return bu},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,p(e.origType,e.selector),b.extend({},e,{handler:ag,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,p(e.origType,e.selector),e)}},beforeunload:{setup:function(bs,br,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(br,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=ap.removeEventListener?function(br,e,bs){if(br.removeEventListener){br.removeEventListener(e,bs,false)}}:function(br,e,bs){if(br.detachEvent){br.detachEvent("on"+e,bs)}};b.Event=function(br,e){if(!this.preventDefault){return new b.Event(br,e)}if(br&&br.type){this.originalEvent=br;this.type=br.type;this.isDefaultPrevented=(br.defaultPrevented||br.returnValue===false||br.getPreventDefault&&br.getPreventDefault())?i:bg}else{this.type=br}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bg(){return false}function i(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=i;var br=this.originalEvent;if(!br){return}if(br.preventDefault){br.preventDefault()}else{br.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=i;var br=this.originalEvent;if(!br){return}if(br.stopPropagation){br.stopPropagation()}br.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i;this.stopPropagation()},isDefaultPrevented:bg,isPropagationStopped:bg,isImmediatePropagationStopped:bg};var aa=function(bs){var bt=bs.relatedTarget,e=false,br=bs.type;bs.type=bs.data;if(bt!==this){if(bt){e=b.contains(this,bt)}if(!e){b.event.handle.apply(this,arguments);bs.type=br}}},aR=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(br,e){b.event.special[br]={setup:function(bs){b.event.add(this,e,bs&&bs.selector?aR:aa,br)},teardown:function(bs){b.event.remove(this,e,bs&&bs.selector?aR:aa)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(br,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bu){var bt=bu.target,bs=b.nodeName(bt,"input")||b.nodeName(bt,"button")?bt.type:"";if((bs==="submit"||bs==="image")&&b(bt).closest("form").length){aT("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bu){var bt=bu.target,bs=b.nodeName(bt,"input")||b.nodeName(bt,"button")?bt.type:"";if((bs==="text"||bs==="password")&&b(bt).closest("form").length&&bu.keyCode===13){aT("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bj,k=function(br){var e=b.nodeName(br,"input")?br.type:"",bs=br.value;if(e==="radio"||e==="checkbox"){bs=br.checked}else{if(e==="select-multiple"){bs=br.selectedIndex>-1?b.map(br.options,function(bt){return bt.selected}).join("-"):""}else{if(b.nodeName(br,"select")){bs=br.selectedIndex}}}return bs},Y=function Y(bt){var br=bt.target,bs,bu;if(!a9.test(br.nodeName)||br.readOnly){return}bs=b._data(br,"_change_data");bu=k(br);if(bt.type!=="focusout"||br.type!=="radio"){b._data(br,"_change_data",bu)}if(bs===K||bu===bs){return}if(bs!=null||bu){bt.type="change";bt.liveFired=K;b.event.trigger(bt,arguments[1],br)}};b.event.special.change={filters:{focusout:Y,beforedeactivate:Y,click:function(bt){var bs=bt.target,br=b.nodeName(bs,"input")?bs.type:"";if(br==="radio"||br==="checkbox"||b.nodeName(bs,"select")){Y.call(this,bt)}},keydown:function(bt){var bs=bt.target,br=b.nodeName(bs,"input")?bs.type:"";if((bt.keyCode===13&&!b.nodeName(bs,"textarea"))||(bt.keyCode===32&&(br==="checkbox"||br==="radio"))||br==="select-multiple"){Y.call(this,bt)}},beforeactivate:function(bs){var br=bs.target;b._data(br,"_change_data",k(br))}},setup:function(bs,br){if(this.type==="file"){return false}for(var e in bj){b.event.add(this,e+".specialChange",bj[e])}return a9.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return a9.test(this.nodeName)}};bj=b.event.special.change.filters;bj.focus=bj.beforeactivate}function aT(br,bt,e){var bs=b.extend({},e[0]);bs.type=br;bs.originalEvent={};bs.liveFired=K;b.event.handle.call(bt,bs);if(bs.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bt,e){var br=0;b.event.special[e]={setup:function(){if(br++===0){ap.addEventListener(bt,bs,true)}},teardown:function(){if(--br===0){ap.removeEventListener(bt,bs,true)}}};function bs(bu){var bv=b.event.fix(bu);bv.type=e;bv.originalEvent={};b.event.trigger(bv,null,bv.target);if(bv.isDefaultPrevented()){bu.preventDefault()}}})}b.each(["bind","one"],function(br,e){b.fn[e]=function(bx,by,bw){var bv;if(typeof bx==="object"){for(var bu in bx){this[e](bu,by,bx[bu],bw)}return this}if(arguments.length===2||by===false){bw=by;by=K}if(e==="one"){bv=function(bz){b(this).unbind(bz,bv);return bw.apply(this,arguments)};bv.guid=bw.guid||b.guid++}else{bv=bw}if(bx==="unload"&&e!=="one"){this.one(bx,by,bw)}else{for(var bt=0,bs=this.length;bt<bs;bt++){b.event.add(this[bt],bx,bv,by)}}return this}});b.fn.extend({unbind:function(bu,bt){if(typeof bu==="object"&&!bu.preventDefault){for(var bs in bu){this.unbind(bs,bu[bs])}}else{for(var br=0,e=this.length;br<e;br++){b.event.remove(this[br],bu,bt)}}return this},delegate:function(e,br,bt,bs){return this.live(br,bt,bs,e)},undelegate:function(e,br,bs){if(arguments.length===0){return this.unbind("live")}else{return this.die(br,null,bs,e)}},trigger:function(e,br){return this.each(function(){b.event.trigger(e,br,this)})},triggerHandler:function(e,br){if(this[0]){return b.event.trigger(e,br,this[0],true)}},toggle:function(bt){var br=arguments,e=bt.guid||b.guid++,bs=0,bu=function(bv){var bw=(b.data(this,"lastToggle"+bt.guid)||0)%bs;b.data(this,"lastToggle"+bt.guid,bw+1);bv.preventDefault();return br[bw].apply(this,arguments)||false};bu.guid=e;while(bs<br.length){br[bs++].guid=e}return this.click(bu)},hover:function(e,br){return this.mouseenter(e).mouseleave(br||e)}});var aP={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(br,e){b.fn[e]=function(bB,by,bD,bu){var bC,bz=0,bA,bt,bF,bw=bu||this.selector,bs=bu?this:b(this.context);if(typeof bB==="object"&&!bB.preventDefault){for(var bE in bB){bs[e](bE,by,bB[bE],bw)}return this}if(e==="die"&&!bB&&bu&&bu.charAt(0)==="."){bs.unbind(bu);return this}if(by===false||b.isFunction(by)){bD=by||bg;by=K}bB=(bB||"").split(" ");while((bC=bB[bz++])!=null){bA=aW.exec(bC);bt="";if(bA){bt=bA[0];bC=bC.replace(aW,"")}if(bC==="hover"){bB.push("mouseenter"+bt,"mouseleave"+bt);continue}bF=bC;if(aP[bC]){bB.push(aP[bC]+bt);bC=bC+bt}else{bC=(aP[bC]||bC)+bt}if(e==="live"){for(var bx=0,bv=bs.length;bx<bv;bx++){b.event.add(bs[bx],"live."+p(bC,bw),{data:by,selector:bw,handler:bD,origType:bC,origHandler:bD,preType:bF})}}else{bs.unbind("live."+p(bC,bw),bD)}}return this}});function ag(bB){var by,bt,bH,bv,e,bD,bA,bC,bz,bG,bx,bw,bF,bE=[],bu=[],br=b._data(this,"events");if(bB.liveFired===this||!br||!br.live||bB.target.disabled||bB.button&&bB.type==="click"){return}if(bB.namespace){bw=new RegExp("(^|\\.)"+bB.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bB.liveFired=this;var bs=br.live.slice(0);for(bA=0;bA<bs.length;bA++){e=bs[bA];if(e.origType.replace(aW,"")===bB.type){bu.push(e.selector)}else{bs.splice(bA--,1)}}bv=b(bB.target).closest(bu,bB.currentTarget);for(bC=0,bz=bv.length;bC<bz;bC++){bx=bv[bC];for(bA=0;bA<bs.length;bA++){e=bs[bA];if(bx.selector===e.selector&&(!bw||bw.test(e.namespace))&&!bx.elem.disabled){bD=bx.elem;bH=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bB.type=e.preType;bH=b(bB.relatedTarget).closest(e.selector)[0];if(bH&&b.contains(bD,bH)){bH=bD}}if(!bH||bH!==bD){bE.push({elem:bD,handleObj:e,level:bx.level})}}}}for(bC=0,bz=bE.length;bC<bz;bC++){bv=bE[bC];if(bt&&bv.level>bt){break}bB.currentTarget=bv.elem;bB.data=bv.handleObj.data;bB.handleObj=bv.handleObj;bF=bv.handleObj.origHandler.apply(bv.elem,arguments);if(bF===false||bB.isPropagationStopped()){bt=bv.level;if(bF===false){by=false}if(bB.isImmediatePropagationStopped()){break}}}return by}function p(br,e){return(br&&br!=="*"?br+".":"")+e.replace(N,"`").replace(be,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(br,e){b.fn[e]=function(bt,bs){if(bs==null){bs=bt;bt=null}return arguments.length>0?this.bind(e,bt,bs):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bB=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bC=0,bF=Object.prototype.toString,bw=false,bv=true,bD=/\\/g,bJ=/\W/;[0,0].sort(function(){bv=false;return 0});var bt=function(bO,e,bR,bS){bR=bR||[];e=e||ap;var bU=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bO||typeof bO!=="string"){return bR}var bL,bW,bZ,bK,bV,bY,bX,bQ,bN=true,bM=bt.isXML(e),bP=[],bT=bO;do{bB.exec("");bL=bB.exec(bT);if(bL){bT=bL[3];bP.push(bL[1]);if(bL[2]){bK=bL[3];break}}}while(bL);if(bP.length>1&&bx.exec(bO)){if(bP.length===2&&by.relative[bP[0]]){bW=bG(bP[0]+bP[1],e)}else{bW=by.relative[bP[0]]?[e]:bt(bP.shift(),e);while(bP.length){bO=bP.shift();if(by.relative[bO]){bO+=bP.shift()}bW=bG(bO,bW)}}}else{if(!bS&&bP.length>1&&e.nodeType===9&&!bM&&by.match.ID.test(bP[0])&&!by.match.ID.test(bP[bP.length-1])){bV=bt.find(bP.shift(),e,bM);e=bV.expr?bt.filter(bV.expr,bV.set)[0]:bV.set[0]}if(e){bV=bS?{expr:bP.pop(),set:bz(bS)}:bt.find(bP.pop(),bP.length===1&&(bP[0]==="~"||bP[0]==="+")&&e.parentNode?e.parentNode:e,bM);bW=bV.expr?bt.filter(bV.expr,bV.set):bV.set;if(bP.length>0){bZ=bz(bW)}else{bN=false}while(bP.length){bY=bP.pop();bX=bY;if(!by.relative[bY]){bY=""}else{bX=bP.pop()}if(bX==null){bX=e}by.relative[bY](bZ,bX,bM)}}else{bZ=bP=[]}}if(!bZ){bZ=bW}if(!bZ){bt.error(bY||bO)}if(bF.call(bZ)==="[object Array]"){if(!bN){bR.push.apply(bR,bZ)}else{if(e&&e.nodeType===1){for(bQ=0;bZ[bQ]!=null;bQ++){if(bZ[bQ]&&(bZ[bQ]===true||bZ[bQ].nodeType===1&&bt.contains(e,bZ[bQ]))){bR.push(bW[bQ])}}}else{for(bQ=0;bZ[bQ]!=null;bQ++){if(bZ[bQ]&&bZ[bQ].nodeType===1){bR.push(bW[bQ])}}}}}else{bz(bZ,bR)}if(bK){bt(bK,bU,bR,bS);bt.uniqueSort(bR)}return bR};bt.uniqueSort=function(bK){if(bE){bw=bv;bK.sort(bE);if(bw){for(var e=1;e<bK.length;e++){if(bK[e]===bK[e-1]){bK.splice(e--,1)}}}}return bK};bt.matches=function(e,bK){return bt(e,null,null,bK)};bt.matchesSelector=function(e,bK){return bt(bK,null,null,[e]).length>0};bt.find=function(bQ,e,bR){var bP;if(!bQ){return[]}for(var bM=0,bL=by.order.length;bM<bL;bM++){var bN,bO=by.order[bM];if((bN=by.leftMatch[bO].exec(bQ))){var bK=bN[1];bN.splice(1,1);if(bK.substr(bK.length-1)!=="\\"){bN[1]=(bN[1]||"").replace(bD,"");bP=by.find[bO](bN,e,bR);if(bP!=null){bQ=bQ.replace(by.match[bO],"");break}}}}if(!bP){bP=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bP,expr:bQ}};bt.filter=function(bU,bT,bX,bN){var bP,e,bL=bU,bZ=[],bR=bT,bQ=bT&&bT[0]&&bt.isXML(bT[0]);while(bU&&bT.length){for(var bS in by.filter){if((bP=by.leftMatch[bS].exec(bU))!=null&&bP[2]){var bY,bW,bK=by.filter[bS],bM=bP[1];e=false;bP.splice(1,1);if(bM.substr(bM.length-1)==="\\"){continue}if(bR===bZ){bZ=[]}if(by.preFilter[bS]){bP=by.preFilter[bS](bP,bR,bX,bZ,bN,bQ);if(!bP){e=bY=true}else{if(bP===true){continue}}}if(bP){for(var bO=0;(bW=bR[bO])!=null;bO++){if(bW){bY=bK(bW,bP,bO,bR);var bV=bN^!!bY;if(bX&&bY!=null){if(bV){e=true}else{bR[bO]=false}}else{if(bV){bZ.push(bW);e=true}}}}}if(bY!==K){if(!bX){bR=bZ}bU=bU.replace(by.match[bS],"");if(!e){return[]}break}}}if(bU===bL){if(e==null){bt.error(bU)}else{break}}bL=bU}return bR};bt.error=function(e){throw"Syntax error, unrecognized expression: "+e};var by=bt.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bP,bK){var bM=typeof bK==="string",bO=bM&&!bJ.test(bK),bQ=bM&&!bO;if(bO){bK=bK.toLowerCase()}for(var bL=0,e=bP.length,bN;bL<e;bL++){if((bN=bP[bL])){while((bN=bN.previousSibling)&&bN.nodeType!==1){}bP[bL]=bQ||bN&&bN.nodeName.toLowerCase()===bK?bN||false:bN===bK}}if(bQ){bt.filter(bK,bP,true)}},">":function(bP,bK){var bO,bN=typeof bK==="string",bL=0,e=bP.length;if(bN&&!bJ.test(bK)){bK=bK.toLowerCase();for(;bL<e;bL++){bO=bP[bL];if(bO){var bM=bO.parentNode;bP[bL]=bM.nodeName.toLowerCase()===bK?bM:false}}}else{for(;bL<e;bL++){bO=bP[bL];if(bO){bP[bL]=bN?bO.parentNode:bO.parentNode===bK}}if(bN){bt.filter(bK,bP,true)}}},"":function(bM,bK,bO){var bN,bL=bC++,e=bH;if(typeof bK==="string"&&!bJ.test(bK)){bK=bK.toLowerCase();bN=bK;e=br}e("parentNode",bK,bL,bM,bN,bO)},"~":function(bM,bK,bO){var bN,bL=bC++,e=bH;if(typeof bK==="string"&&!bJ.test(bK)){bK=bK.toLowerCase();bN=bK;e=br}e("previousSibling",bK,bL,bM,bN,bO)}},find:{ID:function(bK,bL,bM){if(typeof bL.getElementById!=="undefined"&&!bM){var e=bL.getElementById(bK[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bL,bO){if(typeof bO.getElementsByName!=="undefined"){var bK=[],bN=bO.getElementsByName(bL[1]);for(var bM=0,e=bN.length;bM<e;bM++){if(bN[bM].getAttribute("name")===bL[1]){bK.push(bN[bM])}}return bK.length===0?null:bK}},TAG:function(e,bK){if(typeof bK.getElementsByTagName!=="undefined"){return bK.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bM,bK,bL,e,bP,bQ){bM=" "+bM[1].replace(bD,"")+" ";if(bQ){return bM}for(var bN=0,bO;(bO=bK[bN])!=null;bN++){if(bO){if(bP^(bO.className&&(" "+bO.className+" ").replace(/[\t\n\r]/g," ").indexOf(bM)>=0)){if(!bL){e.push(bO)}}else{if(bL){bK[bN]=false}}}}return false},ID:function(e){return e[1].replace(bD,"")},TAG:function(bK,e){return bK[1].replace(bD,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bt.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bK=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bK[1]+(bK[2]||1))-0;e[3]=bK[3]-0}else{if(e[2]){bt.error(e[0])}}e[0]=bC++;return e},ATTR:function(bN,bK,bL,e,bO,bP){var bM=bN[1]=bN[1].replace(bD,"");if(!bP&&by.attrMap[bM]){bN[1]=by.attrMap[bM]}bN[4]=(bN[4]||bN[5]||"").replace(bD,"");if(bN[2]==="~="){bN[4]=" "+bN[4]+" "}return bN},PSEUDO:function(bN,bK,bL,e,bO){if(bN[1]==="not"){if((bB.exec(bN[3])||"").length>1||/^\w/.test(bN[3])){bN[3]=bt(bN[3],null,null,bK)}else{var bM=bt.filter(bN[3],bK,bL,true^bO);if(!bL){e.push.apply(e,bM)}return false}}else{if(by.match.POS.test(bN[0])||by.match.CHILD.test(bN[0])){return true}}return bN},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bL,bK,e){return !!bt(e[3],bL).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bL){var e=bL.getAttribute("type"),bK=bL.type;return bL.nodeName.toLowerCase()==="input"&&"text"===bK&&(e===bK||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bK){var e=bK.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bK.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bK){var e=bK.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bK.type},button:function(bK){var e=bK.nodeName.toLowerCase();return e==="input"&&"button"===bK.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bK,e){return e===0},last:function(bL,bK,e,bM){return bK===bM.length-1},even:function(bK,e){return e%2===0},odd:function(bK,e){return e%2===1},lt:function(bL,bK,e){return bK<e[3]-0},gt:function(bL,bK,e){return bK>e[3]-0},nth:function(bL,bK,e){return e[3]-0===bK},eq:function(bL,bK,e){return e[3]-0===bK}},filter:{PSEUDO:function(bL,bQ,bP,bR){var e=bQ[1],bK=by.filters[e];if(bK){return bK(bL,bP,bQ,bR)}else{if(e==="contains"){return(bL.textContent||bL.innerText||bt.getText([bL])||"").indexOf(bQ[3])>=0}else{if(e==="not"){var bM=bQ[3];for(var bO=0,bN=bM.length;bO<bN;bO++){if(bM[bO]===bL){return false}}return true}else{bt.error(e)}}}},CHILD:function(e,bM){var bP=bM[1],bK=e;switch(bP){case"only":case"first":while((bK=bK.previousSibling)){if(bK.nodeType===1){return false}}if(bP==="first"){return true}bK=e;case"last":while((bK=bK.nextSibling)){if(bK.nodeType===1){return false}}return true;case"nth":var bL=bM[2],bS=bM[3];if(bL===1&&bS===0){return true}var bO=bM[0],bR=e.parentNode;if(bR&&(bR.sizcache!==bO||!e.nodeIndex)){var bN=0;for(bK=bR.firstChild;bK;bK=bK.nextSibling){if(bK.nodeType===1){bK.nodeIndex=++bN}}bR.sizcache=bO}var bQ=e.nodeIndex-bS;if(bL===0){return bQ===0}else{return(bQ%bL===0&&bQ/bL>=0)}}},ID:function(bK,e){return bK.nodeType===1&&bK.getAttribute("id")===e},TAG:function(bK,e){return(e==="*"&&bK.nodeType===1)||bK.nodeName.toLowerCase()===e},CLASS:function(bK,e){return(" "+(bK.className||bK.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bO,bM){var bL=bM[1],e=by.attrHandle[bL]?by.attrHandle[bL](bO):bO[bL]!=null?bO[bL]:bO.getAttribute(bL),bP=e+"",bN=bM[2],bK=bM[4];return e==null?bN==="!=":bN==="="?bP===bK:bN==="*="?bP.indexOf(bK)>=0:bN==="~="?(" "+bP+" ").indexOf(bK)>=0:!bK?bP&&e!==false:bN==="!="?bP!==bK:bN==="^="?bP.indexOf(bK)===0:bN==="$="?bP.substr(bP.length-bK.length)===bK:bN==="|="?bP===bK||bP.substr(0,bK.length+1)===bK+"-":false},POS:function(bN,bK,bL,bO){var e=bK[2],bM=by.setFilters[e];if(bM){return bM(bN,bL,bK,bO)}}}};var bx=by.match.POS,bs=function(bK,e){return"\\"+(e-0+1)};for(var bu in by.match){by.match[bu]=new RegExp(by.match[bu].source+(/(?![^\[]*\])(?![^\(]*\))/.source));by.leftMatch[bu]=new RegExp(/(^(?:.|\r|\n)*?)/.source+by.match[bu].source.replace(/\\(\d+)/g,bs))}var bz=function(bK,e){bK=Array.prototype.slice.call(bK,0);if(e){e.push.apply(e,bK);return e}return bK};try{Array.prototype.slice.call(ap.documentElement.childNodes,0)[0].nodeType}catch(bI){bz=function(bN,bM){var bL=0,bK=bM||[];if(bF.call(bN)==="[object Array]"){Array.prototype.push.apply(bK,bN)}else{if(typeof bN.length==="number"){for(var e=bN.length;bL<e;bL++){bK.push(bN[bL])}}else{for(;bN[bL];bL++){bK.push(bN[bL])}}}return bK}}var bE,bA;if(ap.documentElement.compareDocumentPosition){bE=function(bK,e){if(bK===e){bw=true;return 0}if(!bK.compareDocumentPosition||!e.compareDocumentPosition){return bK.compareDocumentPosition?-1:1}return bK.compareDocumentPosition(e)&4?-1:1}}else{bE=function(bR,bQ){if(bR===bQ){bw=true;return 0}else{if(bR.sourceIndex&&bQ.sourceIndex){return bR.sourceIndex-bQ.sourceIndex}}var bO,bK,bL=[],e=[],bN=bR.parentNode,bP=bQ.parentNode,bS=bN;if(bN===bP){return bA(bR,bQ)}else{if(!bN){return -1}else{if(!bP){return 1}}}while(bS){bL.unshift(bS);bS=bS.parentNode}bS=bP;while(bS){e.unshift(bS);bS=bS.parentNode}bO=bL.length;bK=e.length;for(var bM=0;bM<bO&&bM<bK;bM++){if(bL[bM]!==e[bM]){return bA(bL[bM],e[bM])}}return bM===bO?bA(bR,e[bM],-1):bA(bL[bM],bQ,1)};bA=function(bK,e,bL){if(bK===e){return bL}var bM=bK.nextSibling;while(bM){if(bM===e){return -1}bM=bM.nextSibling}return 1}}bt.getText=function(e){var bK="",bM;for(var bL=0;e[bL];bL++){bM=e[bL];if(bM.nodeType===3||bM.nodeType===4){bK+=bM.nodeValue}else{if(bM.nodeType!==8){bK+=bt.getText(bM.childNodes)}}}return bK};(function(){var bK=ap.createElement("div"),bL="script"+(new Date()).getTime(),e=ap.documentElement;bK.innerHTML="<a name='"+bL+"'/>";e.insertBefore(bK,e.firstChild);if(ap.getElementById(bL)){by.find.ID=function(bN,bO,bP){if(typeof bO.getElementById!=="undefined"&&!bP){var bM=bO.getElementById(bN[1]);return bM?bM.id===bN[1]||typeof bM.getAttributeNode!=="undefined"&&bM.getAttributeNode("id").nodeValue===bN[1]?[bM]:K:[]}};by.filter.ID=function(bO,bM){var bN=typeof bO.getAttributeNode!=="undefined"&&bO.getAttributeNode("id");return bO.nodeType===1&&bN&&bN.nodeValue===bM}}e.removeChild(bK);e=bK=null})();(function(){var e=ap.createElement("div");e.appendChild(ap.createComment(""));if(e.getElementsByTagName("*").length>0){by.find.TAG=function(bK,bO){var bN=bO.getElementsByTagName(bK[1]);if(bK[1]==="*"){var bM=[];for(var bL=0;bN[bL];bL++){if(bN[bL].nodeType===1){bM.push(bN[bL])}}bN=bM}return bN}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){by.attrHandle.href=function(bK){return bK.getAttribute("href",2)}}e=null})();if(ap.querySelectorAll){(function(){var e=bt,bM=ap.createElement("div"),bL="__sizzle__";bM.innerHTML="<p class='TEST'></p>";if(bM.querySelectorAll&&bM.querySelectorAll(".TEST").length===0){return}bt=function(bX,bO,bS,bW){bO=bO||ap;if(!bW&&!bt.isXML(bO)){var bV=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(bX);if(bV&&(bO.nodeType===1||bO.nodeType===9)){if(bV[1]){return bz(bO.getElementsByTagName(bX),bS)}else{if(bV[2]&&by.find.CLASS&&bO.getElementsByClassName){return bz(bO.getElementsByClassName(bV[2]),bS)}}}if(bO.nodeType===9){if(bX==="body"&&bO.body){return bz([bO.body],bS)}else{if(bV&&bV[3]){var bR=bO.getElementById(bV[3]);if(bR&&bR.parentNode){if(bR.id===bV[3]){return bz([bR],bS)}}else{return bz([],bS)}}}try{return bz(bO.querySelectorAll(bX),bS)}catch(bT){}}else{if(bO.nodeType===1&&bO.nodeName.toLowerCase()!=="object"){var bP=bO,bQ=bO.getAttribute("id"),bN=bQ||bL,bZ=bO.parentNode,bY=/^\s*[+~]/.test(bX);if(!bQ){bO.setAttribute("id",bN)}else{bN=bN.replace(/'/g,"\\$&")}if(bY&&bZ){bO=bO.parentNode}try{if(!bY||bZ){return bz(bO.querySelectorAll("[id='"+bN+"'] "+bX),bS)}}catch(bU){}finally{if(!bQ){bP.removeAttribute("id")}}}}}return e(bX,bO,bS,bW)};for(var bK in e){bt[bK]=e[bK]}bM=null})()}(function(){var e=ap.documentElement,bL=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bL){var bN=!bL.call(ap.createElement("div"),"div"),bK=false;try{bL.call(ap.documentElement,"[test!='']:sizzle")}catch(bM){bK=true}bt.matchesSelector=function(bP,bR){bR=bR.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bt.isXML(bP)){try{if(bK||!by.match.PSEUDO.test(bR)&&!/!=/.test(bR)){var bO=bL.call(bP,bR);if(bO||!bN||bP.document&&bP.document.nodeType!==11){return bO}}}catch(bQ){}}return bt(bR,null,null,[bP]).length>0}}})();(function(){var e=ap.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}by.order.splice(1,0,"CLASS");by.find.CLASS=function(bK,bL,bM){if(typeof bL.getElementsByClassName!=="undefined"&&!bM){return bL.getElementsByClassName(bK[1])}};e=null})();function br(bK,bP,bO,bS,bQ,bR){for(var bM=0,bL=bS.length;bM<bL;bM++){var e=bS[bM];if(e){var bN=false;e=e[bK];while(e){if(e.sizcache===bO){bN=bS[e.sizset];break}if(e.nodeType===1&&!bR){e.sizcache=bO;e.sizset=bM}if(e.nodeName.toLowerCase()===bP){bN=e;break}e=e[bK]}bS[bM]=bN}}}function bH(bK,bP,bO,bS,bQ,bR){for(var bM=0,bL=bS.length;bM<bL;bM++){var e=bS[bM];if(e){var bN=false;e=e[bK];while(e){if(e.sizcache===bO){bN=bS[e.sizset];break}if(e.nodeType===1){if(!bR){e.sizcache=bO;e.sizset=bM}if(typeof bP!=="string"){if(e===bP){bN=true;break}}else{if(bt.filter(bP,[e]).length>0){bN=e;break}}}e=e[bK]}bS[bM]=bN}}}if(ap.documentElement.contains){bt.contains=function(bK,e){return bK!==e&&(bK.contains?bK.contains(e):true)}}else{if(ap.documentElement.compareDocumentPosition){bt.contains=function(bK,e){return !!(bK.compareDocumentPosition(e)&16)}}else{bt.contains=function(){return false}}}bt.isXML=function(e){var bK=(e?e.ownerDocument||e:0).documentElement;return bK?bK.nodeName!=="HTML":false};var bG=function(e,bQ){var bO,bM=[],bN="",bL=bQ.nodeType?[bQ]:bQ;while((bO=by.match.PSEUDO.exec(e))){bN+=bO[0];e=e.replace(by.match.PSEUDO,"")}e=by.relative[e]?e+"*":e;for(var bP=0,bK=bL.length;bP<bK;bP++){bt(e,bL[bP],bM)}return bt.filter(bN,bM)};b.find=bt;b.expr=bt.selectors;b.expr[":"]=b.expr.filters;b.unique=bt.uniqueSort;b.text=bt.getText;b.isXMLDoc=bt.isXML;b.contains=bt.contains})();var X=/Until$/,al=/^(?:parents|prevUntil|prevAll)/,a5=/,/,bm=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,H=b.expr.match.POS,at={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bs=this,bu,br;if(typeof e!=="string"){return b(e).filter(function(){for(bu=0,br=bs.length;bu<br;bu++){if(b.contains(bs[bu],this)){return true}}})}var bt=this.pushStack("","find",e),bw,bx,bv;for(bu=0,br=this.length;bu<br;bu++){bw=bt.length;b.find(e,this[bu],bt);if(bu>0){for(bx=bw;bx<bt.length;bx++){for(bv=0;bv<bw;bv++){if(bt[bv]===bt[bx]){bt.splice(bx--,1);break}}}}}return bt},has:function(br){var e=b(br);return this.filter(function(){for(var bt=0,bs=e.length;bt<bs;bt++){if(b.contains(this,e[bt])){return true}}})},not:function(e){return this.pushStack(aA(this,e,false),"not",e)},filter:function(e){return this.pushStack(aA(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bA,br){var bx=[],bu,bs,bz=this[0];if(b.isArray(bA)){var bw,bt,bv={},e=1;if(bz&&bA.length){for(bu=0,bs=bA.length;bu<bs;bu++){bt=bA[bu];if(!bv[bt]){bv[bt]=H.test(bt)?b(bt,br||this.context):bt}}while(bz&&bz.ownerDocument&&bz!==br){for(bt in bv){bw=bv[bt];if(bw.jquery?bw.index(bz)>-1:b(bz).is(bw)){bx.push({selector:bt,elem:bz,level:e})}}bz=bz.parentNode;e++}}return bx}var by=H.test(bA)||typeof bA!=="string"?b(bA,br||this.context):0;for(bu=0,bs=this.length;bu<bs;bu++){bz=this[bu];while(bz){if(by?by.index(bz)>-1:b.find.matchesSelector(bz,bA)){bx.push(bz);break}else{bz=bz.parentNode;if(!bz||!bz.ownerDocument||bz===br||bz.nodeType===11){break}}}}bx=bx.length>1?b.unique(bx):bx;return this.pushStack(bx,"closest",bA)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return b.inArray(this[0],b(e))}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,br){var bt=typeof e==="string"?b(e,br):b.makeArray(e&&e.nodeType?[e]:e),bs=b.merge(this.get(),bt);return this.pushStack(C(bt[0])||C(bs[0])?bs:b.unique(bs))},andSelf:function(){return this.add(this.prevObject)}});function C(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(br){var e=br.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(br,e,bs){return b.dir(br,"parentNode",bs)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(br,e,bs){return b.dir(br,"nextSibling",bs)},prevUntil:function(br,e,bs){return b.dir(br,"previousSibling",bs)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,br){b.fn[e]=function(bv,bs){var bu=b.map(this,br,bv),bt=P.call(arguments);if(!X.test(e)){bs=bv}if(bs&&typeof bs==="string"){bu=b.filter(bs,bu)}bu=this.length>1&&!at[e]?b.unique(bu):bu;if((this.length>1||a5.test(bs))&&al.test(e)){bu=bu.reverse()}return this.pushStack(bu,e,bt.join(","))}});b.extend({filter:function(bs,e,br){if(br){bs=":not("+bs+")"}return e.length===1?b.find.matchesSelector(e[0],bs)?[e[0]]:[]:b.find.matches(bs,e)},dir:function(bs,br,bu){var e=[],bt=bs[br];while(bt&&bt.nodeType!==9&&(bu===K||bt.nodeType!==1||!b(bt).is(bu))){if(bt.nodeType===1){e.push(bt)}bt=bt[br]}return e},nth:function(bu,e,bs,bt){e=e||1;var br=0;for(;bu;bu=bu[bs]){if(bu.nodeType===1&&++br===e){break}}return bu},sibling:function(bs,br){var e=[];for(;bs;bs=bs.nextSibling){if(bs.nodeType===1&&bs!==br){e.push(bs)}}return e}});function aA(bt,bs,e){bs=bs||0;if(b.isFunction(bs)){return b.grep(bt,function(bv,bu){var bw=!!bs.call(bv,bu,bv);return bw===e})}else{if(bs.nodeType){return b.grep(bt,function(bv,bu){return(bv===bs)===e})}else{if(typeof bs==="string"){var br=b.grep(bt,function(bu){return bu.nodeType===1});if(bm.test(bs)){return b.filter(bs,br,!e)}else{bs=b.filter(bs,br)}}}}return b.grep(bt,function(bv,bu){return(b.inArray(bv,bs)>=0)===e})}var ac=/ jQuery\d+="(?:\d+|null)"/g,am=/^\s+/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,w=/<tbody/i,U=/<|&#?\w+;/,O=/<(?:script|object|embed|option|style)/i,n=/checked\s*(?:[^=]|=\s*.checked.)/i,bi=/\/(java|ecma)script/i,aI=/^\s*<!(?:\[CDATA\[|\-\-)/,ar={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};ar.optgroup=ar.option;ar.tbody=ar.tfoot=ar.colgroup=ar.caption=ar.thead;ar.th=ar.td;if(!b.support.htmlSerialize){ar._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bs){var br=b(this);br.text(e.call(this,bs,br.text()))})}if(typeof e!=="object"&&e!==K){return this.empty().append((this[0]&&this[0].ownerDocument||ap).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bs){b(this).wrapAll(e.call(this,bs))})}if(this[0]){var br=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){br.insertBefore(this[0])}br.map(function(){var bs=this;while(bs.firstChild&&bs.firstChild.nodeType===1){bs=bs.firstChild}return bs}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(br){b(this).wrapInner(e.call(this,br))})}return this.each(function(){var br=b(this),bs=br.contents();if(bs.length){bs.wrapAll(e)}else{br.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(br){this.parentNode.insertBefore(br,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(br){this.parentNode.insertBefore(br,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bt){for(var br=0,bs;(bs=this[br])!=null;br++){if(!e||b.filter(e,[bs]).length){if(!bt&&bs.nodeType===1){b.cleanData(bs.getElementsByTagName("*"));b.cleanData([bs])}if(bs.parentNode){bs.parentNode.removeChild(bs)}}}return this},empty:function(){for(var e=0,br;(br=this[e])!=null;e++){if(br.nodeType===1){b.cleanData(br.getElementsByTagName("*"))}while(br.firstChild){br.removeChild(br.firstChild)}}return this},clone:function(br,e){br=br==null?false:br;e=e==null?br:e;return this.map(function(){return b.clone(this,br,e)})},html:function(bt){if(bt===K){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ac,""):null}else{if(typeof bt==="string"&&!O.test(bt)&&(b.support.leadingWhitespace||!am.test(bt))&&!ar[(d.exec(bt)||["",""])[1].toLowerCase()]){bt=bt.replace(R,"<$1></$2>");try{for(var bs=0,br=this.length;bs<br;bs++){if(this[bs].nodeType===1){b.cleanData(this[bs].getElementsByTagName("*"));this[bs].innerHTML=bt}}}catch(bu){this.empty().append(bt)}}else{if(b.isFunction(bt)){this.each(function(bv){var e=b(this);e.html(bt.call(this,bv,e.html()))})}else{this.empty().append(bt)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bt){var bs=b(this),br=bs.html();bs.replaceWith(e.call(this,bt,br))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bs=this.nextSibling,br=this.parentNode;b(this).remove();if(bs){b(bs).before(e)}else{b(br).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bx,bB,bA){var bt,bu,bw,bz,by=bx[0],br=[];if(!b.support.checkClone&&arguments.length===3&&typeof by==="string"&&n.test(by)){return this.each(function(){b(this).domManip(bx,bB,bA,true)})}if(b.isFunction(by)){return this.each(function(bD){var bC=b(this);bx[0]=by.call(this,bD,bB?bC.html():K);bC.domManip(bx,bB,bA)})}if(this[0]){bz=by&&by.parentNode;if(b.support.parentNode&&bz&&bz.nodeType===11&&bz.childNodes.length===this.length){bt={fragment:bz}}else{bt=b.buildFragment(bx,this,br)}bw=bt.fragment;if(bw.childNodes.length===1){bu=bw=bw.firstChild}else{bu=bw.firstChild}if(bu){bB=bB&&b.nodeName(bu,"tr");for(var bs=0,e=this.length,bv=e-1;bs<e;bs++){bA.call(bB?a6(this[bs],bu):this[bs],bt.cacheable||(e>1&&bs<bv)?b.clone(bw,true,true):bw)}}if(br.length){b.each(br,bl)}}return this}});function a6(e,br){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function t(e,bx){if(bx.nodeType!==1||!b.hasData(e)){return}var bw=b.expando,bt=b.data(e),bu=b.data(bx,bt);if((bt=bt[bw])){var by=bt.events;bu=bu[bw]=b.extend({},bt);if(by){delete bu.handle;bu.events={};for(var bv in by){for(var bs=0,br=by[bv].length;bs<br;bs++){b.event.add(bx,bv+(by[bv][bs].namespace?".":"")+by[bv][bs].namespace,by[bv][bs],by[bv][bs].data)}}}}}function ad(br,e){var bs;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(br)}bs=e.nodeName.toLowerCase();if(bs==="object"){e.outerHTML=br.outerHTML}else{if(bs==="input"&&(br.type==="checkbox"||br.type==="radio")){if(br.checked){e.defaultChecked=e.checked=br.checked}if(e.value!==br.value){e.value=br.value}}else{if(bs==="option"){e.selected=br.defaultSelected}else{if(bs==="input"||bs==="textarea"){e.defaultValue=br.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bv,bt,br){var bu,e,bs,bw;if(bt&&bt[0]){bw=bt[0].ownerDocument||bt[0]}if(!bw.createDocumentFragment){bw=ap}if(bv.length===1&&typeof bv[0]==="string"&&bv[0].length<512&&bw===ap&&bv[0].charAt(0)==="<"&&!O.test(bv[0])&&(b.support.checkClone||!n.test(bv[0]))){e=true;bs=b.fragments[bv[0]];if(bs&&bs!==1){bu=bs}}if(!bu){bu=bw.createDocumentFragment();b.clean(bv,bw,bu,br)}if(e){b.fragments[bv[0]]=bs?bu:1}return{fragment:bu,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,br){b.fn[e]=function(bs){var bv=[],by=b(bs),bx=this.length===1&&this[0].parentNode;if(bx&&bx.nodeType===11&&bx.childNodes.length===1&&by.length===1){by[br](this[0]);return this}else{for(var bw=0,bt=by.length;bw<bt;bw++){var bu=(bw>0?this.clone(true):this).get();b(by[bw])[br](bu);bv=bv.concat(bu)}return this.pushStack(bv,e,by.selector)}}});function bb(e){if("getElementsByTagName" in e){return e.getElementsByTagName("*")}else{if("querySelectorAll" in e){return e.querySelectorAll("*")}else{return[]}}}function au(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function E(e){if(b.nodeName(e,"input")){au(e)}else{if("getElementsByTagName" in e){b.grep(e.getElementsByTagName("input"),au)}}}b.extend({clone:function(bu,bw,bs){var bv=bu.cloneNode(true),e,br,bt;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bu.nodeType===1||bu.nodeType===11)&&!b.isXMLDoc(bu)){ad(bu,bv);e=bb(bu);br=bb(bv);for(bt=0;e[bt];++bt){if(br[bt]){ad(e[bt],br[bt])}}}if(bw){t(bu,bv);if(bs){e=bb(bu);br=bb(bv);for(bt=0;e[bt];++bt){t(e[bt],br[bt])}}}e=br=null;return bv},clean:function(bs,bu,bD,bw){var bB;bu=bu||ap;if(typeof bu.createElement==="undefined"){bu=bu.ownerDocument||bu[0]&&bu[0].ownerDocument||ap}var bE=[],bx;for(var bA=0,bv;(bv=bs[bA])!=null;bA++){if(typeof bv==="number"){bv+=""}if(!bv){continue}if(typeof bv==="string"){if(!U.test(bv)){bv=bu.createTextNode(bv)}else{bv=bv.replace(R,"<$1></$2>");var bG=(d.exec(bv)||["",""])[1].toLowerCase(),bt=ar[bG]||ar._default,bz=bt[0],br=bu.createElement("div");br.innerHTML=bt[1]+bv+bt[2];while(bz--){br=br.lastChild}if(!b.support.tbody){var e=w.test(bv),by=bG==="table"&&!e?br.firstChild&&br.firstChild.childNodes:bt[1]==="<table>"&&!e?br.childNodes:[];for(bx=by.length-1;bx>=0;--bx){if(b.nodeName(by[bx],"tbody")&&!by[bx].childNodes.length){by[bx].parentNode.removeChild(by[bx])}}}if(!b.support.leadingWhitespace&&am.test(bv)){br.insertBefore(bu.createTextNode(am.exec(bv)[0]),br.firstChild)}bv=br.childNodes}}var bC;if(!b.support.appendChecked){if(bv[0]&&typeof(bC=bv.length)==="number"){for(bx=0;bx<bC;bx++){E(bv[bx])}}else{E(bv)}}if(bv.nodeType){bE.push(bv)}else{bE=b.merge(bE,bv)}}if(bD){bB=function(bH){return !bH.type||bi.test(bH.type)};for(bA=0;bE[bA];bA++){if(bw&&b.nodeName(bE[bA],"script")&&(!bE[bA].type||bE[bA].type.toLowerCase()==="text/javascript")){bw.push(bE[bA].parentNode?bE[bA].parentNode.removeChild(bE[bA]):bE[bA])}else{if(bE[bA].nodeType===1){var bF=b.grep(bE[bA].getElementsByTagName("script"),bB);bE.splice.apply(bE,[bA+1,0].concat(bF))}bD.appendChild(bE[bA])}}}return bE},cleanData:function(br){var bu,bs,e=b.cache,bz=b.expando,bx=b.event.special,bw=b.support.deleteExpando;for(var bv=0,bt;(bt=br[bv])!=null;bv++){if(bt.nodeName&&b.noData[bt.nodeName.toLowerCase()]){continue}bs=bt[b.expando];if(bs){bu=e[bs]&&e[bs][bz];if(bu&&bu.events){for(var by in bu.events){if(bx[by]){b.event.remove(bt,by)}else{b.removeEvent(bt,by,bu.handle)}}if(bu.handle){bu.handle.elem=null}}if(bw){delete bt[b.expando]}else{if(bt.removeAttribute){bt.removeAttribute(b.expando)}}delete e[bs]}}}});function bl(e,br){if(br.src){b.ajax({url:br.src,async:false,dataType:"script"})}else{b.globalEval((br.text||br.textContent||br.innerHTML||"").replace(aI,"/*$0*/"))}if(br.parentNode){br.parentNode.removeChild(br)}}var af=/alpha\([^)]*\)/i,ao=/opacity=([^)]*)/,z=/([A-Z]|^ms)/g,a8=/^-?\d+(?:px)?$/i,bk=/^-?\d/,I=/^([\-+])=([\-+.\de]+)/,a3={position:"absolute",visibility:"hidden",display:"block"},ai=["Left","Right"],aY=["Top","Bottom"],V,aD,aS;b.fn.css=function(e,br){if(arguments.length===2&&br===K){return this}return b.access(this,e,br,true,function(bt,bs,bu){return bu!==K?b.style(bt,bs,bu):b.css(bt,bs)})};b.extend({cssHooks:{opacity:{get:function(bs,br){if(br){var e=V(bs,"opacity","opacity");return e===""?"1":e}else{return bs.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bt,bs,bz,bu){if(!bt||bt.nodeType===3||bt.nodeType===8||!bt.style){return}var bx,by,bv=b.camelCase(bs),br=bt.style,bA=b.cssHooks[bv];bs=b.cssProps[bv]||bv;if(bz!==K){by=typeof bz;if(by==="string"&&(bx=I.exec(bz))){bz=(+(bx[1]+1)*+bx[2])+parseFloat(b.css(bt,bs));by="number"}if(bz==null||by==="number"&&isNaN(bz)){return}if(by==="number"&&!b.cssNumber[bv]){bz+="px"}if(!bA||!("set" in bA)||(bz=bA.set(bt,bz))!==K){try{br[bs]=bz}catch(bw){}}}else{if(bA&&"get" in bA&&(bx=bA.get(bt,false,bu))!==K){return bx}return br[bs]}},css:function(bu,bt,br){var bs,e;bt=b.camelCase(bt);e=b.cssHooks[bt];bt=b.cssProps[bt]||bt;if(bt==="cssFloat"){bt="float"}if(e&&"get" in e&&(bs=e.get(bu,true,br))!==K){return bs}else{if(V){return V(bu,bt)}}},swap:function(bt,bs,bu){var e={};for(var br in bs){e[br]=bt.style[br];bt.style[br]=bs[br]}bu.call(bt);for(br in bs){bt.style[br]=e[br]}}});b.curCSS=b.css;b.each(["height","width"],function(br,e){b.cssHooks[e]={get:function(bu,bt,bs){var bv;if(bt){if(bu.offsetWidth!==0){return o(bu,e,bs)}else{b.swap(bu,a3,function(){bv=o(bu,e,bs)})}return bv}},set:function(bs,bt){if(a8.test(bt)){bt=parseFloat(bt);if(bt>=0){return bt+"px"}}else{return bt}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(br,e){return ao.test((e&&br.currentStyle?br.currentStyle.filter:br.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bu,bv){var bt=bu.style,br=bu.currentStyle,e=b.isNaN(bv)?"":"alpha(opacity="+bv*100+")",bs=br&&br.filter||bt.filter||"";bt.zoom=1;if(bv>=1&&b.trim(bs.replace(af,""))===""){bt.removeAttribute("filter");if(br&&!br.filter){return}}bt.filter=af.test(bs)?bs.replace(af,e):bs+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bs,br){var e;b.swap(bs,{display:"inline-block"},function(){if(br){e=V(bs,"margin-right","marginRight")}else{e=bs.style.marginRight}});return e}}}});if(ap.defaultView&&ap.defaultView.getComputedStyle){aD=function(bu,bs){var br,bt,e;bs=bs.replace(z,"-$1").toLowerCase();if(!(bt=bu.ownerDocument.defaultView)){return K}if((e=bt.getComputedStyle(bu,null))){br=e.getPropertyValue(bs);if(br===""&&!b.contains(bu.ownerDocument.documentElement,bu)){br=b.style(bu,bs)}}return br}}if(ap.documentElement.currentStyle){aS=function(bu,bs){var bv,br=bu.currentStyle&&bu.currentStyle[bs],e=bu.runtimeStyle&&bu.runtimeStyle[bs],bt=bu.style;if(!a8.test(br)&&bk.test(br)){bv=bt.left;if(e){bu.runtimeStyle.left=bu.currentStyle.left}bt.left=bs==="fontSize"?"1em":(br||0);br=bt.pixelLeft+"px";bt.left=bv;if(e){bu.runtimeStyle.left=e}}return br===""?"auto":br}}V=aD||aS;function o(bs,br,e){var bu=br==="width"?bs.offsetWidth:bs.offsetHeight,bt=br==="width"?ai:aY;if(bu>0){if(e!=="border"){b.each(bt,function(){if(!e){bu-=parseFloat(b.css(bs,"padding"+this))||0}if(e==="margin"){bu+=parseFloat(b.css(bs,e+this))||0}else{bu-=parseFloat(b.css(bs,"border"+this+"Width"))||0}})}return bu+"px"}bu=V(bs,br,br);if(bu<0||bu==null){bu=bs.style[br]||0}bu=parseFloat(bu)||0;if(e){b.each(bt,function(){bu+=parseFloat(b.css(bs,"padding"+this))||0;if(e!=="padding"){bu+=parseFloat(b.css(bs,"border"+this+"Width"))||0}if(e==="margin"){bu+=parseFloat(b.css(bs,e+this))||0}})}return bu+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bs){var br=bs.offsetWidth,e=bs.offsetHeight;return(br===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bs.style.display||b.css(bs,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var j=/%20/g,ak=/\[\]$/,bp=/\r?\n/g,bn=/#.*$/,ay=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aV=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aH=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,aK=/^(?:GET|HEAD)$/,c=/^\/\//,L=/\?/,a2=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,q=/^(?:select|textarea)/i,h=/\s+/,bo=/([?&])_=[^&]*/,J=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,A=b.fn.load,W={},r={},az,s,aO=["*/"]+["*"];try{az=bh.href}catch(aq){az=ap.createElement("a");az.href="";az=az.href}s=J.exec(az.toLowerCase())||[];function f(e){return function(bu,bw){if(typeof bu!=="string"){bw=bu;bu="*"}if(b.isFunction(bw)){var bt=bu.toLowerCase().split(h),bs=0,bv=bt.length,br,bx,by;for(;bs<bv;bs++){br=bt[bs];by=/^\+/.test(br);if(by){br=br.substr(1)||"*"}bx=e[br]=e[br]||[];bx[by?"unshift":"push"](bw)}}}}function aQ(br,bA,bv,bz,bx,bt){bx=bx||bA.dataTypes[0];bt=bt||{};bt[bx]=true;var bw=br[bx],bs=0,e=bw?bw.length:0,bu=(br===W),by;for(;bs<e&&(bu||!by);bs++){by=bw[bs](bA,bv,bz);if(typeof by==="string"){if(!bu||bt[by]){by=K}else{bA.dataTypes.unshift(by);by=aQ(br,bA,bv,bz,by,bt)}}}if((bu||!by)&&!bt["*"]){by=aQ(br,bA,bv,bz,"*",bt)}return by}function ah(bs,bt){var br,e,bu=b.ajaxSettings.flatOptions||{};for(br in bt){if(bt[br]!==K){(bu[br]?bs:(e||(e={})))[br]=bt[br]}}if(e){b.extend(true,bs,e)}}b.fn.extend({load:function(bs,bv,bw){if(typeof bs!=="string"&&A){return A.apply(this,arguments)}else{if(!this.length){return this}}var bu=bs.indexOf(" ");if(bu>=0){var e=bs.slice(bu,bs.length);bs=bs.slice(0,bu)}var bt="GET";if(bv){if(b.isFunction(bv)){bw=bv;bv=K}else{if(typeof bv==="object"){bv=b.param(bv,b.ajaxSettings.traditional);bt="POST"}}}var br=this;b.ajax({url:bs,type:bt,dataType:"html",data:bv,complete:function(by,bx,bz){bz=by.responseText;if(by.isResolved()){by.done(function(bA){bz=bA});br.html(e?b("<div>").append(bz.replace(a2,"")).find(e):bz)}if(bw){br.each(bw,[bz,bx,by])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||q.test(this.nodeName)||aV.test(this.type))}).map(function(e,br){var bs=b(this).val();return bs==null?null:b.isArray(bs)?b.map(bs,function(bu,bt){return{name:br.name,value:bu.replace(bp,"\r\n")}}):{name:br.name,value:bs.replace(bp,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,br){b.fn[br]=function(bs){return this.bind(br,bs)}});b.each(["get","post"],function(e,br){b[br]=function(bs,bu,bv,bt){if(b.isFunction(bu)){bt=bt||bv;bv=bu;bu=K}return b.ajax({type:br,url:bs,data:bu,success:bv,dataType:bt})}});b.extend({getScript:function(e,br){return b.get(e,K,br,"script")},getJSON:function(e,br,bs){return b.get(e,br,bs,"json")},ajaxSetup:function(br,e){if(e){ah(br,b.ajaxSettings)}else{e=br;br=b.ajaxSettings}ah(br,e);return br},ajaxSettings:{url:az,isLocal:aH.test(s[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aO},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a7.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:f(W),ajaxTransport:f(r),ajax:function(bv,bt){if(typeof bv==="object"){bt=bv;bv=K}bt=bt||{};var bz=b.ajaxSetup({},bt),bO=bz.context||bz,bC=bO!==bz&&(bO.nodeType||bO instanceof b)?b(bO):b.event,bN=b.Deferred(),bJ=b._Deferred(),bx=bz.statusCode||{},by,bD={},bK={},bM,bu,bH,bA,bE,bw=0,bs,bG,bF={readyState:0,setRequestHeader:function(bP,bQ){if(!bw){var e=bP.toLowerCase();bP=bK[e]=bK[e]||bP;bD[bP]=bQ}return this},getAllResponseHeaders:function(){return bw===2?bM:null},getResponseHeader:function(bP){var e;if(bw===2){if(!bu){bu={};while((e=ay.exec(bM))){bu[e[1].toLowerCase()]=e[2]}}e=bu[bP.toLowerCase()]}return e===K?null:e},overrideMimeType:function(e){if(!bw){bz.mimeType=e}return this},abort:function(e){e=e||"abort";if(bH){bH.abort(e)}bB(0,e);return this}};function bB(bV,bQ,bW,bS){if(bw===2){return}bw=2;if(bA){clearTimeout(bA)}bH=K;bM=bS||"";bF.readyState=bV>0?4:0;var bP,b0,bZ,bT=bQ,bU=bW?bf(bz,bF,bW):K,bR,bY;if(bV>=200&&bV<300||bV===304){if(bz.ifModified){if((bR=bF.getResponseHeader("Last-Modified"))){b.lastModified[by]=bR}if((bY=bF.getResponseHeader("Etag"))){b.etag[by]=bY}}if(bV===304){bT="notmodified";bP=true}else{try{b0=F(bz,bU);bT="success";bP=true}catch(bX){bT="parsererror";bZ=bX}}}else{bZ=bT;if(!bT||bV){bT="error";if(bV<0){bV=0}}}bF.status=bV;bF.statusText=""+(bQ||bT);if(bP){bN.resolveWith(bO,[b0,bT,bF])}else{bN.rejectWith(bO,[bF,bT,bZ])}bF.statusCode(bx);bx=K;if(bs){bC.trigger("ajax"+(bP?"Success":"Error"),[bF,bz,bP?b0:bZ])}bJ.resolveWith(bO,[bF,bT]);if(bs){bC.trigger("ajaxComplete",[bF,bz]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bN.promise(bF);bF.success=bF.done;bF.error=bF.fail;bF.complete=bJ.done;bF.statusCode=function(bP){if(bP){var e;if(bw<2){for(e in bP){bx[e]=[bx[e],bP[e]]}}else{e=bP[bF.status];bF.then(e,e)}}return this};bz.url=((bv||bz.url)+"").replace(bn,"").replace(c,s[1]+"//");bz.dataTypes=b.trim(bz.dataType||"*").toLowerCase().split(h);if(bz.crossDomain==null){bE=J.exec(bz.url.toLowerCase());bz.crossDomain=!!(bE&&(bE[1]!=s[1]||bE[2]!=s[2]||(bE[3]||(bE[1]==="http:"?80:443))!=(s[3]||(s[1]==="http:"?80:443))))}if(bz.data&&bz.processData&&typeof bz.data!=="string"){bz.data=b.param(bz.data,bz.traditional)}aQ(W,bz,bt,bF);if(bw===2){return false}bs=bz.global;bz.type=bz.type.toUpperCase();bz.hasContent=!aK.test(bz.type);if(bs&&b.active++===0){b.event.trigger("ajaxStart")}if(!bz.hasContent){if(bz.data){bz.url+=(L.test(bz.url)?"&":"?")+bz.data;delete bz.data}by=bz.url;if(bz.cache===false){var br=b.now(),bL=bz.url.replace(bo,"$1_="+br);bz.url=bL+((bL===bz.url)?(L.test(bz.url)?"&":"?")+"_="+br:"")}}if(bz.data&&bz.hasContent&&bz.contentType!==false||bt.contentType){bF.setRequestHeader("Content-Type",bz.contentType)}if(bz.ifModified){by=by||bz.url;if(b.lastModified[by]){bF.setRequestHeader("If-Modified-Since",b.lastModified[by])}if(b.etag[by]){bF.setRequestHeader("If-None-Match",b.etag[by])}}bF.setRequestHeader("Accept",bz.dataTypes[0]&&bz.accepts[bz.dataTypes[0]]?bz.accepts[bz.dataTypes[0]]+(bz.dataTypes[0]!=="*"?", "+aO+"; q=0.01":""):bz.accepts["*"]);for(bG in bz.headers){bF.setRequestHeader(bG,bz.headers[bG])}if(bz.beforeSend&&(bz.beforeSend.call(bO,bF,bz)===false||bw===2)){bF.abort();return false}for(bG in {success:1,error:1,complete:1}){bF[bG](bz[bG])}bH=aQ(r,bz,bt,bF);if(!bH){bB(-1,"No Transport")}else{bF.readyState=1;if(bs){bC.trigger("ajaxSend",[bF,bz])}if(bz.async&&bz.timeout>0){bA=setTimeout(function(){bF.abort("timeout")},bz.timeout)}try{bw=1;bH.send(bD,bB)}catch(bI){if(bw<2){bB(-1,bI)}else{b.error(bI)}}}return bF},param:function(e,bs){var br=[],bu=function(bv,bw){bw=b.isFunction(bw)?bw():bw;br[br.length]=encodeURIComponent(bv)+"="+encodeURIComponent(bw)};if(bs===K){bs=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bu(this.name,this.value)})}else{for(var bt in e){v(bt,e[bt],bs,bu)}}return br.join("&").replace(j,"+")}});function v(bs,bu,br,bt){if(b.isArray(bu)){b.each(bu,function(bw,bv){if(br||ak.test(bs)){bt(bs,bv)}else{v(bs+"["+(typeof bv==="object"||b.isArray(bv)?bw:"")+"]",bv,br,bt)}})}else{if(!br&&bu!=null&&typeof bu==="object"){for(var e in bu){v(bs+"["+e+"]",bu[e],br,bt)}}else{bt(bs,bu)}}}b.extend({active:0,lastModified:{},etag:{}});function bf(bz,by,bv){var br=bz.contents,bx=bz.dataTypes,bs=bz.responseFields,bu,bw,bt,e;for(bw in bs){if(bw in bv){by[bs[bw]]=bv[bw]}}while(bx[0]==="*"){bx.shift();if(bu===K){bu=bz.mimeType||by.getResponseHeader("content-type")}}if(bu){for(bw in br){if(br[bw]&&br[bw].test(bu)){bx.unshift(bw);break}}}if(bx[0] in bv){bt=bx[0]}else{for(bw in bv){if(!bx[0]||bz.converters[bw+" "+bx[0]]){bt=bw;break}if(!e){e=bw}}bt=bt||e}if(bt){if(bt!==bx[0]){bx.unshift(bt)}return bv[bt]}}function F(bD,bv){if(bD.dataFilter){bv=bD.dataFilter(bv,bD.dataType)}var bz=bD.dataTypes,bC={},bw,bA,bs=bz.length,bx,by=bz[0],bt,bu,bB,br,e;for(bw=1;bw<bs;bw++){if(bw===1){for(bA in bD.converters){if(typeof bA==="string"){bC[bA.toLowerCase()]=bD.converters[bA]}}}bt=by;by=bz[bw];if(by==="*"){by=bt}else{if(bt!=="*"&&bt!==by){bu=bt+" "+by;bB=bC[bu]||bC["* "+by];if(!bB){e=K;for(br in bC){bx=br.split(" ");if(bx[0]===bt||bx[0]==="*"){e=bC[bx[1]+" "+by];if(e){br=bC[br];if(br===true){bB=e}else{if(e===true){bB=br}}break}}}}if(!(bB||e)){b.error("No conversion from "+bu.replace(" "," to "))}if(bB!==true){bv=bB?bB(bv):e(br(bv))}}}}return bv}var ax=b.now(),u=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(ax++)}});b.ajaxPrefilter("json jsonp",function(bz,bw,by){var bt=bz.contentType==="application/x-www-form-urlencoded"&&(typeof bz.data==="string");if(bz.dataTypes[0]==="jsonp"||bz.jsonp!==false&&(u.test(bz.url)||bt&&u.test(bz.data))){var bx,bs=bz.jsonpCallback=b.isFunction(bz.jsonpCallback)?bz.jsonpCallback():bz.jsonpCallback,bv=a7[bs],e=bz.url,bu=bz.data,br="$1"+bs+"$2";if(bz.jsonp!==false){e=e.replace(u,br);if(bz.url===e){if(bt){bu=bu.replace(u,br)}if(bz.data===bu){e+=(/\?/.test(e)?"&":"?")+bz.jsonp+"="+bs}}}bz.url=e;bz.data=bu;a7[bs]=function(bA){bx=[bA]};by.always(function(){a7[bs]=bv;if(bx&&b.isFunction(bv)){a7[bs](bx[0])}});bz.converters["script json"]=function(){if(!bx){b.error(bs+" was not called")}return bx[0]};bz.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===K){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bs){if(bs.crossDomain){var e,br=ap.head||ap.getElementsByTagName("head")[0]||ap.documentElement;return{send:function(bt,bu){e=ap.createElement("script");e.async="async";if(bs.scriptCharset){e.charset=bs.scriptCharset}e.src=bs.url;e.onload=e.onreadystatechange=function(bw,bv){if(bv||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(br&&e.parentNode){br.removeChild(e)}e=K;if(!bv){bu(200,"success")}}};br.insertBefore(e,br.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var B=a7.ActiveXObject?function(){for(var e in M){M[e](0,1)}}:false,y=0,M;function aG(){try{return new a7.XMLHttpRequest()}catch(br){}}function ae(){try{return new a7.ActiveXObject("Microsoft.XMLHTTP")}catch(br){}}b.ajaxSettings.xhr=a7.ActiveXObject?function(){return !this.isLocal&&aG()||ae()}:aG;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var br;return{send:function(bx,bs){var bw=e.xhr(),bv,bu;if(e.username){bw.open(e.type,e.url,e.async,e.username,e.password)}else{bw.open(e.type,e.url,e.async)}if(e.xhrFields){for(bu in e.xhrFields){bw[bu]=e.xhrFields[bu]}}if(e.mimeType&&bw.overrideMimeType){bw.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bx["X-Requested-With"]){bx["X-Requested-With"]="XMLHttpRequest"}try{for(bu in bx){bw.setRequestHeader(bu,bx[bu])}}catch(bt){}bw.send((e.hasContent&&e.data)||null);br=function(bG,bA){var bB,bz,by,bE,bD;try{if(br&&(bA||bw.readyState===4)){br=K;if(bv){bw.onreadystatechange=b.noop;if(B){delete M[bv]}}if(bA){if(bw.readyState!==4){bw.abort()}}else{bB=bw.status;by=bw.getAllResponseHeaders();bE={};bD=bw.responseXML;if(bD&&bD.documentElement){bE.xml=bD}bE.text=bw.responseText;try{bz=bw.statusText}catch(bF){bz=""}if(!bB&&e.isLocal&&!e.crossDomain){bB=bE.text?200:404}else{if(bB===1223){bB=204}}}}}catch(bC){if(!bA){bs(-1,bC)}}if(bE){bs(bB,bz,bE,by)}};if(!e.async||bw.readyState===4){br()}else{bv=++y;if(B){if(!M){M={};b(a7).unload(B)}M[bv]=br}bw.onreadystatechange=br}},abort:function(){if(br){br(0,1)}}}}})}var Q={},a4,m,aw=/^(?:toggle|show|hide)$/,aM=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,aZ,aC=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a0;b.fn.extend({show:function(bt,bw,bv){var bs,bu;if(bt||bt===0){return this.animate(aX("show",3),bt,bw,bv)}else{for(var br=0,e=this.length;br<e;br++){bs=this[br];if(bs.style){bu=bs.style.display;if(!b._data(bs,"olddisplay")&&bu==="none"){bu=bs.style.display=""}if(bu===""&&b.css(bs,"display")==="none"){b._data(bs,"olddisplay",x(bs.nodeName))}}}for(br=0;br<e;br++){bs=this[br];if(bs.style){bu=bs.style.display;if(bu===""||bu==="none"){bs.style.display=b._data(bs,"olddisplay")||""}}}return this}},hide:function(bs,bv,bu){if(bs||bs===0){return this.animate(aX("hide",3),bs,bv,bu)}else{for(var br=0,e=this.length;br<e;br++){if(this[br].style){var bt=b.css(this[br],"display");if(bt!=="none"&&!b._data(this[br],"olddisplay")){b._data(this[br],"olddisplay",bt)}}}for(br=0;br<e;br++){if(this[br].style){this[br].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bs,br,bt){var e=typeof bs==="boolean";if(b.isFunction(bs)&&b.isFunction(br)){this._toggle.apply(this,arguments)}else{if(bs==null||e){this.each(function(){var bu=e?bs:b(this).is(":hidden");b(this)[bu?"show":"hide"]()})}else{this.animate(aX("toggle",3),bs,br,bt)}}return this},fadeTo:function(e,bt,bs,br){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bt},e,bs,br)},animate:function(bu,br,bt,bs){var e=b.speed(br,bt,bs);if(b.isEmptyObject(bu)){return this.each(e.complete,[false])}bu=b.extend({},bu);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var by=b.extend({},e),bF=this.nodeType===1,bC=bF&&b(this).is(":hidden"),bv,bz,bx,bE,bD,bB,bw,bA,bG;by.animatedProperties={};for(bx in bu){bv=b.camelCase(bx);if(bx!==bv){bu[bv]=bu[bx];delete bu[bx]}bz=bu[bv];if(b.isArray(bz)){by.animatedProperties[bv]=bz[1];bz=bu[bv]=bz[0]}else{by.animatedProperties[bv]=by.specialEasing&&by.specialEasing[bv]||by.easing||"swing"}if(bz==="hide"&&bC||bz==="show"&&!bC){return by.complete.call(this)}if(bF&&(bv==="height"||bv==="width")){by.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bE=x(this.nodeName);if(bE==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(by.overflow!=null){this.style.overflow="hidden"}for(bx in bu){bD=new b.fx(this,by,bx);bz=bu[bx];if(aw.test(bz)){bD[bz==="toggle"?bC?"show":"hide":bz]()}else{bB=aM.exec(bz);bw=bD.cur();if(bB){bA=parseFloat(bB[2]);bG=bB[3]||(b.cssNumber[bx]?"":"px");if(bG!=="px"){b.style(this,bx,(bA||1)+bG);bw=((bA||1)/bD.cur())*bw;b.style(this,bx,bw+bG)}if(bB[1]){bA=((bB[1]==="-="?-1:1)*bA)+bw}bD.custom(bw,bA,bG)}else{bD.custom(bw,bz,"")}}}return true})},stop:function(br,e){if(br){this.queue([])}this.each(function(){var bt=b.timers,bs=bt.length;if(!e){b._unmark(true,this)}while(bs--){if(bt[bs].elem===this){if(e){bt[bs](true)}bt.splice(bs,1)}}});if(!e){this.dequeue()}return this}});function bc(){setTimeout(an,0);return(a0=b.now())}function an(){a0=K}function aX(br,e){var bs={};b.each(aC.concat.apply([],aC.slice(0,e)),function(){bs[this]=br});return bs}b.each({slideDown:aX("show",1),slideUp:aX("hide",1),slideToggle:aX("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,br){b.fn[e]=function(bs,bu,bt){return this.animate(br,bs,bu,bt)}});b.extend({speed:function(bs,bt,br){var e=bs&&typeof bs==="object"?b.extend({},bs):{complete:br||!br&&bt||b.isFunction(bs)&&bs,duration:bs,easing:br&&bt||bt&&!b.isFunction(bt)&&bt};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(bu){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue!==false){b.dequeue(this)}else{if(bu!==false){b._unmark(this)}}};return e},easing:{linear:function(bs,bt,e,br){return e+br*bs},swing:function(bs,bt,e,br){return((-Math.cos(bs*Math.PI)/2)+0.5)*br+e}},timers:[],fx:function(br,e,bs){this.options=e;this.elem=br;this.prop=bs;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,br=b.css(this.elem,this.prop);return isNaN(e=parseFloat(br))?!br||br==="auto"?0:br:e},custom:function(bv,bu,bt){var e=this,bs=b.fx;this.startTime=a0||bc();this.start=bv;this.end=bu;this.unit=bt||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function br(bw){return e.step(bw)}br.elem=this.elem;if(br()&&b.timers.push(br)&&!aZ){aZ=setInterval(bs.tick,bs.interval)}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bu){var bt=a0||bc(),e=true,bv=this.elem,br=this.options,bs,bx;if(bu||bt>=br.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();br.animatedProperties[this.prop]=true;for(bs in br.animatedProperties){if(br.animatedProperties[bs]!==true){e=false}}if(e){if(br.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(by,bz){bv.style["overflow"+bz]=br.overflow[by]})}if(br.hide){b(bv).hide()}if(br.hide||br.show){for(var bw in br.animatedProperties){b.style(bv,bw,br.orig[bw])}}br.complete.call(bv)}return false}else{if(br.duration==Infinity){this.now=bt}else{bx=bt-this.startTime;this.state=bx/br.duration;this.pos=b.easing[br.animatedProperties[this.prop]](this.state,bx,0,1,br.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var br=b.timers,e=0;e<br.length;++e){if(!br[e]()){br.splice(e--,1)}}if(!br.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(aZ);aZ=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(br){return e===br.elem}).length}}function x(bt){if(!Q[bt]){var e=ap.body,br=b("<"+bt+">").appendTo(e),bs=br.css("display");br.remove();if(bs==="none"||bs===""){if(!a4){a4=ap.createElement("iframe");a4.frameBorder=a4.width=a4.height=0}e.appendChild(a4);if(!m||!a4.createElement){m=(a4.contentWindow||a4.contentDocument).document;m.write((ap.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");m.close()}br=m.createElement(bt);m.body.appendChild(br);bs=b.css(br,"display");e.removeChild(a4)}Q[bt]=bs}return Q[bt]}var T=/^t(?:able|d|h)$/i,Z=/^(?:body|html)$/i;if("getBoundingClientRect" in ap.documentElement){b.fn.offset=function(bE){var bu=this[0],bx;if(bE){return this.each(function(e){b.offset.setOffset(this,bE,e)})}if(!bu||!bu.ownerDocument){return null}if(bu===bu.ownerDocument.body){return b.offset.bodyOffset(bu)}try{bx=bu.getBoundingClientRect()}catch(bB){}var bD=bu.ownerDocument,bs=bD.documentElement;if(!bx||!b.contains(bs,bu)){return bx?{top:bx.top,left:bx.left}:{top:0,left:0}}var by=bD.body,bz=aF(bD),bw=bs.clientTop||by.clientTop||0,bA=bs.clientLeft||by.clientLeft||0,br=bz.pageYOffset||b.support.boxModel&&bs.scrollTop||by.scrollTop,bv=bz.pageXOffset||b.support.boxModel&&bs.scrollLeft||by.scrollLeft,bC=bx.top+br-bw,bt=bx.left+bv-bA;return{top:bC,left:bt}}}else{b.fn.offset=function(bB){var bv=this[0];if(bB){return this.each(function(bC){b.offset.setOffset(this,bB,bC)})}if(!bv||!bv.ownerDocument){return null}if(bv===bv.ownerDocument.body){return b.offset.bodyOffset(bv)}b.offset.initialize();var by,bs=bv.offsetParent,br=bv,bA=bv.ownerDocument,bt=bA.documentElement,bw=bA.body,bx=bA.defaultView,e=bx?bx.getComputedStyle(bv,null):bv.currentStyle,bz=bv.offsetTop,bu=bv.offsetLeft;while((bv=bv.parentNode)&&bv!==bw&&bv!==bt){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}by=bx?bx.getComputedStyle(bv,null):bv.currentStyle;bz-=bv.scrollTop;bu-=bv.scrollLeft;if(bv===bs){bz+=bv.offsetTop;bu+=bv.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&T.test(bv.nodeName))){bz+=parseFloat(by.borderTopWidth)||0;bu+=parseFloat(by.borderLeftWidth)||0}br=bs;bs=bv.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&by.overflow!=="visible"){bz+=parseFloat(by.borderTopWidth)||0;bu+=parseFloat(by.borderLeftWidth)||0}e=by}if(e.position==="relative"||e.position==="static"){bz+=bw.offsetTop;bu+=bw.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bz+=Math.max(bt.scrollTop,bw.scrollTop);bu+=Math.max(bt.scrollLeft,bw.scrollLeft)}return{top:bz,left:bu}}}b.offset={initialize:function(){var e=ap.body,br=ap.createElement("div"),bu,bw,bv,bx,bs=parseFloat(b.css(e,"marginTop"))||0,bt="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(br.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});br.innerHTML=bt;e.insertBefore(br,e.firstChild);bu=br.firstChild;bw=bu.firstChild;bx=bu.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bw.offsetTop!==5);this.doesAddBorderForTableAndCells=(bx.offsetTop===5);bw.style.position="fixed";bw.style.top="20px";this.supportsFixedPosition=(bw.offsetTop===20||bw.offsetTop===15);bw.style.position=bw.style.top="";bu.style.overflow="hidden";bu.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bw.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bs);e.removeChild(br);b.offset.initialize=b.noop},bodyOffset:function(e){var bs=e.offsetTop,br=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bs+=parseFloat(b.css(e,"marginTop"))||0;br+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bs,left:br}},setOffset:function(bt,bC,bw){var bx=b.css(bt,"position");if(bx==="static"){bt.style.position="relative"}var bv=b(bt),br=bv.offset(),e=b.css(bt,"top"),bA=b.css(bt,"left"),bB=(bx==="absolute"||bx==="fixed")&&b.inArray("auto",[e,bA])>-1,bz={},by={},bs,bu;if(bB){by=bv.position();bs=by.top;bu=by.left}else{bs=parseFloat(e)||0;bu=parseFloat(bA)||0}if(b.isFunction(bC)){bC=bC.call(bt,bw,br)}if(bC.top!=null){bz.top=(bC.top-br.top)+bs}if(bC.left!=null){bz.left=(bC.left-br.left)+bu}if("using" in bC){bC.using.call(bt,bz)}else{bv.css(bz)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bs=this[0],br=this.offsetParent(),bt=this.offset(),e=Z.test(br[0].nodeName)?{top:0,left:0}:br.offset();bt.top-=parseFloat(b.css(bs,"marginTop"))||0;bt.left-=parseFloat(b.css(bs,"marginLeft"))||0;e.top+=parseFloat(b.css(br[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(br[0],"borderLeftWidth"))||0;return{top:bt.top-e.top,left:bt.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||ap.body;while(e&&(!Z.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(br,e){var bs="scroll"+e;b.fn[bs]=function(bv){var bt,bu;if(bv===K){bt=this[0];if(!bt){return null}bu=aF(bt);return bu?("pageXOffset" in bu)?bu[br?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bu.document.documentElement[bs]||bu.document.body[bs]:bt[bs]}return this.each(function(){bu=aF(this);if(bu){bu.scrollTo(!br?bv:b(bu).scrollLeft(),br?bv:b(bu).scrollTop())}else{this[bs]=bv}})}});function aF(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(br,e){var bs=e.toLowerCase();b.fn["inner"+e]=function(){var bt=this[0];return bt&&bt.style?parseFloat(b.css(bt,bs,"padding")):null};b.fn["outer"+e]=function(bu){var bt=this[0];return bt&&bt.style?parseFloat(b.css(bt,bs,bu?"margin":"border")):null};b.fn[bs]=function(bv){var bw=this[0];if(!bw){return bv==null?null:this}if(b.isFunction(bv)){return this.each(function(bA){var bz=b(this);bz[bs](bv.call(this,bA,bz[bs]()))})}if(b.isWindow(bw)){var bx=bw.document.documentElement["client"+e],bt=bw.document.body;return bw.document.compatMode==="CSS1Compat"&&bx||bt&&bt["client"+e]||bx}else{if(bw.nodeType===9){return Math.max(bw.documentElement["client"+e],bw.body["scroll"+e],bw.documentElement["scroll"+e],bw.body["offset"+e],bw.documentElement["offset"+e])}else{if(bv===K){var by=b.css(bw,bs),bu=parseFloat(by);return b.isNaN(bu)?by:bu}else{return this.css(bs,typeof bv==="string"?bv:bv+"px")}}}}});a7.jQuery=a7.$=b;a7.auiNg=a7.auiNg||{};a7.auiNg.jQuery=b})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/angular/1.0/angular.js' */
(function(cd,r,bE){if(cd.angular){console.log("AUI-NG: Found existing angular instance, skipping ...");return}else{console.log("AUI-NG: Setting up angular instance ...")}var ax=function(du){return cz(du)?du.toLowerCase():du};var b0=function(du){return cz(du)?du.toUpperCase():du};var aS=function(du){return cz(du)?du.replace(/[A-Z]/g,function(dv){return String.fromCharCode(dv.charCodeAt(0)|32)}):du};var cw=function(du){return cz(du)?du.replace(/[a-z]/g,function(dv){return String.fromCharCode(dv.charCodeAt(0)&~32)}):du};if("i"!=="I".toLowerCase()){ax=aS;b0=cw}var aA=df((/msie (\d+)/.exec(ax(navigator.userAgent))||[])[1]),cB,cY,ak=[].slice,E=[].push,H=Object.prototype.toString,aO=cd.angular||(cd.angular={}),X,q,ca=["0","0","0"];function bf(du){if(!du||(typeof du.length!=="number")){return false}if(typeof du.hasOwnProperty!="function"&&typeof du.constructor!="function"){return true}else{return du instanceof bI||(cY&&du instanceof cY)||H.call(du)!=="[object Object]"||typeof du.callee==="function"}}function bj(dx,dw,dv){var du;if(dx){if(G(dx)){for(du in dx){if(du!="prototype"&&du!="length"&&du!="name"&&dx.hasOwnProperty(du)){dw.call(dv,dx[du],du)}}}else{if(dx.forEach&&dx.forEach!==bj){dx.forEach(dw,dv)}else{if(bf(dx)){for(du=0;du<dx.length;du++){dw.call(dv,dx[du],du)}}else{for(du in dx){if(dx.hasOwnProperty(du)){dw.call(dv,dx[du],du)}}}}}}return dx}function cV(dw){var dv=[];for(var du in dw){if(dw.hasOwnProperty(du)){dv.push(du)}}return dv.sort()}function F(dy,dw,dv){var dx=cV(dy);for(var du=0;du<dx.length;du++){dw.call(dv,dy[dx[du]],dx[du])}return dx}function cZ(du){return function(dw,dv){du(dv,dw)}}function cP(){var du=ca.length;var dv;while(du){du--;dv=ca[du].charCodeAt(0);if(dv==57){ca[du]="A";return ca.join("")}if(dv==90){ca[du]="0"}else{ca[du]=String.fromCharCode(dv+1);return ca.join("")}}ca.unshift("0");return ca.join("")}function cm(du){bj(arguments,function(dv){if(dv!==du){bj(dv,function(dx,dw){du[dw]=dx})}});return du}function df(du){return parseInt(du,10)}function ck(dv,du){return cm(new (cm(function(){},{prototype:dv}))(),du)}function k(){}k.$inject=[];function aT(du){return du}aT.$inject=[];function cK(du){return function(){return du}}function bR(du){return typeof du=="undefined"}function cQ(du){return typeof du!="undefined"}function dt(du){return du!=null&&typeof du=="object"}function cz(du){return typeof du=="string"}function a7(du){return typeof du=="number"}function aH(du){return H.apply(du)=="[object Date]"}function bl(du){return H.apply(du)=="[object Array]"}function G(du){return typeof du=="function"}function bo(du){return du&&du.document&&du.location&&du.alert&&du.setInterval}function bz(du){return du&&du.$evalAsync&&du.$watch}function aK(du){return H.apply(du)==="[object File]"}function bq(du){return typeof du=="boolean"}function aD(du){return cz(du)?du.replace(/^\s*/,"").replace(/\s*$/,""):du}function b1(du){return du&&(du.nodeName||(du.bind&&du.find))}function c9(dx){var dw={},du=dx.split(","),dv;for(dv=0;dv<du.length;dv++){dw[du[dv]]=true}return dw}if(aA<9){q=function(du){du=du.nodeName?du:du[0];return(du.scopeName&&du.scopeName!="HTML")?b0(du.scopeName+":"+du.nodeName):du.nodeName}}else{q=function(du){return du.nodeName?du.nodeName:du[0].nodeName}}function aV(dx,dw,dv){var du=[];bj(dx,function(dA,dy,dz){du.push(dw.call(dv,dA,dy,dz))});return du}function aG(dx,du){var dw=0,dv;if(bl(dx)||cz(dx)){return dx.length}else{if(dt(dx)){for(dv in dx){if(!du||dx.hasOwnProperty(dv)){dw++}}}}return dw}function t(dv,du){return dm(dv,du)!=-1}function dm(dw,dv){if(dw.indexOf){return dw.indexOf(dv)}for(var du=0;du<dw.length;du++){if(dv===dw[du]){return du}}return -1}function aP(dw,dv){var du=dm(dw,dv);if(du>=0){dw.splice(du,1)}return dv}function cj(du){if(du){switch(du.nodeName){case"OPTION":case"PRE":case"TITLE":return true}}return false}function bJ(dx,du){if(bo(dx)||bz(dx)){throw Error("Can't copy Window or Scope")}if(!du){du=dx;if(dx){if(bl(dx)){du=bJ(dx,[])}else{if(aH(dx)){du=new Date(dx.getTime())}else{if(dt(dx)){du=bJ(dx,{})}}}}}else{if(dx===du){throw Error("Can't copy equivalent objects or arrays")}if(bl(dx)){du.length=0;for(var dw=0;dw<dx.length;dw++){du.push(bJ(dx[dw]))}}else{bj(du,function(dz,dy){delete du[dy]});for(var dv in dx){du[dv]=bJ(dx[dv])}}}return du}function bD(dv,dw){dw=dw||{};for(var du in dv){if(dv.hasOwnProperty(du)&&du.substr(0,2)!=="$$"){dw[du]=dv[du]}}return dw}function o(dA,dz){if(dA===dz){return true}if(dA===null||dz===null){return false}if(dA!==dA&&dz!==dz){return true}var dy=typeof dA,dw=typeof dz,dx,dv,du;if(dy==dw){if(dy=="object"){if(bl(dA)){if((dx=dA.length)==dz.length){for(dv=0;dv<dx;dv++){if(!o(dA[dv],dz[dv])){return false}}return true}}else{if(aH(dA)){return aH(dz)&&dA.getTime()==dz.getTime()}else{if(bz(dA)||bz(dz)||bo(dA)||bo(dz)){return false}du={};for(dv in dA){if(dv.charAt(0)==="$"||G(dA[dv])){continue}if(!o(dA[dv],dz[dv])){return false}du[dv]=true}for(dv in dz){if(!du[dv]&&dv.charAt(0)!=="$"&&dz[dv]!==bE&&!G(dz[dv])){return false}}return true}}}}return false}function bp(dw,dv,du){return dw.concat(ak.call(dv,du))}function h(du,dv){return ak.call(du,dv||0)}function bW(dv,dw){var du=arguments.length>2?h(arguments,2):[];if(G(dw)&&!(dw instanceof RegExp)){return du.length?function(){return arguments.length?dw.apply(dv,du.concat(ak.call(arguments,0))):dw.apply(dv,du)}:function(){return arguments.length?dw.apply(dv,arguments):dw.call(dv)}}else{return dw}}function cs(du,dv){var dw=dv;if(/^\$+/.test(du)){dw=bE}else{if(bo(dv)){dw="$WINDOW"}else{if(dv&&r===dv){dw="$DOCUMENT"}else{if(bz(dv)){dw="$SCOPE"}}}}return dw}function cD(dv,du){return JSON.stringify(dv,cs,du?"  ":null)}function W(du){return cz(du)?JSON.parse(du):du}function cH(dv){if(dv&&dv.length!==0){var du=ax(""+dv);dv=!(du=="f"||du=="0"||du=="false"||du=="no"||du=="n"||du=="[]")}else{dv=false}return dv}function R(dv){dv=cB(dv).clone();try{dv.html("")}catch(dx){}var du=3;var dw=cB("<div>").append(dv).html();try{return dv[0].nodeType===du?ax(dw):dw.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(dy,dz){return"<"+ax(dz)})}catch(dx){return ax(dw)}}function an(dx){var dw={},du,dv;bj((dx||"").split("&"),function(dy){if(dy){du=dy.split("=");dv=decodeURIComponent(du[0]);dw[dv]=cQ(du[1])?decodeURIComponent(du[1]):true}});return dw}function T(dv){var du=[];bj(dv,function(dx,dw){du.push(aj(dw,true)+(dx===true?"":"="+aj(dx,true)))});return du.length?du.join("&"):""}function aJ(du){return aj(du,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function aj(dv,du){return encodeURIComponent(dv).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,(du?"%20":"+"))}function bK(dy,dx){var dA=[dy],dz,dw,dB=["ng:app","ng-app","x-ng-app","data-ng-app"],dv=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;function du(dC){dC&&dA.push(dC)}bj(dB,function(dC){dB[dC]=true;du(r.getElementById(dC));dC=dC.replace(":","\\:");if(dy.querySelectorAll){bj(dy.querySelectorAll("."+dC),du);bj(dy.querySelectorAll("."+dC+"\\:"),du);bj(dy.querySelectorAll("["+dC+"]"),du)}});bj(dA,function(dD){if(!dz){var dE=" "+dD.className+" ";var dC=dv.exec(dE);if(dC){dz=dD;dw=(dC[2]||"").replace(/\s+/g,",")}else{bj(dD.attributes,function(dF){if(!dz&&dB[dF.name]){dz=dD;dw=dF.value}})}}});if(dz){dx(dz,dw?[dw]:[])}}function Z(dw,dv){var dx=function(){dw=cB(dw);dv=dv||[];dv.unshift(["$provide",function(dz){dz.value("$rootElement",dw)}]);dv.unshift("ng");var dy=ce(dv);dy.invoke(["$rootScope","$rootElement","$compile","$injector",function(dA,dz,dB,dC){dA.$apply(function(){dz.data("$injector",dC);dB(dz)(dA)})}]);return dy};var du=/^NG_DEFER_BOOTSTRAP!/;if(cd&&!du.test(cd.name)){return dx()}cd.name=cd.name.replace(du,"");aO.resumeBootstrap=function(dy){bj(dy,function(dz){dv.push(dz)});dx()}}var cC=/[A-Z]/g;function cl(du,dv){dv=dv||"_";return du.replace(cC,function(dw,dx){return(dx?dv:"")+dw.toLowerCase()})}function a3(){cY=cd.jQuery;if(cY){cB=cY;cm(cY.fn,{scope:M.scope,controller:M.controller,injector:M.injector,inheritedData:M.inheritedData});z("remove",true);z("empty");z("html")}else{cB=bI}aO.element=cB}function j(du,dv,dw){if(!du){throw new Error("Argument '"+(dv||"?")+"' is "+(dw||"required"))}return du}function i(du,dv,dw){if(dw&&bl(du)){du=du[du.length-1]}j(G(du),dv,"not a function, got "+(du&&typeof du=="object"?du.constructor.name||"Object":typeof du));return du}function l(dv){function du(dy,dx,dw){return dy[dx]||(dy[dx]=dw())}return du(du(dv,"angular",Object),"module",function(){var dw={};return function dx(dy,dA,dz){if(dA&&dw.hasOwnProperty(dy)){dw[dy]=null}return du(dw,dy,function(){if(!dA){throw Error("No module: "+dy)}var dF=[];var dE=[];var dC=dB("$injector","invoke");var dD={_invokeQueue:dF,_runBlocks:dE,requires:dA,name:dy,provider:dB("$provide","provider"),factory:dB("$provide","factory"),service:dB("$provide","service"),value:dB("$provide","value"),constant:dB("$provide","constant","unshift"),filter:dB("$filterProvider","register"),controller:dB("$controllerProvider","register"),directive:dB("$compileProvider","directive"),config:dC,run:function(dG){dE.push(dG);return this}};if(dz){dC(dz)}return dD;function dB(dH,dI,dG){return function(){dF[dG||"push"]([dH,dI,arguments]);return dD}}})}})}var a4={full:"1.0.6",major:1,minor:0,dot:6,codeName:"universal-irreversibility"};function O(du){cm(du,{bootstrap:Z,copy:bJ,extend:cm,equals:o,element:cB,forEach:bj,injector:ce,noop:k,bind:bW,toJson:cD,fromJson:W,identity:aT,isUndefined:bR,isDefined:cQ,isString:cz,isFunction:G,isObject:dt,isNumber:a7,isElement:b1,isArray:bl,version:a4,isDate:aH,lowercase:ax,uppercase:b0,callbacks:{counter:0}});X=l(cd);try{X("ngLocale")}catch(dv){X("ngLocale",[]).provider("$locale",ab)}X("ng",["ngLocale"],["$provide",function dw(dx){dx.provider("$compile",aa).directive({a:bi,input:cL,textarea:cL,form:c8,script:di,select:a0,style:av,option:J,ngBind:b4,ngBindHtmlUnsafe:bs,ngBindTemplate:bP,ngClass:aB,ngClassEven:da,ngClassOdd:K,ngCsp:aX,ngCloak:cn,ngController:bb,ngForm:bc,ngHide:cr,ngInclude:v,ngInit:dp,ngNonBindable:co,ngPluralize:al,ngRepeat:S,ngShow:a5,ngSubmit:dq,ngStyle:au,ngSwitch:s,ngSwitchWhen:aZ,ngSwitchDefault:C,ngOptions:bH,ngView:dh,ngTransclude:ba,ngModel:a,ngList:b8,ngChange:bh,required:bu,ngRequired:bu,ngValue:aw}).directive(b).directive(I);dx.provider({$anchorScroll:bF,$browser:cT,$cacheFactory:dd,$controller:ah,$document:dn,$exceptionHandler:ds,$filter:aM,$interpolate:dc,$http:b5,$httpBackend:b3,$location:bT,$log:db,$parse:bV,$route:y,$routeParams:be,$rootScope:bm,$q:D,$sniffer:aF,$templateCache:g,$timeout:ai,$window:cW})}])}var ct=bI.cache={},c3=bI.expando="ng-"+new Date().getTime(),ap=1,b7=(cd.document.addEventListener?function(du,dw,dv){du.addEventListener(dw,dv,false)}:function(du,dw,dv){du.attachEvent("on"+dw,dv)}),ae=(cd.document.removeEventListener?function(du,dw,dv){du.removeEventListener(dw,dv,false)}:function(du,dw,dv){du.detachEvent("on"+dw,dv)});function cy(){return ++ap}var bL=/([\:\-\_]+(.))/g;var cS=/^moz([A-Z])/;function L(du){return du.replace(bL,function(dv,dx,dw,dy){return dy?dw.toUpperCase():dw}).replace(cS,"Moz$1")}function z(dw,du){var dx=cY.fn[dw];dx=dx.$original||dx;dv.$original=dx;cY.fn[dw]=dv;function dv(){var dD=[this],dF=du,dE,dy,dI,dB,dA,dC,dz,dG,dH;while(dD.length){dE=dD.shift();for(dy=0,dI=dE.length;dy<dI;dy++){dB=cB(dE[dy]);if(dF){dB.triggerHandler("$destroy")}else{dF=!dF}for(dA=0,dC=(dz=dB.children()).length;dA<dC;dA++){dD.push(cY(dz[dA]))}}}return dx.apply(this,arguments)}}function bI(du){if(du instanceof bI){return du}if(!(this instanceof bI)){if(cz(du)&&du.charAt(0)!="<"){throw Error("selectors not implemented")}return new bI(du)}if(cz(du)){var dv=r.createElement("div");dv.innerHTML="<div>&#160;</div>"+du;dv.removeChild(dv.firstChild);c4(this,dv.childNodes);this.remove()}else{c4(this,du)}}function aL(du){return du.cloneNode(true)}function cJ(dw){a6(dw);for(var dv=0,du=dw.childNodes||[];dv<du.length;dv++){cJ(du[dv])}}function by(dv,dx,dw){var du=aU(dv,"events"),dy=aU(dv,"handle");if(!dy){return}if(bR(dx)){bj(du,function(dz,dA){ae(dv,dA,dz);delete du[dA]})}else{if(bR(dw)){ae(dv,dx,du[dx]);delete du[dx]}else{aP(du[dx],dw)}}}function a6(dw){var dv=dw[c3],du=ct[dv];if(du){if(du.handle){du.events.$destroy&&du.handle({},"$destroy");by(dw)}delete ct[dv];dw[c3]=bE}}function aU(dx,dw,dy){var dv=dx[c3],du=ct[dv||-1];if(cQ(dy)){if(!du){dx[c3]=dv=cy();du=ct[dv]={}}du[dw]=dy}else{return du&&du[dw]}}function aW(dw,dv,dz){var dy=aU(dw,"data"),dx=cQ(dz),du=!dx&&cQ(dv),dA=du&&!dt(dv);if(!dy&&!dA){aU(dw,"data",dy={})}if(dx){dy[dv]=dz}else{if(du){if(dA){return dy&&dy[dv]}else{cm(dy,dv)}}else{return dy}}}function cG(dv,du){return((" "+dv.className+" ").replace(/[\n\t]/g," ").indexOf(" "+du+" ")>-1)}function aC(dv,du){if(du){bj(du.split(" "),function(dw){dv.className=aD((" "+dv.className+" ").replace(/[\n\t]/g," ").replace(" "+aD(dw)+" "," "))})}}function ci(dv,du){if(du){bj(du.split(" "),function(dw){if(!cG(dv,dw)){dv.className=aD(dv.className+" "+aD(dw))}})}}function c4(du,dw){if(dw){dw=(!dw.nodeName&&cQ(dw.length)&&!bo(dw))?dw:[dw];for(var dv=0;dv<dw.length;dv++){du.push(dw[dv])}}}function cg(dv,du){return aI(dv,"$"+(du||"ngController")+"Controller")}function aI(dv,du,dw){dv=cB(dv);if(dv[0].nodeType==9){dv=dv.find("html")}while(dv.length){if(dw=dv.data(du)){return dw}dv=dv.parent()}}var M=bI.prototype={ready:function(dv){var dw=false;function du(){if(dw){return}dw=true;dv()}this.bind("DOMContentLoaded",du);bI(cd).bind("load",du)},toString:function(){var du=[];bj(this,function(dv){du.push(""+dv)});return"["+du.join(", ")+"]"},eq:function(du){return(du>=0)?cB(this[du]):cB(this[this.length+du])},length:0,push:E,sort:[].sort,splice:[].splice};var cN={};bj("multiple,selected,checked,disabled,readOnly,required".split(","),function(du){cN[ax(du)]=du});var a8={};bj("input,select,option,textarea,button,form".split(","),function(du){a8[b0(du)]=true});function aY(dw,du){var dv=cN[du.toLowerCase()];return dv&&a8[dw.nodeName]&&dv}bj({data:aW,inheritedData:aI,scope:function(du){return aI(du,"$scope")},controller:cg,injector:function(du){return aI(du,"$injector")},removeAttr:function(dv,du){dv.removeAttribute(du)},hasClass:cG,css:function(dv,du,dw){du=L(du);if(cQ(dw)){dv.style[du]=dw}else{var dx;if(aA<=8){dx=dv.currentStyle&&dv.currentStyle[du];if(dx===""){dx="auto"}}dx=dx||dv.style[du];if(aA<=8){dx=(dx==="")?bE:dx}return dx}},attr:function(dx,dv,dy){var dw=ax(dv);if(cN[dw]){if(cQ(dy)){if(!!dy){dx[dv]=true;dx.setAttribute(dv,dw)}else{dx[dv]=false;dx.removeAttribute(dw)}}else{return(dx[dv]||(dx.attributes.getNamedItem(dv)||k).specified)?dw:bE}}else{if(cQ(dy)){dx.setAttribute(dv,dy)}else{if(dx.getAttribute){var du=dx.getAttribute(dv,2);return du===null?bE:du}}}},prop:function(dv,du,dw){if(cQ(dw)){dv[du]=dw}else{return dv[du]}},text:cm((aA<9)?function(du,dv){if(du.nodeType==1){if(bR(dv)){return du.innerText}du.innerText=dv}else{if(bR(dv)){return du.nodeValue}du.nodeValue=dv}}:function(du,dv){if(bR(dv)){return du.textContent}du.textContent=dv},{$dv:""}),val:function(du,dv){if(bR(dv)){return du.value}du.value=dv},html:function(dv,dw){if(bR(dw)){return dv.innerHTML}for(var du=0,dx=dv.childNodes;du<dx.length;du++){cJ(dx[du])}dv.innerHTML=dw}},function(dv,du){bI.prototype[du]=function(dx,dw){var dz,dy;if(((dv.length==2&&(dv!==cG&&dv!==cg))?dx:dw)===bE){if(dt(dx)){for(dz=0;dz<this.length;dz++){if(dv===aW){dv(this[dz],dx)}else{for(dy in dx){dv(this[dz],dy,dx[dy])}}}return this}else{if(this.length){return dv(this[0],dx,dw)}}}else{for(dz=0;dz<this.length;dz++){dv(this[dz],dx,dw)}return this}return dv.$dv}});function p(dw,dv){var du=function(dz,dy){if(!dz.preventDefault){dz.preventDefault=function(){dz.returnValue=false}}if(!dz.stopPropagation){dz.stopPropagation=function(){dz.cancelBubble=true}}if(!dz.target){dz.target=dz.srcElement||r}if(bR(dz.defaultPrevented)){var dx=dz.preventDefault;dz.preventDefault=function(){dz.defaultPrevented=true;dx.call(dz)};dz.defaultPrevented=false}dz.isDefaultPrevented=function(){return dz.defaultPrevented};bj(dv[dy||dz.type],function(dA){dA.call(dw,dz)});if(aA<=8){dz.preventDefault=null;dz.stopPropagation=null;dz.isDefaultPrevented=null}else{delete dz.preventDefault;delete dz.stopPropagation;delete dz.isDefaultPrevented}};du.elem=dw;return du}bj({removeData:a6,dealoc:cJ,bind:function bS(dv,dx,dw){var du=aU(dv,"events"),dy=aU(dv,"handle");if(!du){aU(dv,"events",du={})}if(!dy){aU(dv,"handle",dy=p(dv,du))}bj(dx.split(" "),function(dB){var dA=du[dB];if(!dA){if(dB=="mouseenter"||dB=="mouseleave"){var dz=0;du.mouseenter=[];du.mouseleave=[];bS(dv,"mouseover",function(dC){dz++;if(dz==1){dy(dC,"mouseenter")}});bS(dv,"mouseout",function(dC){dz--;if(dz==0){dy(dC,"mouseleave")}})}else{b7(dv,dB,dy);du[dB]=[]}dA=du[dB]}dA.push(dw)})},unbind:by,replaceWith:function(dv,dx){var du,dw=dv.parentNode;cJ(dv);bj(new bI(dx),function(dy){if(du){dw.insertBefore(dy,du.nextSibling)}else{dw.replaceChild(dy,dv)}du=dy})},children:function(dv){var du=[];bj(dv.childNodes,function(dw){if(dw.nodeType===1){du.push(dw)}});return du},contents:function(du){return du.childNodes||[]},append:function(du,dv){bj(new bI(dv),function(dw){if(du.nodeType===1){du.appendChild(dw)}})},prepend:function(dv,dw){if(dv.nodeType===1){var du=dv.firstChild;bj(new bI(dw),function(dx){if(du){dv.insertBefore(dx,du)}else{dv.appendChild(dx);du=dx}})}},wrap:function(dv,du){du=cB(du)[0];var dw=dv.parentNode;if(dw){dw.replaceChild(du,dv)}du.appendChild(dv)},remove:function(du){cJ(du);var dv=du.parentNode;if(dv){dv.removeChild(du)}},after:function(dv,dx){var du=dv,dw=dv.parentNode;bj(new bI(dx),function(dy){dw.insertBefore(dy,du.nextSibling);du=dy})},addClass:ci,removeClass:aC,toggleClass:function(dv,du,dw){if(bR(dw)){dw=!cG(dv,du)}(dw?ci:aC)(dv,du)},parent:function(du){var dv=du.parentNode;return dv&&dv.nodeType!==11?dv:null},next:function(du){if(du.nextElementSibling){return du.nextElementSibling}var dv=du.nextSibling;while(dv!=null&&dv.nodeType!==1){dv=dv.nextSibling}return dv},find:function(dv,du){return dv.getElementsByTagName(du)},clone:aL,triggerHandler:function(dw,du){var dv=(aU(dw,"events")||{})[du];bj(dv,function(dx){dx.call(dw,null)})}},function(dv,du){bI.prototype[du]=function(dx,dw){var dz;for(var dy=0;dy<this.length;dy++){if(dz==bE){dz=dv(this[dy],dx,dw);if(dz!==bE){dz=cB(dz)}}else{c4(dz,dv(this[dy],dx,dw))}}return dz==bE?this:dz}});function m(dv){var dw=typeof dv,du;if(dw=="object"&&dv!==null){if(typeof(du=dv.$$hashKey)=="function"){du=dv.$$hashKey()}else{if(du===bE){du=dv.$$hashKey=cP()}}}else{du=dv}return dw+":"+du}function w(du){bj(du,this.put,this)}w.prototype={put:function(du,dv){this[m(du)]=dv},get:function(du){return this[m(du)]},remove:function(du){var dv=this[du=m(du)];delete this[du];return dv}};function cb(){}cb.prototype={push:function(du,dv){var dw=this[du=m(du)];if(!dw){this[du]=[dv]}else{dw.push(dv)}},shift:function(du){var dv=this[du=m(du)];if(dv){if(dv.length==1){delete this[du];return dv[0]}else{return dv.shift()}}},peek:function(du){var dv=this[m(du)];if(dv){return dv[0]}}};var n=/^function\s*[^\(]*\(\s*([^\)]*)\)/m;var x=/,/;var cx=/^\s*(_?)(\S+?)\1\s*$/;var u=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function cX(dv){var dx,du,dy,dw;if(typeof dv=="function"){if(!(dx=dv.$inject)){dx=[];du=dv.toString().replace(u,"");dy=du.match(n);bj(dy[1].split(x),function(dz){dz.replace(cx,function(dC,dA,dB){dx.push(dB)})});dv.$inject=dx}}else{if(bl(dv)){dw=dv.length-1;i(dv[dw],"fn");dx=dv.slice(0,dw)}else{i(dv,"fn",true)}}return dx}function ce(dH){var dw={},dG="Provider",dC=[],dA=new w(),dy={$provide:{provider:dB(dJ),factory:dB(dz),service:dB(dK),value:dB(dE),constant:dB(dv),decorator:du}},dL=dF(dy,function(){throw Error("Unknown provider: "+dC.join(" <- "))}),dI={},dD=(dI.$injector=dF(dI,function(dM){var dN=dL.get(dM+dG);return dD.invoke(dN.$get,dN)}));bj(dx(dH),function(dM){dD.invoke(dM||k)});return dD;function dB(dM){return function(dN,dO){if(dt(dN)){bj(dN,cZ(dM))}else{return dM(dN,dO)}}}function dJ(dM,dN){if(G(dN)||bl(dN)){dN=dL.instantiate(dN)}if(!dN.$get){throw Error("Provider "+dM+" must define $get factory method.")}return dy[dM+dG]=dN}function dz(dM,dN){return dJ(dM,{$get:dN})}function dK(dM,dN){return dz(dM,["$injector",function(dO){return dO.instantiate(dN)}])}function dE(dM,dN){return dz(dM,cK(dN))}function dv(dM,dN){dy[dM]=dN;dI[dM]=dN}function du(dN,dO){var dM=dL.get(dN+dG),dP=dM.$get;dM.$get=function(){var dQ=dD.invoke(dP,dM);return dD.invoke(dO,null,{$delegate:dQ})}}function dx(dM){var dN=[];bj(dM,function(dQ){if(dA.get(dQ)){return}dA.put(dQ,true);if(cz(dQ)){var dO=X(dQ);dN=dN.concat(dx(dO.requires)).concat(dO._runBlocks);try{for(var dU=dO._invokeQueue,dP=0,dR=dU.length;dP<dR;dP++){var dV=dU[dP],dT=dV[0]=="$injector"?dL:dL.get(dV[0]);dT[dV[1]].apply(dT,dV[2])}}catch(dS){if(dS.message){dS.message+=" from "+dQ}throw dS}}else{if(G(dQ)){try{dN.push(dL.invoke(dQ))}catch(dS){if(dS.message){dS.message+=" from "+dQ}throw dS}}else{if(bl(dQ)){try{dN.push(dL.invoke(dQ))}catch(dS){if(dS.message){dS.message+=" from "+String(dQ[dQ.length-1])}throw dS}}else{i(dQ,"module")}}}});return dN}function dF(dO,dN){function dQ(dR){if(typeof dR!=="string"){throw Error("Service name expected")}if(dO.hasOwnProperty(dR)){if(dO[dR]===dw){throw Error("Circular dependency: "+dC.join(" <- "))}return dO[dR]}else{try{dC.unshift(dR);dO[dR]=dw;return dO[dR]=dN(dR)}finally{dC.shift()}}}function dP(dV,dR,dY){var dS=[],dX=cX(dV),dW,dU,dT;for(dU=0,dW=dX.length;dU<dW;dU++){dT=dX[dU];dS.push(dY&&dY.hasOwnProperty(dT)?dY[dT]:dQ(dT))}if(!dV.$inject){dV=dV[dW]}switch(dR?-1:dS.length){case 0:return dV();case 1:return dV(dS[0]);case 2:return dV(dS[0],dS[1]);case 3:return dV(dS[0],dS[1],dS[2]);case 4:return dV(dS[0],dS[1],dS[2],dS[3]);case 5:return dV(dS[0],dS[1],dS[2],dS[3],dS[4]);case 6:return dV(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5]);case 7:return dV(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6]);case 8:return dV(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6],dS[7]);case 9:return dV(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6],dS[7],dS[8]);case 10:return dV(dS[0],dS[1],dS[2],dS[3],dS[4],dS[5],dS[6],dS[7],dS[8],dS[9]);default:return dV.apply(dR,dS)}}function dM(dS,dU){var dV=function(){},dR,dT;dV.prototype=(bl(dS)?dS[dS.length-1]:dS).prototype;dR=new dV();dT=dP(dS,dR,dU);return dt(dT)?dT:dR}return{invoke:dP,instantiate:dM,get:dQ,annotate:cX}}}function bF(){var du=true;this.disableAutoScrolling=function(){du=false};this.$get=["$window","$location","$rootScope",function(dB,dC,dx){var dw=dB.document;function dz(dE){var dD=null;bj(dE,function(dF){if(!dD&&ax(dF.nodeName)==="a"){dD=dF}});return dD}function dv(){var dD=dC.hash(),dE;if(!dD){dB.scrollTo(0,0)}else{if((dE=dw.getElementById(dD))){dE.scrollIntoView()}else{if((dE=dz(dw.getElementsByName(dD)))){dE.scrollIntoView()}else{if(dD==="top"){dB.scrollTo(0,0)}}}}}if(du){dx.$watch(function dA(){return dC.hash()},function dy(){dx.$evalAsync(dv)})}return dv}]}function a2(dG,dL,dM,dP){var dK=this,dQ=dL[0],dw=dG.location,dI=dG.history,dx=dG.setTimeout,dy=dG.clearTimeout,dF={};dK.isMock=false;var dS=0;var dR=[];dK.$$completeOutstandingRequest=dD;dK.$$incOutstandingRequestCount=function(){dS++};function dD(dT){try{dT.apply(null,h(arguments,1))}finally{dS--;if(dS===0){while(dR.length){try{dR.pop()()}catch(dU){dM.error(dU)}}}}}dK.notifyWhenNoOutstandingRequests=function(dT){bj(dN,function(dU){dU()});if(dS===0){dT()}else{dR.push(dT)}};var dN=[],dC;dK.addPollFn=function(dT){if(bR(dC)){dJ(100,dx)}dN.push(dT);return dT};function dJ(dU,dV){(function dT(){bj(dN,function(dW){dW()});dC=dV(dT,dU)})()}var dE=dw.href,du=dL.find("base");dK.url=function(dT,dU){if(dT){if(dE==dT){return}dE=dT;if(dP.history){if(dU){dI.replaceState(null,"",dT)}else{dI.pushState(null,"",dT);du.attr("href",du.attr("href"))}}else{if(dU){dw.replace(dT)}else{dw.href=dT}}return dK}else{return dw.href.replace(/%27/g,"'")}};var dz=[],dB=false;function dv(){if(dE==dK.url()){return}dE=dK.url();bj(dz,function(dT){dT(dK.url())})}dK.onUrlChange=function(dT){if(!dB){if(dP.history){cB(dG).bind("popstate",dv)}if(dP.hashchange){cB(dG).bind("hashchange",dv)}else{dK.addPollFn(dv)}dB=true}dz.push(dT);return dT};dK.$$checkUrlChange=dv;dK.baseHref=function(){var dT=du.attr("href");return dT?dT.replace(/^https?\:\/\/[^\/]*/,""):""};var dO={};var dA="";var dH=dK.baseHref();dK.cookies=function(dV,dY){var dZ,dT,dX,dW,dU;if(dV){if(dY===bE){dQ.cookie=escape(dV)+"=;path="+dH+";expires=Thu, 01 Jan 1970 00:00:00 GMT"}else{if(cz(dY)){dZ=(dQ.cookie=escape(dV)+"="+escape(dY)+";path="+dH).length+1;if(dZ>4096){dM.warn("Cookie '"+dV+"' possibly not set or overflowed because it was too large ("+dZ+" > 4096 bytes)!")}}}}else{if(dQ.cookie!==dA){dA=dQ.cookie;dT=dA.split("; ");dO={};for(dW=0;dW<dT.length;dW++){dX=dT[dW];dU=dX.indexOf("=");if(dU>0){dO[unescape(dX.substring(0,dU))]=unescape(dX.substring(dU+1))}}}return dO}};dK.defer=function(dU,dT){var dV;dS++;dV=dx(function(){delete dF[dV];dD(dU)},dT||0);dF[dV]=true;return dV};dK.defer.cancel=function(dT){if(dF[dT]){delete dF[dT];dy(dT);dD(k);return true}return false}}function cT(){this.$get=["$window","$log","$sniffer","$document",function(dx,du,dw,dv){return new a2(dx,dv,du,dw)}]}function dd(){this.$get=function(){var du={};function dv(dE,dG){if(dE in du){throw Error("cacheId "+dE+" taken")}var dF=0,dz=cm({},dG,{id:dE}),dy={},dw=(dG&&dG.capacity)||Number.MAX_VALUE,dx={},dD=null,dB=null;return du[dE]={put:function(dI,dJ){var dH=dx[dI]||(dx[dI]={key:dI});dA(dH);if(bR(dJ)){return}if(!(dI in dy)){dF++}dy[dI]=dJ;if(dF>dw){this.remove(dB.key)}},get:function(dI){var dH=dx[dI];if(!dH){return}dA(dH);return dy[dI]},remove:function(dI){var dH=dx[dI];if(!dH){return}if(dH==dD){dD=dH.p}if(dH==dB){dB=dH.n}dC(dH.n,dH.p);delete dx[dI];delete dy[dI];dF--},removeAll:function(){dy={};dF=0;dx={};dD=dB=null},destroy:function(){dy=null;dz=null;dx=null;delete du[dE]},info:function(){return cm({},dz,{size:dF})}};function dA(dH){if(dH!=dD){if(!dB){dB=dH}else{if(dB==dH){dB=dH.n}}dC(dH.n,dH.p);dC(dH,dD);dD=dH;dD.n=null}}function dC(dH,dI){if(dH!=dI){if(dH){dH.p=dI}if(dI){dI.n=dH}}}}dv.info=function(){var dw={};bj(du,function(dx,dy){dw[dy]=dx.info()});return dw};dv.get=function(dw){return du[dw]};return dv}}function g(){this.$get=["$cacheFactory",function(du){return du("templates")}]}var e="Non-assignable model expression: ";aa.$inject=["$provide"];function aa(dz){var du={},dA="Directive",dx=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,dv=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,dw="Template must have exactly one root element. was: ",dy=/^\s*(https?|ftp|mailto|file):/;this.directive=function dB(dD,dC){if(cz(dD)){j(dC,"directive");if(!du.hasOwnProperty(dD)){du[dD]=[];dz.factory(dD+dA,["$injector","$exceptionHandler",function(dF,dE){var dG=[];bj(du[dD],function(dH){try{var dJ=dF.invoke(dH);if(G(dJ)){dJ={compile:cK(dJ)}}else{if(!dJ.compile&&dJ.link){dJ.compile=cK(dJ.link)}}dJ.priority=dJ.priority||0;dJ.name=dJ.name||dD;dJ.require=dJ.require||(dJ.controller&&dJ.name);dJ.restrict=dJ.restrict||"A";dG.push(dJ)}catch(dI){dE(dI)}});return dG}])}du[dD].push(dC)}else{bj(dD,cZ(dB))}return this};this.urlSanitizationWhitelist=function(dC){if(cQ(dC)){dy=dC;return this}return dy};this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document",function(dX,dP,dO,d3,dM,dG,dD,dQ,d2){var dY=function(d5,d4){this.$$element=d5;this.$attr=d4||{}};dY.prototype={$normalize:cv,$set:function(d9,ea,d6,d8){var d5=aY(this.$$element[0],d9),d7=this.$$observers,d4;if(d5){this.$$element.prop(d9,ea);d8=d5}this[d9]=ea;if(d8){this.$attr[d9]=d8}else{d8=this.$attr[d9];if(!d8){this.$attr[d9]=d8=cl(d9,"-")}}if(q(this.$$element[0])==="A"&&d9==="href"){dV.setAttribute("href",ea);d4=dV.href;if(!d4.match(dy)){this[d9]=ea="unsafe:"+d4}}if(d6!==false){if(ea===null||ea===bE){this.$$element.removeAttr(d8)}else{this.$$element.attr(d8,ea)}}d7&&bj(d7[d9],function(eb){try{eb(ea)}catch(ec){dO(ec)}})},$observe:function(d6,d8){var d5=this,d4=(d5.$$observers||(d5.$$observers={})),d7=(d4[d6]||(d4[d6]=[]));d7.push(d8);dQ.$evalAsync(function(){if(!d7.$$inter){d8(d5[d6])}});return d8}};var dV=d2[0].createElement("a"),dF=dP.startSymbol(),dW=dP.endSymbol(),dT=(dF=="{{"||dW=="}}")?aT:function dT(d4){return d4.replace(/\{\{/g,dF).replace(/}}/g,dW)};return dN;function dN(d8,d7,d5){if(!(d8 instanceof cB)){d8=cB(d8)}bj(d8,function(ea,d9){if(ea.nodeType==3&&ea.nodeValue.match(/\S+/)){d8[d9]=cB(ea).wrap("<span></span>").parent()[0]}});var d6=dS(d8,d7,d8,d5);return function d4(ec,d9){j(ec,"scope");var ee=d9?M.clone.call(d8):d8;for(var ea=0,eb=ee.length;ea<eb;ea++){var ed=ee[ea];if(ed.nodeType==1||ed.nodeType==9){ee.eq(ea).data("$scope",ec)}}dJ(ee,"ng-scope");if(d9){d9(ee,ec)}if(d6){d6(ec,ee,ee)}return ee}}function dL(d4,d5){throw Error("Unsupported '"+d5+"' for '"+d4+"'.")}function dJ(d4,d5){try{d4.addClass(d5)}catch(d6){}}function dS(d4,ee,ed,eb){var d6=[],d8,ea,d5,ec,d9;for(var d7=0;d7<d4.length;d7++){ec=new dY();d5=d0(d4[d7],[],ec,eb);d8=(d5.length)?dK(d5,d4[d7],ec,ee,ed):null;ea=(d8&&d8.terminal||!d4[d7].childNodes||!d4[d7].childNodes.length)?null:dS(d4[d7].childNodes,d8?d8.transclude:ee);d6.push(d8);d6.push(ea);d9=(d9||d8||ea)}return d9?ef:null;function ef(es,ei,eq,ek){var en,eo,eh,ep,el,ej,er,eg;var em=[];for(ej=0,er=ei.length;ej<er;ej++){em.push(ei[ej])}for(ej=0,eg=0,er=d6.length;ej<er;eg++){eh=em[eg];en=d6[ej++];eo=d6[ej++];if(en){if(en.scope){ep=es.$new(dt(en.scope));cB(eh).data("$scope",ep)}else{ep=es}el=en.transclude;if(el||(!ek&&ee)){en(eo,ep,eh,eq,(function(et){return function(eu){var ev=es.$new();ev.$$transcluded=true;return et(ev,eu).bind("$destroy",bW(ev,ev.$destroy))}})(el||ee))}else{en(eo,ep,eh,bE,ek)}}else{if(eo){eo(es,eh.childNodes,bE,ek)}}}}}function d0(d5,d6,ej,eg){var ea=d5.nodeType,d9=ej.$attr,eb,ef;switch(ea){case 1:dR(d6,cv(q(d5).toLowerCase()),"E",eg);for(var ee,d4,ei,eh,d8=d5.attributes,d7=0,ec=d8&&d8.length;d7<ec;d7++){ee=d8[d7];if(ee.specified){d4=ee.name;ei=cv(d4.toLowerCase());d9[ei]=d4;ej[ei]=eh=aD((aA&&d4=="href")?decodeURIComponent(d5.getAttribute(d4,2)):ee.value);if(aY(d5,ei)){ej[ei]=true}dH(d5,d6,eh,ei);dR(d6,ei,"A",eg)}}ef=d5.className;if(cz(ef)&&ef!==""){while(eb=dv.exec(ef)){ei=cv(eb[2]);if(dR(d6,ei,"C",eg)){ej[ei]=aD(eb[3])}ef=ef.substr(eb.index+eb[0].length)}}break;case 3:dZ(d6,d5.nodeValue);break;case 8:try{eb=dx.exec(d5.nodeValue);if(eb){ei=cv(eb[1]);if(dR(d6,ei,"M",eg)){ej[ei]=aD(eb[2])}}}catch(ed){}break}d6.sort(dE);return d6}function dK(eb,eh,ee,d5,d8){var d7=-Number.MAX_VALUE,ek=[],el=[],ed=null,ea=null,ej=null,ei=ee.$$element=cB(eh),ef,er,d9,em,d4=d5,ec,d6,en;for(var eq=0,eg=eb.length;eq<eg;eq++){ef=eb[eq];d9=bE;if(d7>ef.priority){break}if(en=ef.scope){dI("isolated scope",ea,ef,ei);if(dt(en)){dJ(ei,"ng-isolate-scope");ea=ef}dJ(ei,"ng-scope");ed=ed||ef}er=ef.name;if(en=ef.controller){ec=ec||{};dI("'"+er+"' controller",ec[er],ef,ei);ec[er]=ef}if(en=ef.transclude){dI("transclusion",em,ef,ei);em=ef;d7=ef.priority;if(en=="element"){d9=cB(eh);ei=ee.$$element=cB(r.createComment(" "+er+": "+ee[er]+" "));eh=ei[0];d1(d8,cB(d9[0]),eh);d4=dN(d9,d5,d7)}else{d9=cB(aL(eh)).contents();ei.html("");d4=dN(d9,d5)}}if((en=ef.template)){dI("template",ej,ef,ei);ej=ef;en=dT(en);if(ef.replace){d9=cB("<div>"+aD(en)+"</div>").contents();eh=d9[0];if(d9.length!=1||eh.nodeType!==1){throw new Error(dw+en)}d1(d8,ei,eh);var eu={$attr:{}};eb=eb.concat(d0(eh,eb.splice(eq+1,eb.length-(eq+1)),eu));dU(ee,eu);eg=eb.length}else{ei.html(en)}}if(ef.templateUrl){dI("template",ej,ef,ei);ej=ef;es=dC(eb.splice(eq,eb.length-eq),es,ei,ee,d8,ef.replace,d4);eg=eb.length}else{if(ef.compile){try{d6=ef.compile(ei,ee,d4);if(G(d6)){ep(null,d6)}else{if(d6){ep(d6.pre,d6.post)}}}catch(et){dO(et,R(ei))}}}if(ef.terminal){es.terminal=true;d7=Math.max(d7,ef.priority)}}es.scope=ed&&ed.scope;es.transclude=em&&d4;return es;function ep(ew,ev){if(ew){ew.require=ef.require;ek.push(ew)}if(ev){ev.require=ef.require;el.push(ev)}}function eo(ey,ev){var ez,ew="data",ex=false;if(cz(ey)){while((ez=ey.charAt(0))=="^"||ez=="?"){ey=ey.substr(1);if(ez=="^"){ew="inheritedData"}ex=ex||ez=="?"}ez=ev[ew]("$"+ey+"Controller");if(!ez&&!ex){throw Error("No controller: "+ey)}return ez}else{if(bl(ey)){ez=[];bj(ey,function(eA){ez.push(eo(eA,ev))})}}return ez}function es(eD,eI,eB,eE,ew){var eF,eH,ex,eG,ev,ey;if(eh===eB){eF=ee}else{eF=bD(ee,new dY(cB(eB),ee.$attr))}eH=eF.$$element;if(ea){var eA=/^\s*([@=&])\s*(\w*)\s*$/;var eC=eI.$parent||eI;bj(ea.scope,function(eO,eK){var eM=eO.match(eA)||[],eP=eM[2]||eK,eN=eM[1],eR,eL,eQ;eI.$$isolateBindings[eK]=eN+eP;switch(eN){case"@":eF.$observe(eP,function(eS){eI[eK]=eS});eF.$$observers[eP].$$scope=eC;break;case"=":eL=dG(eF[eP]);eQ=eL.assign||function(){eR=eI[eK]=eL(eC);throw Error(e+eF[eP]+" (directive: "+ea.name+")")};eR=eI[eK]=eL(eC);eI.$watch(function eJ(){var eS=eL(eC);if(eS!==eI[eK]){if(eS!==eR){eR=eI[eK]=eS}else{eQ(eC,eS=eR=eI[eK])}}return eS});break;case"&":eL=dG(eF[eP]);eI[eK]=function(eS){return eL(eC,eS)};break;default:throw Error("Invalid isolate scope definition for directive "+ea.name+": "+eO)}})}if(ec){bj(ec,function(eK){var eJ={$scope:eI,$element:eH,$attrs:eF,$transclude:ew};ey=eK.controller;if(ey=="@"){ey=eF[eK.name]}eH.data("$"+eK.name+"Controller",dD(ey,eJ))})}for(ex=0,eG=ek.length;ex<eG;ex++){try{ev=ek[ex];ev(eI,eH,eF,ev.require&&eo(ev.require,eH))}catch(ez){dO(ez,R(eH))}}eD&&eD(eI,eB.childNodes,bE,ew);for(ex=0,eG=el.length;ex<eG;ex++){try{ev=el[ex];ev(eI,eH,eF,ev.require&&eo(ev.require,eH))}catch(ez){dO(ez,R(eH))}}}}function dR(d9,d4,ec,eb){var d7=false;if(du.hasOwnProperty(d4)){for(var ea,d5=dX.get(d4+dA),d6=0,ed=d5.length;d6<ed;d6++){try{ea=d5[d6];if((eb===bE||eb>ea.priority)&&ea.restrict.indexOf(ec)!=-1){d9.push(ea);d7=true}}catch(d8){dO(d8)}}}return d7}function dU(d8,d7){var d5=d7.$attr,d6=d8.$attr,d4=d8.$$element;bj(d8,function(ea,d9){if(d9.charAt(0)!="$"){if(d7[d9]){ea+=(d9==="style"?";":" ")+d7[d9]}d8.$set(d9,ea,true,d5[d9])}});bj(d7,function(ea,d9){if(d9=="class"){dJ(d4,ea);d8["class"]=(d8["class"]?d8["class"]+" ":"")+ea}else{if(d9=="style"){d4.attr("style",d4.attr("style")+";"+ea)}else{if(d9.charAt(0)!="$"&&!d8.hasOwnProperty(d9)){d8[d9]=ea;d6[d9]=d5[d9]}}}})}function dC(d8,d4,ec,d7,eg,d5,ea){var ed=[],eh,d6,d9=ec[0],eb=d8.shift(),ef=cm({},eb,{controller:null,templateUrl:null,transclude:null,scope:null});ec.html("");d3.get(eb.templateUrl,{cache:dM}).success(function(en){var eo,el,ek;en=dT(en);if(d5){ek=cB("<div>"+aD(en)+"</div>").contents();eo=ek[0];if(ek.length!=1||eo.nodeType!==1){throw new Error(dw+en)}el={$attr:{}};d1(eg,ec,eo);d0(eo,d8,el);dU(d7,el)}else{eo=d9;ec.html(en)}d8.unshift(ef);eh=dK(d8,eo,d7,ea);d6=dS(ec[0].childNodes,ea);while(ed.length){var ej=ed.pop(),ei=ed.pop(),ep=ed.pop(),eq=ed.pop(),em=eo;if(ep!==d9){em=aL(eo);d1(ei,cB(ep),em)}eh(function(){d4(d6,eq,em,eg,ej)},eq,em,eg,ej)}ed=null}).error(function(ei,ek,el,ej){throw Error("Failed to load template: "+ej.url)});return function ee(ek,el,em,ei,ej){if(ed){ed.push(el);ed.push(em);ed.push(ei);ed.push(ej)}else{eh(function(){d4(d6,el,em,ei,ej)},el,em,ei,ej)}}}function dE(d5,d4){return d4.priority-d5.priority}function dI(d6,d5,d7,d4){if(d5){throw Error("Multiple directives ["+d5.name+", "+d7.name+"] asking for "+d6+" on: "+R(d4))}}function dZ(d6,d7){var d5=dP(d7,true);if(d5){d6.push({priority:0,compile:cK(function d4(ea,eb){var d9=eb.parent(),ec=d9.data("$binding")||[];ec.push(d5);dJ(d9.data("$binding",ec),"ng-binding");ea.$watch(d5,function d8(ed){eb[0].nodeValue=ed})})})}}function dH(d7,d9,d8,d5){var d4=dP(d8,true);if(!d4){return}d9.push({priority:100,compile:cK(function d6(ee,ed,ea){var ec=(ea.$$observers||(ea.$$observers={}));if(d5==="class"){d4=dP(ea[d5],true)}ea[d5]=bE;(ec[d5]||(ec[d5]=[])).$$inter=true;(ea.$$observers&&ea.$$observers[d5].$$scope||ee).$watch(d4,function eb(ef){ea.$set(d5,ef)})})})}function d1(d9,d4,d6){var ea=d4[0],d8=ea.parentNode,d5,d7;if(d9){for(d5=0,d7=d9.length;d5<d7;d5++){if(d9[d5]==ea){d9[d5]=d6;break}}}if(d8){d8.replaceChild(d6,ea)}d6[cB.expando]=ea[cB.expando];d4[0]=d6}}]}var c0=/^(x[\:\-_]|data[\:\-_])/i;function cv(du){return L(du.replace(c0,""))}function a1(dx,dv,du,dw){}function ar(dy,dw,dx,du,dv){}function ah(){var du={};this.register=function(dv,dw){if(dt(dv)){cm(du,dv)}else{du[dv]=dw}};this.$get=["$injector","$window",function(dv,dw){return function(dy,dz){if(cz(dy)){var dx=dy;dy=du.hasOwnProperty(dx)?du[dx]:b6(dz.$scope,dx,true)||b6(dw,dx,true);i(dy,dx,true)}return dv.instantiate(dy,dz)}}]}function dn(){this.$get=["$window",function(du){return cB(du.document)}]}function ds(){this.$get=["$log",function(du){return function(dv,dw){du.error.apply(du,arguments)}}]}function dc(){var dv="{{";var du="}}";this.startSymbol=function(dw){if(dw){dv=dw;return this}else{return dv}};this.endSymbol=function(dw){if(dw){du=dw;return this}else{return du}};this.$get=["$parse",function(dx){var dy=dv.length,dw=du.length;function dz(dK,dB){var dJ,dE,dF=0,dD=[],dA=dK.length,dG=false,dH,dC,dI=[];while(dF<dA){if(((dJ=dK.indexOf(dv,dF))!=-1)&&((dE=dK.indexOf(du,dJ+dy))!=-1)){(dF!=dJ)&&dD.push(dK.substring(dF,dJ));dD.push(dH=dx(dC=dK.substring(dJ+dy,dE)));dH.exp=dC;dF=dE+dw;dG=true}else{(dF!=dA)&&dD.push(dK.substring(dF));dF=dA}}if(!(dA=dD.length)){dD.push("");dA=1}if(!dB||dG){dI.length=dA;dH=function(dN){for(var dM=0,dO=dA,dL;dM<dO;dM++){if(typeof(dL=dD[dM])=="function"){dL=dL(dN);if(dL==null||dL==bE){dL=""}else{if(typeof dL!="string"){dL=cD(dL)}}}dI[dM]=dL}return dI.join("")};dH.exp=dK;dH.parts=dD;return dH}}dz.startSymbol=function(){return dv};dz.endSymbol=function(){return du};return dz}]}var N=/^([^:]+):\/\/(\w+:{0,1}\w*@)?(\{?[\w\.-]*\}?)(:([0-9]+))?(\/[^\?#]*)?(\?([^#]*))?(#(.*))?$/,af=/^([^\?#]*)?(\?([^#]*))?(#(.*))?$/,B=af,c2={http:80,https:443,ftp:21};function cq(dw){var du=dw.split("/"),dv=du.length;while(dv--){du[dv]=aJ(du[dv])}return du.join("/")}function dj(du){return du.split("#")[0]}function ay(dv,dw){var du=N.exec(dv);du={protocol:du[1],host:du[3],port:df(du[5])||c2[du[1]]||null,path:du[6]||"/",search:du[8],hash:du[10]};if(dw){dw.$$protocol=du.protocol;dw.$$host=du.host;dw.$$port=du.port}return du}function aR(dw,dv,du){return dw+"://"+dv+(du==c2[dw]?"":":"+du)}function b9(du){return du.substr(0,du.lastIndexOf("/"))}function dl(dw,dx,du){var dv=ay(dw);if(decodeURIComponent(dv.path)!=dx||bR(dv.hash)||dv.hash.indexOf(du)!==0){return dw}else{return aR(dv.protocol,dv.host,dv.port)+b9(dx)+dv.hash.substr(du.length)}}function bt(dw,dB,du){var dv=ay(dw);if(decodeURIComponent(dv.path)==dB&&!bR(dv.hash)&&dv.hash.indexOf(du)===0){return dw}else{var dx=dv.search&&"?"+dv.search||"",dA=dv.hash&&"#"+dv.hash||"",dy=b9(dB),dz=dv.path.substr(dy.length);if(dv.path.indexOf(dy)!==0){throw Error('Invalid url "'+dw+'", missing path prefix "'+dy+'" !')}return aR(dv.protocol,dv.host,dv.port)+dB+"#"+du+dz+dx+dA}}function br(du,dv,dw){dv=dv||"";this.$$parse=function(dy){var dx=ay(dy,this);if(dx.path.indexOf(dv)!==0){throw Error('Invalid url "'+dy+'", missing path prefix "'+dv+'" !')}this.$$path=decodeURIComponent(dx.path.substr(dv.length));this.$$search=an(dx.search);this.$$hash=dx.hash&&decodeURIComponent(dx.hash)||"";this.$$compose()};this.$$compose=function(){var dx=T(this.$$search),dy=this.$$hash?"#"+aJ(this.$$hash):"";this.$$url=cq(this.$$path)+(dx?"?"+dx:"")+dy;this.$$absUrl=aR(this.$$protocol,this.$$host,this.$$port)+dv+this.$$url};this.$$rewriteAppUrl=function(dx){if(dx.indexOf(dw)==0){return dx}};this.$$parse(du)}function c1(dv,du,dw){var dx;this.$$parse=function(dz){var dy=ay(dz,this);if(dy.hash&&dy.hash.indexOf(du)!==0){throw Error('Invalid url "'+dz+'", missing hash prefix "'+du+'" !')}dx=dy.path+(dy.search?"?"+dy.search:"");dy=B.exec((dy.hash||"").substr(du.length));if(dy[1]){this.$$path=(dy[1].charAt(0)=="/"?"":"/")+decodeURIComponent(dy[1])}else{this.$$path=""}this.$$search=an(dy[3]);this.$$hash=dy[5]&&decodeURIComponent(dy[5])||"";this.$$compose()};this.$$compose=function(){var dy=T(this.$$search),dz=this.$$hash?"#"+aJ(this.$$hash):"";this.$$url=cq(this.$$path)+(dy?"?"+dy:"")+dz;this.$$absUrl=aR(this.$$protocol,this.$$host,this.$$port)+dx+(this.$$url?"#"+du+this.$$url:"")};this.$$rewriteAppUrl=function(dy){if(dy.indexOf(dw)==0){return dy}};this.$$parse(dv)}br.prototype={$$replace:false,absUrl:A("$$absUrl"),url:function(dv,dw){if(bR(dv)){return this.$$url}var du=af.exec(dv);if(du[1]){this.path(decodeURIComponent(du[1]))}if(du[2]||du[1]){this.search(du[3]||"")}this.hash(du[5]||"",dw);return this},protocol:A("$$protocol"),host:A("$$host"),port:A("$$port"),path:d("$$path",function(du){return du.charAt(0)=="/"?du:"/"+du}),search:function(du,dv){if(bR(du)){return this.$$search}if(cQ(dv)){if(dv===null){delete this.$$search[du]}else{this.$$search[du]=dv}}else{this.$$search=cz(du)?an(du):du}this.$$compose();return this},hash:d("$$hash",aT),replace:function(){this.$$replace=true;return this}};c1.prototype=ck(br.prototype);function b2(dv,du,dx,dw){c1.apply(this,arguments);this.$$rewriteAppUrl=function(dy){if(dy.indexOf(dx)==0){return dx+dw+"#"+du+dy.substr(dx.length)}}}b2.prototype=ck(c1.prototype);function A(du){return function(){return this[du]}}function d(dv,du){return function(dw){if(bR(dw)){return this[dv]}this[dv]=du(dw);this.$$compose();return this}}function bT(){var du="",dv=false;this.hashPrefix=function(dw){if(cQ(dw)){du=dw;return this}else{return du}};this.html5Mode=function(dw){if(cQ(dw)){dv=dw;return this}else{return dv}};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(dF,dI,dw,dG){var dB,dH,dx,dA=dI.url(),dz=ay(dA),dC;if(dv){dH=dI.baseHref()||"/";dx=b9(dH);dC=aR(dz.protocol,dz.host,dz.port)+dx+"/";if(dw.history){dB=new br(dl(dA,dH,du),dx,dC)}else{dB=new b2(bt(dA,dH,du),du,dC,dH.substr(dx.length+1))}}else{dC=aR(dz.protocol,dz.host,dz.port)+(dz.path||"")+(dz.search?("?"+dz.search):"")+"#"+du+"/";dB=new c1(dA,du,dC)}dG.bind("click",function(dJ){if(dJ.ctrlKey||dJ.metaKey||dJ.which==2){return}var dM=cB(dJ.target);while(ax(dM[0].nodeName)!=="a"){if(dM[0]===dG[0]||!(dM=dM.parent())[0]){return}}var dK=dM.prop("href"),dL=dB.$$rewriteAppUrl(dK);if(dK&&!dM.attr("target")&&dL){dB.$$parse(dL);dF.$apply();dJ.preventDefault();cd.angular["ff-684208-preventDefault"]=true}});if(dB.absUrl()!=dA){dI.url(dB.absUrl(),true)}dI.onUrlChange(function(dJ){if(dB.absUrl()!=dJ){dF.$evalAsync(function(){var dK=dB.absUrl();dB.$$parse(dJ);dy(dK)});if(!dF.$$phase){dF.$digest()}}});var dE=0;dF.$watch(function dD(){var dK=dI.url();var dJ=dB.$$replace;if(!dE||dK!=dB.absUrl()){dE++;dF.$evalAsync(function(){if(dF.$broadcast("$locationChangeStart",dB.absUrl(),dK).defaultPrevented){dB.$$parse(dK)}else{dI.url(dB.absUrl(),dJ);dy(dK)}})}dB.$$replace=false;return dE});return dB;function dy(dJ){dF.$broadcast("$locationChangeSuccess",dB.absUrl(),dJ)}}]}function db(){this.$get=["$window",function(dw){return{log:dv("log"),warn:dv("warn"),info:dv("info"),error:dv("error")};function du(dx){if(dx instanceof Error){if(dx.stack){dx=(dx.message&&dx.stack.indexOf(dx.message)===-1)?"Error: "+dx.message+"\n"+dx.stack:dx.stack}else{if(dx.sourceURL){dx=dx.message+"\n"+dx.sourceURL+":"+dx.line}}}return dx}function dv(dy){var dx=dw.console||{},dz=dx[dy]||dx.log||k;if(dz.apply){return function(){var dA=[];bj(arguments,function(dB){dA.push(du(dB))});return dz.apply(dx,dA)}}return function(dB,dA){dz(dB,dA)}}}]}var P={"null":function(){return null},"true":function(){return true},"false":function(){return false},undefined:k,"+":function(dw,dx,dv,du){dv=dv(dw,dx);du=du(dw,dx);if(cQ(dv)){if(cQ(du)){return dv+du}return dv}return cQ(du)?du:bE},"-":function(dw,dx,dv,du){dv=dv(dw,dx);du=du(dw,dx);return(cQ(dv)?dv:0)-(cQ(du)?du:0)},"*":function(dw,dx,dv,du){return dv(dw,dx)*du(dw,dx)},"/":function(dw,dx,dv,du){return dv(dw,dx)/du(dw,dx)},"%":function(dw,dx,dv,du){return dv(dw,dx)%du(dw,dx)},"^":function(dw,dx,dv,du){return dv(dw,dx)^du(dw,dx)},"=":k,"==":function(dw,dx,dv,du){return dv(dw,dx)==du(dw,dx)},"!=":function(dw,dx,dv,du){return dv(dw,dx)!=du(dw,dx)},"<":function(dw,dx,dv,du){return dv(dw,dx)<du(dw,dx)},">":function(dw,dx,dv,du){return dv(dw,dx)>du(dw,dx)},"<=":function(dw,dx,dv,du){return dv(dw,dx)<=du(dw,dx)},">=":function(dw,dx,dv,du){return dv(dw,dx)>=du(dw,dx)},"&&":function(dw,dx,dv,du){return dv(dw,dx)&&du(dw,dx)},"||":function(dw,dx,dv,du){return dv(dw,dx)||du(dw,dx)},"&":function(dw,dx,dv,du){return dv(dw,dx)&du(dw,dx)},"|":function(dw,dx,dv,du){return du(dw,dx)(dw,dx,dv(dw,dx))},"!":function(dv,dw,du){return !du(dv,dw)}};var ad={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};function bB(dG,dH){var dJ=[],dB,dA=0,dN=[],dE,dP=":";while(dA<dG.length){dE=dG.charAt(dA);if(dz("\"'")){dv(dE)}else{if(dI(dE)||dz(".")&&dI(dK())){dw()}else{if(dL(dE)){dF();if(dD("{,")&&dN[0]=="{"&&(dB=dJ[dJ.length-1])){dB.json=dB.text.indexOf(".")==-1}}else{if(dz("(){}[].,;:")){dJ.push({index:dA,text:dE,json:(dD(":[,")&&dz("{["))||dz("}]:,")});if(dz("{[")){dN.unshift(dE)}if(dz("}]")){dN.shift()}dA++}else{if(dy(dE)){dA++;continue}else{var du=dE+dK(),dC=P[dE],dM=P[du];if(dM){dJ.push({index:dA,text:du,fn:dM});dA+=2}else{if(dC){dJ.push({index:dA,text:dE,fn:dC,json:dD("[,:")&&dz("+-")});dA+=1}else{dO("Unexpected next character ",dA,dA+1)}}}}}}}dP=dE}return dJ;function dz(dQ){return dQ.indexOf(dE)!=-1}function dD(dQ){return dQ.indexOf(dP)!=-1}function dK(){return dA+1<dG.length?dG.charAt(dA+1):false}function dI(dQ){return"0"<=dQ&&dQ<="9"}function dy(dQ){return dQ==" "||dQ=="\r"||dQ=="\t"||dQ=="\n"||dQ=="\v"||dQ=="\u00A0"}function dL(dQ){return"a"<=dQ&&dQ<="z"||"A"<=dQ&&dQ<="Z"||"_"==dQ||dQ=="$"}function dx(dQ){return dQ=="-"||dQ=="+"||dI(dQ)}function dO(dR,dS,dQ){dQ=dQ||dA;throw Error("Lexer Error: "+dR+" at column"+(cQ(dS)?"s "+dS+"-"+dA+" ["+dG.substring(dS,dQ)+"]":" "+dQ)+" in expression ["+dG+"].")}function dw(){var dS="";var dT=dA;while(dA<dG.length){var dR=ax(dG.charAt(dA));if(dR=="."||dI(dR)){dS+=dR}else{var dQ=dK();if(dR=="e"&&dx(dQ)){dS+=dR}else{if(dx(dR)&&dQ&&dI(dQ)&&dS.charAt(dS.length-1)=="e"){dS+=dR}else{if(dx(dR)&&(!dQ||!dI(dQ))&&dS.charAt(dS.length-1)=="e"){dO("Invalid exponent")}else{break}}}}dA++}dS=1*dS;dJ.push({index:dT,text:dS,json:true,fn:function(){return dS}})}function dF(){var dU="",dX=dA,dW,dV,dR;while(dA<dG.length){var dT=dG.charAt(dA);if(dT=="."||dL(dT)||dI(dT)){if(dT=="."){dW=dA}dU+=dT}else{break}dA++}if(dW){dV=dA;while(dV<dG.length){var dT=dG.charAt(dV);if(dT=="("){dR=dU.substr(dW-dX+1);dU=dU.substr(0,dW-dX);dA=dV;break}if(dy(dT)){dV++}else{break}}}var dS={index:dX,text:dU};if(P.hasOwnProperty(dU)){dS.fn=dS.json=P[dU]}else{var dQ=cF(dU,dH);dS.fn=cm(function(dY,dZ){return(dQ(dY,dZ))},{assign:function(dY,dZ){return cu(dY,dU,dZ)}})}dJ.push(dS);if(dR){dJ.push({index:dW,text:".",json:false});dJ.push({index:dW+1,text:dR,json:false})}}function dv(dQ){var dX=dA;dA++;var dR="";var dS=dQ;var dV=false;while(dA<dG.length){var dT=dG.charAt(dA);dS+=dT;if(dV){if(dT=="u"){var dU=dG.substring(dA+1,dA+5);if(!dU.match(/[\da-f]{4}/i)){dO("Invalid unicode escape [\\u"+dU+"]")}dA+=4;dR+=String.fromCharCode(parseInt(dU,16))}else{var dW=ad[dT];if(dW){dR+=dW}else{dR+=dT}}dV=false}else{if(dT=="\\"){dV=true}else{if(dT==dQ){dA++;dJ.push({index:dX,text:dS,string:dR,json:true,fn:function(){return dR}});return}else{dR+=dT}}}dA++}dO("Unterminated quote",dX)}}function Y(dP,d0,dX,d1){var dG=cK(0),dZ,dT=bB(dP,d1),dH=d2,dN=dw,dV=d3,dI=dR,dC=dK;if(d0){dH=dW;dN=dV=dI=dC=function(){dE("is not valid json",{text:dP,index:0})};dZ=dJ()}else{dZ=dy()}if(dT.length!==0){dE("is an unexpected token",dT[0])}return dZ;function dE(d6,d5){throw Error("Syntax Error: Token '"+d5.text+"' "+d6+" at column "+(d5.index+1)+" of the expression ["+dP+"] starting at ["+dP.substring(d5.index)+"].")}function dz(){if(dT.length===0){throw Error("Unexpected end of expression: "+dP)}return dT[0]}function dB(ea,d9,d8,d7){if(dT.length>0){var d6=dT[0];var d5=d6.text;if(d5==ea||d5==d9||d5==d8||d5==d7||(!ea&&!d9&&!d8&&!d7)){return d6}}return false}function dv(d9,d8,d7,d6){var d5=dB(d9,d8,d7,d6);if(d5){if(d0&&!d5.json){dE("is not valid json",d5)}dT.shift();return d5}return false}function dM(d5){if(!dv(d5)){dE("is unexpected, expecting ["+d5+"]",dB())}}function dF(d6,d5){return function(d7,d8){return d6(d7,d8,d5)}}function d4(d7,d6,d5){return function(d8,d9){return d6(d8,d9,d7,d5)}}function dy(){var d5=[];while(true){if(dT.length>0&&!dB("}",")",";","]")){d5.push(dC())}if(!dv(";")){return d5.length==1?d5[0]:function(d6,ea){var d9;for(var d7=0;d7<d5.length;d7++){var d8=d5[d7];if(d8){d9=d8(d6,ea)}}return d9}}}}function dK(){var d6=dO();var d5;while(true){if((d5=dv("|"))){d6=d4(d6,d5.fn,dU())}else{return d6}}}function dU(){var d6=dv();var d7=dX(d6.text);var d5=[];while(true){if((d6=dv(":"))){d5.push(dO())}else{var d8=function(ea,ed,d9){var eb=[d9];for(var ec=0;ec<d5.length;ec++){eb.push(d5[ec](ea,ed))}return d7.apply(ea,eb)};return function(){return d8}}}}function dO(){return dH()}function d2(){var d7=dW();var d6;var d5;if((d5=dv("="))){if(!d7.assign){dE("implies assignment but ["+dP.substring(0,d5.index)+"] can not be assigned to",d5)}d6=dW();return function(d8,d9){return d7.assign(d8,d6(d8,d9),d9)}}else{return d7}}function dW(){var d6=dD();var d5;while(true){if((d5=dv("||"))){d6=d4(d6,d5.fn,dD())}else{return d6}}}function dD(){var d6=dx();var d5;if((d5=dv("&&"))){d6=d4(d6,d5.fn,dD())}return d6}function dx(){var d6=dQ();var d5;if((d5=dv("==","!="))){d6=d4(d6,d5.fn,dx())}return d6}function dQ(){var d6=dS();var d5;if((d5=dv("<",">","<=",">="))){d6=d4(d6,d5.fn,dQ())}return d6}function dS(){var d6=du();var d5;while((d5=dv("+","-"))){d6=d4(d6,d5.fn,du())}return d6}function du(){var d6=dL();var d5;while((d5=dv("*","/","%"))){d6=d4(d6,d5.fn,dL())}return d6}function dL(){var d5;if(dv("+")){return dJ()}else{if((d5=dv("-"))){return d4(dG,d5.fn,dL())}else{if((d5=dv("!"))){return dF(d5.fn,dL())}else{return dJ()}}}}function dJ(){var d8;if(dv("(")){d8=dC();dM(")")}else{if(dv("[")){d8=dA()}else{if(dv("{")){d8=dY()}else{var d6=dv();d8=d6.fn;if(!d8){dE("not a primary expression",d6)}}}}var d7,d5;while((d7=dv("(","[","."))){if(d7.text==="("){d8=dN(d8,d5);d5=null}else{if(d7.text==="["){d5=d8;d8=dI(d8)}else{if(d7.text==="."){d5=d8;d8=dV(d8)}else{dE("IMPOSSIBLE")}}}}return d8}function d3(d6){var d7=dv().text;var d5=cF(d7,d1);return cm(function(d8,d9){return d5(d6(d8,d9),d9)},{assign:function(d8,d9,ea){return cu(d6(d8,ea),d7,d9)}})}function dR(d6){var d5=dO();dM("]");return cm(function(d8,eb){var ec=d6(d8,eb),d9=d5(d8,eb),d7,ea;if(!ec){return bE}d7=ec[d9];if(d7&&d7.then){ea=d7;if(!("$$v" in d7)){ea.$$v=bE;ea.then(function(ed){ea.$$v=ed})}d7=d7.$$v}return d7},{assign:function(d7,d8,d9){return d6(d7,d9)[d5(d7,d9)]=d8}})}function dw(d7,d5){var d6=[];if(dz().text!=")"){do{d6.push(dO())}while(dv(","))}dM(")");return function(d9,ed){var ea=[],ec=d5?d5(d9,ed):d9;for(var eb=0;eb<d6.length;eb++){ea.push(d6[eb](d9,ed))}var d8=d7(d9,ed)||k;return d8.apply?d8.apply(ec,ea):d8(ea[0],ea[1],ea[2],ea[3],ea[4])}}function dA(){var d5=[];if(dz().text!="]"){do{d5.push(dO())}while(dv(","))}dM("]");return function(d6,d8){var d9=[];for(var d7=0;d7<d5.length;d7++){d9.push(d5[d7](d6,d8))}return d9}}function dY(){var d5=[];if(dz().text!="}"){do{var d7=dv(),d6=d7.string||d7.text;dM(":");var d8=dO();d5.push({key:d6,value:d8})}while(dv(","))}dM("}");return function(d9,ee){var ea={};for(var eb=0;eb<d5.length;eb++){var ed=d5[eb];var ec=ed.value(d9,ee);ea[ed.key]=ec}return ea}}}function cu(dz,dy,dA){var dx=dy.split(".");for(var dw=0;dx.length>1;dw++){var dv=dx.shift();var du=dz[dv];if(!du){du={};dz[dv]=du}dz=du}dz[dx.shift()]=dA;return dA}function b6(dB,dA,dz){if(!dA){return dB}var dy=dA.split(".");var dx;var dv=dB;var du=dy.length;for(var dw=0;dw<du;dw++){dx=dy[dw];if(dB){dB=(dv=dB)[dx]}}if(!dz&&G(dB)){return bW(dv,dB)}return dB}var c6={};function bn(dy,dx,dw,dv,du){return function(dA,dB){var dz=(dB&&dB.hasOwnProperty(dy))?dB:dA,dC;if(dz===null||dz===bE){return dz}dz=dz[dy];if(dz&&dz.then){if(!("$$v" in dz)){dC=dz;dC.$$v=bE;dC.then(function(dD){dC.$$v=dD})}dz=dz.$$v}if(!dx||dz===null||dz===bE){return dz}dz=dz[dx];if(dz&&dz.then){if(!("$$v" in dz)){dC=dz;dC.$$v=bE;dC.then(function(dD){dC.$$v=dD})}dz=dz.$$v}if(!dw||dz===null||dz===bE){return dz}dz=dz[dw];if(dz&&dz.then){if(!("$$v" in dz)){dC=dz;dC.$$v=bE;dC.then(function(dD){dC.$$v=dD})}dz=dz.$$v}if(!dv||dz===null||dz===bE){return dz}dz=dz[dv];if(dz&&dz.then){if(!("$$v" in dz)){dC=dz;dC.$$v=bE;dC.then(function(dD){dC.$$v=dD})}dz=dz.$$v}if(!du||dz===null||dz===bE){return dz}dz=dz[du];if(dz&&dz.then){if(!("$$v" in dz)){dC=dz;dC.$$v=bE;dC.then(function(dD){dC.$$v=dD})}dz=dz.$$v}return dz}}function cF(dz,dx){if(c6.hasOwnProperty(dz)){return c6[dz]}var dy=dz.split("."),dw=dy.length,du;if(dx){du=(dw<6)?bn(dy[0],dy[1],dy[2],dy[3],dy[4]):function(dB,dC){var dA=0,dD;do{dD=bn(dy[dA++],dy[dA++],dy[dA++],dy[dA++],dy[dA++])(dB,dC);dC=bE;dB=dD}while(dA<dw);return dD}}else{var dv="var l, fn, p;\n";bj(dy,function(dB,dA){dv+="if(s === null || s === undefined) return s;\nl=s;\ns="+(dA?"s":'((k&&k.hasOwnProperty("'+dB+'"))?k:s)')+'["'+dB+'"];\nif (s && s.then) {\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=v;});\n}\n s=s.$$v\n}\n'});dv+="return s;";du=Function("s","k",dv);du.toString=function(){return dv}}return c6[dz]=du}function bV(){var du={};this.$get=["$filter","$sniffer",function(dv,dw){return function(dx){switch(typeof dx){case"string":return du.hasOwnProperty(dx)?du[dx]:du[dx]=Y(dx,false,dv,dw.csp);case"function":return dx;default:return k}}}]}function D(){this.$get=["$rootScope","$exceptionHandler",function(du,dv){return bZ(function(dw){du.$evalAsync(dw)},dv)}]}function bZ(dx,dz){var du=function(){var dF=[],dE,dD;dD={resolve:function(dH){if(dF){var dG=dF;dF=bE;dE=dw(dH);if(dG.length){dx(function(){var dK;for(var dI=0,dJ=dG.length;dI<dJ;dI++){dK=dG[dI];dE.then(dK[0],dK[1])}})}}},reject:function(dG){dD.resolve(dC(dG))},promise:{then:function(dK,dH){var dG=du();var dJ=function(dL){try{dG.resolve((dK||dv)(dL))}catch(dM){dz(dM);dG.reject(dM)}};var dI=function(dM){try{dG.resolve((dH||dA)(dM))}catch(dL){dz(dL);dG.reject(dL)}};if(dF){dF.push([dJ,dI])}else{dE.then(dJ,dI)}return dG.promise}}};return dD};var dw=function(dD){if(dD&&dD.then){return dD}return{then:function(dF){var dE=du();dx(function(){dE.resolve(dF(dD))});return dE.promise}}};var dC=function(dD){return{then:function(dG,dF){var dE=du();dx(function(){dE.resolve((dF||dA)(dD))});return dE.promise}}};var dy=function(dH,dJ,dF){var dD=du(),dE;var dI=function(dK){try{return(dJ||dv)(dK)}catch(dL){dz(dL);return dC(dL)}};var dG=function(dL){try{return(dF||dA)(dL)}catch(dK){dz(dK);return dC(dK)}};dx(function(){dw(dH).then(function(dK){if(dE){return}dE=true;dD.resolve(dw(dK).then(dI,dG))},function(dK){if(dE){return}dE=true;dD.resolve(dG(dK))})});return dD.promise};function dv(dD){return dD}function dA(dD){return dC(dD)}function dB(dG){var dE=du(),dD=dG.length,dF=[];if(dD){bj(dG,function(dI,dH){dw(dI).then(function(dJ){if(dH in dF){return}dF[dH]=dJ;if(!(--dD)){dE.resolve(dF)}},function(dJ){if(dH in dF){return}dE.reject(dJ)})})}else{dE.resolve(dF)}return dE.promise}return{defer:du,reject:dC,when:dy,all:dB}}function y(){var du={};this.when=function(dx,dw){du[dx]=cm({reloadOnSearch:true},dw);if(dx){var dv=(dx[dx.length-1]=="/")?dx.substr(0,dx.length-1):dx+"/";du[dv]={redirectTo:dx}}return this};this.otherwise=function(dv){this.when(null,dv);return this};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$http","$templateCache",function(dF,dz,dG,dA,dH,dD,dv){var dx=false,dE={routes:du,reload:function(){dx=true;dF.$evalAsync(dC)}};dF.$on("$locationChangeSuccess",dC);return dE;function dw(dK,dL){dL="^"+dL.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"$";var dO="",dI=[],dM={};var dQ=/:(\w+)/g,dP,dN=0;while((dP=dQ.exec(dL))!==null){dO+=dL.slice(dN,dP.index);dO+="([^\\/]*)";dI.push(dP[1]);dN=dQ.lastIndex}dO+=dL.substr(dN);var dJ=dK.match(new RegExp(dO));if(dJ){bj(dI,function(dS,dR){dM[dS]=dJ[dR+1]})}return dJ?dM:null}function dC(){var dI=dy(),dJ=dE.current;if(dI&&dJ&&dI.$$route===dJ.$$route&&o(dI.pathParams,dJ.pathParams)&&!dI.reloadOnSearch&&!dx){dJ.params=dI.params;bJ(dJ.params,dG);dF.$broadcast("$routeUpdate",dJ)}else{if(dI||dJ){dx=false;dF.$broadcast("$routeChangeStart",dI,dJ);dE.current=dI;if(dI){if(dI.redirectTo){if(cz(dI.redirectTo)){dz.path(dB(dI.redirectTo,dI.params)).search(dI.params).replace()}else{dz.url(dI.redirectTo(dI.pathParams,dz.path(),dz.search())).replace()}}}dA.when(dI).then(function(){if(dI){var dM=[],dK=[],dL;bj(dI.resolve||{},function(dO,dN){dM.push(dN);dK.push(cz(dO)?dH.get(dO):dH.invoke(dO))});if(cQ(dL=dI.template)){}else{if(cQ(dL=dI.templateUrl)){dL=dD.get(dL,{cache:dv}).then(function(dN){return dN.data})}}if(cQ(dL)){dM.push("$template");dK.push(dL)}return dA.all(dK).then(function(dN){var dO={};bj(dN,function(dQ,dP){dO[dM[dP]]=dQ});return dO})}}).then(function(dK){if(dI==dE.current){if(dI){dI.locals=dK;bJ(dI.params,dG)}dF.$broadcast("$routeChangeSuccess",dI,dJ)}},function(dK){if(dI==dE.current){dF.$broadcast("$routeChangeError",dI,dJ,dK)}})}}}function dy(){var dJ,dI;bj(du,function(dK,dL){if(!dI&&(dJ=dw(dz.path(),dL))){dI=ck(dK,{params:cm({},dz.search(),dJ),pathParams:dJ});dI.$$route=dK}});return dI||du[null]&&ck(du[null],{params:{},pathParams:{}})}function dB(dJ,dK){var dI=[];bj((dJ||"").split(":"),function(dN,dM){if(dM==0){dI.push(dN)}else{var dO=dN.match(/(\w+)(.*)/);var dL=dO[1];dI.push(dK[dL]);dI.push(dO[2]||"");delete dK[dL]}});return dI.join("")}}]}function be(){this.$get=cK({})}function bm(){var du=10;this.digestTtl=function(dv){if(arguments.length){du=dv}return du};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(dC,dD,dw,dE){function dz(){this.$id=cP();this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=false;this.$$asyncQueue=[];this.$$listeners={};this.$$isolateBindings={}}dz.prototype={$new:function(dF){var dG,dH;if(G(dF)){throw Error("API-CHANGE: Use $controller to instantiate controllers.")}if(dF){dH=new dz();dH.$root=this.$root}else{dG=function(){};dG.prototype=this;dH=new dG();dH.$id=cP()}dH["this"]=dH;dH.$$listeners={};dH.$parent=this;dH.$$asyncQueue=[];dH.$$watchers=dH.$$nextSibling=dH.$$childHead=dH.$$childTail=null;dH.$$prevSibling=this.$$childTail;if(this.$$childHead){this.$$childTail.$$nextSibling=dH;this.$$childTail=dH}else{this.$$childHead=this.$$childTail=dH}return dH},$watch:function(dL,dK,dF){var dJ=this,dH=dv(dL,"watch"),dM=dJ.$$watchers,dG={fn:dK,last:dy,get:dH,exp:dL,eq:!!dF};if(!G(dK)){var dI=dv(dK||k,"listener");dG.fn=function(dO,dN,dP){dI(dP)}}if(!dM){dM=dJ.$$watchers=[]}dM.unshift(dG);return function(){aP(dM,dG)}},$digest:function(){var dQ,dR,dT,dL,dI,dG,dF,dH=du,dK,dP,dO=this,dN=[],dJ,dS;dA("$digest");dE.$$checkUrlChange();do{dF=false;dP=dO;do{dI=dP.$$asyncQueue;while(dI.length){try{dP.$eval(dI.shift())}catch(dM){dD(dM)}}if((dL=dP.$$watchers)){dG=dL.length;while(dG--){try{dQ=dL[dG];if((dR=dQ.get(dP))!==(dT=dQ.last)&&!(dQ.eq?o(dR,dT):(typeof dR=="number"&&typeof dT=="number"&&isNaN(dR)&&isNaN(dT)))){dF=true;dQ.last=dQ.eq?bJ(dR):dR;dQ.fn(dR,((dT===dy)?dR:dT),dP);if(dH<5){dJ=4-dH;if(!dN[dJ]){dN[dJ]=[]}dS=(G(dQ.exp))?"fn: "+(dQ.exp.name||dQ.exp.toString()):dQ.exp;dS+="; newVal: "+cD(dR)+"; oldVal: "+cD(dT);dN[dJ].push(dS)}}}catch(dM){dD(dM)}}}if(!(dK=(dP.$$childHead||(dP!==dO&&dP.$$nextSibling)))){while(dP!==dO&&!(dK=dP.$$nextSibling)){dP=dP.$parent}}}while((dP=dK));if(dF&&!(dH--)){dx();throw Error(du+" $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: "+cD(dN))}}while(dF||dI.length);dx()},$destroy:function(){if(dB==this||this.$$destroyed){return}var dF=this.$parent;this.$broadcast("$destroy");this.$$destroyed=true;if(dF.$$childHead==this){dF.$$childHead=this.$$nextSibling}if(dF.$$childTail==this){dF.$$childTail=this.$$prevSibling}if(this.$$prevSibling){this.$$prevSibling.$$nextSibling=this.$$nextSibling}if(this.$$nextSibling){this.$$nextSibling.$$prevSibling=this.$$prevSibling}this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null},$eval:function(dG,dF){return dw(dG)(this,dF)},$evalAsync:function(dF){this.$$asyncQueue.push(dF)},$apply:function(dG){try{dA("$apply");return this.$eval(dG)}catch(dF){dD(dF)}finally{dx();try{dB.$digest()}catch(dF){dD(dF);throw dF}}},$on:function(dF,dG){var dH=this.$$listeners[dF];if(!dH){this.$$listeners[dF]=dH=[]}dH.push(dG);return function(){dH[dm(dH,dG)]=null}},$emit:function(dG,dN){var dL=[],dJ,dP=this,dO=false,dF={name:dG,targetScope:dP,stopPropagation:function(){dO=true},preventDefault:function(){dF.defaultPrevented=true},defaultPrevented:false},dI=bp([dF],arguments,1),dK,dH;do{dJ=dP.$$listeners[dG]||dL;dF.currentScope=dP;for(dK=0,dH=dJ.length;dK<dH;dK++){if(!dJ[dK]){dJ.splice(dK,1);dK--;dH--;continue}try{dJ[dK].apply(null,dI);if(dO){return dF}}catch(dM){dD(dM)}}dP=dP.$parent}while(dP);return dF},$broadcast:function(dG,dO){var dM=this,dN=dM,dK=dM,dF={name:dG,targetScope:dM,preventDefault:function(){dF.defaultPrevented=true},defaultPrevented:false},dI=bp([dF],arguments,1),dP,dJ,dH;do{dN=dK;dF.currentScope=dN;dP=dN.$$listeners[dG]||[];for(dJ=0,dH=dP.length;dJ<dH;dJ++){if(!dP[dJ]){dP.splice(dJ,1);dJ--;dH--;continue}try{dP[dJ].apply(null,dI)}catch(dL){dD(dL)}}if(!(dK=(dN.$$childHead||(dN!==dM&&dN.$$nextSibling)))){while(dN!==dM&&!(dK=dN.$$nextSibling)){dN=dN.$parent}}}while((dN=dK));return dF}};var dB=new dz();return dB;function dA(dF){if(dB.$$phase){throw Error(dB.$$phase+" already in progress")}dB.$$phase=dF}function dx(){dB.$$phase=null}function dv(dH,dF){var dG=dw(dH);i(dG,dF);return dG}function dy(){}}]}function aF(){this.$get=["$window",function(dw){var dv={},du=df((/android (\d+)/.exec(ax(dw.navigator.userAgent))||[])[1]);return{history:!!(dw.history&&dw.history.pushState&&!(du<4)),hashchange:"onhashchange" in dw&&(!dw.document.documentMode||dw.document.documentMode>7),hasEvent:function(dx){if(dx=="input"&&aA==9){return false}if(bR(dv[dx])){var dy=dw.document.createElement("div");dv[dx]="on"+dx in dy}return dv[dx]},csp:false}}]}function cW(){this.$get=cK(cd)}function c5(dy){var du={},dw,dx,dv;if(!dy){return du}bj(dy.split("\n"),function(dz){dv=dz.indexOf(":");dw=ax(aD(dz.substr(0,dv)));dx=aD(dz.substr(dv+1));if(dw){if(du[dw]){du[dw]+=", "+dx}else{du[dw]=dx}}});return du}function ac(du){var dv=dt(du)?du:bE;return function(dw){if(!dv){dv=c5(du)}if(dw){return dv[ax(dw)]||null}return dv}}function de(dv,dw,du){if(G(du)){return du(dv,dw)}bj(du,function(dx){dv=dx(dv,dw)});return dv}function bX(du){return 200<=du&&du<300}function b5(){var dw=/^\s*(\[|\{[^\{])/,dv=/[\}\]]\s*$/,dx=/^\)\]\}',?\n/;var dy=this.defaults={transformResponse:[function(dz){if(cz(dz)){dz=dz.replace(dx,"");if(dw.test(dz)&&dv.test(dz)){dz=W(dz,true)}}return dz}],transformRequest:[function(dz){return dt(dz)&&!aK(dz)?cD(dz):dz}],headers:{common:{Accept:"application/json, text/plain, */*","X-Requested-With":"XMLHttpRequest"},post:{"Content-Type":"application/json;charset=utf-8"},put:{"Content-Type":"application/json;charset=utf-8"}}};var du=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(dH,dL,dG,dI,dD,dJ){var dK=dG("$http"),dC=[];bj(du,function(dM){dC.push(cz(dM)?dJ.get(dM):dJ.invoke(dM))});function dE(dQ){dQ.method=b0(dQ.method);var dP=dQ.transformRequest||dy.transformRequest,dR=dQ.transformResponse||dy.transformResponse,dN=dy.headers,dT=cm({"X-XSRF-TOKEN":dL.cookies()["XSRF-TOKEN"]},dN.common,dN[ax(dQ.method)],dQ.headers),dO=de(dQ.data,ac(dT),dP),dS;if(bR(dQ.data)){delete dT["Content-Type"]}dS=dA(dQ,dO,dT);dS=dS.then(dM,dM);bj(dC,function(dU){dS=dU(dS)});dS.success=function(dU){dS.then(function(dV){dU(dV.data,dV.status,dV.headers,dQ)});return dS};dS.error=function(dU){dS.then(null,function(dV){dU(dV.data,dV.status,dV.headers,dQ)});return dS};return dS;function dM(dU){var dV=cm({},dU,{data:de(dU.data,dU.headers,dR)});return(bX(dU.status))?dV:dD.reject(dV)}}dE.pendingRequests=[];dz("get","delete","head","jsonp");dB("post","put");dE.defaults=dy;return dE;function dz(dM){bj(arguments,function(dN){dE[dN]=function(dP,dO){return dE(cm(dO||{},{method:dN,url:dP}))}})}function dB(dM){bj(arguments,function(dN){dE[dN]=function(dP,dQ,dO){return dE(cm(dO||{},{method:dN,url:dP,data:dQ}))}})}function dA(dP,dU,dN){var dV=dD.defer(),dW=dV.promise,dM,dS,dO=dF(dP.url,dP.params);dE.pendingRequests.push(dP);dW.then(dQ,dQ);if(dP.cache&&dP.method=="GET"){dM=dt(dP.cache)?dP.cache:dK}if(dM){dS=dM.get(dO);if(dS){if(dS.then){dS.then(dQ,dQ);return dS}else{if(bl(dS)){dT(dS[1],dS[0],bJ(dS[2]))}else{dT(dS,200,{})}}}else{dM.put(dO,dW)}}if(!dS){dH(dP.method,dO,dU,dR,dN,dP.timeout,dP.withCredentials)}return dW;function dR(dX,dY,dZ){if(dM){if(bX(dX)){dM.put(dO,[dX,dY,c5(dZ)])}else{dM.remove(dO)}}dT(dY,dX,dZ);dI.$apply()}function dT(dY,dX,dZ){dX=Math.max(dX,0);(bX(dX)?dV.resolve:dV.reject)({data:dY,status:dX,headers:ac(dZ),config:dP})}function dQ(){var dX=dm(dE.pendingRequests,dP);if(dX!==-1){dE.pendingRequests.splice(dX,1)}}}function dF(dM,dO){if(!dO){return dM}var dN=[];F(dO,function(dQ,dP){if(dQ==null||dQ==bE){return}if(dt(dQ)){dQ=cD(dQ)}dN.push(encodeURIComponent(dP)+"="+encodeURIComponent(dQ))});return dM+((dM.indexOf("?")==-1)?"?":"&")+dN.join("&")}}]}var Q=cd.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(dw){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(dv){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(du){}throw new Error("This browser does not support XMLHttpRequest.")};function b3(){this.$get=["$browser","$window","$document",function(du,dw,dv){return bA(du,Q,du.defer,dw.angular.callbacks,dv[0],dw.location.protocol.replace(":",""))}]}function bA(du,dy,dv,dx,dw,dA){return function(dB,dD,dJ,dK,dF,dI,dG){du.$$incOutstandingRequestCount();dD=dD||du.url();if(ax(dB)=="jsonp"){var dC="_"+(dx.counter++).toString(36);dx[dC]=function(dM){dx[dC].data=dM};dz(dD.replace("JSON_CALLBACK","angular.callbacks."+dC),function(){if(dx[dC].data){dE(dK,200,dx[dC].data)}else{dE(dK,-2)}delete dx[dC]})}else{var dL=new dy();dL.open(dB,dD,true);bj(dF,function(dN,dM){if(dN){dL.setRequestHeader(dM,dN)}});var dH;dL.onreadystatechange=function(){if(dL.readyState==4){var dN=dL.getAllResponseHeaders();var dO,dM=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"];if(!dN){dN="";bj(dM,function(dQ){var dP=dL.getResponseHeader(dQ);if(dP){dN+=dQ+": "+dP+"\n"}})}dE(dK,dH||dL.status,dL.responseText,dN)}};if(dG){dL.withCredentials=true}dL.send(dJ||"");if(dI>0){dv(function(){dH=-1;dL.abort()},dI)}}function dE(dQ,dM,dN,dO){var dP=(dD.match(N)||["",dA])[1];dM=(dP=="file")?(dN?200:404):dM;dM=dM==1223?204:dM;dQ(dM,dN,dO);du.$$completeOutstandingRequest(k)}};function dz(dE,dC){var dD=dw.createElement("script"),dB=function(){dw.body.removeChild(dD);if(dC){dC()}};dD.type="text/javascript";dD.src=dE;if(aA){dD.onreadystatechange=function(){if(/loaded|complete/.test(dD.readyState)){dB()}}}else{dD.onload=dD.onerror=dB}dw.body.appendChild(dD)}}function ab(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00A4",posSuf:"",negPre:"(\u00A4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(du){if(du===1){return"one"}return"other"}}}}function ai(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(dv,du,dw,dx){var dy={};function dz(dE,dC,dA){var dB=dw.defer(),dH=dB.promise,dG=(cQ(dA)&&!dA),dF,dD;dF=du.defer(function(){try{dB.resolve(dE())}catch(dI){dB.reject(dI);dx(dI)}if(!dG){dv.$apply()}},dC);dD=function(){delete dy[dH.$$timeoutId]};dH.$$timeoutId=dF;dy[dF]=dB;dH.then(dD,dD);return dH}dz.cancel=function(dA){if(dA&&dA.$$timeoutId in dy){dy[dA.$$timeoutId].reject("canceled");return du.defer.cancel(dA.$$timeoutId)}return false};return dz}]}aM.$inject=["$provide"];function aM(dv){var dw="Filter";function du(dy,dx){return dv.factory(dy+dw,dx)}this.register=du;this.$get=["$injector",function(dx){return function(dy){return dx.get(dy+dw)}}];du("currency",bw);du("date",bd);du("filter",aq);du("json",V);du("limitTo",ag);du("lowercase",am);du("number",bO);du("orderBy",aN);du("uppercase",bQ)}function aq(){return function(dB,dA){if(!bl(dB)){return dB}var dw=[];dw.check=function(dD){for(var dC=0;dC<dw.length;dC++){if(!dw[dC](dD)){return false}}return true};var dy=function(dE,dF){if(dF.charAt(0)==="!"){return !dy(dE,dF.substr(1))}switch(typeof dE){case"boolean":case"number":case"string":return(""+dE).toLowerCase().indexOf(dF)>-1;case"object":for(var dD in dE){if(dD.charAt(0)!=="$"&&dy(dE[dD],dF)){return true}}return false;case"array":for(var dC=0;dC<dE.length;dC++){if(dy(dE[dC],dF)){return true}}return false;default:return false}};switch(typeof dA){case"boolean":case"number":case"string":dA={$:dA};case"object":for(var dx in dA){if(dx=="$"){(function(){var dC=(""+dA[dx]).toLowerCase();if(!dC){return}dw.push(function(dD){return dy(dD,dC)})})()}else{(function(){var dC=dx;var dD=(""+dA[dx]).toLowerCase();if(!dD){return}dw.push(function(dE){return dy(b6(dE,dC),dD)})})()}}break;case"function":dw.push(dA);break;default:return dB}var dv=[];for(var du=0;du<dB.length;du++){var dz=dB[du];if(dw.check(dz)){dv.push(dz)}}return dv}}bw.$inject=["$locale"];function bw(dv){var du=dv.NUMBER_FORMATS;return function(dx,dw){if(bR(dw)){dw=du.CURRENCY_SYM}return cU(dx,du.PATTERNS[1],du.GROUP_SEP,du.DECIMAL_SEP,2).replace(/\u00A4/g,dw)}}bO.$inject=["$locale"];function bO(dv){var du=dv.NUMBER_FORMATS;return function(dw,dx){return cU(dw,du.PATTERNS[0],du.GROUP_SEP,du.DECIMAL_SEP,dx)}}var c=".";function cU(du,dK,dD,dA,dv){if(isNaN(du)||!isFinite(du)){return""}var dE=du<0;du=Math.abs(du);var dL=du+"",dG="",dH=[];var dI=false;if(dL.indexOf("e")!==-1){var dB=dL.match(/([\d\.]+)e(-?)(\d+)/);if(dB&&dB[2]=="-"&&dB[3]>dv+1){dL="0"}else{dG=dL;dI=true}}if(!dI){var dw=(dL.split(c)[1]||"").length;if(bR(dv)){dv=Math.min(Math.max(dK.minFrac,dw),dK.maxFrac)}var dx=Math.pow(10,dv);du=Math.round(du*dx)/dx;var dy=(""+du).split(c);var dM=dy[0];dy=dy[1]||"";var dz=0,dF=dK.lgSize,dC=dK.gSize;if(dM.length>=(dF+dC)){dz=dM.length-dF;for(var dJ=0;dJ<dz;dJ++){if((dz-dJ)%dC===0&&dJ!==0){dG+=dD}dG+=dM.charAt(dJ)}}for(dJ=dz;dJ<dM.length;dJ++){if((dM.length-dJ)%dF===0&&dJ!==0){dG+=dD}dG+=dM.charAt(dJ)}while(dy.length<dv){dy+="0"}if(dv&&dv!=="0"){dG+=dA+dy.substr(0,dv)}}dH.push(dE?dK.negPre:dK.posPre);dH.push(dG);dH.push(dE?dK.negSuf:dK.posSuf);return dH.join("")}function cE(dv,dw,du){var dx="";if(dv<0){dx="-";dv=-dv}dv=""+dv;while(dv.length<dw){dv="0"+dv}if(du){dv=dv.substr(dv.length-dw)}return dx+dv}function bG(dv,dw,dx,du){return function(dy){var dz=dy["get"+dv]();if(dx>0||dz>-dx){dz+=dx}if(dz===0&&dx==-12){dz=12}return cE(dz,dw,du)}}function cc(dv,du){return function(dy,dw){var dz=dy["get"+dv]();var dx=b0(du?("SHORT"+dv):dv);return dw[dx][dz]}}function at(dv){var du=-1*dv.getTimezoneOffset();var dw=(du>=0)?"+":"";dw+=cE(Math[du>0?"floor":"ceil"](du/60),2)+cE(Math.abs(du%60),2);return dw}function cA(dv,du){return dv.getHours()<12?du.AMPMS[0]:du.AMPMS[1]}var bY={yyyy:bG("FullYear",4),yy:bG("FullYear",2,0,true),y:bG("FullYear",1),MMMM:cc("Month"),MMM:cc("Month",true),MM:bG("Month",2,1),M:bG("Month",1,1),dd:bG("Date",2),d:bG("Date",1),HH:bG("Hours",2),H:bG("Hours",1),hh:bG("Hours",2,-12),h:bG("Hours",1,-12),mm:bG("Minutes",2),m:bG("Minutes",1),ss:bG("Seconds",2),s:bG("Seconds",1),EEEE:cc("Day"),EEE:cc("Day",true),a:cA,Z:at};var az=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,cI=/^\d+$/;bd.$inject=["$locale"];function bd(dv){var du=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;function dw(dB){var dA;if(dA=dB.match(du)){var dz=new Date(0),dy=0,dx=0;if(dA[9]){dy=df(dA[9]+dA[10]);dx=df(dA[9]+dA[11])}dz.setUTCFullYear(df(dA[1]),df(dA[2])-1,df(dA[3]));dz.setUTCHours(df(dA[4]||0)-dy,df(dA[5]||0)-dx,df(dA[6]||0),df(dA[7]||0));return dz}return dB}return function(dy,dB){var dC="",dA=[],dz,dx;dB=dB||"mediumDate";dB=dv.DATETIME_FORMATS[dB]||dB;if(cz(dy)){if(cI.test(dy)){dy=df(dy)}else{dy=dw(dy)}}if(a7(dy)){dy=new Date(dy)}if(!aH(dy)){return dy}while(dB){dx=az.exec(dB);if(dx){dA=bp(dA,dx,1);dB=dA.pop()}else{dA.push(dB);dB=null}}bj(dA,function(dD){dz=bY[dD];dC+=dz?dz(dy,dv.DATETIME_FORMATS):dD.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return dC}}function V(){return function(du){return cD(du,true)}}var am=cK(ax);var bQ=cK(b0);function ag(){return function(dy,du){if(!(dy instanceof Array)){return dy}du=df(du);var dv=[],dw,dx;if(!dy||!(dy instanceof Array)){return dv}if(du>dy.length){du=dy.length}else{if(du<-dy.length){du=-dy.length}}if(du>0){dw=0;dx=du}else{dw=dy.length+du;dx=dy.length}for(;dw<dx;dw++){dv.push(dy[dw])}return dv}}aN.$inject=["$parse"];function aN(du){return function(dC,dv,dB){if(!bl(dC)){return dC}if(!dv){return dC}dv=bl(dv)?dv:[dv];dv=aV(dv,function(dD){var dF=false,dE=dD||aT;if(cz(dD)){if((dD.charAt(0)=="+"||dD.charAt(0)=="-")){dF=dD.charAt(0)=="-";dD=dD.substring(1)}dE=du(dD)}return dA(function(dH,dG){return dz(dE(dH),dE(dG))},dF)});var dy=[];for(var dx=0;dx<dC.length;dx++){dy.push(dC[dx])}return dy.sort(dA(dw,dB));function dw(dG,dF){for(var dE=0;dE<dv.length;dE++){var dD=dv[dE](dG,dF);if(dD!==0){return dD}}return 0}function dA(dD,dE){return cH(dE)?function(dG,dF){return dD(dF,dG)}:dD}function dz(dG,dF){var dE=typeof dG;var dD=typeof dF;if(dE==dD){if(dE=="string"){dG=dG.toLowerCase()}if(dE=="string"){dF=dF.toLowerCase()}if(dG===dF){return 0}return dG<dF?-1:1}else{return dE<dD?-1:1}}}}function cM(du){if(G(du)){du={link:du}}du.restrict=du.restrict||"AC";return cK(du)}var bi=cK({restrict:"E",compile:function(dv,du){if(aA<=8){if(!du.href&&!du.name){du.$set("href","")}dv.append(r.createComment("IE fix"))}return function(dx,dw){dw.bind("click",function(dy){if(!dw.attr("href")){dy.preventDefault()}})}}});var b={};bj(cN,function(dv,du){var dw=cv("ng-"+du);b[dw]=function(){return{priority:100,compile:function(){return function(dA,dz,dx){dA.$watch(dx[dw],function dy(dB){dx.$set(du,!!dB)})}}}}});bj(["src","href"],function(du){var dv=cv("ng-"+du);b[dv]=function(){return{priority:99,link:function(dy,dx,dw){dw.$observe(dv,function(dz){if(!dz){return}dw.$set(du,dz);if(aA){dx.prop(du,dw[du])}})}}}});var ch={$addControl:k,$removeControl:k,$setValidity:k,$setDirty:k};cO.$inject=["$element","$attrs","$scope"];function cO(dw,dv){var dx=this,du=dw.parent().controller("form")||ch,dz=0,dA=dx.$error={};dx.$name=dv.name;dx.$dirty=false;dx.$pristine=true;dx.$valid=true;dx.$invalid=false;du.$addControl(dx);dw.addClass(cR);dy(true);function dy(dC,dB){dB=dB?"-"+cl(dB,"-"):"";dw.removeClass((dC?bv:aQ)+dB).addClass((dC?aQ:bv)+dB)}dx.$addControl=function(dB){if(dB.$name&&!dx.hasOwnProperty(dB.$name)){dx[dB.$name]=dB}};dx.$removeControl=function(dB){if(dB.$name&&dx[dB.$name]===dB){delete dx[dB.$name]}bj(dA,function(dC,dD){dx.$setValidity(dD,true,dB)})};dx.$setValidity=function(dE,dD,dC){var dB=dA[dE];if(dD){if(dB){aP(dB,dC);if(!dB.length){dz--;if(!dz){dy(dD);dx.$valid=true;dx.$invalid=false}dA[dE]=false;dy(true,dE);du.$setValidity(dE,true,dx)}}}else{if(!dz){dy(dD)}if(dB){if(t(dB,dC)){return}}else{dA[dE]=dB=[];dz++;dy(false,dE);du.$setValidity(dE,false,dx)}dB.push(dC);dx.$valid=false;dx.$invalid=true}};dx.$setDirty=function(){dw.removeClass(cR).addClass(bC);dx.$dirty=true;dx.$pristine=false;du.$setDirty()}}var U=function(du){return["$timeout",function(dw){var dv={name:"form",restrict:"E",controller:cO,compile:function(){return{pre:function(dC,dB,dx,dy){if(!dx.action){var dz=function(dE){dE.preventDefault?dE.preventDefault():dE.returnValue=false};b7(dB[0],"submit",dz);dB.bind("$destroy",function(){dw(function(){ae(dB[0],"submit",dz)},0,false)})}var dD=dB.parent().controller("form"),dA=dx.name||dx.ngForm;if(dA){dC[dA]=dy}if(dD){dB.bind("$destroy",function(){dD.$removeControl(dy);if(dA){dC[dA]=bE}cm(dy,ch)})}}}}};return du?cm(bJ(dv),{restrict:"EAC"}):dv}]};var c8=U();var bc=U(true);var bk=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;var c7=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/;var bU=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;var bx={text:ao,number:bN,url:f,email:dr,radio:bg,checkbox:dk,hidden:k,button:k,submit:k,reset:k};function cp(du){return bR(du)||du===""||du===null||du!==du}function ao(dH,dB,dC,du,dv,dI){var dz=function(){var dJ=aD(dB.val());if(du.$viewValue!==dJ){dH.$apply(function(){du.$setViewValue(dJ)})}};if(dv.hasEvent("input")){dB.bind("input",dz)}else{var dF;dB.bind("keydown",function(dK){var dJ=dK.keyCode;if(dJ===91||(15<dJ&&dJ<19)||(37<=dJ&&dJ<=40)){return}if(!dF){dF=dI.defer(function(){dz();dF=null})}});dB.bind("change",dz)}du.$render=function(){dB.val(cp(du.$viewValue)?"":du.$viewValue)};var dD=dC.ngPattern,dA;var dE=function(dK,dJ){if(cp(dJ)||dK.test(dJ)){du.$setValidity("pattern",true);return dJ}else{du.$setValidity("pattern",false);return bE}};if(dD){if(dD.match(/^\/(.*)\/$/)){dD=new RegExp(dD.substr(1,dD.length-2));dA=function(dJ){return dE(dD,dJ)}}else{dA=function(dK){var dJ=dH.$eval(dD);if(!dJ||!dJ.test){throw new Error("Expected "+dD+" to be a RegExp but was "+dJ)}return dE(dJ,dK)}}du.$formatters.push(dA);du.$parsers.push(dA)}if(dC.ngMinlength){var dy=df(dC.ngMinlength);var dx=function(dJ){if(!cp(dJ)&&dJ.length<dy){du.$setValidity("minlength",false);return bE}else{du.$setValidity("minlength",true);return dJ}};du.$parsers.push(dx);du.$formatters.push(dx)}if(dC.ngMaxlength){var dw=df(dC.ngMaxlength);var dG=function(dJ){if(!cp(dJ)&&dJ.length>dw){du.$setValidity("maxlength",false);return bE}else{du.$setValidity("maxlength",true);return dJ}};du.$parsers.push(dG);du.$formatters.push(dG)}}function bN(dC,dx,dA,du,dv,dD){ao(dC,dx,dA,du,dv,dD);du.$parsers.push(function(dF){var dE=cp(dF);if(dE||bU.test(dF)){du.$setValidity("number",true);return dF===""?null:(dE?dF:parseFloat(dF))}else{du.$setValidity("number",false);return bE}});du.$formatters.push(function(dE){return cp(dE)?"":""+dE});if(dA.min){var dw=parseFloat(dA.min);var dz=function(dE){if(!cp(dE)&&dE<dw){du.$setValidity("min",false);return bE}else{du.$setValidity("min",true);return dE}};du.$parsers.push(dz);du.$formatters.push(dz)}if(dA.max){var dB=parseFloat(dA.max);var dy=function(dE){if(!cp(dE)&&dE>dB){du.$setValidity("max",false);return bE}else{du.$setValidity("max",true);return dE}};du.$parsers.push(dy);du.$formatters.push(dy)}du.$formatters.push(function(dE){if(cp(dE)||a7(dE)){du.$setValidity("number",true);return dE}else{du.$setValidity("number",false);return bE}})}function f(dx,dw,dv,dy,dA,du){ao(dx,dw,dv,dy,dA,du);var dz=function(dB){if(cp(dB)||bk.test(dB)){dy.$setValidity("url",true);return dB}else{dy.$setValidity("url",false);return bE}};dy.$formatters.push(dz);dy.$parsers.push(dz)}function dr(dx,dw,dv,dy,dA,du){ao(dx,dw,dv,dy,dA,du);var dz=function(dB){if(cp(dB)||c7.test(dB)){dy.$setValidity("email",true);return dB}else{dy.$setValidity("email",false);return bE}};dy.$formatters.push(dz);dy.$parsers.push(dz)}function bg(dw,dv,du,dx){if(bR(du.name)){dv.attr("name",cP())}dv.bind("click",function(){if(dv[0].checked){dw.$apply(function(){dx.$setViewValue(du.value)})}});dx.$render=function(){var dy=du.value;dv[0].checked=(dy==dx.$viewValue)};du.$observe("value",dx.$render)}function dk(dx,dw,du,dz){var dv=du.ngTrueValue,dy=du.ngFalseValue;if(!cz(dv)){dv=true}if(!cz(dy)){dy=false}dw.bind("click",function(){dx.$apply(function(){dz.$setViewValue(dw[0].checked)})});dz.$render=function(){dw[0].checked=dz.$viewValue};dz.$formatters.push(function(dA){return dA===dv});dz.$parsers.push(function(dA){return dA?dv:dy})}var cL=["$browser","$sniffer",function(du,dv){return{restrict:"E",require:"?ngModel",link:function(dy,dx,dw,dz){if(dz){(bx[ax(dw.type)]||bx.text)(dy,dx,dw,dz,dv,du)}}}}];var aQ="ng-valid",bv="ng-invalid",cR="ng-pristine",bC="ng-dirty";var aE=["$scope","$exceptionHandler","$attrs","$element","$parse",function(dE,dD,dz,dF,dw){this.$viewValue=Number.NaN;this.$modelValue=Number.NaN;this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$pristine=true;this.$dirty=false;this.$valid=true;this.$invalid=false;this.$name=dz.name;var dG=dw(dz.ngModel),dA=dG.assign;if(!dA){throw Error(e+dz.ngModel+" ("+R(dF)+")")}this.$render=k;var dx=dF.inheritedData("$formController")||ch,dv=0,dB=this.$error={};dF.addClass(cR);dC(true);function dC(dI,dH){dH=dH?"-"+cl(dH,"-"):"";dF.removeClass((dI?bv:aQ)+dH).addClass((dI?aQ:bv)+dH)}this.$setValidity=function(dH,dI){if(dB[dH]===!dI){return}if(dI){if(dB[dH]){dv--}if(!dv){dC(true);this.$valid=true;this.$invalid=false}}else{dC(false);this.$invalid=true;this.$valid=false;dv++}dB[dH]=!dI;dC(dI,dH);dx.$setValidity(dH,dI,this)};this.$setViewValue=function(dH){this.$viewValue=dH;if(this.$pristine){this.$dirty=true;this.$pristine=false;dF.removeClass(cR).addClass(bC);dx.$setDirty()}bj(this.$parsers,function(dI){dH=dI(dH)});if(this.$modelValue!==dH){this.$modelValue=dH;dA(dE,dH);bj(this.$viewChangeListeners,function(dI){try{dI()}catch(dJ){dD(dJ)}})}};var du=this;dE.$watch(function dy(){var dJ=dG(dE);if(du.$modelValue!==dJ){var dI=du.$formatters,dH=dI.length;du.$modelValue=dJ;while(dH--){dJ=dI[dH](dJ)}if(du.$viewValue!==dJ){du.$viewValue=dJ;du.$render()}}})}];var a=function(){return{require:["ngModel","^?form"],controller:aE,link:function(dy,dw,dv,du){var dx=du[0],dz=du[1]||ch;dz.$addControl(dx);dw.bind("$destroy",function(){dz.$removeControl(dx)})}}};var bh=cK({require:"ngModel",link:function(dw,dv,du,dx){dx.$viewChangeListeners.push(function(){dw.$eval(du.ngChange)})}});var bu=function(){return{require:"?ngModel",link:function(dw,dy,du,dx){if(!dx){return}du.required=true;var dv=function(dz){if(du.required&&(cp(dz)||dz===false)){dx.$setValidity("required",false);return}else{dx.$setValidity("required",true);return dz}};dx.$formatters.push(dv);dx.$parsers.unshift(dv);du.$observe("required",function(){dv(dx.$viewValue)})}}};var b8=function(){return{require:"ngModel",link:function(dx,dw,du,dy){var dv=/\/(.*)\//.exec(du.ngList),dz=dv&&new RegExp(dv[1])||du.ngList||",";var dA=function(dC){var dB=[];if(dC){bj(dC.split(dz),function(dD){if(dD){dB.push(aD(dD))}})}return dB};dy.$parsers.push(dA);dy.$formatters.push(function(dB){if(bl(dB)){return dB.join(", ")}return bE})}}};var bM=/^(true|false|\d+)$/;var aw=function(){return{priority:100,compile:function(du,dv){if(bM.test(dv.ngValue)){return function(dx,dy,dw){dw.$set("value",dx.$eval(dw.ngValue))}}else{return function(dy,dz,dw){dy.$watch(dw.ngValue,function dx(dA){dw.$set("value",dA,false)})}}}}};var b4=cM(function(dw,dv,du){dv.addClass("ng-binding").data("$binding",du.ngBind);dw.$watch(du.ngBind,function dx(dy){dv.text(dy==bE?"":dy)})});var bP=["$interpolate",function(du){return function(dy,dx,dv){var dw=du(dx.attr(dv.$attr.ngBindTemplate));dx.addClass("ng-binding").data("$binding",dw);dv.$observe("ngBindTemplate",function(dz){dx.text(dz)})}}];var bs=[function(){return function(dw,dv,du){dv.addClass("ng-binding").data("$binding",du.ngBindHtmlUnsafe);dw.$watch(du.ngBindHtmlUnsafe,function dx(dy){dv.html(dy||"")})}}];function a9(dv,du){dv="ngClass"+dv;return cM(function(dz,dy,dw){var dx=bE;dz.$watch(dw[dv],dA,true);dw.$observe("class",function(dE){var dD=dz.$eval(dw[dv]);dA(dD,dD)});if(dv!=="ngClass"){dz.$watch("$index",function(dD,dE){var dF=dD%2;if(dF!==dE%2){if(dF==du){dB(dz.$eval(dw[dv]))}else{dC(dz.$eval(dw[dv]))}}})}function dA(dD){if(du===true||dz.$index%2===du){if(dx&&(dD!==dx)){dC(dx)}dB(dD)}dx=dD}function dC(dD){if(dt(dD)&&!bl(dD)){dD=aV(dD,function(dF,dE){if(dF){return dE}})}dy.removeClass(bl(dD)?dD.join(" "):dD)}function dB(dD){if(dt(dD)&&!bl(dD)){dD=aV(dD,function(dF,dE){if(dF){return dE}})}if(dD){dy.addClass(bl(dD)?dD.join(" "):dD)}}})}var aB=a9("",true);var K=a9("Odd",0);var da=a9("Even",1);var cn=cM({compile:function(dv,du){du.$set("ngCloak",bE);dv.removeClass("ng-cloak")}});var bb=[function(){return{scope:true,controller:"@"}}];var aX=["$sniffer",function(du){return{priority:1000,compile:function(){du.csp=true}}}];var I={};bj("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave".split(" "),function(du){var dv=cv("ng-"+du);I[dv]=["$parse",function(dw){return function(dA,dy,dx){var dz=dw(dx[dv]);dy.bind(ax(du),function(dB){dA.$apply(function(){dz(dA,{$event:dB})})})}}]});var dq=cM(function(dw,dv,du){dv.bind("submit",function(){dw.$apply(du.ngSubmit)})});var v=["$http","$templateCache","$anchorScroll","$compile",function(dx,du,dw,dv){return{restrict:"ECA",terminal:true,compile:function(dC,dy){var dB=dy.ngInclude||dy.src,dA=dy.onload||"",dz=dy.autoscroll;return function(dG,dE){var dI=0,dD;var dH=function(){if(dD){dD.$destroy();dD=null}dE.html("")};dG.$watch(dB,function dF(dK){var dJ=++dI;if(dK){dx.get(dK,{cache:du}).success(function(dL){if(dJ!==dI){return}if(dD){dD.$destroy()}dD=dG.$new();dE.html(dL);dv(dE.contents())(dD);if(cQ(dz)&&(!dz||dG.$eval(dz))){dw()}dD.$emit("$includeContentLoaded");dG.$eval(dA)}).error(function(){if(dJ===dI){dH()}})}else{dH()}})}}}}];var dp=cM({compile:function(){return{pre:function(dw,dv,du){dw.$eval(du.ngInit)}}}});var co=cM({terminal:true,priority:1000});var al=["$locale","$interpolate",function(du,dv){var dw=/{}/g;return{restrict:"EA",link:function(dI,dC,dG){var dE=dG.count,dA=dC.attr(dG.$attr.when),dB=dG.offset||0,dy=dI.$eval(dA),dz={},dD=dv.startSymbol(),dF=dv.endSymbol();bj(dy,function(dK,dJ){dz[dJ]=dv(dK.replace(dw,dD+dE+"-"+dB+dF))});dI.$watch(function dH(){var dJ=parseFloat(dI.$eval(dE));if(!isNaN(dJ)){if(!dy[dJ]){dJ=du.pluralCat(dJ-dB)}return dz[dJ](dI,dC,true)}else{return""}},function dx(dJ){dC.text(dJ)})}}}];var S=cM({transclude:"element",priority:1000,terminal:true,compile:function(dv,du,dw){return function(dG,dz,dD){var dE=dD.ngRepeat;var dA=dE.match(/^\s*(.+)\s+in\s+(.*)\s*$/),dy,dB,dC,dH;if(!dA){throw Error("Expected ngRepeat in form of '_item_ in _collection_' but got '"+dE+"'.")}dy=dA[1];dB=dA[2];dA=dy.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!dA){throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+dy+"'.")}dC=dA[3]||dA[1];dH=dA[2];var dx=new cb();dG.$watch(function dF(dT){var dL,dJ,dK=dT.$eval(dB),dS=dz,dI=new cb(),dN,dO,dR,dP,dM,dQ;if(!bl(dK)){dM=[];for(dR in dK){if(dK.hasOwnProperty(dR)&&dR.charAt(0)!="$"){dM.push(dR)}}dM.sort()}else{dM=dK||[]}dN=dM.length-1;for(dL=0,dJ=dM.length;dL<dJ;dL++){dR=(dK===dM)?dL:dM[dL];dP=dK[dR];dQ=dx.shift(dP);if(dQ){dO=dQ.scope;dI.push(dP,dQ);if(dL===dQ.index){dS=dQ.element}else{dQ.index=dL;dS.after(dQ.element);dS=dQ.element}}else{dO=dT.$new()}dO[dC]=dP;if(dH){dO[dH]=dR}dO.$index=dL;dO.$first=(dL===0);dO.$last=(dL===dN);dO.$middle=!(dO.$first||dO.$last);if(!dQ){dw(dO,function(dU){dS.after(dU);dQ={scope:dO,element:(dS=dU),index:dL};dI.push(dP,dQ)})}}for(dR in dx){if(dx.hasOwnProperty(dR)){dM=dx[dR];while(dM.length){dP=dM.pop();dP.element.remove();dP.scope.$destroy()}}}dx=dI})}}});var a5=cM(function(dw,dv,du){dw.$watch(du.ngShow,function dx(dy){dv.css("display",cH(dy)?"":"none")})});var cr=cM(function(dw,dv,du){dw.$watch(du.ngHide,function dx(dy){dv.css("display",cH(dy)?"none":"")})});var au=cM(function(dx,dw,du){dx.$watch(du.ngStyle,function dv(dz,dy){if(dy&&(dz!==dy)){bj(dy,function(dB,dA){dw.css(dA,"")})}if(dz){dw.css(dz)}},true)});var dg="ng-switch";var s=cK({restrict:"EA",require:"ngSwitch",controller:["$scope",function cf(){this.cases={}}],link:function(dC,dw,dz,du){var dv=dz.ngSwitch||dz.on,dy,dx,dA;dC.$watch(dv,function dB(dD){if(dx){dA.$destroy();dx.remove();dx=dA=null}if((dy=du.cases["!"+dD]||du.cases["?"])){dC.$eval(dz.change);dA=dC.$new();dy(dA,function(dE){dx=dE;dw.append(dE)})}})}});var aZ=cM({transclude:"element",priority:500,require:"^ngSwitch",compile:function(dw,dv,du){return function(dz,dy,dx,dA){dA.cases["!"+dv.ngSwitchWhen]=du}}});var C=cM({transclude:"element",priority:500,require:"^ngSwitch",compile:function(dw,dv,du){return function(dz,dy,dx,dA){dA.cases["?"]=du}}});var ba=cM({controller:["$transclude","$element",function(dv,du){dv(function(dw){du.append(dw)})}]});var dh=["$http","$templateCache","$route","$anchorScroll","$compile","$controller",function(dz,dv,dy,dx,dw,du){return{restrict:"ECA",terminal:true,link:function(dE,dD,dA){var dB,dC=dA.onload||"";dE.$on("$routeChangeSuccess",dG);dG();function dH(){if(dB){dB.$destroy();dB=null}}function dF(){dD.html("");dH()}function dG(){var dM=dy.current&&dy.current.locals,dJ=dM&&dM.$template;if(dJ){dD.html(dJ);dH();var dK=dw(dD.contents()),dL=dy.current,dI;dB=dL.scope=dE.$new();if(dL.controller){dM.$scope=dB;dI=du(dL.controller,dM);dD.children().data("$ngControllerController",dI)}dK(dB);dB.$emit("$viewContentLoaded");dB.$eval(dC);dx()}else{dF()}}}}}];var di=["$templateCache",function(du){return{restrict:"E",terminal:true,compile:function(dw,dv){if(dv.type=="text/ng-template"){var dx=dv.id,dy=dw[0].text;du.put(dx,dy)}}}}];var bH=cK({terminal:true});var a0=["$compile","$parse",function(dw,dx){var dv=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w\d]*)|(?:\(\s*([\$\w][\$\w\d]*)\s*,\s*([\$\w][\$\w\d]*)\s*\)))\s+in\s+(.*)$/,du={$setViewValue:k};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(dz,dC,dy){var dB=this,dE={},dD=du,dA,dF;dB.databound=dy.ngModel;dB.init=function(dI,dH,dG){dD=dI;dA=dH;dF=dG};dB.addOption=function(dG){dE[dG]=true;if(dD.$viewValue==dG){dz.val(dG);if(dF.parent()){dF.remove()}}};dB.removeOption=function(dG){if(this.hasOption(dG)){delete dE[dG];if(dD.$viewValue==dG){this.renderUnknownOption(dG)}}};dB.renderUnknownOption=function(dG){var dH="? "+m(dG)+" ?";dF.val(dH);dz.prepend(dF);dz.val(dH);dF.prop("selected",true)};dB.hasOption=function(dG){return dE.hasOwnProperty(dG)};dC.$on("$destroy",function(){dB.renderUnknownOption=k})}],link:function(dy,dz,dI,dL){if(!dL[1]){return}var dO=dL[0],dD=dL[1],dP=dI.multiple,dA=dI.ngOptions,dJ=false,dH,dE=cB(r.createElement("option")),dC=cB(r.createElement("optgroup")),dQ=dE.clone();for(var dM=0,dB=dz.children(),dG=dB.length;dM<dG;dM++){if(dB[dM].value==""){dH=dJ=dB.eq(dM);break}}dO.init(dD,dJ,dQ);if(dP&&(dI.required||dI.ngRequired)){var dF=function(dS){dD.$setValidity("required",!dI.required||(dS&&dS.length));return dS};dD.$parsers.push(dF);dD.$formatters.unshift(dF);dI.$observe("required",function(){dF(dD.$viewValue)})}if(dA){dK(dy,dz,dD)}else{if(dP){dR(dy,dz,dD)}else{dN(dy,dz,dD,dO)}}function dN(dV,dT,dS,dU){dS.$render=function(){var dW=dS.$viewValue;if(dU.hasOption(dW)){if(dQ.parent()){dQ.remove()}dT.val(dW);if(dW===""){dH.prop("selected",true)}}else{if(bR(dW)&&dH){dT.val("")}else{dU.renderUnknownOption(dW)}}};dT.bind("change",function(){dV.$apply(function(){if(dQ.parent()){dQ.remove()}dS.$setViewValue(dT.val())})})}function dR(dV,dU,dW){var dT;dW.$render=function(){var dX=new w(dW.$viewValue);bj(dU.find("option"),function(dY){dY.selected=cQ(dX.get(dY.value))})};dV.$watch(function dS(){if(!o(dT,dW.$viewValue)){dT=bJ(dW.$viewValue);dW.$render()}});dU.bind("change",function(){dV.$apply(function(){var dX=[];bj(dU.find("option"),function(dY){if(dY.selected){dX.push(dY.value)}});dW.$setViewValue(dX)})})}function dK(d2,dW,dS){var dV;if(!(dV=dA.match(dv))){throw Error("Expected ngOptions in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '"+dA+"'.")}var dX=dx(dV[2]||dV[1]),dY=dV[4]||dV[6],d0=dV[5],dU=dx(dV[3]||""),dZ=dx(dV[2]?dV[1]:dY),d1=dx(dV[7]),d3=[[{element:dW,label:""}]];if(dJ){dw(dJ)(d2);dJ.removeClass("ng-scope");dJ.remove()}dW.html("");dW.bind("change",function(){d2.$apply(function(){var eb,d8=d1(d2)||[],d6={},ed,ea,d7,d9,ec,d5,d4;if(dP){ea=[];for(ec=0,d4=d3.length;ec<d4;ec++){eb=d3[ec];for(d9=1,d5=eb.length;d9<d5;d9++){if((d7=eb[d9].element)[0].selected){ed=d7.val();if(d0){d6[d0]=ed}d6[dY]=d8[ed];ea.push(dZ(d2,d6))}}}}else{ed=dW.val();if(ed=="?"){ea=bE}else{if(ed==""){ea=null}else{d6[dY]=d8[ed];if(d0){d6[d0]=ed}ea=dZ(d2,d6)}}}dS.$setViewValue(ea)})});dS.$render=dT;d2.$watch(dT);function dT(){var ek={"":[]},eo=[""],eb,ed,eh,d7,em,ec,ej=dS.$modelValue,d6=d1(d2)||[],ei=d0?cV(d6):d6,d9,ea,d8,ee,eg={},el,d5=false,en,d4,ef;if(dP){d5=new w(ej)}else{if(ej===null||dJ){ek[""].push({selected:ej===null,id:"",label:""});d5=true}}for(ee=0;ea=ei.length,ee<ea;ee++){eg[dY]=d6[d0?eg[d0]=ei[ee]:ee];eb=dU(d2,eg)||"";if(!(ed=ek[eb])){ed=ek[eb]=[];eo.push(eb)}if(dP){el=d5.remove(dZ(d2,eg))!=bE}else{el=ej===dZ(d2,eg);d5=d5||el}ef=dX(d2,eg);ef=ef===bE?"":ef;ed.push({id:d0?ei[ee]:ee,label:ef,selected:el})}if(!dP&&!d5){ek[""].unshift({id:"?",label:"",selected:true})}for(d8=0,d9=eo.length;d8<d9;d8++){eb=eo[d8];ed=ek[eb];if(d3.length<=d8){d7={element:dC.clone().attr("label",eb),label:ed.label};em=[d7];d3.push(em);dW.append(d7.element)}else{em=d3[d8];d7=em[0];if(d7.label!=eb){d7.element.attr("label",d7.label=eb)}}en=null;for(ee=0,ea=ed.length;ee<ea;ee++){eh=ed[ee];if((ec=em[ee+1])){en=ec.element;if(ec.label!==eh.label){en.text(ec.label=eh.label)}if(ec.id!==eh.id){en.val(ec.id=eh.id)}if(ec.element.selected!==eh.selected){en.prop("selected",(ec.selected=eh.selected))}}else{if(eh.id===""&&dJ){d4=dJ}else{(d4=dE.clone()).val(eh.id).attr("selected",eh.selected).text(eh.label)}em.push(ec={element:d4,label:eh.label,id:eh.id,selected:eh.selected});if(en){en.after(d4)}else{d7.element.append(d4)}en=d4}}ee++;while(em.length>ee){em.pop().element.remove()}}while(d3.length>d8){d3.pop()[0].element.remove()}}}}}}];var J=["$interpolate",function(du){var dv={addOption:k,removeOption:k};return{restrict:"E",priority:100,compile:function(dy,dw){if(bR(dw.value)){var dx=du(dy.text(),true);if(!dx){dw.$set("value",dy.text())}}return function(dF,dD,dz){var dB="$selectController",dE=dD.parent(),dC=dE.data(dB)||dE.parent().data(dB);if(dC&&dC.databound){dD.prop("selected",false)}else{dC=dv}if(dx){dF.$watch(dx,function dA(dH,dG){dz.$set("value",dH);if(dH!==dG){dC.removeOption(dG)}dC.addOption(dH)})}else{dC.addOption(dz.value)}dD.bind("$destroy",function(){dC.removeOption(dz.value)})}}}}];var av=cK({restrict:"E",terminal:true});a3();O(aO);cB(r).ready(function(){bK(r,Z)})})(window,document);angular.element(document).find("head").append('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak{display:none;}ng\\:form{display:block;}</style>');
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/angular/1.0/angular-resource.js' */
(function(b,a,d){try{a.module("ngResource");console.log("AUI-NG: Found existing angular module 'ngResource', skipping ...");return}catch(c){console.log("AUI-NG: Setting up angular module 'ngResource' ...")}a.module("ngResource",["ng"]).factory("$resource",["$http","$parse",function(p,i){var l={get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:true},remove:{method:"DELETE"},"delete":{method:"DELETE"}};var q=a.noop,k=a.forEach,n=a.extend,e=a.copy,g=a.isFunction,o=function(s,r){return i(r)(s)};function j(r){return f(r,true).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function f(s,r){return encodeURIComponent(s).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,(r?"%20":"+"))}function m(s,t){this.template=s=s+"#";this.defaults=t||{};var r=this.urlParams={};k(s.split(/\W/),function(u){if(u&&(new RegExp("(^|[^\\\\]):"+u+"\\W").test(s))){r[u]=true}});this.template=s.replace(/\\:/g,":")}m.prototype={url:function(w){var s=this,t=this.template,v,r;w=w||{};k(this.urlParams,function(y,x){v=w.hasOwnProperty(x)?w[x]:s.defaults[x];if(a.isDefined(v)&&v!==null){r=j(v);t=t.replace(new RegExp(":"+x+"(\\W)","g"),r+"$1")}else{t=t.replace(new RegExp("(/?):"+x+"(\\W)","g"),function(A,B,z){if(z.charAt(0)=="/"){return z}else{return B+z}})}});t=t.replace(/\/?#$/,"");var u=[];k(w,function(y,x){if(!s.urlParams[x]){u.push(f(x)+"="+f(y))}});u.sort();t=t.replace(/\/*$/,"");return t+(u.length?"?"+u.join("&"):"")}};function h(t,u,w){var r=new m(t);w=n({},l,w);function s(z,y){var x={};y=n({},u,y);k(y,function(B,A){x[A]=B.charAt&&B.charAt(0)=="@"?o(z,B.substr(1)):B});return x}function v(x){e(x||{},this)}k(w,function(z,x){z.method=a.uppercase(z.method);var y=z.method=="POST"||z.method=="PUT"||z.method=="PATCH";v[x]=function(C,B,A,I){var D={};var E;var H=q;var F=null;switch(arguments.length){case 4:F=I;H=A;case 3:case 2:if(g(B)){if(g(C)){H=C;F=B;break}H=B;F=A}else{D=C;E=B;H=A;break}case 1:if(g(C)){H=C}else{if(y){E=C}else{D=C}}break;case 0:break;default:throw"Expected between 0-4 arguments [params, data, success, error], got "+arguments.length+" arguments."}var G=this instanceof v?this:(z.isArray?[]:new v(E));p({method:z.method,url:r.url(n({},s(E,z.params||{}),D)),data:E}).then(function(J){var K=J.data;if(K){if(z.isArray){G.length=0;k(K,function(L){G.push(new v(L))})}else{e(K,G)}}(H||q)(G,J.headers)},F);return G};v.prototype["$"+x]=function(B,A,G){var F=s(this),E=q,C;switch(arguments.length){case 3:F=B;E=A;C=G;break;case 2:case 1:if(g(B)){E=B;C=A}else{F=B;E=A||q}case 0:break;default:throw"Expected between 1-3 arguments [params, success, error], got "+arguments.length+" arguments."}var D=y?this:d;v[x].call(this,F,D,E,C)}});v.bind=function(x){return h(t,n({},u,x),w)};return v}return h}])})(window,window.angular);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/angular/1.0/angular-sanitize.js' */
(function(o,t,j){try{t.module("ngSanitize");console.log("AUI-NG: Found existing angular module 'ngSanitize', skipping ...");return}catch(C){console.log("AUI-NG: Setting up angular module 'ngSanitize' ...")}var s=function(F){var e=[];m(F,y(e));return e.join("")};var h=/^<\s*([\w:-]+)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*>/,d=/^<\s*\/\s*([\w:-]+)[^>]*>/,E=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,r=/^</,p=/^<\s*\//,x=/<!--(.*?)-->/g,D=/<!\[CDATA\[(.*?)]]>/g,a=/^((ftp|https?):\/\/|mailto:|#)/,l=/([^\#-~| |!])/g;var v=w("area,br,col,hr,img,wbr");var n=w("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),c=w("rp,rt"),g=t.extend({},c,n);var f=t.extend({},n,w("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul"));var u=t.extend({},c,w("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var"));var i=w("script,style");var q=t.extend({},v,f,u,g);var k=w("background,cite,href,longdesc,src,usemap");var A=t.extend({},k,w("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,span,start,summary,target,title,type,valign,value,vspace,width"));function w(H){var G={},e=H.split(","),F;for(F=0;F<e.length;F++){G[e[F]]=true}return G}function m(F,N){var I,J,G,K=[],L=F;K.last=function(){return K[K.length-1]};while(F){J=true;if(!K.last()||!i[K.last()]){if(F.indexOf("<!--")===0){I=F.indexOf("-->");if(I>=0){if(N.comment){N.comment(F.substring(4,I))}F=F.substring(I+3);J=false}}else{if(p.test(F)){G=F.match(d);if(G){F=F.substring(G[0].length);G[0].replace(d,H);J=false}}else{if(r.test(F)){G=F.match(h);if(G){F=F.substring(G[0].length);G[0].replace(h,e);J=false}}}}if(J){I=F.indexOf("<");var M=I<0?F:F.substring(0,I);F=I<0?"":F.substring(I);if(N.chars){N.chars(b(M))}}}else{F=F.replace(new RegExp("(.*)<\\s*\\/\\s*"+K.last()+"[^>]*>","i"),function(O,P){P=P.replace(x,"$1").replace(D,"$1");if(N.chars){N.chars(b(P))}return""});H("",K.last())}if(F==L){throw"Parse Error: "+F}L=F}H();function e(O,R,S,P){R=t.lowercase(R);if(f[R]){while(K.last()&&u[K.last()]){H("",K.last())}}if(g[R]&&K.last()==R){H("",R)}P=v[R]||!!P;if(!P){K.push(R)}var Q={};S.replace(E,function(W,V,U,Y,T){var X=U||Y||T||"";Q[V]=b(X)});if(N.start){N.start(R,Q,P)}}function H(O,Q){var R=0,P;Q=t.lowercase(Q);if(Q){for(R=K.length-1;R>=0;R--){if(K[R]==Q){break}}}if(R>=0){for(P=K.length-1;P>=R;P--){if(N.end){N.end(K[P])}}K.length=R}}}var B=document.createElement("pre");function b(e){B.innerHTML=e.replace(/</g,"&lt;");return B.innerText||B.textContent||""}function z(e){return e.replace(/&/g,"&amp;").replace(l,function(F){return"&#"+F.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function y(F){var G=false;var e=t.bind(F,F.push);return{start:function(H,J,I){H=t.lowercase(H);if(!G&&i[H]){G=H}if(!G&&q[H]==true){e("<");e(H);t.forEach(J,function(L,K){var M=t.lowercase(K);if(A[M]==true&&(k[M]!==true||L.match(a))){e(" ");e(K);e('="');e(z(L));e('"')}});e(I?"/>":">")}},end:function(H){H=t.lowercase(H);if(!G&&q[H]==true){e("</");e(H);e(">")}if(H==G){G=false}},chars:function(H){if(!G){e(z(H))}}}}t.module("ngSanitize",[]).value("$sanitize",s);t.module("ngSanitize").directive("ngBindHtml",["$sanitize",function(e){return function(I,H,F){H.addClass("ng-binding").data("$binding",F.ngBindHtml);I.$watch(F.ngBindHtml,function G(J){J=e(J);H.html(J||"")})}}]);t.module("ngSanitize").filter("linky",function(){var e=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s\.\;\,\(\)\{\}\<\>]/,F=/^mailto:/;return function(M){if(!M){return M}var I;var H=M;var K=[];var L=y(K);var G;var J;while((I=H.match(e))){G=I[0];if(I[2]==I[3]){G="mailto:"+G}J=I.index;L.chars(H.substr(0,J));L.start("a",{href:G});L.chars(I[0].replace(F,""));L.end("a");H=H.substring(J+I[0].length)}L.chars(H);return K.join("")}})})(window,window.angular);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:angular10', location = '/com/k15t/js/angular-version-post.js' */
(function(a,b){a.auiNg=a.auiNg||{};if(a.angular){a.auiNg["angular"+a.angular.version.major+a.angular.version.minor]=a.angular}if(a.auiNg.jQuery){a.$.noConflict(true)}})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/underscore-1.4.4.js' */
(function(){var w=this;var k=w._;var D={};var C=Array.prototype,f=Object.prototype,r=Function.prototype;var G=C.push,o=C.slice,y=C.concat,d=f.toString,j=f.hasOwnProperty;var K=C.forEach,q=C.map,E=C.reduce,c=C.reduceRight,b=C.filter,B=C.every,p=C.some,n=C.indexOf,l=C.lastIndexOf,u=Array.isArray,e=Object.keys,F=r.bind;var L=function(M){if(M instanceof L){return M}if(!(this instanceof L)){return new L(M)}this._wrapped=M};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=L}exports._=L}else{w._=L}L.VERSION="1.4.4";var H=L.each=L.forEach=function(R,Q,P){if(R==null){return}if(K&&R.forEach===K){R.forEach(Q,P)}else{if(R.length===+R.length){for(var O=0,M=R.length;O<M;O++){if(Q.call(P,R[O],O,R)===D){return}}}else{for(var N in R){if(L.has(R,N)){if(Q.call(P,R[N],N,R)===D){return}}}}}};L.map=L.collect=function(P,O,N){var M=[];if(P==null){return M}if(q&&P.map===q){return P.map(O,N)}H(P,function(S,Q,R){M[M.length]=O.call(N,S,Q,R)});return M};var g="Reduce of empty array with no initial value";L.reduce=L.foldl=L.inject=function(Q,P,M,O){var N=arguments.length>2;if(Q==null){Q=[]}if(E&&Q.reduce===E){if(O){P=L.bind(P,O)}return N?Q.reduce(P,M):Q.reduce(P)}H(Q,function(T,R,S){if(!N){M=T;N=true}else{M=P.call(O,M,T,R,S)}});if(!N){throw new TypeError(g)}return M};L.reduceRight=L.foldr=function(S,P,M,O){var N=arguments.length>2;if(S==null){S=[]}if(c&&S.reduceRight===c){if(O){P=L.bind(P,O)}return N?S.reduceRight(P,M):S.reduceRight(P)}var R=S.length;if(R!==+R){var Q=L.keys(S);R=Q.length}H(S,function(V,T,U){T=Q?Q[--R]:--R;if(!N){M=S[T];N=true}else{M=P.call(O,M,S[T],T,U)}});if(!N){throw new TypeError(g)}return M};L.find=L.detect=function(P,O,N){var M;A(P,function(S,Q,R){if(O.call(N,S,Q,R)){M=S;return true}});return M};L.filter=L.select=function(P,O,N){var M=[];if(P==null){return M}if(b&&P.filter===b){return P.filter(O,N)}H(P,function(S,Q,R){if(O.call(N,S,Q,R)){M[M.length]=S}});return M};L.reject=function(O,N,M){return L.filter(O,function(R,P,Q){return !N.call(M,R,P,Q)},M)};L.every=L.all=function(P,O,N){O||(O=L.identity);var M=true;if(P==null){return M}if(B&&P.every===B){return P.every(O,N)}H(P,function(S,Q,R){if(!(M=M&&O.call(N,S,Q,R))){return D}});return !!M};var A=L.some=L.any=function(P,O,N){O||(O=L.identity);var M=false;if(P==null){return M}if(p&&P.some===p){return P.some(O,N)}H(P,function(S,Q,R){if(M||(M=O.call(N,S,Q,R))){return D}});return !!M};L.contains=L.include=function(N,M){if(N==null){return false}if(n&&N.indexOf===n){return N.indexOf(M)!=-1}return A(N,function(O){return O===M})};L.invoke=function(O,P){var M=o.call(arguments,2);var N=L.isFunction(P);return L.map(O,function(Q){return(N?P:Q[P]).apply(Q,M)})};L.pluck=function(N,M){return L.map(N,function(O){return O[M]})};L.where=function(N,M,O){if(L.isEmpty(M)){return O?null:[]}return L[O?"find":"filter"](N,function(Q){for(var P in M){if(M[P]!==Q[P]){return false}}return true})};L.findWhere=function(N,M){return L.where(N,M,true)};L.max=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.max.apply(Math,P)}if(!O&&L.isEmpty(P)){return -Infinity}var M={computed:-Infinity,value:-Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R>=M.computed&&(M={value:T,computed:R})});return M.value};L.min=function(P,O,N){if(!O&&L.isArray(P)&&P[0]===+P[0]&&P.length<65535){return Math.min.apply(Math,P)}if(!O&&L.isEmpty(P)){return Infinity}var M={computed:Infinity,value:Infinity};H(P,function(T,Q,S){var R=O?O.call(N,T,Q,S):T;R<M.computed&&(M={value:T,computed:R})});return M.value};L.shuffle=function(P){var O;var N=0;var M=[];H(P,function(Q){O=L.random(N++);M[N-1]=M[O];M[O]=Q});return M};var a=function(M){return L.isFunction(M)?M:function(N){return N[M]}};L.sortBy=function(P,O,M){var N=a(O);return L.pluck(L.map(P,function(S,Q,R){return{value:S,index:Q,criteria:N.call(M,S,Q,R)}}).sort(function(T,S){var R=T.criteria;var Q=S.criteria;if(R!==Q){if(R>Q||R===void 0){return 1}if(R<Q||Q===void 0){return -1}}return T.index<S.index?-1:1}),"value")};var t=function(R,Q,N,P){var M={};var O=a(Q||L.identity);H(R,function(U,S){var T=O.call(N,U,S,R);P(M,T,U)});return M};L.groupBy=function(O,N,M){return t(O,N,M,function(P,Q,R){(L.has(P,Q)?P[Q]:(P[Q]=[])).push(R)})};L.countBy=function(O,N,M){return t(O,N,M,function(P,Q){if(!L.has(P,Q)){P[Q]=0}P[Q]++})};L.sortedIndex=function(T,S,P,O){P=P==null?L.identity:a(P);var R=P.call(O,S);var M=0,Q=T.length;while(M<Q){var N=(M+Q)>>>1;P.call(O,T[N])<R?M=N+1:Q=N}return M};L.toArray=function(M){if(!M){return[]}if(L.isArray(M)){return o.call(M)}if(M.length===+M.length){return L.map(M,L.identity)}return L.values(M)};L.size=function(M){if(M==null){return 0}return(M.length===+M.length)?M.length:L.keys(M).length};L.first=L.head=L.take=function(O,N,M){if(O==null){return void 0}return(N!=null)&&!M?o.call(O,0,N):O[0]};L.initial=function(O,N,M){return o.call(O,0,O.length-((N==null)||M?1:N))};L.last=function(O,N,M){if(O==null){return void 0}if((N!=null)&&!M){return o.call(O,Math.max(O.length-N,0))}else{return O[O.length-1]}};L.rest=L.tail=L.drop=function(O,N,M){return o.call(O,(N==null)||M?1:N)};L.compact=function(M){return L.filter(M,L.identity)};var x=function(N,O,M){H(N,function(P){if(L.isArray(P)){O?G.apply(M,P):x(P,O,M)}else{M.push(P)}});return M};L.flatten=function(N,M){return x(N,M,[])};L.without=function(M){return L.difference(M,o.call(arguments,1))};L.uniq=L.unique=function(S,R,Q,P){if(L.isFunction(R)){P=Q;Q=R;R=false}var N=Q?L.map(S,Q,P):S;var O=[];var M=[];H(N,function(U,T){if(R?(!T||M[M.length-1]!==U):!L.contains(M,U)){M.push(U);O.push(S[T])}});return O};L.union=function(){return L.uniq(y.apply(C,arguments))};L.intersection=function(N){var M=o.call(arguments,1);return L.filter(L.uniq(N),function(O){return L.every(M,function(P){return L.indexOf(P,O)>=0})})};L.difference=function(N){var M=y.apply(C,o.call(arguments,1));return L.filter(N,function(O){return !L.contains(M,O)})};L.zip=function(){var M=o.call(arguments);var P=L.max(L.pluck(M,"length"));var O=new Array(P);for(var N=0;N<P;N++){O[N]=L.pluck(M,""+N)}return O};L.object=function(Q,O){if(Q==null){return{}}var M={};for(var P=0,N=Q.length;P<N;P++){if(O){M[Q[P]]=O[P]}else{M[Q[P][0]]=Q[P][1]}}return M};L.indexOf=function(Q,O,P){if(Q==null){return -1}var N=0,M=Q.length;if(P){if(typeof P=="number"){N=(P<0?Math.max(0,M+P):P)}else{N=L.sortedIndex(Q,O);return Q[N]===O?N:-1}}if(n&&Q.indexOf===n){return Q.indexOf(O,P)}for(;N<M;N++){if(Q[N]===O){return N}}return -1};L.lastIndexOf=function(Q,O,P){if(Q==null){return -1}var M=P!=null;if(l&&Q.lastIndexOf===l){return M?Q.lastIndexOf(O,P):Q.lastIndexOf(O)}var N=(M?P:Q.length);while(N--){if(Q[N]===O){return N}}return -1};L.range=function(R,P,Q){if(arguments.length<=1){P=R||0;R=0}Q=arguments[2]||1;var N=Math.max(Math.ceil((P-R)/Q),0);var M=0;var O=new Array(N);while(M<N){O[M++]=R;R+=Q}return O};L.bind=function(O,N){if(O.bind===F&&F){return F.apply(O,o.call(arguments,1))}var M=o.call(arguments,2);return function(){return O.apply(N,M.concat(o.call(arguments)))}};L.partial=function(N){var M=o.call(arguments,1);return function(){return N.apply(this,M.concat(o.call(arguments)))}};L.bindAll=function(N){var M=o.call(arguments,1);if(M.length===0){M=L.functions(N)}H(M,function(O){N[O]=L.bind(N[O],N)});return N};L.memoize=function(O,N){var M={};N||(N=L.identity);return function(){var P=N.apply(this,arguments);return L.has(M,P)?M[P]:(M[P]=O.apply(this,arguments))}};L.delay=function(N,O){var M=o.call(arguments,2);return setTimeout(function(){return N.apply(null,M)},O)};L.defer=function(M){return L.delay.apply(L,[M,1].concat(o.call(arguments,1)))};L.throttle=function(R,T){var P,O,S,M;var Q=0;var N=function(){Q=new Date;S=null;M=R.apply(P,O)};return function(){var U=new Date;var V=T-(U-Q);P=this;O=arguments;if(V<=0){clearTimeout(S);S=null;Q=U;M=R.apply(P,O)}else{if(!S){S=setTimeout(N,V)}}return M}};L.debounce=function(O,Q,N){var P,M;return function(){var U=this,T=arguments;var S=function(){P=null;if(!N){M=O.apply(U,T)}};var R=N&&!P;clearTimeout(P);P=setTimeout(S,Q);if(R){M=O.apply(U,T)}return M}};L.once=function(O){var M=false,N;return function(){if(M){return N}M=true;N=O.apply(this,arguments);O=null;return N}};L.wrap=function(M,N){return function(){var O=[M];G.apply(O,arguments);return N.apply(this,O)}};L.compose=function(){var M=arguments;return function(){var N=arguments;for(var O=M.length-1;O>=0;O--){N=[M[O].apply(this,N)]}return N[0]}};L.after=function(N,M){if(N<=0){return M()}return function(){if(--N<1){return M.apply(this,arguments)}}};L.keys=e||function(O){if(O!==Object(O)){throw new TypeError("Invalid object")}var N=[];for(var M in O){if(L.has(O,M)){N[N.length]=M}}return N};L.values=function(O){var M=[];for(var N in O){if(L.has(O,N)){M.push(O[N])}}return M};L.pairs=function(O){var N=[];for(var M in O){if(L.has(O,M)){N.push([M,O[M]])}}return N};L.invert=function(O){var M={};for(var N in O){if(L.has(O,N)){M[O[N]]=N}}return M};L.functions=L.methods=function(O){var N=[];for(var M in O){if(L.isFunction(O[M])){N.push(M)}}return N.sort()};L.extend=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){M[O]=N[O]}}});return M};L.pick=function(N){var O={};var M=y.apply(C,o.call(arguments,1));H(M,function(P){if(P in N){O[P]=N[P]}});return O};L.omit=function(O){var P={};var N=y.apply(C,o.call(arguments,1));for(var M in O){if(!L.contains(N,M)){P[M]=O[M]}}return P};L.defaults=function(M){H(o.call(arguments,1),function(N){if(N){for(var O in N){if(M[O]==null){M[O]=N[O]}}}});return M};L.clone=function(M){if(!L.isObject(M)){return M}return L.isArray(M)?M.slice():L.extend({},M)};L.tap=function(N,M){M(N);return N};var I=function(T,S,N,O){if(T===S){return T!==0||1/T==1/S}if(T==null||S==null){return T===S}if(T instanceof L){T=T._wrapped}if(S instanceof L){S=S._wrapped}var Q=d.call(T);if(Q!=d.call(S)){return false}switch(Q){case"[object String]":return T==String(S);case"[object Number]":return T!=+T?S!=+S:(T==0?1/T==1/S:T==+S);case"[object Date]":case"[object Boolean]":return +T==+S;case"[object RegExp]":return T.source==S.source&&T.global==S.global&&T.multiline==S.multiline&&T.ignoreCase==S.ignoreCase}if(typeof T!="object"||typeof S!="object"){return false}var M=N.length;while(M--){if(N[M]==T){return O[M]==S}}N.push(T);O.push(S);var V=0,W=true;if(Q=="[object Array]"){V=T.length;W=V==S.length;if(W){while(V--){if(!(W=I(T[V],S[V],N,O))){break}}}}else{var R=T.constructor,P=S.constructor;if(R!==P&&!(L.isFunction(R)&&(R instanceof R)&&L.isFunction(P)&&(P instanceof P))){return false}for(var U in T){if(L.has(T,U)){V++;if(!(W=L.has(S,U)&&I(T[U],S[U],N,O))){break}}}if(W){for(U in S){if(L.has(S,U)&&!(V--)){break}}W=!V}}N.pop();O.pop();return W};L.isEqual=function(N,M){return I(N,M,[],[])};L.isEmpty=function(N){if(N==null){return true}if(L.isArray(N)||L.isString(N)){return N.length===0}for(var M in N){if(L.has(N,M)){return false}}return true};L.isElement=function(M){return !!(M&&M.nodeType===1)};L.isArray=u||function(M){return d.call(M)=="[object Array]"};L.isObject=function(M){return M===Object(M)};H(["Arguments","Function","String","Number","Date","RegExp"],function(M){L["is"+M]=function(N){return d.call(N)=="[object "+M+"]"}});if(!L.isArguments(arguments)){L.isArguments=function(M){return !!(M&&L.has(M,"callee"))}}if(typeof(/./)!=="function"){L.isFunction=function(M){return typeof M==="function"}}L.isFinite=function(M){return isFinite(M)&&!isNaN(parseFloat(M))};L.isNaN=function(M){return L.isNumber(M)&&M!=+M};L.isBoolean=function(M){return M===true||M===false||d.call(M)=="[object Boolean]"};L.isNull=function(M){return M===null};L.isUndefined=function(M){return M===void 0};L.has=function(N,M){return j.call(N,M)};L.noConflict=function(){w._=k;return this};L.identity=function(M){return M};L.times=function(Q,P,O){var M=Array(Q);for(var N=0;N<Q;N++){M[N]=P.call(O,N)}return M};L.random=function(N,M){if(M==null){M=N;N=0}return N+Math.floor(Math.random()*(M-N+1))};var m={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};m.unescape=L.invert(m.escape);var J={escape:new RegExp("["+L.keys(m.escape).join("")+"]","g"),unescape:new RegExp("("+L.keys(m.unescape).join("|")+")","g")};L.each(["escape","unescape"],function(M){L[M]=function(N){if(N==null){return""}return(""+N).replace(J[M],function(O){return m[M][O]})}});L.result=function(M,O){if(M==null){return null}var N=M[O];return L.isFunction(N)?N.call(M):N};L.mixin=function(M){H(L.functions(M),function(N){var O=L[N]=M[N];L.prototype[N]=function(){var P=[this._wrapped];G.apply(P,arguments);return s.call(this,O.apply(L,P))}})};var z=0;L.uniqueId=function(M){var N=++z+"";return M?M+N:N};L.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var v=/(.)^/;var h={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var i=/\\|'|\r|\n|\t|\u2028|\u2029/g;L.template=function(U,P,O){var N;O=L.defaults({},O,L.templateSettings);var Q=new RegExp([(O.escape||v).source,(O.interpolate||v).source,(O.evaluate||v).source].join("|")+"|$","g");var R=0;var M="__p+='";U.replace(Q,function(W,X,V,Z,Y){M+=U.slice(R,Y).replace(i,function(aa){return"\\"+h[aa]});if(X){M+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"}if(V){M+="'+\n((__t=("+V+"))==null?'':__t)+\n'"}if(Z){M+="';\n"+Z+"\n__p+='"}R=Y+W.length;return W});M+="';\n";if(!O.variable){M="with(obj||{}){\n"+M+"}\n"}M="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+M+"return __p;\n";try{N=new Function(O.variable||"obj","_",M)}catch(S){S.source=M;throw S}if(P){return N(P,L)}var T=function(V){return N.call(this,V,L)};T.source="function("+(O.variable||"obj")+"){\n"+M+"}";return T};L.chain=function(M){return L(M).chain()};var s=function(M){return this._chain?L(M).chain():M};L.mixin(L);H(["pop","push","reverse","shift","sort","splice","unshift"],function(M){var N=C[M];L.prototype[M]=function(){var O=this._wrapped;N.apply(O,arguments);if((M=="shift"||M=="splice")&&O.length===0){delete O[0]}return s.call(this,O)}});H(["concat","join","slice"],function(M){var N=C[M];L.prototype[M]=function(){return s.call(this,N.apply(this._wrapped,arguments))}});L.extend(L.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/underscore-post.js' */
window.auiNg=window.auiNg||{};window.auiNg._=_.noConflict();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/aui-ng-apps.js' */
(function(c,b){window.auiNg=window.auiNg||{};window.auiNg.getPartial=function(g,e,h){if(h.indexOf(".js")!==h.length-3){h=h+".js"}var f=auiNg._templates[g];if(f){var d=f[e];if(d){return d[h]}}throw new Error('Partial "'+g+":"+e+">"+h+'" is not defined.')};var a=function(g,d,e){if(d&&d["ng"+e]&&g[e]){var f=d["ng"+e];for(var h in f){if(f.hasOwnProperty(h)){g[e](h,f[h])}}}};window.auiNg.createDialogApp=function(f,e,g,d){var h=b.module(f);a(h,g,"constant");a(h,g,"value");var i=b.bootstrap(undefined,[f]);i.invoke(["AuiDialog",function(j){var k=function(){var m=j.create(e,g);m.open(g).then(d||b.noop,b.noop)};var l=i.get("$rootScope");if(!l.$$phase){l.$apply(k)}else{k()}}]);return h};window.auiNg.apply=function(d,e){if(d.$$phase){if(typeof e==="string"){e=new Function(e)}if(typeof e==="function"){e()}}else{d.$apply(expr)}}})(AJS.$,angular);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/aui-ng-dialog.js' */
(function(b,a){a.module("auiNg",[]).provider("AuiDialog",function(){this.$get=["$compile","$controller","$http","$log","$q","$rootScope","$templateCache",function(h,e,j,i,g,d,c){var f=function(m,n){var l=this;var k={width:n.width||860,height:n.height||530,closeOnEsc:true,closeOnOutsideClick:true,pageIndex:0,panelIndex:0,keypressListener:function(p){var o=f.dialogStack;if(l.options.closeOnEsc&&p.keyCode===27&&l===o[o.length-1]){p.stopImmediatePropagation();l.close()}}};this.template=m;this.options=a.extend(k,n);this.dialog=new AJS.Dialog(this.options)};f.dialogStack=[];f.prototype.gotoPage=function(k){this.dialog.gotoPage(k)};f.prototype.gotoPanel=function(k){this.dialog.gotoPanel(k)};f.prototype.addPage=function(){this.dialog.addPage.apply(this.dialog,arguments)};f.prototype.addHeader=function(k){this.dialog.addHeader(k||"Dialog","sv-dialog-heading")};f.prototype.addPanel=function(m,l,k){this.dialog.addPanel.apply(this.dialog,arguments)};f.prototype.addButton=function(k,m,l){this.dialog.addButton.apply(this.dialog,arguments)};f.prototype.addLink=function(k,l){this.dialog.addLink.apply(this.dialog,arguments)};f.prototype.element=function(){return this.dialog.popup.element};f.prototype.open=function(n){var l=this;this.dialog.show();var m=this.dialog.popup.element;var k=window.auiNg.Util.LoadingBlanket.show(m);l.$scope=d.$new(true);a.extend(l.$scope,n,{auiDialog:l});l.$scope.dialog=l.dialog;if(typeof this.template==="function"){this.template(l.$scope)}else{if(typeof this.template==="string"){h(this.template)(l.$scope)}}f.dialogStack.push(l);l.dialog.gotoPage(this.options.pageIndex);l.dialog.gotoPanel(this.options.panelIndex);k.hide();if(this.options.className){b(m).addClass(this.options.className)}this._fixBlankets();this.deferred=g.defer();return this.deferred.promise};f.prototype._fixBlankets=function(){var k=this;this.$blanket=AJS("div").addClass("k15t-blanket");this.$blanket.css("z-index",this.dialog.popup.element.css("z-index")-1).appendTo("body").show().click(function(){if(k.options.closeOnOutsideClick){k.close()}});if(AJS.dim.$dim){AJS.dim.$dim.hide()}};f.prototype.close=function(l,k){f.dialogStack.pop();this.$blanket.remove();this.$blanket=null;if(l){this.deferred.resolve(k)}else{this.deferred.reject(k)}this.dialog.remove()};return{create:function(k,l){return new f(k,l||{})}}}]})})(AJS.$,angular);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/aui-ng-directives.js' */
(function(d,c,b){var a=function(){return(parseInt(AJS.version.charAt(0))>=5)};c.module("auiNg").directive("auiDialogPage",[function(){return{controller:function(){this.components=[]},link:function(n,e,m,g){var j=n.auiDialog;var k=j.dialog;if(!k.page.length||k.page.length>1||k.page[0].panel.length){n.auiDialog.addPage(m["class"])}else{if(m["class"]){d(k.page[0].element).find(".dialog-page-body").addClass(m["class"])}}var h=k.page[k.page.length-1];m.$observe("header",function(i){h.addHeader(i)});if(typeof n.header==="string"){m.$set("header",n.header)}for(var f=0;f<g.components.length;++f){var l=g.components[f];l(j)}g.components.length=0;if(!n.$root.$$phase){n.$apply()}}}}]).directive("auiDialogPanel",[function(){return{require:"^auiDialogPage",link:function(h,g,e,f){f.components.push(function(i){var j=e["button-id"]||(e["class"]||(~~(Math.random()*100000)))+"-button";i.addPanel(e.header||"//TODO: set title attribute",g.contents(),e["class"],j);if(e.auiValidate){var k=jQuery("#"+j);h.$watch(e.auiValidate,function(m,l){if(!!m){k.removeClass("aui-validation-error");k.addClass("aui-validation-success")}else{k.removeClass("aui-validation-success");k.addClass("aui-validation-error")}})}})}}}]).directive("auiDialogButton",[function(){return{scope:{onClick:"&ngClick",isDisabled:"=auiDisabled",label:"=auiLabel"},require:"^auiDialogPage",link:function(h,g,e,f){f.components.push(function(l){var j="button-"+(~~(Math.random()*100000));var i="";if(e["class"]){i=e["class"]}i=j+" "+j;l.addButton(g.text(),function(){if(!h.$$phase){h.$apply(h.onClick)}else{h.onClick()}},i);var k=jQuery("."+j);if(k.length){h.$watch("isDisabled",function(o,n){var m=!!o;k[0].disabled=m});h.$watch("label",function(m){k.html(m)})}})}}}]).directive("auiDialogLink",[function(){return{scope:{onClick:"&ngClick"},require:"^auiDialogPage",link:function(h,g,e,f){f.components.push(function(i){i.addLink(g.text(),function(){if(!h.$$phase){h.$apply(h.onClick)}else{h.onClick()}},e["class"])})}}}]).directive(b.reduce(["focus","blur","keyup","keydown","keypress"],function(e,f){var g="aui"+f[0].toUpperCase()+f.substr(1);e[g]=["$rootScope","$parse",function(h,i){return function(m,k,j){var l=i(j[g]);k.bind(f,function(n){var o=function(){l(m,{$event:n})};if(m.$$phase||h.$$phase){o()}else{m.$apply(o)}})}}];return e},{})).directive("auiInput",[function(){var e=0;return{replace:true,scope:{auiErrors:"=",auiName:"@",auiLabel:"@",auiRequired:"=",auiDescription:"@",auiClass:"@",ngModel:"="},template:'<div class="field-group"><label for="{{auiName}}-{{instanceId}}">{{auiLabel}} <span style="color: red; font-weight: bold;" ng-show="auiRequired">*</span></label><input class="text {{auiClass}}" type="text" id="{{auiName}}-{{instanceId}}" ng-model="ngModel"><div  class="error">{{auiErrors[auiName]}}</div><div class="description" ng-show="!!auiDescription">{{auiDescription}}</div>{{fieldErrors[auiName]}}</div>',link:function(h,g,f){h.instanceId=e++;g.find(".text")[0].required=!!h.auiRequired}}}]).directive("auiToolbar",function(){var e="";if(a()){e='<div class="aui-toolbar2" role="toolbar">    <div class="aui-toolbar2-inner">        <div class="aui-toolbar2-primary" ng-transclude>        </div>    </div></div>'}else{e='<div class="aui-toolbar" ng-transclude />'}return{replace:true,transclude:true,template:e,link:c.noop}}).directive("auiToolbarButton",function(){var e="";if(a()){e='<button class="aui-button">{{title}}</button>'}else{e='<ul class="toolbar-group">    <li class="toolbar-item">        <button class="toolbar-trigger" ng-click="showRestUrlDialog()" title="{{title}}">            <span class="trigger-text">{{title}}</span>        </button>    </li></ul>'}return{replace:true,transclude:true,scope:{title:"@title",onClick:"&ngClick"},template:e,link:function(h,g,f){d(g).click(h.onClick)}}}).directive("auiToolbarDropdown",function(){var e="";var f=c.noop;if(a()){e='<button aria-owns="123" aria-haspopup="true" class="aui-button aui-dropdown2-trigger aui-style-default">    {{title}}    <div id="123" style="z-index: 3500" class="aui-dropdown2 aui-style-default" aria-hidden="true">        <ul class="aui-list-truncate" ng-transclude>        </ul>    </div></button>';f=function(i,h,g){var j="dropdown-id-"+new Date().getTime()+"-"+(~~(Math.random()*100000));d(h).attr("aria-owns",j);d(h).find("div.aui-dropdown2").attr("id",j)}}else{e='<ul class="toolbar-group">    <li class="toolbar-item toolbar-dropdown">        <div class="aui-dd-parent">            <a href="javascript:" class="toolbar-trigger aui-dd-trigger" id="format-dropdown-display">                <span class="dropdown-text">{{title}}</span>                <span class="icon icon-dropdown"></span>            </a>            <ul class="aui-dropdown" ng-transclude>            </ul>        </div>    </li></ul>';f=function(i,h,g){d(h).dropDown("Standard",{alignment:"left"})}}return{replace:true,transclude:true,scope:{title:"@title"},template:e,link:f}}).directive("auiToolbarDropdownItem",function(){var e="";if(a()){e='<li><a href="javascript:">{{title}}</a></li>'}else{e='<li class="dropdown-item">    <span style="width: 100%; display: inline-block;">        <a style="width: 100%; padding-top: 0; padding-bottom: 0;" href="javascript:" class="item-link">{{title}}</a>    </span></li>'}var f=function(i,h,g){d(h).click(i.onClick)};return{replace:true,transclude:true,scope:{title:"@title",onClick:"&ngClick"},template:e,link:f}}).directive("auiFadeOut",function(){return{restrict:"A",link:function(f,e,g){f.$watch(g.auiFadeOut,function(h){if(h){e.show().delay(2000).fadeOut()}else{e.hide()}})}}}).directive("auiDropdown",function(){return function(g,f,e){jQuery(f[0]).dropDown("Standard",{alignment:(e.toolbarDropdown||"left")})}}).directive("auiAutoFocus",function(){return function(g,f,e){g.$watch(e.ngShow,function(h){if(h){f.focus()}})}})})(AJS.$,angular,auiNg._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.js.aui-ng:aui-ng', location = '/com/k15t/js/aui-ng-loadingblanket.js' */
(function(a){window.auiNg.Util=window.auiNg.Util||{};window.auiNg.Util.LoadingBlanket={show:function(f){var b=a(f);var d=b.next(".loading-overlay");if(!d.length||d.is(":visible")){d=a('<div class="loading-overlay"/>');d.insertAfter(b)}var c={position:"absolute"};var e={};var g=function(j){e=jQuery.extend(e,c);var h=b.position();var m=b.css(["margin-top","margin-left","border-top-width","border-left-width","z-index"]);e.top=h.top+parseInt(b.css("margin-top"),10)+parseInt(b.css("border-top-width"),10);e.left=h.left+parseInt(b.css("margin-left"),10)+parseInt(b.css("border-left-width"),10);e.width=b.innerWidth();e.height=b.innerHeight();e["z-index"]=b.css("z-index")+1;for(var l in e){if(e.hasOwnProperty(l)&&c.hasOwnProperty(l)){if(e[l]!==c[l]){j=true;break}}}if(j){d.css(e);var k=c;c=e;e=k}if(f.is(":visible")){setTimeout(g,100)}else{d.hide()}};g(true);d.show();return{element:f,blanket:d,hide:function(){d.hide();return this},show:function(){g(true);d.show();return this},dispose:function(){d.remove();return this},update:g}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/common-dialogs-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-html'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-html'; // Will be filled in by Web Resource Transformer;

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-common-dialogs', ['ngResource', 'ngSanitize', 'auiNg']);

    ng.module(shortPluginKey + '-common-dialogs')
        .controller('MessageDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.exceptionExpanded = false;

                $scope.getTitle = function() {
                    if ($scope.message && $scope.message.severity) {
                        if ($scope.message.severity == 'Info' ) {
                            return "Info";
                        } else if ($scope.message.severity == 'Warning' ) {
                            return "Warning";
                        } else if ($scope.message.severity == 'Error' ) {
                            return "Error";
                        }                     
                    } else if ($scope.message.title) {
                        return $scope.message.title;
                    }
                    return "Error";
                };

                $scope.getMessage = function() {
                    if ($scope.message && $scope.message.message) {
                        return $scope.message.message;
                    }
                    return "Error"; 
                };

                $scope.isShowSupportInformation = function() {
                    return ($scope.message && $scope.message.stackTrace);
                };

                $scope.toggleExceptionDisplay = function() {
                    $scope.exceptionExpanded = !$scope.exceptionExpanded;
                };

                $scope.close = function() {
                    $scope.auiDialog.close(true);
                };
            }
        ])
        .provider('CommonDialog', function () {
            this.$get = [function () {
                var partial = auiNg.getPartial(pluginKey, 'common-dialogs', 'message-dialog');
                var defaultOpts = {
                    className : shortPluginKey + '-common-message-dialog',
                    closeOnOutsideClick : false,
                    closeOnEsc : true,
                    width : 760
                };

                return {
                    openMessageDialog: function (response) {
                        var opts = ng.extend({
                            message : response.data,
                            height : (!response.data.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    },
                    openTaskStatusMessageDialog: function (taskStatus) {
                        var opts = ng.extend({
                            message : {
                                message: taskStatus.message,
                                stackTrace: taskStatus.stackTrace,
                                severity: (taskStatus.status == 0) ? 'Info' : 'Error'
                            },
                            height : (!taskStatus.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    }
                };
            }];
        });

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/message-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-html'] =  auiNg._templates['com.k15t.scroll.scroll-html'] || {};
var moduleTemplates = pluginTemplates['common-dialogs'] = pluginTemplates['common-dialogs'] || {};
moduleTemplates['message-dialog.js'] = '<div aui-dialog-page class="message-page" header="{{getTitle()}}" ng-controller="MessageDialogController">    <div aui-dialog-panel class="message-panel">        <div class="aui-message error">            <p ng-bind-html="getMessage()"></p>            <p ng-hide="isShowSupportInformation()">If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a>.</p>        </div>        <div class="support-info-box" ng-show="isShowSupportInformation()">            <p>                <strong>Getting Support</strong>            </p>            <p>                If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a> and provide the following information.                <br/>                <a href="" ng-click="toggleExceptionDisplay()">                    <span ng-hide="exceptionExpanded">Show error details &raquo;</span>                    <span ng-show="exceptionExpanded">Hide error details &laquo;</span>                </a>            </p>            <pre class="stacktrace-container" ng-show="exceptionExpanded">{{message.stackTrace}}</pre>        </div>    </div>    <div aui-dialog-link ng-click="close()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-dialog-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-html'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-html'; // Will be filled in by Web Resource Transformer;
    var exporterKey = 'com.k15t.scroll.scroll-html:html-exporter'; // Will be filled in by Web Resource Transformer;
    var launcherSelector = '#com-k15t-confluence-' + shortPluginKey + '-launcher, .' + shortPluginKey + '-launcher';

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-export-dialog', ['ngResource', 'ngSanitize', 'auiNg', shortPluginKey + '-common-dialogs']);

    var getDialogClass = function(classname) {
        return classname + ' ' + ((AJS.params.buildNumber >= 4104) ? 'confluence-5-dialog' : 'confluence-4-dialog')  
    };

    var openExportDialog = function(launcher) {
        var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-dialog');
        var opts = {
            className: getDialogClass(shortPluginKey + '-export-dialog'),
            closeOnOutsideClick: false,
            closeOnEsc: true
        };

        var directExportSchemeIdAttr = AJS.$(launcher).closest("." + shortPluginKey + "-launcher").attr("data-export-scheme-id");
        if (directExportSchemeIdAttr) {
            opts.exportSchemeId = directExportSchemeIdAttr;
            opts.directExportMode = true;
        }

        auiNg.createDialogApp(shortPluginKey + '-export-dialog', partial, opts);
    };

    AJS.toInit(function($) {
        AJS.$(launcherSelector).click(function(e) {
            openExportDialog(e.target);
            e.preventDefault();
        });
    });

    var isBundledExportScheme = function(exportSchemeId) {
        return (exportSchemeId.indexOf('bundled_') == 0);
    };

    var hasScrollVersionsCoordinates = function() {
        return window.Scroll
                && Scroll.Versions
                && Scroll.Versions.Context
                && Scroll.Versions.Context.modules
                && Scroll.Versions.Context.user
                && (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace);
    };


    ng.module(shortPluginKey + '-export-dialog')
        .controller('ExportDialogController', [ '$scope', '$http', '$q', 'AdvancedExportDialog', 'AuiDialog',
            function($scope, $http, $q, AdvancedExportDialog, AuiDialog) {
                $scope.dialogData = AdvancedExportDialog.get(function() {
                    $scope.dialogDataLoaded = true;
                });

                $scope.switchToSimpleModeCallback = ng.noop;
                $scope.switchToAdvancedModeCallback = ng.noop;

                $scope.exportSchemeModified = false;

                $scope.exportSchemeValidators = [];

                $scope.isExportSchemeValid = function(exportScheme) {
                    for (var i = 0; i < $scope.exportSchemeValidators.length; ++i ){
                        var validate = $scope.exportSchemeValidators[i];
                        if (!validate(exportScheme)) {
                            return false;
                        }
                    }
                    return true;
                };

                $scope.exportMode = 'simple';

                $scope.setSimpleExportMode = function() {
                    $scope.exportMode = 'simple';
                };
                $scope.setAdvancedExportMode = function() {
                    $scope.exportMode = 'advanced';
                };
                $scope.isSimpleExportMode = function() {
                    return $scope.exportMode == 'simple';
                };
                $scope.isAdvancedExportMode = function() {
                    return $scope.exportMode == 'advanced';
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.exportScheme;
                    $scope.auiDialog.gotoPage(0);
                    $scope.switchToSimpleModeCallback();
                };

                $scope.switchToAdvancedMode = function(update) {
                    $scope.auiDialog.gotoPage(1);
                    $scope.auiDialog.gotoPanel(0);
                    if (update) {
                        $scope.switchToAdvancedModeCallback();
                    }
                };

                $scope.openExportProgressDialog = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-progress-dialog');
                    var progressDialog = AuiDialog.create(partial, {className: shortPluginKey + '-export-progress-dialog', closeOnOutsideClick: false, closeOnEsc: false, height: 200, width: 680});
                    progressDialog.open({exportTaskId: $scope.exportTaskId, exportFinishedCallback: function(taskStatus) {
                        $scope.switchToResultPage(taskStatus);
                    }});
                };

                $scope.switchToResultPage = function(taskStatus) {
                    $scope.taskStatus = taskStatus;
                    $scope.auiDialog.gotoPage(2);
                    $scope.exportFinishedCallback();
                };

                $scope.appendScrollVersionsCoordinates = function(params) {
                    if (hasScrollVersionsCoordinates()) {
                        if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                            params.versionId = Scroll.Versions.Context.user.workingVersion.versionId;
                        }
                        if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                            params.variantId = Scroll.Versions.Context.user.currentVariant.id;
                        }
                        if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                            params.languageKey = Scroll.Versions.Context.user.currentLanguage.key;
                        }
                    }
                };
            } ])
        .controller('SimpleModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.selectExportScheme = function(exportScheme) {
                    $scope.selectedExportScheme = exportScheme;
                    $scope.$parent.exportSchemeId = exportScheme.id;
                    $scope.$parent.exportSchemeName = exportScheme.name;
                };

                $scope.updateExportSchemeList = function(onUpdatedHandler) {                    
                    $scope.exportSchemes = ExportScheme.query({spaceKey: AJS.params.spaceKey}, function() {
                        var selectedExportSchemeId = $scope.$parent.exportSchemeId;
                        if (!selectedExportSchemeId && ($scope.exportSchemes.length > 0)) {
                            selectedExportSchemeId = $scope.exportSchemes[0].id;
                        }
                        _.each($scope.exportSchemes, function(exportScheme){
                            if (exportScheme.id == selectedExportSchemeId) {
                                $scope.selectExportScheme(exportScheme);
                            }
                        });
                        if (!$scope.selectedExportScheme && ($scope.exportSchemes.length > 0)) {
                            $scope.selectExportScheme($scope.exportSchemes[0]);
                        }
                        if (onUpdatedHandler) {
                            onUpdatedHandler();
                        }
                    });
                };
                $scope.$parent.switchToSimpleModeCallback = $scope.updateExportSchemeList;

                $scope.getExportSchemeClass = function(exportScheme) {
                    var classes = ($scope.selectedExportScheme == exportScheme) ? "selected" : "";
                    classes = classes + (isBundledExportScheme(exportScheme.id) ? " bundled" : "");
                    return classes + ((exportScheme.id.indexOf('-LASTUSED', exportScheme.id.length - 9) !== -1) ? " last-used" : "");
                };

                $scope.switchToAdvancedMode = function() {
                    $scope.$parent.switchToAdvancedMode(true);
                };

                $scope.selectAndStartExport = function(exportScheme) {
                    $scope.selectExportScheme(exportScheme);
                    $scope.startExport();
                };

                $scope.canStartExport = function() {
                    return ($scope.selectedExportScheme != undefined);
                };

                $scope.startExport = function() {
                    if (!$scope.selectedExportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = false;

                    ExportScheme.get({id: $scope.selectedExportScheme.id}, function(loadedExportScheme) {
                        $scope.$parent.exportScheme = loadedExportScheme;
                        if ($scope.$parent.isExportSchemeValid(loadedExportScheme)) {
                            var params = {
                                exportSchemeId: $scope.selectedExportScheme.id
                            };
                            $scope.$parent.appendScrollVersionsCoordinates(params);

                            Export.startWithExistingExportScheme(params, function(task) {
                                $scope.$parent.exportTaskId = task.id;
                                $scope.$parent.setSimpleExportMode();
                                $scope.$parent.openExportProgressDialog();
                            }, function(response) {
                                CommonDialog.openMessageDialog(response);
                            });
                        } else {
                            $scope.switchToAdvancedMode();
                        }
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

                $scope.hasLicenseMessage = function() {
                    return !!$scope.$parent.dialogData.licenseMessage;
                };

                $scope.hasScrollVersionsCoordinates = function() {
                    return hasScrollVersionsCoordinates();
                };
                
                $scope.isCompatibleScrollVersionsAvailable = function() {
                    return $scope.$parent.dialogData.compatibleScrollVersionsAvailable;
                };

                $scope.getScrollVersionsMessage = function() {
                    if (hasScrollVersionsCoordinates()) {
                        if ($scope.isCompatibleScrollVersionsAvailable()) {
                            var modules = [];
                            if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                                modules.push(AJS.format("version \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.workingVersion.name));
                            }
                            if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                                if (Scroll.Versions.Context.user.currentVariant.id != 'all') {
                                    modules.push(AJS.format("variant \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentVariant.name));
                                } else {
                                    modules.push("\u003cstrong>all variants\u003c\/strong>");
                                }
                            }
                            if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                                modules.push(AJS.format("language \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentLanguage.displayName));
                            }

                            var msg = "You will be exporting" + " ";
                            for (var i = 0; i < modules.length; i++) {
                                if (i > 0) {
                                    msg = msg + ", ";
                                }
                                msg = msg + modules[i];
                            }
                            msg = msg + ".";
                            return msg;
                        } else {
                            return "The installed version of Scroll Versions is not compatible with Scroll HTML Exporter. Please update to the latest version of Scroll Versions.";    
                        }
                    } else {
                        return '';
                    }
                };
                
                $scope.getScrollVersionsMessageClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "info" : "warning";
                };

                $scope.getScrollVersionsMessageIconClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "icon-info" : "icon-warning";
                };

                var onUpdatedHandler = ($scope.$parent.directExportMode) ? $scope.startExport : ng.noop;
                $scope.updateExportSchemeList(onUpdatedHandler);
            } ])
        .controller('AdvancedModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.init = function() {
                    $scope.dialogData = $scope.$parent.dialogData;
                    if (!$scope.$parent.exportSchemeId) {
                        $scope.$parent.exportSchemeId = 'INITIAL';
                        $scope.$parent.exportSchemeName = 'INITIAL';
                    }
                    if (!$scope.$parent.exportScheme) {
                        ExportScheme.get({id: $scope.$parent.exportSchemeId}, function(loadedExportScheme) {
                            $scope.$parent.exportScheme = loadedExportScheme;
                        });
                    }
                    $scope.$parent.exportScheme = $scope.exportScheme;
                    $scope.originalExportScheme = ng.copy($scope.exportScheme);
                };

                $scope.$parent.switchToAdvancedModeCallback = $scope.init;

                $scope.getPageSelectionStrategyLabelStyle = function(pageSelectionStrategy) {
                    return pageSelectionStrategy.enabled ? {} : {color: 'silver'};
                };

                $scope.getI18nTemplateLocation = function(location) {
                    if (location == 'space') {
                        return "Space Templates";
                    } else {
                        return "Global Templates";
                    }
                };

                $scope.isTemplateSelected = function(exportScheme) {
                    exportScheme = exportScheme || $scope.exportScheme; 
                    if (exportScheme && $scope.$parent.dialogData && $scope.$parent.dialogData.templates) {
                        var templateId = exportScheme.exporter.templateId;
                        if (templateId) {
                            for (var i = 0; i < $scope.$parent.dialogData.templates.length; i++) {
                                if (templateId == $scope.$parent.dialogData.templates[i].id) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    }
                    return true;
                };
                $scope.$parent.exportSchemeValidators.push($scope.isTemplateSelected);

                $scope.canStartExport = function() {
                    return $scope.$parent.isExportSchemeValid($scope.$parent.exportScheme);
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.originalExportScheme;
                    $scope.$parent.switchToSimpleMode();
                };

                var isExportSchemeModified = function() {
                    var before = ng.toJson($scope.originalExportScheme);
                    var after = ng.toJson($scope.$parent.exportScheme);
                    return (before != after);
                };

                $scope.startExport = function() {
                    if (!$scope.exportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = isExportSchemeModified();

                    var params = {
                        rootPageId: AJS.params.pageId,
                        exportScheme: $scope.exportScheme
                    };
                    $scope.$parent.appendScrollVersionsCoordinates(params);

                    Export.startWithNewExportScheme(params, function(task) {
                        $scope.$parent.exportTaskId = task.id;
                        $scope.$parent.setAdvancedExportMode();
                        $scope.$parent.openExportProgressDialog();
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

            } ])
        .controller('ExportProgressDialogController', [ '$scope', '$http', '$timeout', '$q', 'TaskStatus', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $timeout, $q, TaskStatus, AuiDialog, CommonDialog) {
                var statusPoller = undefined;

                $scope.exportTaskId = $scope.$parent.exportTaskId;
                $scope.exportCancelled = false;
                var exportFinishedCallback = $scope.$parent.exportFinishedCallback;

                (function pollTaskStatus() {
                    TaskStatus.get({id: $scope.exportTaskId}, function(taskStatus) {
                        $scope.taskStatus = taskStatus;
                        if (taskStatus.status == -2) { // System or license heck failed, see constants in TaskStatus interface.
                            $scope.cancelAndClose();
                            CommonDialog.openTaskStatusMessageDialog(taskStatus);
                        } else {
                            if (taskStatus.finished) {
                                $scope.auiDialog.close();
                                exportFinishedCallback(taskStatus);
                            } else {
                                statusPoller = $timeout(pollTaskStatus, 500);
                            }
                        }
                    }, function(response) {
                        if (!$scope.exportCancelled) {
                            CommonDialog.openMessageDialog(response);
                        }
                    });
                })();

                $scope.cancelAndClose = function() {
                    // Additional guard flag, in case the browser somehow executes a pending TaskStatus.get after our TaskStatus.remove.
                    $scope.exportCancelled = true;

                    if (statusPoller) {
                        $timeout.cancel(statusPoller);
                    }
                    TaskStatus.remove({id: $scope.$parent.exportTaskId});
                    $scope.auiDialog.close();
                };
            } ])
        .controller('ExportResultController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.getDownloadUrl = function() {
                    if (!$scope.$parent.taskStatus || !$scope.$parent.taskStatus.filename) {
                        return '';
                    }
                    return AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/' + $scope.$parent.exportTaskId + '/' + encodeURIComponent($scope.$parent.taskStatus.filename) || '';
                };

                $scope.$parent.exportFinishedCallback = function() {
                    if ($scope.$parent.taskStatus.status == 0) {
                        // Ultra ugly workaround for invisible dropdowns in Confluence 5.10 TODO Fix this in AUI-NG / dialog system
                        // Confluence's AUI overwrites our z-index of 3500 and sets it to 3000 because it doesn't know about our blankets.
                        // This makes the dropdown popup appear under the dialog div.
                        $('#export-result-form .aui-toolbar2 button.aui-dropdown2-trigger').click(function(e) {
                            setTimeout(function(e) {
                                $('#' + $(e.target).attr('aria-controls')).css('z-index', '3500');
                            },0, e)
                        });

                        var downloadUrl = $scope.getDownloadUrl();
                        window.setTimeout(function() {
                            window.location.href = downloadUrl;
                        }, 500);

                        var lastUsedExportScheme = ng.copy($scope.$parent.exportScheme);
                        lastUsedExportScheme.id = AJS.params.spaceKey + '-LASTUSED';
                        lastUsedExportScheme.name = "My last export settings";
                        lastUsedExportScheme.description = AJS.format("Last used on {1} in space \'\'{0}\'\'.", AJS.params.spaceName, new Date().toLocaleString());
                        ExportScheme.save(lastUsedExportScheme);
                    }
                };

                $scope.isSuccess = function() {
                    return ($scope.$parent.taskStatus && $scope.$parent.taskStatus.status >= 0);
                };

                // http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/
                var number_format = function(number, decimals, dec_point, thousands_sep) {        
                    var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;
                    var d = dec_point == undefined ? "," : dec_point;
                    var t = thousands_sep == undefined ? "." : thousands_sep, s = n < 0 ? "-" : "";
                    var i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "";
                    var j = i.length;
                    j = (j > 3) ? j % 3 : 0;
                    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
                };

                // http://snipplr.com/view/5949/
                $scope.formatFileSize = function() {
                    if (!$scope.taskStatus || !$scope.taskStatus.fileSize) {
                        return '';
                    }
                    var filesize = $scope.taskStatus.fileSize;
                    if (filesize >= 1073741824) {
                        return number_format(filesize / 1073741824, 2, '.', '') + ' GB';
                    } else {
                        if (filesize >= 1048576) {
                            return number_format(filesize / 1048576, 2, '.', '') + ' MB';
                        } else {
                            if (filesize >= 1024) {
                                return number_format(filesize / 1024, 0) + ' KB';
                            } else {
                                return number_format(filesize, 0) + ' bytes';
                            }
                        }
                    }
                    return filesize;
                };

                $scope.canAdministerSpace = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.isGlobalAdmin = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator;
                };

                var isSpaceExportScheme = function(exportScheme) {
                    return exportScheme.id.indexOf('-') > 0;
                };

                $scope.isDisplayUpdateAction = function() {
                    return $scope.$parent.isAdvancedExportMode()
                            && ($scope.$parent.exportSchemeModified)
                            && ($scope.$parent.dialogData.isGlobalAdministrator
                                    || ($scope.$parent.dialogData.isSpaceAdministrator && isSpaceExportScheme($scope.$parent.exportScheme)));
                };

                $scope.isDisplaySaveAsAction = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.updateCurrentExportScheme = function() {
                    if (!isBundledExportScheme($scope.$parent.exportScheme.id) && ($scope.$parent.exportScheme.id != 'INITIAL')) {
                        ExportScheme.save($scope.$parent.exportScheme, function() {
                            $scope.updateSucceededTrigger = new Date();
                            $scope.lastSavedExportSchemeId = $scope.exportScheme.id;
                        }, function(response) {
                            CommonDialog.openMessageDialog(response);
                        });                        
                    } else {
                        CommonDialog.openMessageDialog({
                            data: {
                                title: "Were sorry ...",
                                message: "You tried to update a bundled system export scheme, which is not supported. Please save your settings as new export scheme."
                            }
                        });
                    }
                };

                $scope.saveAsNewExportScheme = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'save-export-scheme-dialog');
                    var saveAsDialog = AuiDialog.create(partial, {className: shortPluginKey + '-save-export-scheme-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 300, width: 560});
                    saveAsDialog.open({
                        exportScheme: ng.copy($scope.$parent.exportScheme),
                        isSpaceAdmin: $scope.$parent.dialogData.isSpaceAdministrator,
                        isGlobalAdmin: $scope.$parent.dialogData.isGlobalAdministrator
                    }).then(function(context) {
                        $scope.updateSucceededTrigger = new Date();
                        $scope.lastSavedExportSchemeId = context.exportSchemeId;
                    }, ng.noop);
                };

                $scope.showRestUrlDialog = function() {
                    var exportSchemeId = $scope.lastSavedExportSchemeId || $scope.$parent.exportScheme.id;
                    var isExportSchemeModified = ($scope.lastSavedExportSchemeId) ? false : $scope.$parent.exportSchemeModified;
                    var compatibleScrollVersionsAvailable = $scope.$parent.dialogData.compatibleScrollVersionsAvailable;

                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'rest-url-dialog');
                    var restUrlDialog = AuiDialog.create(partial, {className: shortPluginKey + '-rest-url-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 250, width: 560});
                    restUrlDialog.open({exportSchemeId : exportSchemeId, isExportSchemeModified: isExportSchemeModified, isCompatibleScrollVersionsAvailable: compatibleScrollVersionsAvailable});
                };

                $scope.openSpaceExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/spaces/' + shortPluginKey + '/export-schemes.action?key=' + AJS.params.spaceKey, '_blank');
                };

                $scope.openGlobalExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/admin/' + shortPluginKey + '/export-schemes.action', '_blank');
                };

                $scope.goBack = function() {
                    if ($scope.$parent.isSimpleExportMode()) {
                        $scope.$parent.switchToSimpleMode();
                    } else if ($scope.$parent.isAdvancedExportMode()) {
                        $scope.$parent.switchToAdvancedMode(false);
                    } else {
                        alert('Unknown export mode. Please close and re-open the dialog.');
                    }
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('SaveExportSchemeDialogController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.saveLocation = 'space';

                $scope.canSubmit = function() {
                    return $scope.exportScheme && $scope.exportScheme.name && ($scope.exportScheme.name.length > 0);
                };

                $scope.saveExportScheme = function() {
                    if ($scope.exportScheme.id) {
                        delete $scope.exportScheme.id;
                    }

                    var params = {};
                    if ($scope.saveLocation == 'space') {
                        params.spaceKey = AJS.params.spaceKey;
                    }

                    var savedExportScheme = ExportScheme.create(params, $scope.exportScheme, function() {
                        $scope.auiDialog.close(true, {exportSchemeId : savedExportScheme.id});
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('RestUrlDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.isExportSchemeModified = $scope.$parent.isExportSchemeModified;

                $scope.getSyncRestUrl = function() {
                    var url = AJS.format('{0}/rest/{1}/1.0/sync-export?exportSchemeId={2}&rootPageId={3}', AJS.params.baseUrl || AJS.$('meta#confluence-base-url').attr('content'), shortPluginKey, $scope.$parent.exportSchemeId, AJS.params.pageId);
                    if (hasScrollVersionsCoordinates() && $scope.$parent.isCompatibleScrollVersionsAvailable) {
                        var userCtx = Scroll.Versions.Context.user;
                        var modules = Scroll.Versions.Context.modules;

                        if (modules.VersionManagement.isEnabledInSpace && userCtx.workingVersion && userCtx.workingVersion.versionId) {
                            url = url + '&versionId=' + userCtx.workingVersion.versionId;
                        }
                        if (modules.VariantManagement.isEnabledInSpace && userCtx.currentVariant && userCtx.currentVariant.id) {
                            url = url + '&variantId=' + userCtx.currentVariant.id;
                        }
                        if (modules.TranslationManagement.isEnabledInSpace && userCtx.currentLanguage && userCtx.currentLanguage.key) {
                            url = url + '&languageKey=' + userCtx.currentLanguage.key;
                        }
                    }
                    return url;
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .factory('AdvancedExportDialog', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-dialog', {
                    spaceKey: AJS.params.spaceKey,
                    pageId: AJS.params.pageId,
                    exporterKey: exporterKey,
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ExportScheme', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-scheme/:id/', {
                    includeGlobal: true,
                    exporterId: exporterKey,
                    id: '@id',
                    'ie8AntiCache': + (new Date())
                }, {
                    'create':   {method: 'POST'},
                    'save':   {method: 'PUT'}
                });
            } ])
        .factory('Export', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/', {
                    exportSchemeId: 'exportSchemeId',
                    rootPageId: AJS.params.pageId,
                    'ie8AntiCache': + (new Date())
                }, {
                    'startWithExistingExportScheme': {method: 'GET'},
                    'startWithNewExportScheme': {method: 'PUT'}
                });
            } ])
        .factory('TaskStatus', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/async-tasks/:id/', {
                    id: 'id',
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ScrollVersionsPageTree', [ '$resource',
             function($resource) {
                 return $resource(AJS.params.contextPath + '/rest/scroll-versions/1.0/export-pagetree/', {
                     'ie8AntiCache': + (new Date())
                 });
             }
         ]);

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-progress-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-html'] =  auiNg._templates['com.k15t.scroll.scroll-html'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-progress-dialog.js'] = '<div aui-dialog-page class="export-progress-page" header="Export in Progress" ng-controller="ExportProgressDialogController">    <div aui-dialog-panel header="Export in Progress" class="export-progress-panel">        <form id="export-progress-form" class="aui">            <div style="height: 20px; padding-top: 15px;">                <span class="current-status-message">{{taskStatus.message}}</span>                <span class="current-step-indicator">{{taskStatus.done}} / {{taskStatus.total}}</span>            </div>            <div class="progress-container"><div class="progress-indicator" ng-style="{ width: taskStatus.progress + \'%\' }">&#8203;</div></div>        </form>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/save-export-scheme-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-html'] =  auiNg._templates['com.k15t.scroll.scroll-html'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['save-export-scheme-dialog.js'] = '<div aui-dialog-page class="save-export-scheme-page" header="Save new Export Scheme" ng-controller="SaveExportSchemeDialogController">    <div aui-dialog-panel class="save-export-scheme-panel">        <form id="save-export-scheme-form" class="aui" style="padding-top: 10px;">            <fieldset class="group">                <legend><span>Save</span></legend>                <div class="radio">                    <input ng-model="saveLocation" value="space" class="radio" type="radio" id="option-spaced" name="save-location" />                    <label for="option-spaced">in this space</label>                </div>                <div class="radio">                    <input ng-model="saveLocation" ng-disabled="!isGlobalAdmin" value="global" class="radio" type="radio" id="option-globally" name="save-location" />                    <label for="option-globally">globally</label>                </div>            </fieldset>            <div class="field-group">                <label for="export-scheme-name">Name</label>                <input ng-model="exportScheme.name" id="export-scheme-name" class="text" style="width: 300px; max-width: 300px;" />            </div>            <div class="field-group">                <label for="export-scheme-desc">Description</label>                <input ng-model="exportScheme.description" id="export-scheme-desc" class="text" style="width: 300px; max-width: 300px;" />            </div>        </form>    </div>    <div class="scroll-save-button" aui-dialog-button ng-click="saveExportScheme()" aui-disabled="!canSubmit()">Save</div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/rest-url-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-html'] =  auiNg._templates['com.k15t.scroll.scroll-html'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['rest-url-dialog.js'] = '<div aui-dialog-page class="rest-url-page" header="REST URL" ng-controller="RestUrlDialogController">    <div aui-dialog-panel class="rest-url-panel">        <div ng-show="!isExportSchemeModified">            <p>This URL can be used for automated exports of this page with the saved settings:</p>            <p><input class="rest-url" readonly="readonly" onclick="this.select();" style="width: 530px;" value="{{getSyncRestUrl()}}"></p>            <p>For more information please refer to the <a target="_blank" href="http://www.k15t.com/display/HTML/Creating+an+Export+using+the+REST+API">documentation</a>.</p>        </div>        <div ng-show="isExportSchemeModified">            <p>You need to save the export scheme before it may be used for REST exports.</p>        </div>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-html:export-dialog-resources', location = '/com/k15t/scroll/html/ui/export-dialog/export-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-html'] =  auiNg._templates['com.k15t.scroll.scroll-html'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-dialog.js'] = '<div ng-controller="ExportDialogController">    <div aui-dialog-page class="simple-mode-page" header="Export to HTML" ng-controller="SimpleModeController">        <div aui-dialog-panel header="Export Schemes" class="export-schemes-panel">            <div ng-show="hasLicenseMessage() || (hasScrollVersionsCoordinates() && $parent.dialogDataLoaded)" class="dialog-messages">                <div ng-show="hasLicenseMessage()" class="license-message aui-message warning shadowed">                    <p class="title">                        <span class="aui-icon icon-warning"></span>                        <strong>Warning</strong>                    </p>                    <p ng-bind-html="$parent.dialogData.licenseMessage"></p>                </div>                <div ng-show="hasScrollVersionsCoordinates() && $parent.dialogDataLoaded" class="scroll-versions-message aui-message shadowed" ng-class="getScrollVersionsMessageClass()">                    <p><span class="aui-icon" ng-class="getScrollVersionsMessageIconClass()"></span><span ng-bind-html="getScrollVersionsMessage()"></span></p>                </div>            </div>            <form id="export-schemes-form" class="aui">                <ol class="export-schemes">                    <li ng-repeat="exportScheme in exportSchemes" ng-click="selectExportScheme(exportScheme)"                         ng-class="getExportSchemeClass(exportScheme)"                        ng-dblclick="selectAndStartExport(exportScheme)"                        class="export-scheme" data-item-export-scheme-id="{{exportScheme.id}}">                        <span class="export-scheme-preview"></span>                        <div class="export-scheme-meta">                            <div class="export-scheme-name">{{exportScheme.name}}</div>                            <div class="export-scheme-description">{{exportScheme.description}}</div>                        </div>                    </li>                </ol>            </form>        </div>        <div class="scroll-customize-settings-link" aui-dialog-link ng-click="switchToAdvancedMode()">Customize Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="advanced-mode-page" header="Export to HTML" ng-controller="AdvancedModeController">        <div aui-dialog-panel aui-validate="isTemplateSelected()" header="General" class="general-settings-panel">            <form id="general-settings-form" class="aui">                <div class="field-group">                    <label for="exporter_exportmode">Create</label>                    <select title="Select how the Confluence pages should be mapped to HTML files." ng-model="exportScheme.exporter.properties[\'exportMode\']" id="exporter_exportmode" class="select required" style="width:350px;">                        <option value="default">one HTML file for each Confluence page</option>                        <option value="single-page">a single large HTML file</option>                    </select>                </div>                                <div class="field-group">                    <label for="exporter-template-id">Template</label>                    <select ng-model="exportScheme.exporter.templateId"                        ng-options="t.id as t.name group by getI18nTemplateLocation(t.location) for t in $parent.dialogData.templates"                        title="Please select a template."                        id="exporter-template-id" class="select large-field required" />                    <div class="error" ng-hide="isTemplateSelected()">Please select a template.</div>                </div>                <fieldset style="margin-top: 10px;" class="group">                    <legend><span>Export</span></legend>                    <div ng-repeat="pageSelectionStrategy in $parent.dialogData.pageSelectionStrategies" class="radio">                        <input ng-model="exportScheme.pageSelectionStrategy.completeKey"                             ng-disabled="!pageSelectionStrategy.enabled"                            id="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}"                            value="{{pageSelectionStrategy.completeKey}}"                            class="radio pageSelectionStrategy-radio" type="radio"/>                        <label for="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}" ng-style="getPageSelectionStrategyLabelStyle(pageSelectionStrategy)">{{pageSelectionStrategy.name}}</label>                        <div ng-repeat="property in pageSelectionStrategy.properties" ng-show="exportScheme.pageSelectionStrategy.completeKey == pageSelectionStrategy.completeKey" class="configuration-property-container">                            <input ng-model="exportScheme.pageSelectionStrategy.properties[property.name]"                                ng-disabled="!pageSelectionStrategy.enabled"                                 type="text" class="text"                                id="{{pageSelectionStrategy.completeKey}}:{{property.name}}"                             />                            <div class="description" ng-bind-html="property.description"></div>                        </div>                                            </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="Content Processing" class="content-processing-panel">            <form id="content-processing-form" class="aui">                <fieldset class="group">                    <legend><span>Macros</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processTocMacros" class="checkbox" id="cbProcessTocMacros" />                        <label for="cbProcessTocMacros">Output <em>toc</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processChildrenMacros" class="checkbox" id="cbProcessChildrenMacros" />                        <label for="cbProcessChildrenMacros">Output <em>children</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processSectionColumnMacroAsTable" class="checkbox" id="cbProcessSectionColumnMacroAsTable" />                        <label for="cbProcessSectionColumnMacroAsTable">Output <em>section</em> macros as table</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processNumberedHeadingsMacros" class="checkbox" id="cbProcessNumberedHeadingsMacros" />                        <label for="cbProcessNumberedHeadingsMacros">Output <em>numberedheadings</em> macros</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Images</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.replaceThumbnailsWithFullSize" class="checkbox" id="cbThumbnailsPostprocessor" />                        <label for="cbThumbnailsPostprocessor">Export images with original resolution</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Index Terms</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.usePageLabelsAsIndexTerms" class="checkbox" id="pp_labeltoindexterm" />                        <label for="pp_labeltoindexterm">Convert Labels to Index Terms</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Advanced</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.enableHeadingPromotion" class="checkbox" id="cbEnableHeadingPromotion" />                        <label for="cbEnableHeadingPromotion">Merge single, first heading and page title</label>                    </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="File Naming" class="filenaming-panel">            <form id="filenaming-form" class="aui">                <div class="field-group">                    <label for="exporter_naming_filename">File Naming</label>                    <select ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.fileNameSchema\']" id="exporter_naming_filename" class="select large-field">                        <option value="PageTitle" selected="selected">Page Title only (<em>page_title.xhtml</em>)</option>                        <option value="PageId">Page ID only (<em>123456.xhtml</em>)</option>                        <option value="PageTitleAndPageId">Page Title + Page ID (<em>page_title_123456.xhtml</em>)</option>                        <option value="PageIdAndPageTitle">Page ID + Page Title (<em>123456_page_title.xhtml</em>)</option>                        <option value="PageKeyOrPageTitle">Scroll PageKey, fallback to Page Title</option>                        <option value="PageKeyOrPageId">Scroll PageKey, fallback to Page ID</option>                        <option value="PermaLink">PermaLink</option>                    </select>                    <div class="description">The file naming convention for the exported files.</div>                                    <label for="exporter_naming_whitespace">Whitespace Handling</label>                    <select ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.whitespaceHandling\']" id="exporter_naming_whitespace" class="select large-field">                        <option value="Blank">Leave blank</option>                        <option value="Underscore" selected="selected">Replace with underscore (_)</option>                        <option value="Hyphen">Replace with hyphen (-)</option>                        <option value="Remove">Remove</option>                    </select>                    <div class="description">How to handle white space in filenames of the exported files.</div>                                    <label for="exporter_naming_extendedCharacters">Special Characters</label>                    <select ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.extendedCharHandling\']" id="exporter_naming_extendedCharacters" class="select medium-field">                        <option value="Ignore" selected="selected">Don\'t change</option>                        <option value="Replace">Replace with Ascii (e.g. &ouml; -&gt; o)</option>                    </select>                    <div class="description">How to handle special characters (for example <em>&auml;&ouml;&uuml;</em>) in filenames of the exported files.</div>                                    <label for="exporter_naming_extension">File Extensions</label>                    <select ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.extension\']" id="exporter_naming_extension" class="select medium-field">                        <option value="html" selected="selected">.html</option>                        <option value="htm">.htm</option>                        <option value="xhtml">.xhtml</option>                    </select>                    <div class="description">The file extension for the exported files.</div>                </div>            </form>        </div>        <div aui-dialog-panel header="Search Index" class="search-index-panel">            <form id="search-index-form" class="aui">                <fieldset class="group">                    <legend><span>Search Index</span></legend>                    <div class="checkbox">                        <input ng-model="exportScheme.exporter.properties[\'buildSearchIndex\']" type="checkbox" class="checkbox" id="buildSearchIndex" ng-true-value="true" ng-false-value="false" />                        <label for="buildSearchIndex">Build Search Index</label>                        <div class="description">                            When enabled a full text search index is generated and included in the final HTML archive.<br>Not supported when exporting all Confluence pages into a single HTML file.                        </div>                    </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="Comala Workflows" class="adhoc-workflows-panel">            <form id="adhoc-workflows-form" class="aui">                <fieldset class="group">                    <legend><span>Comala Workflows</span></legend>                    <div class="checkbox">                        <input ng-model="exportScheme.exportAdhocPublishedOnly" ng-disabled="!dialogData.showAdhocWorkflowsCheckBox" type="checkbox" class="checkbox" id="exportAdhocPublishedOnly" />                        <label for="exportAdhocPublishedOnly">Only published versions</label>                        <div class="description">                            Export only pages that have been published with the Comala Workflows plugin.<br/>This option is only available when using Comala Workflows 4.8 or later (<a href="http://www.k15t.com/display/_PK/HTML/adhoc-workflows" target="new">More Info</a>).                        </div>                    </div>                </fieldset>             </form>        </div>        <div class="scroll-simple-mode-link" aui-dialog-link ng-click="switchToSimpleMode()">Simple Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="export-result-page" header="Export Result" ng-controller="ExportResultController">        <div aui-dialog-panel header="Export Result" class="export-result-panel">            <form id="export-result-form" class="aui">                <div class="result-container">                    <div class="download-filename-container">                        <a class="download-filename" ng-href="{{getDownloadUrl()}}">{{taskStatus.filename}}</a>                    </div>                    <div class="download-stats-container">                        <span class="download-stats-line">({{formatFileSize()}}, {{taskStatus.message}})</span>                    </div>                    <div ng-show="isSuccess() && ($parent.dialogData.isGlobalAdministrator || $parent.dialogData.isSpaceAdministrator)" class="export-scheme-management-container">                        <div aui-toolbar style="margin-top: 10px; margin-bottom: 15px;">                            <div aui-toolbar-dropdown title="Save Export Scheme ...">                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplaySaveAsAction()" ng-click="saveAsNewExportScheme()"     title="as new ..." />                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplayUpdateAction()" ng-click="updateCurrentExportScheme()" title="{{$parent.exportSchemeName}}" style="font-style: italic;" />                            </div>                            <div aui-toolbar-button ng-click="showRestUrlDialog()" title="REST URL" />                            <div aui-toolbar-dropdown title="Manage Export Schemes ...">                                <div aui-toolbar-dropdown-item class="manage-space"  ng-show="$parent.canAdministerSpace()" ng-click="openSpaceExportSchemeManagement()"  title="in this space" />                                <div aui-toolbar-dropdown-item class="manage-global" ng-show="$parent.isGlobalAdmin()"      ng-click="openGlobalExportSchemeManagement()" title="globally" />                            </div>                        </div>                        <span aui-fade-out="updateSucceededTrigger" class="export-scheme-saved-message">Successfully saved export scheme.</span>                    </div>                    <div ng-show="!isSuccess()" class="error-description-container">                        <p>When contacting K15t support please make sure to submit the error.zip file.</p>                        <p>The ZIP file contains your export settings, a trace of the error as well as all content exported so far. If this content is confidential please extract the ZIP file and at least provide the \'stacktraces.txt\' file.</p>                    </div>                </div>            </form>        </div>        <div class="scroll-back-link" aui-dialog-link ng-click="goBack()">Back</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div>    </div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/common-dialogs-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-eclipsehelp'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-eclipsehelp'; // Will be filled in by Web Resource Transformer;

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-common-dialogs', ['ngResource', 'ngSanitize', 'auiNg']);

    ng.module(shortPluginKey + '-common-dialogs')
        .controller('MessageDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.exceptionExpanded = false;

                $scope.getTitle = function() {
                    if ($scope.message && $scope.message.severity) {
                        if ($scope.message.severity == 'Info' ) {
                            return "Info";
                        } else if ($scope.message.severity == 'Warning' ) {
                            return "Warning";
                        } else if ($scope.message.severity == 'Error' ) {
                            return "Error";
                        }                     
                    } else if ($scope.message.title) {
                        return $scope.message.title;
                    }
                    return "Error";
                };

                $scope.getMessage = function() {
                    if ($scope.message && $scope.message.message) {
                        return $scope.message.message;
                    }
                    return "Error"; 
                };

                $scope.isShowSupportInformation = function() {
                    return ($scope.message && $scope.message.stackTrace);
                };

                $scope.toggleExceptionDisplay = function() {
                    $scope.exceptionExpanded = !$scope.exceptionExpanded;
                };

                $scope.close = function() {
                    $scope.auiDialog.close(true);
                };
            }
        ])
        .provider('CommonDialog', function () {
            this.$get = [function () {
                var partial = auiNg.getPartial(pluginKey, 'common-dialogs', 'message-dialog');
                var defaultOpts = {
                    className : shortPluginKey + '-common-message-dialog',
                    closeOnOutsideClick : false,
                    closeOnEsc : true,
                    width : 760
                };

                return {
                    openMessageDialog: function (response) {
                        var opts = ng.extend({
                            message : response.data,
                            height : (!response.data.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    },
                    openTaskStatusMessageDialog: function (taskStatus) {
                        var opts = ng.extend({
                            message : {
                                message: taskStatus.message,
                                stackTrace: taskStatus.stackTrace,
                                severity: (taskStatus.status == 0) ? 'Info' : 'Error'
                            },
                            height : (!taskStatus.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    }
                };
            }];
        });

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/message-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] =  auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] || {};
var moduleTemplates = pluginTemplates['common-dialogs'] = pluginTemplates['common-dialogs'] || {};
moduleTemplates['message-dialog.js'] = '<div aui-dialog-page class="message-page" header="{{getTitle()}}" ng-controller="MessageDialogController">    <div aui-dialog-panel class="message-panel">        <div class="aui-message error">            <p ng-bind-html="getMessage()"></p>            <p ng-hide="isShowSupportInformation()">If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a>.</p>        </div>        <div class="support-info-box" ng-show="isShowSupportInformation()">            <p>                <strong>Getting Support</strong>            </p>            <p>                If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a> and provide the following information.                <br/>                <a href="" ng-click="toggleExceptionDisplay()">                    <span ng-hide="exceptionExpanded">Show error details &raquo;</span>                    <span ng-show="exceptionExpanded">Hide error details &laquo;</span>                </a>            </p>            <pre class="stacktrace-container" ng-show="exceptionExpanded">{{message.stackTrace}}</pre>        </div>    </div>    <div aui-dialog-link ng-click="close()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-dialog-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-eclipsehelp'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-eclipsehelp'; // Will be filled in by Web Resource Transformer;
    var exporterKey = 'com.k15t.scroll.scroll-eclipsehelp:eclipsehelp-exporter'; // Will be filled in by Web Resource Transformer;
    var launcherSelector = '#com-k15t-confluence-' + shortPluginKey + '-launcher, .' + shortPluginKey + '-launcher';

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-export-dialog', ['ngResource', 'ngSanitize', 'auiNg', shortPluginKey + '-common-dialogs']);

    var getDialogClass = function(classname) {
        return classname + ' ' + ((AJS.params.buildNumber >= 4104) ? 'confluence-5-dialog' : 'confluence-4-dialog')  
    };

    var openExportDialog = function(launcher) {
        var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-dialog');
        var opts = {
            className: getDialogClass(shortPluginKey + '-export-dialog'),
            closeOnOutsideClick: false,
            closeOnEsc: true
        };

        var directExportSchemeIdAttr = AJS.$(launcher).closest("." + shortPluginKey + "-launcher").attr("data-export-scheme-id");
        if (directExportSchemeIdAttr) {
            opts.exportSchemeId = directExportSchemeIdAttr;
            opts.directExportMode = true;
        }

        auiNg.createDialogApp(shortPluginKey + '-export-dialog', partial, opts);
    };

    AJS.toInit(function($) {
        AJS.$(launcherSelector).click(function(e) {
            openExportDialog(e.target);
            e.preventDefault();
        });
    });

    var isBundledExportScheme = function(exportSchemeId) {
        return (exportSchemeId.indexOf('bundled_') == 0);
    };

    var hasScrollVersionsCoordinates = function() {
        return window.Scroll
                && Scroll.Versions
                && Scroll.Versions.Context
                && Scroll.Versions.Context.modules
                && Scroll.Versions.Context.user
                && (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace);
    };


    ng.module(shortPluginKey + '-export-dialog')
        .controller('ExportDialogController', [ '$scope', '$http', '$q', 'AdvancedExportDialog', 'AuiDialog',
            function($scope, $http, $q, AdvancedExportDialog, AuiDialog) {
                $scope.dialogData = AdvancedExportDialog.get(function() {
                    $scope.dialogDataLoaded = true;
                });

                $scope.switchToSimpleModeCallback = ng.noop;
                $scope.switchToAdvancedModeCallback = ng.noop;

                $scope.exportSchemeModified = false;

                $scope.exportSchemeValidators = [];

                $scope.isExportSchemeValid = function(exportScheme) {
                    for (var i = 0; i < $scope.exportSchemeValidators.length; ++i ){
                        var validate = $scope.exportSchemeValidators[i];
                        if (!validate(exportScheme)) {
                            return false;
                        }
                    }
                    return true;
                };

                $scope.exportMode = 'simple';

                $scope.setSimpleExportMode = function() {
                    $scope.exportMode = 'simple';
                };
                $scope.setAdvancedExportMode = function() {
                    $scope.exportMode = 'advanced';
                };
                $scope.isSimpleExportMode = function() {
                    return $scope.exportMode == 'simple';
                };
                $scope.isAdvancedExportMode = function() {
                    return $scope.exportMode == 'advanced';
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.exportScheme;
                    $scope.auiDialog.gotoPage(0);
                    $scope.switchToSimpleModeCallback();
                };

                $scope.switchToAdvancedMode = function(update) {
                    $scope.auiDialog.gotoPage(1);
                    $scope.auiDialog.gotoPanel(0);
                    if (update) {
                        $scope.switchToAdvancedModeCallback();
                    }
                };

                $scope.openExportProgressDialog = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-progress-dialog');
                    var progressDialog = AuiDialog.create(partial, {className: shortPluginKey + '-export-progress-dialog', closeOnOutsideClick: false, closeOnEsc: false, height: 200, width: 680});
                    progressDialog.open({exportTaskId: $scope.exportTaskId, exportFinishedCallback: function(taskStatus) {
                        $scope.switchToResultPage(taskStatus);
                    }});
                };

                $scope.switchToResultPage = function(taskStatus) {
                    $scope.taskStatus = taskStatus;
                    $scope.auiDialog.gotoPage(2);
                    $scope.exportFinishedCallback();
                };

                $scope.appendScrollVersionsCoordinates = function(params) {
                    if (hasScrollVersionsCoordinates()) {
                        if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                            params.versionId = Scroll.Versions.Context.user.workingVersion.versionId;
                        }
                        if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                            params.variantId = Scroll.Versions.Context.user.currentVariant.id;
                        }
                        if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                            params.languageKey = Scroll.Versions.Context.user.currentLanguage.key;
                        }
                    }
                };
            } ])
        .controller('SimpleModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.selectExportScheme = function(exportScheme) {
                    $scope.selectedExportScheme = exportScheme;
                    $scope.$parent.exportSchemeId = exportScheme.id;
                    $scope.$parent.exportSchemeName = exportScheme.name;
                };

                $scope.updateExportSchemeList = function(onUpdatedHandler) {                    
                    $scope.exportSchemes = ExportScheme.query({spaceKey: AJS.params.spaceKey}, function() {
                        var selectedExportSchemeId = $scope.$parent.exportSchemeId;
                        if (!selectedExportSchemeId && ($scope.exportSchemes.length > 0)) {
                            selectedExportSchemeId = $scope.exportSchemes[0].id;
                        }
                        _.each($scope.exportSchemes, function(exportScheme){
                            if (exportScheme.id == selectedExportSchemeId) {
                                $scope.selectExportScheme(exportScheme);
                            }
                        });
                        if (!$scope.selectedExportScheme && ($scope.exportSchemes.length > 0)) {
                            $scope.selectExportScheme($scope.exportSchemes[0]);
                        }
                        if (onUpdatedHandler) {
                            onUpdatedHandler();
                        }
                    });
                };
                $scope.$parent.switchToSimpleModeCallback = $scope.updateExportSchemeList;

                $scope.getExportSchemeClass = function(exportScheme) {
                    var classes = ($scope.selectedExportScheme == exportScheme) ? "selected" : "";
                    classes = classes + (isBundledExportScheme(exportScheme.id) ? " bundled" : "");
                    return classes + ((exportScheme.id.indexOf('-LASTUSED', exportScheme.id.length - 9) !== -1) ? " last-used" : "");
                };

                $scope.switchToAdvancedMode = function() {
                    $scope.$parent.switchToAdvancedMode(true);
                };

                $scope.selectAndStartExport = function(exportScheme) {
                    $scope.selectExportScheme(exportScheme);
                    $scope.startExport();
                };

                $scope.canStartExport = function() {
                    return ($scope.selectedExportScheme != undefined);
                };

                $scope.startExport = function() {
                    if (!$scope.selectedExportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = false;

                    ExportScheme.get({id: $scope.selectedExportScheme.id}, function(loadedExportScheme) {
                        $scope.$parent.exportScheme = loadedExportScheme;
                        if ($scope.$parent.isExportSchemeValid(loadedExportScheme)) {
                            var params = {
                                exportSchemeId: $scope.selectedExportScheme.id
                            };
                            $scope.$parent.appendScrollVersionsCoordinates(params);

                            Export.startWithExistingExportScheme(params, function(task) {
                                $scope.$parent.exportTaskId = task.id;
                                $scope.$parent.setSimpleExportMode();
                                $scope.$parent.openExportProgressDialog();
                            }, function(response) {
                                CommonDialog.openMessageDialog(response);
                            });
                        } else {
                            $scope.switchToAdvancedMode();
                        }
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

                $scope.hasLicenseMessage = function() {
                    return !!$scope.$parent.dialogData.licenseMessage;
                };

                $scope.hasScrollVersionsCoordinates = function() {
                    return hasScrollVersionsCoordinates();
                };
                
                $scope.isCompatibleScrollVersionsAvailable = function() {
                    return $scope.$parent.dialogData.compatibleScrollVersionsAvailable;
                };

                $scope.getScrollVersionsMessage = function() {
                    if (hasScrollVersionsCoordinates()) {
                        if ($scope.isCompatibleScrollVersionsAvailable()) {
                            var modules = [];
                            if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                                modules.push(AJS.format("version \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.workingVersion.name));
                            }
                            if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                                if (Scroll.Versions.Context.user.currentVariant.id != 'all') {
                                    modules.push(AJS.format("variant \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentVariant.name));
                                } else {
                                    modules.push("\u003cstrong>all variants\u003c\/strong>");
                                }
                            }
                            if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                                modules.push(AJS.format("language \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentLanguage.displayName));
                            }

                            var msg = "You will be exporting" + " ";
                            for (var i = 0; i < modules.length; i++) {
                                if (i > 0) {
                                    msg = msg + ", ";
                                }
                                msg = msg + modules[i];
                            }
                            msg = msg + ".";
                            return msg;
                        } else {
                            return "The installed version of Scroll Versions is not compatible with Scroll EclipseHelp Exporter. Please update to the latest version of Scroll Versions.";    
                        }
                    } else {
                        return '';
                    }
                };
                
                $scope.getScrollVersionsMessageClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "info" : "warning";
                };

                $scope.getScrollVersionsMessageIconClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "icon-info" : "icon-warning";
                };

                var onUpdatedHandler = ($scope.$parent.directExportMode) ? $scope.startExport : ng.noop;
                $scope.updateExportSchemeList(onUpdatedHandler);
            } ])
        .controller('AdvancedModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.init = function() {
                    $scope.dialogData = $scope.$parent.dialogData;
                    if (!$scope.$parent.exportSchemeId) {
                        $scope.$parent.exportSchemeId = 'INITIAL';
                        $scope.$parent.exportSchemeName = 'INITIAL';
                    }
                    if (!$scope.$parent.exportScheme) {
                        ExportScheme.get({id: $scope.$parent.exportSchemeId}, function(loadedExportScheme) {
                            $scope.$parent.exportScheme = loadedExportScheme;
                        });
                    }
                    $scope.$parent.exportScheme = $scope.exportScheme;
                    $scope.originalExportScheme = ng.copy($scope.exportScheme);
                };

                $scope.$parent.switchToAdvancedModeCallback = $scope.init;

                $scope.getPageSelectionStrategyLabelStyle = function(pageSelectionStrategy) {
                    return pageSelectionStrategy.enabled ? {} : {color: 'silver'};
                };

                $scope.getI18nTemplateLocation = function(location) {
                    if (location == 'space') {
                        return "Space Templates";
                    } else {
                        return "Global Templates";
                    }
                };

                $scope.isTemplateSelected = function(exportScheme) {
                    exportScheme = exportScheme || $scope.exportScheme; 
                    if (exportScheme && $scope.$parent.dialogData && $scope.$parent.dialogData.templates) {
                        var templateId = exportScheme.exporter.templateId;
                        if (templateId) {
                            for (var i = 0; i < $scope.$parent.dialogData.templates.length; i++) {
                                if (templateId == $scope.$parent.dialogData.templates[i].id) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    }
                    return true;
                };
                $scope.$parent.exportSchemeValidators.push($scope.isTemplateSelected);

                $scope.canStartExport = function() {
                    return $scope.$parent.isExportSchemeValid($scope.$parent.exportScheme);
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.originalExportScheme;
                    $scope.$parent.switchToSimpleMode();
                };

                var isExportSchemeModified = function() {
                    var before = ng.toJson($scope.originalExportScheme);
                    var after = ng.toJson($scope.$parent.exportScheme);
                    return (before != after);
                };

                $scope.startExport = function() {
                    if (!$scope.exportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = isExportSchemeModified();

                    var params = {
                        rootPageId: AJS.params.pageId,
                        exportScheme: $scope.exportScheme
                    };
                    $scope.$parent.appendScrollVersionsCoordinates(params);

                    Export.startWithNewExportScheme(params, function(task) {
                        $scope.$parent.exportTaskId = task.id;
                        $scope.$parent.setAdvancedExportMode();
                        $scope.$parent.openExportProgressDialog();
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

            } ])
        .controller('ExportProgressDialogController', [ '$scope', '$http', '$timeout', '$q', 'TaskStatus', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $timeout, $q, TaskStatus, AuiDialog, CommonDialog) {
                var statusPoller = undefined;

                $scope.exportTaskId = $scope.$parent.exportTaskId;
                $scope.exportCancelled = false;
                var exportFinishedCallback = $scope.$parent.exportFinishedCallback;

                (function pollTaskStatus() {
                    TaskStatus.get({id: $scope.exportTaskId}, function(taskStatus) {
                        $scope.taskStatus = taskStatus;
                        if (taskStatus.status == -2) { // System or license heck failed, see constants in TaskStatus interface.
                            $scope.cancelAndClose();
                            CommonDialog.openTaskStatusMessageDialog(taskStatus);
                        } else {
                            if (taskStatus.finished) {
                                $scope.auiDialog.close();
                                exportFinishedCallback(taskStatus);
                            } else {
                                statusPoller = $timeout(pollTaskStatus, 500);
                            }
                        }
                    }, function(response) {
                        if (!$scope.exportCancelled) {
                            CommonDialog.openMessageDialog(response);
                        }
                    });
                })();

                $scope.cancelAndClose = function() {
                    // Additional guard flag, in case the browser somehow executes a pending TaskStatus.get after our TaskStatus.remove.
                    $scope.exportCancelled = true;

                    if (statusPoller) {
                        $timeout.cancel(statusPoller);
                    }
                    TaskStatus.remove({id: $scope.$parent.exportTaskId});
                    $scope.auiDialog.close();
                };
            } ])
        .controller('ExportResultController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.getDownloadUrl = function() {
                    if (!$scope.$parent.taskStatus || !$scope.$parent.taskStatus.filename) {
                        return '';
                    }
                    return AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/' + $scope.$parent.exportTaskId + '/' + encodeURIComponent($scope.$parent.taskStatus.filename) || '';
                };

                $scope.$parent.exportFinishedCallback = function() {
                    if ($scope.$parent.taskStatus.status == 0) {
                        // Ultra ugly workaround for invisible dropdowns in Confluence 5.10 TODO Fix this in AUI-NG / dialog system
                        // Confluence's AUI overwrites our z-index of 3500 and sets it to 3000 because it doesn't know about our blankets.
                        // This makes the dropdown popup appear under the dialog div.
                        $('#export-result-form .aui-toolbar2 button.aui-dropdown2-trigger').click(function(e) {
                            setTimeout(function(e) {
                                $('#' + $(e.target).attr('aria-controls')).css('z-index', '3500');
                            },0, e)
                        });

                        var downloadUrl = $scope.getDownloadUrl();
                        window.setTimeout(function() {
                            window.location.href = downloadUrl;
                        }, 500);

                        var lastUsedExportScheme = ng.copy($scope.$parent.exportScheme);
                        lastUsedExportScheme.id = AJS.params.spaceKey + '-LASTUSED';
                        lastUsedExportScheme.name = "My last export settings";
                        lastUsedExportScheme.description = AJS.format("Last used on {1} in space \'\'{0}\'\'.", AJS.params.spaceName, new Date().toLocaleString());
                        ExportScheme.save(lastUsedExportScheme);
                    }
                };

                $scope.isSuccess = function() {
                    return ($scope.$parent.taskStatus && $scope.$parent.taskStatus.status >= 0);
                };

                // http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/
                var number_format = function(number, decimals, dec_point, thousands_sep) {        
                    var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;
                    var d = dec_point == undefined ? "," : dec_point;
                    var t = thousands_sep == undefined ? "." : thousands_sep, s = n < 0 ? "-" : "";
                    var i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "";
                    var j = i.length;
                    j = (j > 3) ? j % 3 : 0;
                    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
                };

                // http://snipplr.com/view/5949/
                $scope.formatFileSize = function() {
                    if (!$scope.taskStatus || !$scope.taskStatus.fileSize) {
                        return '';
                    }
                    var filesize = $scope.taskStatus.fileSize;
                    if (filesize >= 1073741824) {
                        return number_format(filesize / 1073741824, 2, '.', '') + ' GB';
                    } else {
                        if (filesize >= 1048576) {
                            return number_format(filesize / 1048576, 2, '.', '') + ' MB';
                        } else {
                            if (filesize >= 1024) {
                                return number_format(filesize / 1024, 0) + ' KB';
                            } else {
                                return number_format(filesize, 0) + ' bytes';
                            }
                        }
                    }
                    return filesize;
                };

                $scope.canAdministerSpace = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.isGlobalAdmin = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator;
                };

                var isSpaceExportScheme = function(exportScheme) {
                    return exportScheme.id.indexOf('-') > 0;
                };

                $scope.isDisplayUpdateAction = function() {
                    return $scope.$parent.isAdvancedExportMode()
                            && ($scope.$parent.exportSchemeModified)
                            && ($scope.$parent.dialogData.isGlobalAdministrator
                                    || ($scope.$parent.dialogData.isSpaceAdministrator && isSpaceExportScheme($scope.$parent.exportScheme)));
                };

                $scope.isDisplaySaveAsAction = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.updateCurrentExportScheme = function() {
                    if (!isBundledExportScheme($scope.$parent.exportScheme.id) && ($scope.$parent.exportScheme.id != 'INITIAL')) {
                        ExportScheme.save($scope.$parent.exportScheme, function() {
                            $scope.updateSucceededTrigger = new Date();
                            $scope.lastSavedExportSchemeId = $scope.exportScheme.id;
                        }, function(response) {
                            CommonDialog.openMessageDialog(response);
                        });                        
                    } else {
                        CommonDialog.openMessageDialog({
                            data: {
                                title: "Were sorry ...",
                                message: "You tried to update a bundled system export scheme, which is not supported. Please save your settings as new export scheme."
                            }
                        });
                    }
                };

                $scope.saveAsNewExportScheme = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'save-export-scheme-dialog');
                    var saveAsDialog = AuiDialog.create(partial, {className: shortPluginKey + '-save-export-scheme-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 300, width: 560});
                    saveAsDialog.open({
                        exportScheme: ng.copy($scope.$parent.exportScheme),
                        isSpaceAdmin: $scope.$parent.dialogData.isSpaceAdministrator,
                        isGlobalAdmin: $scope.$parent.dialogData.isGlobalAdministrator
                    }).then(function(context) {
                        $scope.updateSucceededTrigger = new Date();
                        $scope.lastSavedExportSchemeId = context.exportSchemeId;
                    }, ng.noop);
                };

                $scope.showRestUrlDialog = function() {
                    var exportSchemeId = $scope.lastSavedExportSchemeId || $scope.$parent.exportScheme.id;
                    var isExportSchemeModified = ($scope.lastSavedExportSchemeId) ? false : $scope.$parent.exportSchemeModified;
                    var compatibleScrollVersionsAvailable = $scope.$parent.dialogData.compatibleScrollVersionsAvailable;

                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'rest-url-dialog');
                    var restUrlDialog = AuiDialog.create(partial, {className: shortPluginKey + '-rest-url-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 250, width: 560});
                    restUrlDialog.open({exportSchemeId : exportSchemeId, isExportSchemeModified: isExportSchemeModified, isCompatibleScrollVersionsAvailable: compatibleScrollVersionsAvailable});
                };

                $scope.openSpaceExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/spaces/' + shortPluginKey + '/export-schemes.action?key=' + AJS.params.spaceKey, '_blank');
                };

                $scope.openGlobalExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/admin/' + shortPluginKey + '/export-schemes.action', '_blank');
                };

                $scope.goBack = function() {
                    if ($scope.$parent.isSimpleExportMode()) {
                        $scope.$parent.switchToSimpleMode();
                    } else if ($scope.$parent.isAdvancedExportMode()) {
                        $scope.$parent.switchToAdvancedMode(false);
                    } else {
                        alert('Unknown export mode. Please close and re-open the dialog.');
                    }
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('SaveExportSchemeDialogController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.saveLocation = 'space';

                $scope.canSubmit = function() {
                    return $scope.exportScheme && $scope.exportScheme.name && ($scope.exportScheme.name.length > 0);
                };

                $scope.saveExportScheme = function() {
                    if ($scope.exportScheme.id) {
                        delete $scope.exportScheme.id;
                    }

                    var params = {};
                    if ($scope.saveLocation == 'space') {
                        params.spaceKey = AJS.params.spaceKey;
                    }

                    var savedExportScheme = ExportScheme.create(params, $scope.exportScheme, function() {
                        $scope.auiDialog.close(true, {exportSchemeId : savedExportScheme.id});
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('RestUrlDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.isExportSchemeModified = $scope.$parent.isExportSchemeModified;

                $scope.getSyncRestUrl = function() {
                    var url = AJS.format('{0}/rest/{1}/1.0/sync-export?exportSchemeId={2}&rootPageId={3}', AJS.params.baseUrl || AJS.$('meta#confluence-base-url').attr('content'), shortPluginKey, $scope.$parent.exportSchemeId, AJS.params.pageId);
                    if (hasScrollVersionsCoordinates() && $scope.$parent.isCompatibleScrollVersionsAvailable) {
                        var userCtx = Scroll.Versions.Context.user;
                        var modules = Scroll.Versions.Context.modules;

                        if (modules.VersionManagement.isEnabledInSpace && userCtx.workingVersion && userCtx.workingVersion.versionId) {
                            url = url + '&versionId=' + userCtx.workingVersion.versionId;
                        }
                        if (modules.VariantManagement.isEnabledInSpace && userCtx.currentVariant && userCtx.currentVariant.id) {
                            url = url + '&variantId=' + userCtx.currentVariant.id;
                        }
                        if (modules.TranslationManagement.isEnabledInSpace && userCtx.currentLanguage && userCtx.currentLanguage.key) {
                            url = url + '&languageKey=' + userCtx.currentLanguage.key;
                        }
                    }
                    return url;
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .factory('AdvancedExportDialog', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-dialog', {
                    spaceKey: AJS.params.spaceKey,
                    pageId: AJS.params.pageId,
                    exporterKey: exporterKey,
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ExportScheme', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-scheme/:id/', {
                    includeGlobal: true,
                    exporterId: exporterKey,
                    id: '@id',
                    'ie8AntiCache': + (new Date())
                }, {
                    'create':   {method: 'POST'},
                    'save':   {method: 'PUT'}
                });
            } ])
        .factory('Export', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/', {
                    exportSchemeId: 'exportSchemeId',
                    rootPageId: AJS.params.pageId,
                    'ie8AntiCache': + (new Date())
                }, {
                    'startWithExistingExportScheme': {method: 'GET'},
                    'startWithNewExportScheme': {method: 'PUT'}
                });
            } ])
        .factory('TaskStatus', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/async-tasks/:id/', {
                    id: 'id',
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ScrollVersionsPageTree', [ '$resource',
             function($resource) {
                 return $resource(AJS.params.contextPath + '/rest/scroll-versions/1.0/export-pagetree/', {
                     'ie8AntiCache': + (new Date())
                 });
             }
         ]);

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-progress-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] =  auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-progress-dialog.js'] = '<div aui-dialog-page class="export-progress-page" header="Export in Progress" ng-controller="ExportProgressDialogController">    <div aui-dialog-panel header="Export in Progress" class="export-progress-panel">        <form id="export-progress-form" class="aui">            <div style="height: 20px; padding-top: 15px;">                <span class="current-status-message">{{taskStatus.message}}</span>                <span class="current-step-indicator">{{taskStatus.done}} / {{taskStatus.total}}</span>            </div>            <div class="progress-container"><div class="progress-indicator" ng-style="{ width: taskStatus.progress + \'%\' }">&#8203;</div></div>        </form>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/save-export-scheme-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] =  auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['save-export-scheme-dialog.js'] = '<div aui-dialog-page class="save-export-scheme-page" header="Save new Export Scheme" ng-controller="SaveExportSchemeDialogController">    <div aui-dialog-panel class="save-export-scheme-panel">        <form id="save-export-scheme-form" class="aui" style="padding-top: 10px;">            <fieldset class="group">                <legend><span>Save</span></legend>                <div class="radio">                    <input ng-model="saveLocation" value="space" class="radio" type="radio" id="option-spaced" name="save-location" />                    <label for="option-spaced">in this space</label>                </div>                <div class="radio">                    <input ng-model="saveLocation" ng-disabled="!isGlobalAdmin" value="global" class="radio" type="radio" id="option-globally" name="save-location" />                    <label for="option-globally">globally</label>                </div>            </fieldset>            <div class="field-group">                <label for="export-scheme-name">Name</label>                <input ng-model="exportScheme.name" id="export-scheme-name" class="text" style="width: 300px; max-width: 300px;" />            </div>            <div class="field-group">                <label for="export-scheme-desc">Description</label>                <input ng-model="exportScheme.description" id="export-scheme-desc" class="text" style="width: 300px; max-width: 300px;" />            </div>        </form>    </div>    <div class="scroll-save-button" aui-dialog-button ng-click="saveExportScheme()" aui-disabled="!canSubmit()">Save</div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/rest-url-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] =  auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['rest-url-dialog.js'] = '<div aui-dialog-page class="rest-url-page" header="REST URL" ng-controller="RestUrlDialogController">    <div aui-dialog-panel class="rest-url-panel">        <div ng-show="!isExportSchemeModified">            <p>This URL can be used for automated exports of this page with the saved settings:</p>            <p><input class="rest-url" readonly="readonly" onclick="this.select();" style="width: 530px;" value="{{getSyncRestUrl()}}"></p>            <p>For more information please refer to the <a target="_blank" href="http://www.k15t.com/display/EHLP/Creating+an+Export+using+the+REST+API">documentation</a>.</p>        </div>        <div ng-show="isExportSchemeModified">            <p>You need to save the export scheme before it may be used for REST exports.</p>        </div>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-resources', location = '/com/k15t/scroll/eclipsehelp/ui/export-dialog/export-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] =  auiNg._templates['com.k15t.scroll.scroll-eclipsehelp'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-dialog.js'] = '<div ng-controller="ExportDialogController">    <div aui-dialog-page class="simple-mode-page" header="Export to EclipseHelp" ng-controller="SimpleModeController">        <div aui-dialog-panel header="Export Schemes" class="export-schemes-panel">            <div ng-show="hasLicenseMessage() || (hasScrollVersionsCoordinates() && $parent.dialogDataLoaded)" class="dialog-messages">                <div ng-show="hasLicenseMessage()" class="license-message aui-message warning shadowed">                    <p class="title">                        <span class="aui-icon icon-warning"></span>                        <strong>Warning</strong>                    </p>                    <p ng-bind-html="$parent.dialogData.licenseMessage"></p>                </div>                <div ng-show="hasScrollVersionsCoordinates() && $parent.dialogDataLoaded" class="scroll-versions-message aui-message shadowed" ng-class="getScrollVersionsMessageClass()">                    <p><span class="aui-icon" ng-class="getScrollVersionsMessageIconClass()"></span><span ng-bind-html="getScrollVersionsMessage()"></span></p>                </div>            </div>            <form id="export-schemes-form" class="aui">                <ol class="export-schemes">                    <li ng-repeat="exportScheme in exportSchemes" ng-click="selectExportScheme(exportScheme)"                         ng-class="getExportSchemeClass(exportScheme)"                        ng-dblclick="selectAndStartExport(exportScheme)"                        class="export-scheme" data-item-export-scheme-id="{{exportScheme.id}}">                        <span class="export-scheme-preview"></span>                        <div class="export-scheme-meta">                            <div class="export-scheme-name">{{exportScheme.name}}</div>                            <div class="export-scheme-description">{{exportScheme.description}}</div>                        </div>                    </li>                </ol>            </form>        </div>        <div class="scroll-customize-settings-link" aui-dialog-link ng-click="switchToAdvancedMode()">Customize Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="advanced-mode-page" header="Export to EclipseHelp" ng-controller="AdvancedModeController">        <div aui-dialog-panel aui-validate="isTemplateSelected()" header="General" class="general-settings-panel">            <form id="general-settings-form" class="aui">                <div class="field-group">                    <label for="exporter-template-id">Template</label>                    <select ng-model="exportScheme.exporter.templateId"                        ng-options="t.id as t.name group by getI18nTemplateLocation(t.location) for t in $parent.dialogData.templates"                        title="Please select a template."                        id="exporter-template-id" class="select large-field required" />                    <div class="error" ng-hide="isTemplateSelected()">Please select a template.</div>                </div>                <fieldset style="margin-top: 10px;" class="group">                    <legend><span>Export</span></legend>                    <div ng-repeat="pageSelectionStrategy in $parent.dialogData.pageSelectionStrategies" class="radio">                        <input ng-model="exportScheme.pageSelectionStrategy.completeKey"                             ng-disabled="!pageSelectionStrategy.enabled"                            id="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}"                            value="{{pageSelectionStrategy.completeKey}}"                            class="radio pageSelectionStrategy-radio" type="radio"/>                        <label for="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}" ng-style="getPageSelectionStrategyLabelStyle(pageSelectionStrategy)">{{pageSelectionStrategy.name}}</label>                        <div ng-repeat="property in pageSelectionStrategy.properties" ng-show="exportScheme.pageSelectionStrategy.completeKey == pageSelectionStrategy.completeKey" class="configuration-property-container">                            <input ng-model="exportScheme.pageSelectionStrategy.properties[property.name]"                                ng-disabled="!pageSelectionStrategy.enabled"                                 type="text" class="text"                                id="{{pageSelectionStrategy.completeKey}}:{{property.name}}"                             />                            <div class="description" ng-bind-html="property.description"></div>                        </div>                                            </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="Content Processing" class="content-processing-panel">            <form id="content-processing-form" class="aui">                <fieldset class="group">                    <legend><span>Macros</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processTocMacros" class="checkbox" id="cbProcessTocMacros" />                        <label for="cbProcessTocMacros">Output <em>toc</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processChildrenMacros" class="checkbox" id="cbProcessChildrenMacros" />                        <label for="cbProcessChildrenMacros">Output <em>children</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processSectionColumnMacroAsTable" class="checkbox" id="cbProcessSectionColumnMacroAsTable" />                        <label for="cbProcessSectionColumnMacroAsTable">Output <em>section</em> macros as table</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processNumberedHeadingsMacros" class="checkbox" id="cbProcessNumberedHeadingsMacros" />                        <label for="cbProcessNumberedHeadingsMacros">Output <em>numberedheadings</em> macros</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Images</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.replaceThumbnailsWithFullSize" class="checkbox" id="cbThumbnailsPostprocessor" />                        <label for="cbThumbnailsPostprocessor">Export images with original resolution</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Advanced</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.enableHeadingPromotion" class="checkbox" id="cbEnableHeadingPromotion" />                        <label for="cbEnableHeadingPromotion">Merge single, first heading and page title</label>                    </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel ng-controller="PluginInfoController" aui-validate="hasValidPluginInfo()" header="Eclipse Plugin Properties" class="plugininfo-panel">            <form id="plugininfo-form" class="aui">                <div class="field-group">                    <label for="exporter_plugin_id">Plugin ID</label>                    <input title="Please enter the plugin ID." ng-model="exportScheme.exporter.properties[\'pluginProperties.id\']" id="exporter_plugin_id" class="text medium-field required" />                    <div class="error" ng-hide="hasValidPluginId()">Please enter the plugin ID.</div>                    <div class="description">The ID of the Eclipse plugin (for example: <em>com.k15t.eclipse.plugin</em>).</div>                </div>                <div class="field-group">                    <label for="exporter_plugin_version">Plugin Version</label>                    <input title="Please enter the plugin version." ng-model="exportScheme.exporter.properties[\'pluginProperties.version\']" id="exporter_plugin_version" class="text medium-field required" />                    <div class="error" ng-hide="hasValidPluginVersion()">Please enter the plugin version.</div>                    <div class="description">The version of the plugin.</div>                </div>                <div class="field-group">                    <label for="exporter_plugin_name">Plugin Name</label>                    <input title="Please enter the plugin name." ng-model="exportScheme.exporter.properties[\'pluginProperties.name\']" id="exporter_plugin_name" class="text medium-field required" />                    <div class="error" ng-hide="hasValidPluginName()">Please enter the plugin name.</div>                    <div class="description">The name of your Eclipse plugin.</div>                </div>                <div class="field-group">                    <label for="exporter_plugin_provider">Plugin Provider</label>                    <input title="Please enter the plugin provider name." ng-model="exportScheme.exporter.properties[\'pluginProperties.providerName\']" id="exporter_plugin_provider" class="text medium-field required" />                    <div class="error" ng-hide="hasValidPluginProvider()">Please enter the plugin provider name.</div>                    <div class="description">The provider name of the Eclipse plugin.</div>                </div>             </form>        </div>        <div aui-dialog-panel header="EclipseHelp Features" class="eclipsehelp-settings-panel">            <form id="eclipsehelp-settings-form" class="aui">                <p class="intro-line">Define additional features for EclipseHelp exports.</p>                <fieldset class="group">                    <legend><span>Index</span></legend>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.exporter.properties[\'generateKeywordIndex\']" id="keywordindextoggle" ng-true-value="true" ng-false-value="false" />                        <label for="keywordindextoggle">Create Index</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.pageBuilder.usePageLabelsAsIndexTerms" id="labeltoindexterm" ng-true-value="true" ng-false-value="false" />                        <label for="labeltoindexterm">Convert Labels to Index Terms</label>                        <div class="description">More Info: <a href="http://www.k15t.com/display/EHLP/Using+Labels+as+Index+Terms" target="_new">Using Labels as Index Terms</a></div>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Compatibility</span></legend>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.exporter.properties[\'generateLegacyFormat\']" id="legacyFormat" ng-true-value="true" ng-false-value="false" />                        <label for="legacyFormat">Generate Legacy Plugin Manifest</label>                        <div class="description">Enable this to generate a legacy plugin.xml file <nobr>(<a href="http://www.k15t.com/display/EHLP/Exporting+to+EclipseHelp">Learn more</a>).</nobr></div>                    </div>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.exporter.properties[\'exportToDocZip\']" id="exportToDocZip" ng-true-value="true" ng-false-value="false" />                        <label for="exportToDocZip">Export to <em>doc.zip</em></label>                        <div class="description">Check this to export as <em>doc.zip</em> file <nobr>(<a href="http://www.k15t.com/display/EHLP/Exporting+to+EclipseHelp">Learn more</a>).</nobr></div>                    </div>                </fieldset>             </form>        </div>        <div aui-dialog-panel header="File Naming" class="file-naming-panel">            <form id="file-naming-form" class="aui">                <p class="intro-line">Define how the exported HTML files should be named.</p>                <div class="field-group">                    <label for="exporter_naming_filename">File Naming</label>                    <select title="Please select a file naming convention." ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.fileNameSchema\']" id="exporter_naming_filename" class="select large-field">                        <option value="PageTitle">Page Title only (<em>page_title.xhtml</em>)</option>                        <option value="PageId">Page ID only (<em>123456.xhtml</em>)</option>                        <option value="PageTitleAndPageId">Page Title + Page ID (<em>page_title_123456.xhtml</em>)</option>                        <option value="PageIdAndPageTitle">Page ID + Page Title (<em>123456_page_title.xhtml</em>)</option>                        <option value="PageKeyOrPageTitle">Scroll PageKey, fallback to Page Title</option>                        <option value="PageKeyOrPageId">Scroll PageKey, fallback to Page ID</option>                        <option value="PermaLink">PermaLink</option>                    </select>                    <div class="description">The file naming convention for the exported files.</div>                </div>                <div class="field-group">                    <label for="exporter_naming_whitespace">Whitespace Handling</label>                    <select title="Please select how to handle whitespace in filenames." ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.whitespaceHandling\']" id="exporter_naming_whitespace" class="select large-field">                        <option value="Blank">Leave blank</option>                        <option value="Underscore">Replace with underscore (_)</option>                        <option value="Hyphen">Replace with hyphen (-)</option>                        <option value="Remove">Remove</option>                    </select>                    <div class="description">How to handle white space in filenames of the exported files.</div>                </div>                <div class="field-group">                    <label for="exporter_naming_extendedCharacters">Special Characters</label>                    <select title="Please select how to handle special characters" ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.extendedCharHandling\']" id="exporter_naming_extendedCharacters" class="select medium-field">                        <option value="Ignore">Don\'t change</option>                        <option value="Replace">Replace with Ascii (e.g. &ouml; -&gt; o)</option>                    </select>                    <div class="description">How to handle special characters (for example <em>&auml;&ouml;&uuml;</em>) in filenames of the exported files.</div>                </div>                <div class="field-group">                    <label for="exporter_naming_extension">File Extensions</label>                    <select title="Please select the file extension." ng-model="exportScheme.exporter.properties[\'linkNamingStrategy.extension\']" id="exporter_naming_extension" class="select medium-field">                        <option value="html">.html</option>                        <option value="xhtml">.xhtml</option>                    </select>                    <div class="description">The file extension for the exported files.</div>                </div>             </form>        </div>        <div aui-dialog-panel header="Comala Workflows" class="adhoc-workflows-panel">            <form id="adhoc-workflows-form" class="aui">                <fieldset class="group">                    <legend><span>Comala Workflows</span></legend>                    <div class="checkbox">                        <input ng-model="exportScheme.exportAdhocPublishedOnly" ng-disabled="!dialogData.showAdhocWorkflowsCheckBox" type="checkbox" class="checkbox" id="exportAdhocPublishedOnly" />                        <label for="exportAdhocPublishedOnly">Only published versions</label>                        <div class="description">                            Export only pages that have been published with the Comala Workflows plugin.<br/>This option is only available when using Comala Workflows 4.8 or later (<a href="http://www.k15t.com/display/_PK/EHLP/adhoc-workflows" target="new">More Info</a>).                        </div>                    </div>                </fieldset>             </form>        </div>        <div class="scroll-simple-mode-link" aui-dialog-link ng-click="switchToSimpleMode()">Simple Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="export-result-page" header="Export Result" ng-controller="ExportResultController">        <div aui-dialog-panel header="Export Result" class="export-result-panel">            <form id="export-result-form" class="aui">                <div class="result-container">                    <div class="download-filename-container">                        <a class="download-filename" ng-href="{{getDownloadUrl()}}">{{taskStatus.filename}}</a>                    </div>                    <div class="download-stats-container">                        <span class="download-stats-line">({{formatFileSize()}}, {{taskStatus.message}})</span>                    </div>                    <div ng-show="isSuccess() && ($parent.dialogData.isGlobalAdministrator || $parent.dialogData.isSpaceAdministrator)" class="export-scheme-management-container">                        <div aui-toolbar style="margin-top: 10px; margin-bottom: 15px;">                            <div aui-toolbar-dropdown title="Save Export Scheme ...">                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplaySaveAsAction()" ng-click="saveAsNewExportScheme()"     title="as new ..." />                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplayUpdateAction()" ng-click="updateCurrentExportScheme()" title="{{$parent.exportSchemeName}}" style="font-style: italic;" />                            </div>                            <div aui-toolbar-button ng-click="showRestUrlDialog()" title="REST URL" />                            <div aui-toolbar-dropdown title="Manage Export Schemes ...">                                <div aui-toolbar-dropdown-item class="manage-space"  ng-show="$parent.canAdministerSpace()" ng-click="openSpaceExportSchemeManagement()"  title="in this space" />                                <div aui-toolbar-dropdown-item class="manage-global" ng-show="$parent.isGlobalAdmin()"      ng-click="openGlobalExportSchemeManagement()" title="globally" />                            </div>                        </div>                        <span aui-fade-out="updateSucceededTrigger" class="export-scheme-saved-message">Successfully saved export scheme.</span>                    </div>                    <div ng-show="!isSuccess()" class="error-description-container">                        <p>When contacting K15t support please make sure to submit the error.zip file.</p>                        <p>The ZIP file contains your export settings, a trace of the error as well as all content exported so far. If this content is confidential please extract the ZIP file and at least provide the \'stacktraces.txt\' file.</p>                    </div>                </div>            </form>        </div>        <div class="scroll-back-link" aui-dialog-link ng-click="goBack()">Back</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div>    </div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-eclipsehelp:export-dialog-eclipsehelp-resources', location = '/com/k15t/scroll/eclipsehelp/ui/export-dialog/custom-panel-controllers.js' */
(function(c,a,b){var d="scroll-eclipsehelp";c.module(d+"-export-dialog").controller("PluginInfoController",["$scope","$http","$q","AuiDialog",function(m,i,g,l){var o=function(p){return !!(p&&p.exporter&&p.exporter.properties)};var n=function(p,r){if(o(p)){var q=p.exporter.properties[r];if(!(q&&q.length>0)){return false}}return true};var j=function(p){return n(p,"pluginProperties.id")};var h=function(p){return n(p,"pluginProperties.version")};var e=function(p){return n(p,"pluginProperties.name")};var k=function(p){return n(p,"pluginProperties.providerName")};var f=function(p){return j(p)&&h(p)&&e(p)&&k(p)};m.hasValidPluginId=function(){return j(m.$parent.exportScheme)};m.hasValidPluginVersion=function(){return h(m.$parent.exportScheme)};m.hasValidPluginName=function(){return e(m.$parent.exportScheme)};m.hasValidPluginProvider=function(){return k(m.$parent.exportScheme)};m.hasValidPluginInfo=function(){return f(m.$parent.exportScheme)};m.$parent.$parent.exportSchemeValidators.push(f)}])})(auiNg.angular10,auiNg._,auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor.confluence-source-editor:atlassian-source-editor-view-storage-javascript', location = 'jscripts/source-editor/view-source.js' */
AJS.toInit(function(a){if(a("#action-view-storage-link").length){a("#action-source-editor-view-storage-link").closest("li").hide()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.advanced:blog-post-resources', location = 'com/atlassian/confluence/plugins/macros/advanced/blog-posts.js' */
jQuery(function(a){a(".macro-blank-experience .create-post").bind("click",function(){var b=AJS.Meta.get("base-url")+"/pages/createblogpost.action?spaceKey="+AJS.Meta.get("space-key");window.location=b})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/models.js' */
(function(b,a){a.Watch=Backbone.Model.extend({saveSettings:function(d,e){this.trigger("request");var c=this;return AJS.safe.ajax({url:d,type:"POST",dataType:"json",data:e}).done(function(){c.trigger("sync",c)}).fail(function(){c.trigger("error")})},saveWatchPage:function(d){var c=AJS.contextPath()+"/users/"+(d?"add":"remove")+"pagenotificationajax.action";this.set("watchingPage",d);return this.saveSettings(c,{pageId:this.get("pageId")})},saveWatchBlogs:function(d){var c=AJS.contextPath()+"/users/"+(d?"add":"remove")+"spacenotificationajax.action";this.set("watchingBlogs",d);return this.saveSettings(c,{spaceKey:this.get("spaceKey"),contentType:"blogpost"})},saveWatchSpace:function(d){var c=AJS.contextPath()+"/users/"+(d?"add":"remove")+"spacenotificationajax.action";this.set("watchingSpace",d);return this.saveSettings(c,{spaceKey:this.get("spaceKey")})}})}(AJS.$,CW=window.CW||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/views.js' */
(function(b,a){a.WatchView=Backbone.View.extend({events:{"change #cw-watch-page":"changeWatchPage","change #cw-watch-blogs":"changeWatchBlogs","change #cw-watch-space":"changeWatchSpace"},initialize:function(){_.bindAll(this,"render","initTooltips","changeWatchPage","changeWatchBlogs","changeWatchSpace","togglePageEnabledState","toggleBlogsEnabledState","startLoading","stopLoading","setTitle");this.model.on("sync change:watchingSpace",this.togglePageEnabledState,this);this.model.on("change:watchingSpace",this.toggleBlogsEnabledState,this);this.model.on("request",this.startLoading,this);this.model.on("sync",this.setTitle,this);this.model.on("sync",this.stopLoading,this)},render:function(){this.$el.html(Confluence.Watch.Templates.dialogBody(this.model.toJSON()));this.initTooltips();this.setTitle(this.model);return this},initTooltips:function(){this.$(".cw-tooltip").tooltip({gravity:"e",offset:5,delayIn:0});this.togglePageEnabledState(this.model);this.toggleBlogsEnabledState(this.model)},changeWatchPage:function(d){var c=b(d.target).is(":checked");this.model.saveWatchPage(c)},changeWatchBlogs:function(d){var c=b(d.target).is(":checked");this.model.saveWatchBlogs(c)},changeWatchSpace:function(d){var c=b(d.target).is(":checked");this.model.saveWatchSpace(c)},togglePageEnabledState:function(c){var d=c.get("watchingPage");var f=c.get("watchingSpace");this.$("#cw-watch-page").prop("disabled",f);this.$("#cw-watch-page").prop("checked",d||f);var e=f?"You will receive updates for this page because you are watching this space.":"";this.$(".cw-tooltip-watch-page").attr("original-title",e)},toggleBlogsEnabledState:function(c){var f=c.get("watchingBlogs");var e=c.get("watchingSpace");this.$("#cw-watch-blogs").prop("disabled",e);this.$("#cw-watch-blogs").prop("checked",f||e);var d=e?"You are subscribed to all blog posts because you are watching this space.":"";this.$(".cw-tooltip-watch-blogs").attr("original-title",d)},startLoading:function(){this.$(".cw-status").addClass("loading")},stopLoading:function(){this.$(".cw-status").removeClass("loading")},setTitle:function(){var d=this.model.get("watchingPage");var h=this.model.get("watchingBlogs");var f=this.model.get("watchingSpace");var c=this.model.get("isBlogPost");function g(){if(f){return{title:"You are watching this space",description:"Receiving email updates for all content in this space.",}}if(d&&c&&h){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post and all new blog posts in this space.",}}if(d&&c){return{title:"You are watching this blog post",description:"Receiving email updates about changes to this blog post.",}}if(d){return{title:"You are watching this page",description:"Receiving email updates about changes to this page.",}}if(c&&h){return{title:"You are watching for new blog posts",description:"Receiving email updates for new blog posts in this space.",}}if(c){return{title:"You are not watching this blog",description:"Start watching to receive email updates about changes to this blog.",}}return{title:"You are not watching this page",description:"Start watching to receive email updates about changes to this page.",}}var e=g();this.$(".cw-title").text(e.title);this.$(".cw-title-description").text(e.description)}})}(AJS.$,CW=window.CW||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch.js' */
(function(e,a){AJS.toInit(function(){var f=e("#watch-content-button");if(!f.length){return}var m=b(f);var i=AJS.Meta.get("page-id");var j=AJS.Meta.get("space-key");var h=AJS.Meta.get("space-name");_.extend(m,{pageId:i,spaceKey:j,spaceName:h});c(f,m);var l=new a.Watch(m);var k=new a.WatchView({model:l});AJS.InlineDialog(f,"confluence-watch",function(o,n,p){k.setElement(o);k.render();p()},{width:325,offsetX:-180,cacheContent:false,hideDelay:null,hideCallback:function(){e(".tipsy").hide()}});l.on("change:watchingPage change:watchingBlogs change:watchingSpace",function(n){c(f,n.toJSON())});a.registerAnalytics(l);d(l);var g=false;e(document).on("keyup",function(){g=false});window.CW_watchPage=function(){if(g){return}g=true;var p=l.get("watchingSpace");var o=l.get("watchingPage");if(p){e("body, #splitter-content").animate({scrollTop:0},300,function(){f.click();setTimeout(function(){e(".cw-tooltip-watch-page").tipsy("show")},50)})}else{var q=!o;l.saveWatchPage(q);var n=q?"You started watching this page.":"You stopped watching this page.";a.Notification.notify("success",n)}}});function c(g,j){var h=j.watchingPage;var f=j.isBlogPost&&j.watchingBlogs;var i=j.watchingSpace;if(h||f||i){g.removeClass("not-watching").addClass("watching")}else{g.removeClass("watching").addClass("not-watching")}}function d(f){f.on("change:watchingPage",function(g,i){var h=i?"watchpage.pageoperation":"unwatchpage.pageoperation";AJS.trigger(h)})}function b(h){var i=h.prop("search");var g=/[?&;]*(.*?)=([^&;]*)/g;var f;var j={};if(i){while(f=g.exec(i)){j[f[1]]=decodeURIComponent(f[2]).replace(/\+/g," ")}}_.each(j,function(l,k){if(l=="true"){j[k]=true}else{if(l=="false"){j[k]=false}}});return j}}(AJS.$,CW=window.CW||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/watch-analytics.js' */
var CW=CW||{};CW.registerAnalytics=function(a){a.on("change:watchingPage",function(b,d){var c=d?"watch-page":"unwatch-page";AJS.trigger("analytics",{name:c})});a.on("change:watchingBlogs",function(b,d){var c=d?"watch-blogs":"unwatch-blogs";AJS.trigger("analytics",{name:c})});a.on("change:watchingSpace",function(b,d){var c=d?"watch-space":"unwatch-space";AJS.trigger("analytics",{name:c})})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'js/notification.js' */
(function(b,a){b(function(){var c="cw-notification-container";var d=b("<div></div>",{id:c});b("body").append(d);a.Notification={notify:function(e,f,h){AJS.messages[e]("#"+c,{body:f,closeable:true,insert:"prepend"});var g=b(".aui-message",d).first();if(!h){h=5000}else{h*=1000}setTimeout(function(){g.fadeOut("fast",function(){g.closeMessage();g=null})},h)}}})}(AJS.$,CW=window.CW||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.watch-button:watch-resources', location = 'templates/watch.soy' */
// This file was automatically generated from watch.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Watch == 'undefined') { Confluence.Watch = {}; }
if (typeof Confluence.Watch.Templates == 'undefined') { Confluence.Watch.Templates = {}; }


Confluence.Watch.Templates.dialogBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="cw-status"><h2 class="cw-title"></h2><p class="cw-title-description"></p></div><form class="aui cw-dialog"><div class="cw-tooltip cw-tooltip-watch-page"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-page" ', (opt_data.watchingPage) ? 'checked' : '', '><label for="cw-watch-page">', (opt_data.isBlogPost) ? soy.$$escapeHtml("Watch blog post") : soy.$$escapeHtml("Watch page"), '</label></div></div>', (opt_data.isBlogPost) ? '<div class="cw-tooltip cw-tooltip-watch-blogs"><div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-blogs" ' + ((opt_data.watchingBlogs) ? 'checked' : '') + '><label for="cw-watch-blogs">' + soy.$$escapeHtml("Watch for new blog posts in this space") + '</label></div></div>' : '', '<div class="checkbox"><input class="checkbox" type="checkbox" id="cw-watch-space" ', (opt_data.watchingSpace) ? 'checked' : '', '><label for="cw-watch-space">', soy.$$escapeHtml("Watch all content in this space"), '</label></div></form>', (opt_data.isAdmin) ? '<div class="cw-manage-watchers-wrapper"><button class="aui-button aui-button-link cw-manage-watchers">' + soy.$$escapeHtml("Manage Watchers") + '</button></div>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/common/js/cml.js' */
var CML=CML||{VERSION:"0.2",allVersions:function(){if(console.group){console.group("Confluence versions")}console.log("Confluence:",AJS.params.versionNumber);console.log("AJS:",AJS.version);console.log("jQuery:",jQuery.fn.jquery);console.log("jQuery UI:",jQuery.ui.version);console.log("Backbone:",Backbone.VERSION);console.log("Underscore:",_.VERSION);if(console.group){console.groupEnd();console.group("Comalatech versions")}console.log("CML:",this.VERSION);console.log("AWP:",AWP.VERSION);if(console.group){console.groupEnd()}},getUrlParameters:function(){var b={};var a=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,e){b[d]=e});return b}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){if(this==null){throw new TypeError()}var d=Object(this);var a=d.length>>>0;if(a===0){return -1}var e=0;if(arguments.length>1){e=Number(arguments[1]);if(e!=e){e=0}else{if(e!=0&&e!=Infinity&&e!=-Infinity){e=(e>0||-1)*Math.floor(Math.abs(e))}}}if(e>=a){return -1}var b=e>=0?e:Math.max(a-Math.abs(e),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/embedded/soy/embeddedtemplates.soy' */
// This file was automatically generated from embeddedtemplates.soy.
// Please don't edit this file by hand.

if (typeof AWP == 'undefined') { var AWP = {}; }
if (typeof AWP.Templates == 'undefined') { AWP.Templates = {}; }


AWP.Templates.iframe = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<iframe frameborder=\'0\' width=\'100%\' height=\'320\' class=\'adhoworkflows\'src="', soy.$$escapeHtml(opt_data.contextPath), '/plugins/servlet/adhocworkflows/', soy.$$escapeHtml(opt_data.action), '/', soy.$$escapeHtml(opt_data.pageId), '"/>');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.iframeSmall = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<iframe frameborder=\'0\' width=\'100%\' height=\'220\' class=\'adhoworkflows\'src="', soy.$$escapeHtml(opt_data.contextPath), '/plugins/servlet/adhocworkflows/workflow/', soy.$$escapeHtml(opt_data.pageId), '"/>');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.pageState = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="adhocworkflows-state ', soy.$$escapeHtml(opt_data.finalClass), '" ', (opt_data.hover != opt_data.stateName) ? 'title="' + soy.$$escapeHtml(opt_data.hover) + '"' : '', '>', soy.$$escapeHtml(opt_data.stateName), '</span>');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.versionInfo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('(', soy.$$escapeHtml("view:"), '&nbsp;<a id="view-change-link" href="', soy.$$escapeHtml(opt_data.changeUrl), '">', soy.$$escapeHtml("change"), '</a> &middot;&nbsp;<a id="awp-alternate-view" href="', soy.$$escapeHtml(opt_data.contextPath), soy.$$escapeHtml(opt_data.pageStatus.alternateViewUrl), '">', soy.$$escapeHtml(opt_data.pageStatus.alternateViewStateName), '</a>)');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.altLinkNoVersion = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="noprint">(<a id="awp-alternate-view" href="', soy.$$escapeHtml(opt_data.contextPath), soy.$$escapeHtml(opt_data.pageStatus.alternateViewUrl), '">', soy.$$escapeHtml(opt_data.pageStatus.alternateViewStateName), '</a>)</span>');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.badge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<sub class="awp-badge ', (opt_data.message == '0') ? 'awp-badge-0' : '', ' badge aui-lozenge">', (opt_data.message == '0') ? '!' : soy.$$escapeHtml(opt_data.message), '</sub>');
  return opt_sb ? '' : output.toString();
};


AWP.Templates.feedback = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<aside class="awp-feedback"><header><h2>Comala Workflows</h2></header><div class="awp-content"></div><footer><a href="javascript:;" class="awp-btn-close">cancel</a></footer></aside>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/remote/js/libs/soyutils.js' */
var goog=goog||{};goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b};if(!goog.userAgent){goog.userAgent=(function(){var b="";if("undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent){b=navigator.userAgent}var a=b.indexOf("Opera")==0;return{HAS_JSCRIPT:typeof"ScriptEngine" in this,IS_OPERA:a,IS_IE:!a&&b.indexOf("MSIE")!=-1,IS_WEBKIT:!a&&b.indexOf("WebKit")!=-1}})()}if(!goog.asserts){goog.asserts={fail:function(a){}}}if(!goog.dom){goog.dom={};goog.dom.DomHelper=function(a){this.document_=a||document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()}}if(!goog.format){goog.format={insertWordBreaks:function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=32){f[h++]=j.substring(d,e);d=e;f[h++]=goog.format.WORD_BREAK;g=0}if(b){if(l==62){b=false}}else{if(k){switch(l){case 59:k=false;++g;break;case 60:k=false;b=true;break;case 32:k=false;g=0;break}}else{switch(l){case 60:b=true;break;case 38:k=true;break;case 32:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")},WORD_BREAK:goog.userAgent.IS_WEBKIT?"<wbr></wbr>":goog.userAgent.IS_OPERA?"&shy;":"<wbr>"}}if(!goog.i18n){goog.i18n={bidi:{detectRtlDirectionality:function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiRtlWordRatio_(b)>soyshim.$$bidiRtlDetectionThreshold_}}}}goog.i18n.bidi.Dir={RTL:-1,UNKNOWN:0,LTR:1};goog.i18n.bidi.toDir=function(a){if(typeof a=="number"){return a>0?goog.i18n.bidi.Dir.LTR:a<0?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.UNKNOWN}else{return a?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}};goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a)};goog.i18n.BidiFormatter.prototype.dirAttr=function(c,a){var b=soy.$$bidiTextDir(c,a);return b&&b!=this.dir_?b<0?"dir=rtl":"dir=ltr":""};goog.i18n.BidiFormatter.prototype.endEdge=function(){return this.dir_<0?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return((this.dir_>0)?"\u200E":(this.dir_<0)?"\u200F":"")};goog.i18n.BidiFormatter.prototype.markAfter=function(c,a){var b=soy.$$bidiTextDir(c,a);return soyshim.$$bidiMarkAfterKnownDir_(this.dir_,b,c,a)};goog.i18n.BidiFormatter.prototype.spanWrap=function(d,c){d=String(d);var b=soy.$$bidiTextDir(d,true);var a=soyshim.$$bidiMarkAfterKnownDir_(this.dir_,b,d,true);if(b>0&&this.dir_<=0){d="<span dir=ltr>"+d+"</span>"}else{if(b<0&&this.dir_>=0){d="<span dir=rtl>"+d+"</span>"}}return d+a};goog.i18n.BidiFormatter.prototype.startEdge=function(){return this.dir_<0?"right":"left"};goog.i18n.BidiFormatter.prototype.unicodeWrap=function(d,c){d=String(d);var b=soy.$$bidiTextDir(d,true);var a=soyshim.$$bidiMarkAfterKnownDir_(this.dir_,b,d,true);if(b>0&&this.dir_<=0){d="\u202A"+d+"\u202C"}else{if(b<0&&this.dir_>=0){d="\u202B"+d+"\u202C"}}return d+a};goog.string={newLineToBr:function(b,a){b=String(b);if(!goog.string.NEWLINE_TO_BR_RE_.test(b)){return b}return b.replace(/(\r\n|\r|\n)/g,a?"<br />":"<br>")},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/};goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.HAS_JSCRIPT?[]:"";if(a!=null){this.append.apply(this,arguments)}};goog.string.StringBuffer.prototype.bufferLength_=0;goog.string.StringBuffer.prototype.append=function(c,b,e){if(goog.userAgent.HAS_JSCRIPT){if(b==null){this.buffer_[this.bufferLength_++]=c}else{var a=this.buffer_;a.push.apply(a,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=c;if(b!=null){for(var d=1;d<arguments.length;d++){this.buffer_+=arguments[d]}}}return this};goog.string.StringBuffer.prototype.clear=function(){if(goog.userAgent.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};if(!goog.soy){goog.soy={renderAsElement:function(c,a,b,d){return(soyshim.$$renderWithWrapper_(c,a,d,true,b))},renderAsFragment:function(c,a,b,d){return soyshim.$$renderWithWrapper_(c,a,d,false,b)},renderElement:function(c,d,a,b){c.innerHTML=d(a,null,b)}}}var soy={esc:{}};var soydata={};var soyshim={$$DEFAULT_TEMPLATE_DATA_:{}};soyshim.$$renderWithWrapper_=function(h,f,b,c,i){var d=b||document;var a=d.createElement("div");a.innerHTML=h(f||soyshim.$$DEFAULT_TEMPLATE_DATA_,undefined,i);if(a.childNodes.length==1){var g=a.firstChild;if(!c||g.nodeType==1){return(g)}}if(c){return a}var e=d.createDocumentFragment();while(a.firstChild){e.appendChild(a.firstChild)}return e};soyshim.$$bidiMarkAfterKnownDir_=function(c,b,d,a){return(c>0&&(b<0||soyshim.$$bidiIsRtlExitText_(d,a))?"\u200E":c<0&&(b>0||soyshim.$$bidiIsLtrExitText_(d,a))?"\u200F":"")};soyshim.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soyshim.$$BIDI_HTML_SKIP_RE_," "):b};soyshim.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soyshim.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u2C00-\uFB1C\uFDFE-\uFE6F\uFEFD-\uFFFF";soyshim.$$bidiNeutralChars_="\u0000-\u0020!-@[-`{-\u00BF\u00D7\u00F7\u02B9-\u02FF\u2000-\u2BFF";soyshim.$$bidiRtlChars_="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC";soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiNeutralDirCheckRe_=new RegExp("^["+soyshim.$$bidiNeutralChars_+"]*$|^http://");soyshim.$$bidiIsRtlText_=function(a){return soyshim.$$bidiRtlDirCheckRe_.test(a)};soyshim.$$bidiIsNeutralText_=function(a){return soyshim.$$bidiNeutralDirCheckRe_.test(a)};soyshim.$$bidiRtlDetectionThreshold_=0.4;soyshim.$$bidiRtlWordRatio_=function(e){var b=0;var a=0;var d=e.split(" ");for(var c=0;c<d.length;c++){if(soyshim.$$bidiIsRtlText_(d[c])){b++;a++}else{if(!soyshim.$$bidiIsNeutralText_(d[c])){a++}}}return a==0?0:b/a};soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiLtrExitDirCheckRe_.test(b)};soyshim.$$bidiIsRtlExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiRtlExitDirCheckRe_.test(b)};soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind={HTML:0,JS_STR_CHARS:1,URI:2,HTML_ATTRIBUTE:3};soydata.SanitizedContent=function(a){this.content=a};soydata.SanitizedContent.prototype.contentKind;soydata.SanitizedContent.prototype.toString=function(){return this.content};soydata.SanitizedHtml=function(a){soydata.SanitizedContent.call(this,a)};goog.inherits(soydata.SanitizedHtml,soydata.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedJsStrChars=function(a){soydata.SanitizedContent.call(this,a)};goog.inherits(soydata.SanitizedJsStrChars,soydata.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(a){soydata.SanitizedContent.call(this,a)};goog.inherits(soydata.SanitizedUri,soydata.SanitizedContent);soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedHtmlAttribute=function(a){soydata.SanitizedContent.call(this,a)};goog.inherits(soydata.SanitizedHtmlAttribute,soydata.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.HTML_ATTRIBUTE;soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(d,b,a,c){return goog.soy.renderAsFragment(d,b,c,new goog.dom.DomHelper(a))};soy.renderAsElement=function(d,b,a,c){return goog.soy.renderAsElement(d,b,c,new goog.dom.DomHelper(a))};soy.$$augmentData=function(d,a){function e(){}e.prototype=d;var c=new e();for(var b in a){c[b]=a[b]}return c};soy.$$getMapKeys=function(c){var b=[];for(var a in c){b.push(a)}return b};soy.$$getDelegateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};soy.$$registerDelegateFn=function(e,c,b){var d="key_"+e;var a=soy.$$DELEGATE_REGISTRY_PRIORITIES_[d];if(a===undefined||c>a){soy.$$DELEGATE_REGISTRY_PRIORITIES_[d]=c;soy.$$DELEGATE_REGISTRY_FUNCTIONS_[d]=b}else{if(c==a){throw Error('Encountered two active delegates with same priority (id/name "'+e+'").')}else{}}};soy.$$getDelegateFn=function(b){var a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+b];return a?a:soy.$$EMPTY_TEMPLATE_FN_};soy.$$EMPTY_TEMPLATE_FN_=function(a,c,b){return""};soy.$$escapeHtml=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return a.content}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlRcdata=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlHelper(a.content)}return soy.esc.$$escapeHtmlHelper(a)};soy.$$stripHtmlTags=function(a){return String(a).replace(soy.esc.$$HTML_TAG_REGEX_,"")};soy.$$escapeHtmlAttribute=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML){return soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlNospaceHelper(a)};soy.$$filterHtmlAttribute=function(a){if(typeof a==="object"&&a&&a.contentKind===soydata.SanitizedContentKind.HTML_ATTRIBUTE){return a.content.replace(/=([^"']*)$/,'="$1"')}return soy.esc.$$filterHtmlAttributeHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};soy.$$escapeJsString=function(a){if(typeof a==="object"&&a.contentKind===soydata.SanitizedContentKind.JS_STR_CHARS){return a.content}return soy.esc.$$escapeJsStringHelper(a)};soy.$$escapeJsValue=function(a){if(a==null){return" null "}switch(typeof a){case"boolean":case"number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};soy.$$escapeUri=function(a){if(typeof a==="object"&&a.contentKind===soydata.SanitizedContentKind.URI){return soy.$$normalizeUri(a)}var b=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;if(soy.$$problematicUriMarks_.test(b)){return b.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_)}return b};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};soy.$$filterNormalizeUri=function(a){return soy.esc.$$filterNormalizeUriHelper(a)};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){if(a==null){return""}return soy.esc.$$filterCssValueHelper(a)};soy.$$changeNewlineToBr=function(a){return goog.string.newLineToBr(String(a),false)};soy.$$insertWordBreaks=function(b,a){return goog.format.insertWordBreaks(String(b),a)};soy.$$truncate=function(c,a,b){c=String(c);if(c.length<=a){return c}if(b){if(a>3){a-=3}else{b=false}}if(soy.$$isHighSurrogate_(c.charAt(a-1))&&soy.$$isLowSurrogate_(c.charAt(a))){a-=1}c=c.substring(0,a);if(b){c+="..."}return c};soy.$$isHighSurrogate_=function(a){return 55296<=a&&a<=56319};soy.$$isLowSurrogate_=function(a){return 56320<=a&&a<=57343};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};soy.$$bidiTextDir=function(b,a){if(!b){return 0}return goog.i18n.bidi.detectRtlDirectionality(b,a)?-1:1};soy.$$bidiDirAttr=function(b,c,a){return new soydata.SanitizedHtmlAttribute(soy.$$getBidiFormatterInstance_(b).dirAttr(c,a))};soy.$$bidiMarkAfter=function(b,d,a){var c=soy.$$getBidiFormatterInstance_(b);return c.markAfter(d,a)};soy.$$bidiSpanWrap=function(a,c){var b=soy.$$getBidiFormatterInstance_(a);return b.spanWrap(c+"",true)};soy.$$bidiUnicodeWrap=function(a,c){var b=soy.$$getBidiFormatterInstance_(a);return b.unicodeWrap(c+"",true)};soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;","\x22":"\x26quot;","\x26":"\x26amp;","\x27":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x09":"\x26#9;","\x0a":"\x26#10;","\x0b":"\x26#11;","\x0c":"\x26#12;","\x0d":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\x85":"\x26#133;","\xa0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\x08":"\\x08","\x09":"\\t","\x0a":"\\n","\x0b":"\\x0b","\x0c":"\\f","\x0d":"\\r","\x22":"\\x22","\x26":"\\x26","\x27":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\x85":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029","$":"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\x08":"\\8 ","\x09":"\\9 ","\x0a":"\\a ","\x0b":"\\b ","\x0c":"\\c ","\x0d":"\\d ","\x22":"\\22 ","\x26":"\\26 ","\x27":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\x85":"\\85 ","\xa0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\x08":"%08","\x09":"%09","\x0a":"%0A","\x0b":"%0B","\x0c":"%0C","\x0d":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20","\x22":"%22","\x27":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTE_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeJsRegexHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(b)){return"zSoyz"}return b};soy.esc.$$normalizeUriHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(b)){return"zSoyz"}return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterHtmlAttributeHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTE_.test(b)){return"zSoyz"}return b};soy.esc.$$filterHtmlElementNameHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(b)){return"zSoyz"}return b};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?[a-zA-Z])(?:[^>'"]|"[^"]*"|'[^']*')*>/g;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/embedded/js/workflow.js' */
var AWP=AWP||{};AWP.Embedded=AWP.Embedded||{};AWP.Embedded.Workflow=(function(i,f){var e="workflow",g=null,l="",a="",b="",j=null,c=null,h="",d=false;setState=function(w){var t=f("#"+l);var u="#title-text";var y="#workflow-page-message";t.css("display","block");if(w.stateName&&w.stateName!==""&&!w.hideStates){var q="";if(w.finalState){q="final"}else{if(w.hasFinalState){q="notfinal"}}f("#title-heading .adhocworkflows-state, .rw_page_title .adhocworkflows-state").remove();if(f(".rw_page_title").length>0){u=".rw_page_title"}f(u).append(AWP.Templates.pageState({stateName:w.stateName,finalClass:q,hover:""}));if(w.updatePageStatus){var r=i.$("#content .status-macro:first");if(r.length>0){r.removeClass("aui-lozenge-complete aui-lozenge-success aui-lozenge-current");r.html(w.stateName);if(w.finalState){r.addClass("aui-lozenge-success")}else{if(w.hasFinalState){r.addClass("aui-lozenge-current")}else{r.addClass("aui-lozenge-complete")}}}}if(w.displayProgressTracker){var n=0;var x=w.orderedWorkflowStates.length;x=x-5;if(x>0){n=x*80}var s=new AWP.ProgressTracker(w.orderedWorkflowStates,w.stateName,w.hoverDescription);i.InlineDialog(f(".adhocworkflows-state"),"awp-state",function(A,z,B){if(s.checkStates()){if(!s.isRendered()){A.html(s.render())}B()}return false},{showDelay:800,onHover:true,width:(400+n)})}}setMessages(w.messages);if(w.hasFinalState){if(w.alternateViewUrl){var o=f("#view-change-link");if(o.length>0){var m=o.attr("href");var v=o.parents("span");v.html(AWP.Templates.versionInfo({changeUrl:m,contextPath:i.Confluence.getContextPath(),pageStatus:w,pageId:i.params.pageId}))}else{var p=f("li.page-metadata-modification-info");if(p.length>0){p.append(AWP.Templates.altLinkNoVersion({contextPath:i.Confluence.getContextPath(),pageStatus:w}))}}}else{}}else{}f(".awp-badge").remove();if(w.actionable||w.activeTasks>0){$parent=t.parent();$div=i.$("<div></div>",{id:"awp-menu-icon"});t.appendTo($div);$div.append(AWP.Templates.badge({message:w.activeTasks}));$parent.prepend($div)}if(!w.hideStates){f("#addAdhocWorkflow").css("display","none");f("#addApprovalWorkflow").css("display","none")}f("#editPageWorkflowLink").css("display","block")};setMessages=function(q){var p="#workflow-page-message";if(q){if(!jQuery.isArray(q)){q=[q]}if(q.length>0){var o=f(p);if(o.length===0){pageMessageContainer=f("<div></div>",{id:"workflow-page-message"});f("#main-content").prepend(pageMessageContainer)}else{o.html("")}for(var m=0;m<q.length;m++){var n=q[m];q={title:n.title?n.title:undefined,closeable:true,body:n.renderedMessage};switch(n.type){case"ERROR":i.messages.error(p,q);break;case"SUCCESS":i.messages.success(p,q);break;case"INFO":i.messages.info(p,q);break;case"HINT":i.messages.hint(p,q);break;case"WARNING":i.messages.warning(p,q);break;default:i.messages.generic(p,q)}}}}};updateBadge=function(o){var m=f(".awp-badge").html();if(o!=m){if(o=="0"){f(".awp-badge").addClass("awp-badge-0");o="!"}else{f(".awp-badge").removeClass("awp-badge-0")}f(".awp-badge").html(o)}};generatePopup=function(p,n,o){var m=f(n);f(".awp-badge").hide();var q=f("<div></div>").attr({"class":"awp-loading"}).html("loading");p.height("325px").html(q).append(AWP.Templates.iframe({pageId:i.params.pageId,contextPath:i.Confluence.getContextPath(),action:e}));o()};generateFeedbackPopup=function(m){if(m){var n="#"+m;$popup=f(n);$popup.addClass("awp-"+m);$popup.html(AWP.Templates.feedback({}));f("<iframe></iframe>").attr({src:"http://comalatech.wufoo.com/embed/m7x1p5/",height:"365",allowtransparency:"true",frameborder:"0",scrolling:"no"}).appendTo(n+" .awp-content");f(n+" .awp-btn-close").bind("click",hideFeedbackDialog)}};getModalDialogId=function(){return h};getDialogId=function(){return l};isModalDialogOpen=function(){return d};setModalDialogOpen=function(m){d=m};showModalDlg=function(){setModalDialogOpen(true);c.show()};showFeedbackDialog=function(){generateFeedbackPopup(j.id);j.show()};hideFeedbackDialog=function(){j.hide()};hideDialog=function(){g.hide()};hideModalDialog=function(){setModalDialogOpen(false);c.hide()};setAction=function(m){e=m};getTask=function(){return b};setTask=function(m){b=m};setApproval=function(m){a=m};getApproval=function(){return a};queryString=function(){var p={};var o=window.location.search.substring(1);var q=o.split("&");for(var n=0;n<q.length;n++){var r=q[n].split("=");if(typeof p[r[0]]==="undefined"){p[r[0]]=r[1]}else{if(typeof p[r[0]]==="string"){var m=[p[r[0]],r[1]];p[r[0]]=m}else{p[r[0]].push(r[1])}}}return p};init=function(n,m,p){i.log("[AWP] init embedded.workflow");l=n;h=m;var o="#"+l;f("#rte-button-adhoctasks").click(function(){AWP.Embedded.Workflow.setAction("addtask")});g=i.InlineDialog(f(o+",#rte-button-adhoctasks"),"adhocWorkflowsDialogPopup",generatePopup,{width:420,offsetY:17,hideDelay:10000,hideCallback:function(){f(".awp-badge").show("fast")},initCallback:function(){setModalDialogOpen(false)}});c=new i.Dialog({width:350,height:220,id:h,closeOnOutsideClick:true});j=new i.Dialog({width:600,height:450,id:p,closeOnOutsideClick:true});f(o).parents("li").appendTo(f("#navigation ul.ajs-menu-bar"));if(f(".rw_custom_section").length>0){f(o+" span").html("");f(o).addClass("rw_icon_button").prependTo(f("#rw_page_right .rw_custom_section"))}};var k=function(){var m="rte-button-adhoctasks";f("#"+m).click(function(){AWP.Embedded.Workflow.setAction("addtask")});g=i.InlineDialog(f("#"+m),"adhocWorkflowsDialogPopup",generatePopup,{width:420,offsetY:17,hideDelay:10000,hideCallback:function(){f(".awp-badge").show("fast")},initCallback:function(){setModalDialogOpen(false)}})};i.toInit(function(m){init("adhocWorkflowsPopupLink","addWorkflowDialog","feedbackPopup");AWP.params=queryString();if(AWP.params.task||AWP.params.approval){i.Confluence.EditorLoader.load(function(){if(AWP.params.task){setTask(AWP.params.task);m("#"+getDialogId()).click()}else{if(AWP.params.approval){setApproval(AWP.params.approval);m("#"+getDialogId()).click()}}})}m(document).delegate(".awp-badge","click",g.show);m(document).delegate("#editPageLink","click",k)});return{setState:setState,setMessages:setMessages,setAction:setAction,updateBadge:updateBadge,dialog:g,getDialogId:getDialogId,hideDialog:hideDialog,modalDialog:c,getModalDialogId:getModalDialogId,isModalDialogOpen:isModalDialogOpen,setModalDialogOpen:setModalDialogOpen,showModalDlg:showModalDlg,hideModalDialog:hideModalDialog,showFeedbackDialog:showFeedbackDialog,setTask:setTask,getTask:getTask,setApproval:setApproval,getApproval:getApproval}})(AJS,AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/embedded/js/events.js' */
var AWP=AWP||{};AWP.Embedded=AWP.Embedded||{};AWP.Embedded.Events=new function(a){this.refreshState=function(b,c){AWP.Embedded.Workflow.setState(c)};this.refreshMsg=function(c,b){AWP.Embedded.Workflow.setMessages(b)};this.closeWorkflowDialog=function(){AWP.Embedded.Workflow.hideDialog();AWP.Embedded.Workflow.hideModalDialog()};this.addWorkflow=function(c){c.preventDefault();var d=AWP.Embedded.Workflow;d.showModalDlg();var b=a("#"+d.getModalDialogId());b.html("").append(AWP.Templates.iframeSmall({pageId:AJS.params.pageId,contextPath:AJS.Confluence.getContextPath()}));return false};this.addTask=function(b){b.preventDefault();var c=AWP.Embedded.Workflow;c.setAction("addtask");a("#"+c.getDialogId()).click()};this.addApprovalWorkflow=function(b){b.preventDefault();AWP.Embedded.Workflow.setAction("addapproval");a("#"+AWP.Embedded.Workflow.getDialogId()).click()};a(document).delegate("iframe.adhoworkflows","awp.refresh",this.refreshState);a(document).delegate("iframe.adhoworkflows","awp.refreshMsg",this.refreshMsg);a(document).delegate("iframe.adhoworkflows","awp.close",this.closeWorkflowDialog);a(document).delegate("#addAdhocWorkflow","click",this.addWorkflow);a(document).delegate("#addPageTaskLink","click",this.addTask);a(document).delegate("#addApprovalWorkflow","click",this.addApprovalWorkflow)}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/common/soy/progresstracker.soy' */
// This file was automatically generated from progresstracker.soy.
// Please don't edit this file by hand.

if (typeof AWP == 'undefined') { var AWP = {}; }
if (typeof AWP.Templates == 'undefined') { AWP.Templates = {}; }


AWP.Templates.progresstracker = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="', soy.$$escapeHtml(opt_data.el), '"><ol class="aui-progress-tracker">');
  var stateList6 = opt_data.states;
  var stateListLen6 = stateList6.length;
  for (var stateIndex6 = 0; stateIndex6 < stateListLen6; stateIndex6++) {
    var stateData6 = stateList6[stateIndex6];
    output.append('<li ', (stateData6 == '...') ? 'title="' + soy.$$escapeHtml(opt_data.hintHiddenStates) + '"' : '', 'class="aui-progress-tracker-step ', (stateData6 == opt_data.current) ? 'aui-progress-tracker-step-current' : '', ' ', (stateData6 == '...') ? (stateIndex6 == 0) ? 'awp-progress-tracker-step-first' : 'awp-progress-tracker-step-short' : '', '"><span class="', (stateData6 == '...') ? 'awp-progress-tracker-transition' : '', '">', soy.$$escapeHtml(stateData6), '</span></li>');
  }
  output.append('</ol>', (opt_data.stateDescription && opt_data.current != opt_data.stateDescription) ? '<div class="awp-statedesc">' + soy.$$escapeHtml(opt_data.stateDescription) + '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:bundled', location = 'templates/com/comalatech/workflow/common/js/view/progresstracker.js' */
var AWP=AWP||{};AWP.ProgressTracker=(function(b,g,a){var f=5,h=false,e="",d="awp-progress-tracker",c=AWP.Templates.progresstracker;initialize=function(){filterStates();if(!a){a=""}};checkStates=function(){var l=false;if(arguments.length>0){g=arguments[0]}var k=b.indexOf(g);if(k>=0){l=true}return l};filterStates=function(){var k=b.length;this.hintHiddenStates="";if(k>f){var n=k-f;var l=0,m=false;while(l<k&&!m){if(b[l]==g){m=true}l++}l--;if(l==0){for(j=0;j<f-2;j++){b[j]=b[l+j]}b[j]="...";b[j+1]=b[k-1];b.splice(f);hiddenStates=k-(l+(f-1));e="+"+hiddenStates+" states"}else{if(l<n){b[0]="...";for(j=1;j<f-2;j++){b[j]=b[l+j]}b[j]="...";b[j+1]=b[k-1];b.splice(f+1);hiddenStates=k-(l+(f-1));e="+"+hiddenStates+" states"}else{b.splice(0,n);b.unshift("...")}}}};render=function(){var i="";if(this.checkStates()){i=c({el:d,states:b,current:g,hintHiddenStates:e,stateDescription:a});h=true}return i};isRendered=function(){return h};$el=function(){return AJS.$("."+d)};initialize();return{$el:$el,checkStates:checkStates,isRendered:isRendered,render:render}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/autocomplete-filtered-user.js' */
var AWP=AWP||{};AWP.autocompleteFilteredUser=function(b){b=b||document.body;var c=AJS.$;var a=function(e){if(!e||!e.result){throw new Error("Invalid JSON format")}var d=[];d.push(e.result);return d};c('input.autocomplete-filtered-user[data-autocomplete-filtered-user-bound!="true"]',b).each(function(){var g=c(this).attr("data-autocomplete-filtered-user-bound","true").attr("autocomplete","off");var f=g.attr("data-max")||10,j=g.attr("data-alignment")||"left",h=g.attr("data-dropdown-target"),e=null;if(h){e=c(h)}else{e=c("<div></div>");g.after(e)}if(g.attr("data-resize-to-input")){e.width(g.outerWidth());e.addClass("resize-to-input")}e.addClass("aui-dd-parent autocomplete");var d=c(this).attr("groups");var i=c(this).attr("users");d=d||"";i=i||"";g.quicksearch("/rest/adhocworkflows/1/search/user.json?groups="+d+"&users="+i,function(){g.trigger("open.autocomplete-filtered-user")},{makeParams:function(k){return{"max-results":f,query:k}},dropdownPlacement:function(k){e.append(k)},makeRestMatrixFromData:a,addDropdownData:function(k){if(!k.length){var l=g.attr("data-none-message");if(l){k.push([{name:l,className:"no-results",href:"#"}])}}return k},ajsDropDownOptions:{alignment:j,displayHandler:function(k){if(k.restObj&&k.restObj.username){return k.name+" ("+k.restObj.username+")"}return k.name},selectionHandler:function(p,m){if(m.find(".search-for").length){g.trigger("selected.autocomplete-filtered-user",{searchFor:g.val()});return}if(m.find(".no-results").length){this.hide();p.preventDefault();return}var k=c("span:eq(0)",m).data("properties"),q=k.restObj.username,n=g.attr("data-target"),o=n&&c(n),l=g.attr("data-template")||"{username}";g.val(AJS.template(l).fillHtml(k.restObj));o&&o.val(q);g.trigger("selected.autocomplete-filtered-user",{content:k.restObj});this.hide();p.preventDefault()}}})})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/states.js' */
var Adhoc=Adhoc||{};Adhoc.Workflow=Adhoc.Workflow||{};Adhoc.menuActions=Adhoc.menuActions||[];(function(a){Adhoc.Workflow.setState=function(b){Adhoc.state=b;var c=a("#adhocWorkflowsLink");if(!b.stateName||b.publishedView){c.css("display","none")}else{c.addClass("workflow-state").css("display","block").css("visibility","inherit");c.attr("title",b.hoverDescription);a("#workflow-page-message").html("")}if(b.activeTasks>0){a("#adhocTasksLink").css("display","block");Adhoc.Tasks.generateTasksPopup(Adhoc.Tasks.dialog.find(".contents"),this,function(){})}else{a("#adhocTasksLink").hide()}if(b.taskable){a("#addPageTaskLink").removeClass("notTaskable");a("#addPageTaskLink").addClass("taskable");a("#taskable").val("true")}else{a("#addPageTaskLink").removeClass("taskable");a("#addPageTaskLink").addClass("notTaskable");a("#taskable").val("false")}a("#editPageWorkflowLink").css("display","block");AWP.Embedded.Workflow.setState(b)};Adhoc.Workflow.refreshState=function(){a.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/state/"+AJS.params.pageId+"?publishedView="+Adhoc.publishedView,success:function(c,d,b){if(b.status!=200){return}AWP.Embedded.Workflow.setState(c);if(Adhoc.clickedApprovalId){a("#adhocWorkflowsLink").click()}},error:Adhoc.errorHandler});return false};Adhoc.Workflow.stateAction=function(){var c=a(this).parents("form");var b={name:c.hasClass("adhoc")?c.find("input.newstatename").val():c.find("select").val(),assignee:Adhoc.getAssignees(c),note:c.find("textarea").val()};var d=a(this).attr("name");Adhoc.submitProgress(a(this).parents(".adhoc"));a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/state/"+AJS.params.pageId+"/"+d,data:JSON.stringify(b),success:function(f,g,e){if(e.status==200){AWP.Embedded.Workflow.setState(f)}Adhoc.dialog.hide()},error:Adhoc.errorHandler});return false};Adhoc.Workflow.assign=function(){var b=a(this).parents("form");b.addClass("assign");return false};Adhoc.Workflow.unassign=function(){var b=a(this).parents("form");b.addClass("unassign");return false};Adhoc.Workflow.doStateDialog=function(e,c){var b=e.states;c.append(AJS.template.load("adhocworkflows-states").fill());for(i=0;i<b.length;i++){var d={name:b[i]};c.find("select").append(AJS.template.load("adhocworkflows-state").fill(d))}if(e.adhoc){c.find("select").append(AJS.template.load("adhocworkflows-state-adhoc").fill());c.find("select").change(function(){var f=a(this).parents("form");var g=a(this).val();if(g=="0"){f.addClass("adhoc")}else{f.removeClass("adhoc");f.find("input.newstatename").val("")}})}c.find("form.state input[type='submit']").click(Adhoc.Workflow.stateAction);c.find(".cancel-dialog").click(Adhoc.doHidePopup);Adhoc.setPresetUsers(a("#inline-dialog-adhocWorkflowsPopup .usersdropdown .aui-dropdown"),e.involvedUsers);c.find(".usersdropdown").dropDown("Standard");c.find("input.autocomplete-user").click(function(){var f=a(this).parents("form");f.find(".usersdropdown a.aui-dd-trigger").click()});AJS.Confluence.Binder.autocompleteUser();c.find("input.autocomplete-user").bind("selected.autocomplete-user",Adhoc.selectAssignee);c.find(".assign-page").click(Adhoc.Workflow.assign);if(e.assignee!=undefined){c.find("input[name='assignee']").attr("placeholder",c.find("input[name='assignee']").attr("placeholder2"));c.find("ol.assignees.assigned").append(AJS.template.load("adhocworkflows-assignee").fill(e.assignee))}c.find("ol.assignees.assigned .remove-assignee").click(Adhoc.Workflow.unassign);if(!e.pageAssignable){a("form.aui.state").addClass("unassignable")}else{a("form.aui.state").removeClass("unassignable")}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/approvals.js' */
var Adhoc=Adhoc||{};Adhoc.Approvals=Adhoc.Approvals||{};(function(a){Adhoc.Approvals.hideApproval=function(){a(this).parents(".approvals .approval").removeClass("active");a("#workflow-main .button-panel.dialog").show();return false};Adhoc.Approvals.showApproval=function(){a(this).parents(".approvals").find(".cancel-approval").click();var b=a(this).parents(".approval");var e=a(this).attr("name");var c=b.find("form");a(this).parents(".approvals .approval").removeClass("active");b.addClass("active");b.removeClass("approve").removeClass("reject").removeClass("assign");c.removeClass("approve").removeClass("reject").removeClass("assign");a("ol.assignees.select").empty();b.addClass(e);c.addClass(e);var d=b.find(".button-panel input[name='"+e+"']");d.toggleClass("highlight");setTimeout(function(){d.toggleClass("highlight")},400);a("#workflow-main .button-panel.dialog").hide();return false};Adhoc.Approvals.assign=function(){var b=a(this).parents(".approval");var c=b.find("form");c.removeClass("approve").removeClass("reject");c.addClass("assign");c.find("input.autocomplete-filtered-user").click().focus();return false};Adhoc.Approvals.doAction=function(){var d=a(this).attr("name");var b=a(this).parents("form");var c={assignee:Adhoc.getAssignees(b),user:b.find("input[name='username']").val(),password:b.find("input[name='password']").val(),name:b.find("input[name='name']").val(),note:b.find("textarea").val()};Adhoc.submitProgress(a(this).parents(".adhoc"));a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/approval/"+AJS.params.pageId+"/"+d,data:JSON.stringify(c),success:function(g,h,f){if(f.status==200){var e=Adhoc.state.stateName!=g.stateName;Adhoc.Workflow.setState(g);if(!e){a("#adhocWorkflowsLink").click()}else{Adhoc.dialog.hide()}}else{Adhoc.dialog.hide()}},error:Adhoc.errorHandler});return false};Adhoc.Approvals.doDialog=function(d,n){var k;if(d.approvals.length>1){k=AJS.params.approvalsLabel}else{k=""}fillApprovalActions=function(i,o){var p=i.find(".approval-header .workflow-actions");for(var j=o.actions.length-1;j>=0;j--){p.append(AJS.template.load("adhoc-action").fill(o.actions[j]))}};fillDefaultAction=function(i,j,o){$name=i.find(".name");if(j.hint!=undefined){i.attr("title",j.hint)}if(j.defaultAction!=undefined){j.defaultAction.name=o.fullName?o.fullName:o.name;j.defaultAction.shortName=o.shortName;$name.append(AJS.template.load("adhocworkflows-approval-action-default").fill(j))}else{$name.append(o.fullName?o.fullName:o.name)}};var m=d.approvals;n.append(AJS.template.load("adhocworkflows-approvals").fill());var l="";for(var g=0;g<m.length;g++){var c=m[g];c.separator=l;n.find(".approvals").append(AJS.template.load("adhocworkflows-approval").fill(c));var h=a("#"+c.id);if(c.assignees!=undefined&&c.assignees.length>0){Adhoc.setPresetUsers(h.find(".usersdropdown .aui-dropdown ol"),c.assignees);h.addClass("assignees")}else{Adhoc.setPresetUsers(h.find(".usersdropdown .aui-dropdown ol"),d.involvedUsers)}if(c.dueDate){h.find(".approval-duedate").html(AJS.template.load("adhocworkflows-approval-duedate").fill(c))}if(c.message!=undefined&&c.message.length>0){h.find(".adhoc-message").html(c.message)}fillApprovalActions(h,c);fillDefaultAction(h,c,c);for(var f=0;f<c.approvers.length;f++){var e=c.approvers[f];n.find(".approvals").append(AJS.template.load("adhocworkflows-approver").fill(e));var b=a("#"+e.id);fillApprovalActions(b,e);fillDefaultAction(b,e,e.user)}l="separator"}n.find(".workflow-action").click(Adhoc.Approvals.showApproval);n.find("form.approval input[type='submit']").click(Adhoc.Approvals.doAction);n.find(".cancel-approval").click(Adhoc.Approvals.hideApproval);n.find(".assign-approval").click(Adhoc.Approvals.assign);n.find(".cancel-dialog").click(Adhoc.doHidePopup);n.find(".usersdropdown").dropDown("Standard");if(!AJS.$.browser.msie){n.find("input.autocomplete-filtered-user,input.assignee-user").click(function(){var i=a(this).parents("form");i.find(".usersdropdown a.aui-dd-trigger").click()})}else{n.find("div.approval.assignees input.assignee-user").click(function(){var i=a(this).parents("form");i.find(".usersdropdown a.aui-dd-trigger").click()})}n.find("input.autocomplete-filtered-user").bind("selected.autocomplete-filtered-user",Adhoc.selectAssignee);n.find("input.assignee-user").keypress(function(i){i.preventDefault()});AWP.autocompleteFilteredUser();if(Adhoc.clickedApprovalId){a("#"+Adhoc.clickedApprovalId+" .approval-header .name a").click();Adhoc.clickedApprovalId=undefined}else{if(!a("#adhocWorkflowsLink").hasClass("approvalworkflow")){if(n.find(".approval-header").length==1&&n.find("a.approve:first").length==1){n.find("a.approve:first").click()}}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/tasks.js' */
Adhoc=Adhoc||{};Adhoc.Tasks=Adhoc.Tasks||{};(function(a){Adhoc.Tasks.clickedTasksId;Adhoc.Tasks.editDialog,Adhoc.Tasks.dialog,Adhoc.Tasks.dialogOptions={width:280,offsetY:17,offsetX:-40,hideDelay:10000};Adhoc.Tasks.editDialogOptions={width:480,height:400,id:"inline-dialog-adhocTasks",closeOnOutsideClick:true};Adhoc.Tasks.hideDialog=function(){if(Adhoc.Tasks.dialog&&Adhoc.Tasks.dialog!=undefined){Adhoc.Tasks.dialog.hide()}if(Adhoc.Tasks.editDialog&&Adhoc.Tasks.editDialog!=undefined){Adhoc.Tasks.editDialog.hide()}return false};Adhoc.Tasks.isInlineDialog=function(){return a("#inline-dialog-adhocTasks").hasClass("aui-inline-dialog")};Adhoc.Tasks.getSelectedText=function(){var b;if(jQuery.browser.msie){b=document.selection.createRange().text}else{b=window.getSelection()}b=""+b;if(b&&b.length>2&&b.indexOf("'")!=0&&b.indexOf('"')!=0&&b.indexOf("|")<0&&b.indexOf('"')<0){b=""+b;return b.split("\n",10)}else{return[]}};Adhoc.Tasks.getNames=function(b){var c=[];b.find("input.taskName:not(.placeholded)").each(function(){var d=a(this).val();if(d.length>0){c.push(d)}});return c};Adhoc.Tasks.doAction=function(){var b=a(this).parents("form");var d=a(this).attr("name");var c=b.find("input[name='id']").val();var e={names:Adhoc.Tasks.getNames(b),assignee:Adhoc.getAssignees(b),note:b.find("textarea:not(.placeholded)").val()};Adhoc.submitProgress(a(this).parents(".adhoc"));a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/tasks/"+AJS.params.pageId+"/"+(c!=undefined&&c>0?c+"/":"")+d,data:JSON.stringify(e),success:function(h,i,g){if(g.status==200){Adhoc.Tasks.tasks=h.tasks;Adhoc.Tasks.updateCount(h.tasks.length);var f;if(Adhoc.Tasks.isInlineDialog()){f=Adhoc.Tasks.dialog.find(".contents")}else{f=a("#inline-dialog-adhocTasks .editor-task-dialog")}Adhoc.Tasks.doDialog(h.tasks,f,true);if(!Adhoc.Tasks.isInlineDialog()){Adhoc.Tasks.editDialog.show()}}else{Adhoc.Tasks.hideDialog()}},error:Adhoc.errorHandler});return false};Adhoc.Tasks.hideTask=function(){a(".adhoc .task").removeClass("active");return false};Adhoc.Tasks.showTask=function(){if(AJS.dropDown.current!=undefined){AJS.dropDown.current.hide()}a("#inline-dialog-adhocTasks form.addtask").removeClass("active");var d=a(this).parents(".task");var c=a(this).attr("name");if(c==undefined||c==""){c=a(this).find("a").attr("name")}var b=d.find("form");d.find(".cancel-task").click();d.addClass("active");b.attr("class","aui").addClass(c);return false};Adhoc.Tasks.updateCount=function(c){a("#adhocTasksLink span, #rte-button-adhoctasks span.trigger-text").html("");var b;if(c==undefined){c=0}if(c==0){b="adhoctasks-tasks-count0"}else{if(c==1){a("#adhocTasksLink").css("display","block");b="adhoctasks-tasks-count1"}else{a("#adhocTasksLink").css("display","block");b="adhoctasks-tasks-count"}}a("#adhocTasksLink span, #rte-button-adhoctasks span.trigger-text").append(AJS.template.load(b).fill({count:c}))};Adhoc.Tasks.toggleAddTask=function(){Adhoc.Tasks.hideTask();a("#inline-dialog-adhocTasks form.addtask").toggleClass("active");a("#taskName0").click().focus();return false};Adhoc.Tasks.assign=function(){var c=a(this);var b=a(this).parents(".task").find("form");b.addClass("assign");b.removeClass("complete");b.removeClass("view");b.removeClass("remove");return false};Adhoc.Tasks.remove=function(){var c=a(this);var b=a(this).parents(".task").find("form");b.addClass("remove");b.removeClass("complete");b.removeClass("view");b.removeClass("assign");return false};Adhoc.Tasks.assignNewTask=function(){var c=a(this);var b=c.parents("form");b.addClass("assign");c.hide();return false};Adhoc.Tasks.initClipboardSelection=function(e,h){var f;if(!e.hasClass("reload")){f=Adhoc.Tasks.getSelectedText()}else{f=[]}Adhoc.selected=f;if(!a("#adhocTasksLink").hasClass("addtasklink")&&(h.length==0||f.length>0)){e.find("a.add-task").click();var d=0;for(var b=0;b<f.length;b++){var c=a.trim(f[b]);if(c.length>0){var g=a("#taskName"+d++);g.addClass("active").click().val(c)}}if(d>1){a("form.addtask").addClass("multiple")}else{a("form.addtask").addClass("single")}}else{a("form.addtask").addClass("single")}};Adhoc.Tasks.doDialog=function(f,c,d){var e=function(k,h,n){h.toggle=n?"even":"";k.find(".tasks").append(AJS.template.load("adhoctasks-task").fill(h));var m=a("#task-"+h.id);try{m.find(".task-caption").append(AJS.template.load("adhoctasks-task-completed").fill(h))}catch(l){alert("Comala Workflows panel out of sync because of CONF-23672. Please restart server")}if(!h.comment||h.comment.length==0){m.find(".task-caption .note").remove()}var o=m.find(".name");if(h.actions&&h.actions.length>0){o.append(AJS.template.load("adhoctasks-task-action-default").fill({hint:h.hint,action:h.actions[0],shortName:h.shortName,name:h.name}))}else{o.append(h.name)}if(h.user){if(Adhoc.Tasks.isInlineDialog()){var g=m.find("ol.assignees.select");Adhoc.addAssignee(g,h.user.name,h.user.fullName,h.user.pictureUrl,"assigned")}else{o.append(AJS.template.load("adhoctasks-task-assignee").fill(h))}}if(h.dueDate){o.append(AJS.template.load("adhoctasks-task-duedate").fill(h))}for(var i=h.actions.length-1;i>=0;i--){m.find(".task-header .workflow-actions").append(AJS.template.load("adhoc-action").fill(h.actions[i]))}};c.empty();if(d){c.addClass("reload")}Adhoc.Tasks.tasks=f;c.append(AJS.template.load("adhoctasks-tasks").fill());for(var b=0;b<f.length;b++){e(c,f[b],b%2==1)}c.find("a.cancel-dialog").click(Adhoc.Tasks.hideDialog);c.find("a.cancel-addtask, a.add-task").click(Adhoc.Tasks.toggleAddTask);c.find("input[type='submit']").click(Adhoc.Tasks.doAction);c.find(".task-header, li.dropdown-item .workflow-action").click(Adhoc.Tasks.showTask);c.find(".cancel-task").click(Adhoc.Tasks.hideTask);c.find(".workflow-actions").dropDown("Standard");Adhoc.Tasks.initClipboardSelection(c,f);c.find(".assign-new-task").click(Adhoc.Tasks.assignNewTask);c.find(".assign").click(Adhoc.Tasks.assign);c.find(".remove").click(Adhoc.Tasks.remove);a.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/tasks/"+AJS.params.pageId+"/users",success:function(h,i,g){Adhoc.setPresetUsers(a(".adhoc .usersdropdown .aui-dropdown"),h.users);if(!AJS.$.browser.msie){c.find("input.autocomplete-user").click(function(){var j=a(this).parents("form");j.find(".usersdropdown a.aui-dd-trigger").click()})}c.find(".usersdropdown").dropDown("Standard")},error:Adhoc.errorHandler});c.find("input.autocomplete-user").bind("selected.autocomplete-user",Adhoc.selectAssignee);AJS.Confluence.Binder.autocompleteUser();if(Adhoc.Tasks.clickedTasksId&&Adhoc.Tasks.clickedTasksId>0){a("#task-"+Adhoc.Tasks.clickedTasksId+" .task-header .name a").click();Adhoc.Tasks.clickedTasksId=0}if(a("#adhocTasksLink").hasClass("addtasklink")){a("#adhocTasksLink").removeClass("addtasklink");c.find("a.add-task").click()}if(a("#taskable").val()=="false"){a("a.add-task").hide()}};Adhoc.Tasks.generateTasksPopup=function(e,b,d){e.addClass("adhoc");e.empty();e.append(AJS.template.load("adhocworkflows-loading").fill());d();var c=Raphael.spinner(e.find(".progress-messages-icon")[0],7,"#666");a.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/tasks/"+AJS.params.pageId,success:function(g,h,f){Adhoc.Tasks.tasks=g.tasks;Adhoc.Tasks.updateCount(g.tasks.length);Adhoc.Tasks.doDialog(Adhoc.Tasks.tasks,e,false)},error:Adhoc.errorHandler})};Adhoc.Tasks.addTaskLink=function(){if(a("#taskable").val()!="false"){a("#adhocTasksLink").css("display","block").addClass("addtasklink").click()}return false};AJS.toInit(function(b){try{Adhoc.Tasks.clickedTasksId=Adhoc.getUrlParams()["task"]}catch(c){}if(b("#editor-container, #rte-toolbar").length==0){Adhoc.Tasks.dialog=AJS.InlineDialog(b("#adhocTasksLink"),"adhocTasks",Adhoc.Tasks.generateTasksPopup,Adhoc.Tasks.dialogOptions);if(b("#adhocTasksLink").length==0){return}if(b("#displayEmptyTaskMenu").length>0){}}else{if(AJS.params.pageId>0){Adhoc.Tasks.editDialog=new AJS.Dialog(Adhoc.Tasks.editDialogOptions);Adhoc.Tasks.editDialog.addPage("editor-task-dialog").addHeader(AJS.params.tasksLabel)}else{b("#rte-button-adhoctasks").hide()}}if(AJS.params.pageId>0){try{b.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/tasks/"+AJS.params.pageId+"/count",success:function(e,f,d){Adhoc.Tasks.updateCount(e);if(Adhoc.Tasks.clickedTasksId&&Adhoc.Tasks.clickedTasksId>0){b("#adhocTasksLink").click()}}})}catch(c){}}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/templates.js' */
var Adhoc=Adhoc||{};Adhoc.Workflow=Adhoc.Workflow||{};(function(a){Adhoc.Workflow.workflowAction=function(){var b=a("#adhocWorkflowsLink");a("#add-menu-link").click();b.css("display","block").css("visibility","inherit").click();return false};Adhoc.Workflow.addApprovalAction=function(){var b=a("#adhocWorkflowsLink");a("#add-menu-link").click();b.css("display","block").css("visibility","inherit").addClass("approvalworkflow").click();return false};Adhoc.Workflow.doAddWorkflow=function(){var c=a(this);var b={workflowId:c.find("select").val(),stateNames:c.find("input.state-names").val()};Adhoc.submitProgress(a(this).parents(".adhoc"));a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/workflow/"+AJS.params.pageId+"/add",data:JSON.stringify(b),success:function(e,f,d){if(d.status==200){a("#addAdhocWorkflow").hide();Adhoc.Workflow.setState(e)}Adhoc.dialog.hide()},error:Adhoc.errorHandler});return false};Adhoc.Workflow.doAddApprovalWorkflow=function(){var c=a(this);var b={workflowId:0};a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/workflow/"+AJS.params.pageId+"/add?default=true",data:JSON.stringify(b),success:function(e,f,d){if(d.status==200){a("#addAdhocWorkflow").hide();a("#addApprovalWorkflow").hide();Adhoc.Workflow.setState(e)}Adhoc.dialog.hide();a("#adhocWorkflowsLink").click()},error:Adhoc.errorHandler});return false};Adhoc.Workflow.doSelectTemplate=function(){var c=a(this).val();var b=a(this).parents("form");if(c==0){b.addClass("adhoc")}else{b.removeClass("adhoc")}};Adhoc.Workflow.doTemplatesDialog=function(b,d,e){d.empty();d.append(AJS.template.load("adhocworkflows-select").fill());d.find(".close-dialog").click(Adhoc.doHidePopup);d.find("select").change(Adhoc.Workflow.doSelectTemplate);if(e.status!=200){return}var c=b.templates;for(i=0;i<c.length;i++){d.find("#select-workflow-templates").append(AJS.template.load("adhocworkflows-select-template").fill(c[i]))}d.find("#select-workflow-templates").append(AJS.template.load("adhocworkflows-adhoc-template").fill());d.find("form").submit(Adhoc.Workflow.doAddWorkflow)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/forms.js' */
var Adhoc=Adhoc||{};Adhoc.Form=Adhoc.Form||{};Adhoc.menuActions=Adhoc.menuActions||[];(function(a){Adhoc.Form.toggleEdit=function(){a("#workflow-form").toggleClass("edit");return false};Adhoc.Form.doSubmitForm=function(){var d={fields:[]};var c=a(this).parents("form").find("table input");c.each(function(){d.fields.push({id:a(this).attr("name"),value:a(this).attr("value")})});var b=a(this).parents("form").find("table select");b.each(function(){d.fields.push({id:a(this).attr("name"),value:a("option:selected",a(this)).text()})});Adhoc.submitProgress(a(this).parents(".adhoc"));a.ajax({type:"POST",cache:false,contentType:"application/json; charset=utf-8",url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/forms/"+AJS.params.pageId+"/submit",data:JSON.stringify(d),success:function(g,h,f){if(f.status==200){var e=Adhoc.state.stateName!=g.stateName;Adhoc.Workflow.setState(g);a("#adhocWorkflowsLink").click()}else{Adhoc.dialog.hide()}},error:Adhoc.errorHandler});return false};Adhoc.Form.doFormDialog=function(g,c){var e=g.inputFields;c.append(AJS.template.load("adhocworkflows-form").fill());var d=c.find(".ahoc-form table");for(i=0;i<e.length;i++){var b=e[i];d.append(AJS.template.load("adhocworkflows-inputfield").fill(b));var f=c.find("#"+b.id);if(b.type=="USER"){f.append(AJS.template.load("adhocworkflows-inputfield-user").fill(b));a.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/forms/user/"+f.find("span").html(),success:function(h,l,k){if(k.status!=200){return}c.find("span[title='"+h.name+"']").html("").append(AJS.template.load("adhocworkflows-inputfield-decorated-user").fill(h))},error:Adhoc.errorHandler})}else{if(b.type=="LIST"){f.append(AJS.template.load("adhocworkflows-inputfield-list").fill(b));for(j=0;j<b.options.length;j++){f.find("select").append(AJS.template.load("adhocworkflows-inputfield-list-option").fill({option:b.options[j],selected:(b.options[j]==b.value?"selected='selected'":"")}))}}else{f.append(AJS.template.load("adhocworkflows-inputfield-text").fill(b))}}}c.find(".edit-form").click(Adhoc.Form.toggleEdit);if(g.initParameters){c.find(".edit-form").click()}c.find("input[type='submit']").click(Adhoc.Form.doSubmitForm);c.find(".cancel-dialog").click(Adhoc.doHidePopup);Adhoc.setPresetUsers(a("#inline-dialog-adhocWorkflowsPopup .usersdropdown .aui-dropdown"),g.involvedUsers);c.find("input.autocomplete-user").click(function(){a(this).parents("td").find(".usersdropdown a.aui-dd-trigger").click()});c.find(".usersdropdown").dropDown("Standard")};Adhoc.Form.showParameters=function(){Adhoc.action.showParameters=true;Adhoc.generateActionDialog(Adhoc.dialog.find("div.contents"),Adhoc.action);return false}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/adhocworkflows/js/adhocworkflows.js' */
var Adhoc=Adhoc||{};Adhoc.Workflow=Adhoc.Workflow||{};Adhoc.viewHistory=false;(function(b){Adhoc.clickedApprovalId=null;Adhoc.dialog=null;Adhoc.dialogOptions={width:280,offsetY:17,offsetX:-40,hideDelay:10000};Adhoc.activityOptions={onHover:true,width:380,offsetY:10,offsetX:-40,hideDelay:500};Adhoc.setPresetUsers=function(e,f){e.empty();for(var d=0;d<f.length;d++){e.append(AJS.template.load("adhocworkflows-user").fill(f[d]))}e.find("a").click(Adhoc.clickAssignee)};Adhoc.updateAssignButton=function(d){var e=d.parents("form").find("input.assign");if(d.find("li").length>0){e.removeAttr("disabled")}else{e.attr("disabled","disabled")}};Adhoc.addAssignee=function(f,g,i,h,j){if(f.find("li[name='"+g+"']").length>0){return}if(f.hasClass("single")){f.find("li").remove()}var e={name:g,fullName:i,pictureUrl:h};f.append(AJS.template.load("adhocworkflows-assignee").fill(e));var d=f.find("li[name='"+e.name+"']");if(j!==undefined){d.addClass(j)}d.find(".remove-assignee").click(Adhoc.removeAssignee);Adhoc.updateAssignButton(f)};Adhoc.removeAssignee=function(){var e=b(this).parents("ol");var d=b(this).parents("li");d.remove();Adhoc.updateAssignButton(e);return false};Adhoc.clickAssignee=function(){var e=b(this).parents("form");var f=b(this).attr("name");var d=e.find("ol.assignees.select");b.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/workflow/userdetails?username="+f,success:function(h,j,i){if(h!==undefined){var g=h;Adhoc.addAssignee(d,g.name,g.fullName,g.pictureUrl)}},error:function(){}});AJS.dropDown.current.hide();return false};Adhoc.selectAssignee=function(j,h){try{var g=b(this).parents("form");var f=g.find("ol.assignees.select");var d=h.content;Adhoc.addAssignee(f,d.username,d.title,d.thumbnailLink.href);g.find("input.autocomplete-user").val("")}catch(i){}return false};Adhoc.getAssignees=function(e){var d=e.find("ol.assignees.select li, ol.assignees.assignee li");var g="";var f="";d.each(function(){f=f+g+jQuery(this).attr("name");g=","});return f};Adhoc.errorHandler=function(e,d){console.error("Error, check Adhoc.errorData and Adhoc.errorStatus");Adhoc.errorData=e;Adhoc.errorStatus=d};Adhoc.doHidePopup=function(){Adhoc.dialog.hide();return false};Adhoc.generateActionDialog=function(d,e){Adhoc.action=e;d.empty();if(e.hasParameters){d.addClass("parameters")}if(e.showParameters){Adhoc.Form.doFormDialog(e,d)}else{if(e.approvals){Adhoc.Approvals.doDialog(e,d)}else{if(e.states){Adhoc.Workflow.doStateDialog(e,d)}else{b("#adhocWorkflowsLink").addClass("published").unbind("click").click(function(){return false});Adhoc.doHidePopup()}}}d.find("a.parameters").click(Adhoc.Form.showParameters)};Adhoc.getUrlParams=function c(){var e={};var d=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(f,g,h){e[g]=h});return e};Adhoc.submitProgress=function(e){e.find("input, select, a").attr("disabled","disabled");var d=Raphael.spinner(e.find(".progress-messages-icon")[0],7,"#666")};var a=function(g,d,f){g.addClass("adhoc");g.empty();g.append(AJS.template.load("adhocworkflows-loading").fill());f();var e=Raphael.spinner(g.find(".progress-messages-icon")[0],7,"#666");var h=b("#adhocWorkflowsLink");if(h.hasClass("workflow-state")){b.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/workflow/"+AJS.params.pageId+"/actions"+(AJS.params.workflowAdmin?"?admin=true":""),success:function(j,k,i){Adhoc.generateActionDialog(g,j)},error:Adhoc.errorHandler})}else{if(h.hasClass("approvalworkflow")){Adhoc.Workflow.doAddApprovalWorkflow()}else{b.ajax({type:"GET",cache:false,url:AJS.Confluence.getContextPath()+"/rest/adhocworkflows/latest/workflow/"+AJS.params.pageId+"/templates",success:function(i,k,j){Adhoc.Workflow.doTemplatesDialog(i,g,j)},error:Adhoc.errorHandler})}}};AJS.toInit(function(f){console.log("initializing Comala Workflows...");f("#labelsString").focus(Adhoc.Workflow.refreshState);if(AJS.params.publishedView){f("#adhocWorkflowsLink").addClass("published").click(function(){return false})}else{if(AJS.params.anonymous){f("#adhocWorkflowsLink").click(function(){return false})}else{Adhoc.dialog=AJS.InlineDialog(f("#adhocWorkflowsLink"),"adhocWorkflowsPopup",a,Adhoc.dialogOptions)}}if(f("#workflow-page-status").length===0){return}var d={stateName:AJS.params.stateName,stateDescription:AJS.params.stateDescription,finalState:AJS.params.finalState,hasFinalState:AJS.params.hasFinalState,publishedView:AJS.params.publishedView,alternateViewStateName:AJS.params.alternateViewStateName,alternateViewUrl:AJS.params.alternateViewUrl,taskable:AJS.params.taskable,hoverDescription:AJS.params.hoverDescription};Adhoc.publishedView=d.publishedView;if(Adhoc.publishedView){f("#viewPageLink").hide();f("#viewPageLink").parents("li").hide()}Adhoc.Workflow.refreshState();try{Adhoc.clickedApprovalId=Adhoc.getUrlParams().approval}catch(g){}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/com/comalatech/workflow/common/soy/progresstracker.soy' */
// This file was automatically generated from progresstracker.soy.
// Please don't edit this file by hand.

if (typeof AWP == 'undefined') { var AWP = {}; }
if (typeof AWP.Templates == 'undefined') { AWP.Templates = {}; }


AWP.Templates.progresstracker = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="', soy.$$escapeHtml(opt_data.el), '"><ol class="aui-progress-tracker">');
  var stateList6 = opt_data.states;
  var stateListLen6 = stateList6.length;
  for (var stateIndex6 = 0; stateIndex6 < stateListLen6; stateIndex6++) {
    var stateData6 = stateList6[stateIndex6];
    output.append('<li ', (stateData6 == '...') ? 'title="' + soy.$$escapeHtml(opt_data.hintHiddenStates) + '"' : '', 'class="aui-progress-tracker-step ', (stateData6 == opt_data.current) ? 'aui-progress-tracker-step-current' : '', ' ', (stateData6 == '...') ? (stateIndex6 == 0) ? 'awp-progress-tracker-step-first' : 'awp-progress-tracker-step-short' : '', '"><span class="', (stateData6 == '...') ? 'awp-progress-tracker-transition' : '', '">', soy.$$escapeHtml(stateData6), '</span></li>');
  }
  output.append('</ol>', (opt_data.stateDescription && opt_data.current != opt_data.stateDescription) ? '<div class="awp-statedesc">' + soy.$$escapeHtml(opt_data.stateDescription) + '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.comalatech.workflow:adhocworkflows-resource', location = 'templates/com/comalatech/workflow/common/js/view/progresstracker.js' */
var AWP=AWP||{};AWP.ProgressTracker=(function(b,g,a){var f=5,h=false,e="",d="awp-progress-tracker",c=AWP.Templates.progresstracker;initialize=function(){filterStates();if(!a){a=""}};checkStates=function(){var l=false;if(arguments.length>0){g=arguments[0]}var k=b.indexOf(g);if(k>=0){l=true}return l};filterStates=function(){var k=b.length;this.hintHiddenStates="";if(k>f){var n=k-f;var l=0,m=false;while(l<k&&!m){if(b[l]==g){m=true}l++}l--;if(l==0){for(j=0;j<f-2;j++){b[j]=b[l+j]}b[j]="...";b[j+1]=b[k-1];b.splice(f);hiddenStates=k-(l+(f-1));e="+"+hiddenStates+" states"}else{if(l<n){b[0]="...";for(j=1;j<f-2;j++){b[j]=b[l+j]}b[j]="...";b[j+1]=b[k-1];b.splice(f+1);hiddenStates=k-(l+(f-1));e="+"+hiddenStates+" states"}else{b.splice(0,n);b.unshift("...")}}}};render=function(){var i="";if(this.checkStates()){i=c({el:d,states:b,current:g,hintHiddenStates:e,stateDescription:a});h=true}return i};isRendered=function(){return h};$el=function(){return AJS.$("."+d)};initialize();return{$el:$el,checkStates:checkStates,isRendered:isRendered,render:render}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/common-dialogs-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-docbook'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-docbook'; // Will be filled in by Web Resource Transformer;

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-common-dialogs', ['ngResource', 'ngSanitize', 'auiNg']);

    ng.module(shortPluginKey + '-common-dialogs')
        .controller('MessageDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.exceptionExpanded = false;

                $scope.getTitle = function() {
                    if ($scope.message && $scope.message.severity) {
                        if ($scope.message.severity == 'Info' ) {
                            return "Info";
                        } else if ($scope.message.severity == 'Warning' ) {
                            return "Warning";
                        } else if ($scope.message.severity == 'Error' ) {
                            return "Error";
                        }                     
                    } else if ($scope.message.title) {
                        return $scope.message.title;
                    }
                    return "Error";
                };

                $scope.getMessage = function() {
                    if ($scope.message && $scope.message.message) {
                        return $scope.message.message;
                    }
                    return "Error"; 
                };

                $scope.isShowSupportInformation = function() {
                    return ($scope.message && $scope.message.stackTrace);
                };

                $scope.toggleExceptionDisplay = function() {
                    $scope.exceptionExpanded = !$scope.exceptionExpanded;
                };

                $scope.close = function() {
                    $scope.auiDialog.close(true);
                };
            }
        ])
        .provider('CommonDialog', function () {
            this.$get = [function () {
                var partial = auiNg.getPartial(pluginKey, 'common-dialogs', 'message-dialog');
                var defaultOpts = {
                    className : shortPluginKey + '-common-message-dialog',
                    closeOnOutsideClick : false,
                    closeOnEsc : true,
                    width : 760
                };

                return {
                    openMessageDialog: function (response) {
                        var opts = ng.extend({
                            message : response.data,
                            height : (!response.data.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    },
                    openTaskStatusMessageDialog: function (taskStatus) {
                        var opts = ng.extend({
                            message : {
                                message: taskStatus.message,
                                stackTrace: taskStatus.stackTrace,
                                severity: (taskStatus.status == 0) ? 'Info' : 'Error'
                            },
                            height : (!taskStatus.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    }
                };
            }];
        });

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/message-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-docbook'] =  auiNg._templates['com.k15t.scroll.scroll-docbook'] || {};
var moduleTemplates = pluginTemplates['common-dialogs'] = pluginTemplates['common-dialogs'] || {};
moduleTemplates['message-dialog.js'] = '<div aui-dialog-page class="message-page" header="{{getTitle()}}" ng-controller="MessageDialogController">    <div aui-dialog-panel class="message-panel">        <div class="aui-message error">            <p ng-bind-html="getMessage()"></p>            <p ng-hide="isShowSupportInformation()">If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a>.</p>        </div>        <div class="support-info-box" ng-show="isShowSupportInformation()">            <p>                <strong>Getting Support</strong>            </p>            <p>                If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a> and provide the following information.                <br/>                <a href="" ng-click="toggleExceptionDisplay()">                    <span ng-hide="exceptionExpanded">Show error details &raquo;</span>                    <span ng-show="exceptionExpanded">Hide error details &laquo;</span>                </a>            </p>            <pre class="stacktrace-container" ng-show="exceptionExpanded">{{message.stackTrace}}</pre>        </div>    </div>    <div aui-dialog-link ng-click="close()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-dialog-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-docbook'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-docbook'; // Will be filled in by Web Resource Transformer;
    var exporterKey = pluginKey + ':' + shortPluginKey.substring(7) + '-exporter';
    var launcherSelector = '#com-k15t-confluence-' + shortPluginKey + '-launcher, .' + shortPluginKey + '-launcher';

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-export-dialog', ['ngResource', 'ngSanitize', 'auiNg', shortPluginKey + '-common-dialogs']);

    var getDialogClass = function(classname) {
        return classname + ' ' + ((AJS.params.buildNumber >= 4104) ? 'confluence-5-dialog' : 'confluence-4-dialog')  
    };

    var openExportDialog = function(launcher) {
        var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-dialog');
        var opts = {
            className: getDialogClass(shortPluginKey + '-export-dialog'),
            closeOnOutsideClick: false,
            closeOnEsc: true
        };

        var directExportSchemeIdAttr = AJS.$(launcher).closest("." + shortPluginKey + "-launcher").attr("data-export-scheme-id");
        if (directExportSchemeIdAttr) {
            opts.exportSchemeId = directExportSchemeIdAttr;
            opts.directExportMode = true;
        }

        auiNg.createDialogApp(shortPluginKey + '-export-dialog', partial, opts);
    };

    AJS.toInit(function($) {
        AJS.$(launcherSelector).click(function(e) {
            openExportDialog(e.target);
            e.preventDefault();
        });
    });

    var isBundledExportScheme = function(exportSchemeId) {
        return (exportSchemeId.indexOf('bundled_') == 0);
    };

    var hasScrollVersionsCoordinates = function() {
        return window.Scroll
                && Scroll.Versions
                && Scroll.Versions.Context
                && Scroll.Versions.Context.modules
                && Scroll.Versions.Context.user
                && (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace);
    };


    ng.module(shortPluginKey + '-export-dialog')
        .controller('ExportDialogController', [ '$scope', '$http', '$q', 'AdvancedExportDialog', 'AuiDialog',
            function($scope, $http, $q, AdvancedExportDialog, AuiDialog) {
                $scope.dialogData = AdvancedExportDialog.get(function() {
                    $scope.dialogDataLoaded = true;
                });

                $scope.switchToSimpleModeCallback = ng.noop;
                $scope.switchToAdvancedModeCallback = ng.noop;

                $scope.exportSchemeModified = false;

                $scope.exportSchemeValidators = [];

                $scope.isExportSchemeValid = function(exportScheme) {
                    for (var i = 0; i < $scope.exportSchemeValidators.length; ++i ){
                        var validate = $scope.exportSchemeValidators[i];
                        if (!validate(exportScheme)) {
                            return false;
                        }
                    }
                    return true;
                };

                $scope.exportMode = 'simple';

                $scope.setSimpleExportMode = function() {
                    $scope.exportMode = 'simple';
                };
                $scope.setAdvancedExportMode = function() {
                    $scope.exportMode = 'advanced';
                };
                $scope.isSimpleExportMode = function() {
                    return $scope.exportMode == 'simple';
                };
                $scope.isAdvancedExportMode = function() {
                    return $scope.exportMode == 'advanced';
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.exportScheme;
                    $scope.auiDialog.gotoPage(0);
                    $scope.switchToSimpleModeCallback();
                };

                $scope.switchToAdvancedMode = function(update) {
                    $scope.auiDialog.gotoPage(1);
                    $scope.auiDialog.gotoPanel(0);
                    if (update) {
                        $scope.switchToAdvancedModeCallback();
                    }
                };

                $scope.openExportProgressDialog = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-progress-dialog');
                    var progressDialog = AuiDialog.create(partial, {className: shortPluginKey + '-export-progress-dialog', closeOnOutsideClick: false, closeOnEsc: false, height: 200, width: 680});
                    progressDialog.open({exportTaskId: $scope.exportTaskId, exportFinishedCallback: function(taskStatus) {
                        $scope.switchToResultPage(taskStatus);
                    }});
                };

                $scope.switchToResultPage = function(taskStatus) {
                    $scope.taskStatus = taskStatus;
                    $scope.auiDialog.gotoPage(2);
                    $scope.exportFinishedCallback();
                };

                $scope.appendScrollVersionsCoordinates = function(params) {
                    if (hasScrollVersionsCoordinates() && $scope.dialogData.compatibleScrollVersionsAvailable) {
                        if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                            params.versionId = Scroll.Versions.Context.user.workingVersion.versionId;
                        }
                        if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                            params.variantId = Scroll.Versions.Context.user.currentVariant.id;
                        }
                        if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                            params.languageKey = Scroll.Versions.Context.user.currentLanguage.key;
                        }
                    }
                };
            } ])
        .controller('SimpleModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.selectExportScheme = function(exportScheme) {
                    $scope.selectedExportScheme = exportScheme;
                    $scope.$parent.exportSchemeId = exportScheme.id;
                    $scope.$parent.exportSchemeName = exportScheme.name;
                };

                $scope.updateExportSchemeList = function(onUpdatedHandler) {                    
                    $scope.exportSchemes = ExportScheme.query({spaceKey: AJS.params.spaceKey}, function() {
                        var selectedExportSchemeId = $scope.$parent.exportSchemeId;
                        if (!selectedExportSchemeId && ($scope.exportSchemes.length > 0)) {
                            selectedExportSchemeId = $scope.exportSchemes[0].id;
                        }
                        _.each($scope.exportSchemes, function(exportScheme){
                            if (exportScheme.id == selectedExportSchemeId) {
                                $scope.selectExportScheme(exportScheme);
                            }
                        });
                        if (!$scope.selectedExportScheme && ($scope.exportSchemes.length > 0)) {
                            $scope.selectExportScheme($scope.exportSchemes[0]);
                        }
                        if (onUpdatedHandler) {
                            onUpdatedHandler();
                        }
                    });
                };
                $scope.$parent.switchToSimpleModeCallback = $scope.updateExportSchemeList;

                $scope.getExportSchemeClass = function(exportScheme) {
                    var classes = ($scope.selectedExportScheme == exportScheme) ? "selected" : "";
                    classes = classes + (isBundledExportScheme(exportScheme.id) ? " bundled" : "");
                    return classes + ((exportScheme.id.indexOf('-LASTUSED', exportScheme.id.length - 9) !== -1) ? " last-used" : "");
                };

                $scope.switchToAdvancedMode = function() {
                    $scope.$parent.switchToAdvancedMode(true);
                };

                $scope.selectAndStartExport = function(exportScheme) {
                    $scope.selectExportScheme(exportScheme);
                    $scope.startExport();
                };

                $scope.canStartExport = function() {
                    return ($scope.selectedExportScheme != undefined);
                };

                $scope.startExport = function() {
                    if (!$scope.selectedExportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = false;

                    ExportScheme.get({id: $scope.selectedExportScheme.id}, function(loadedExportScheme) {
                        $scope.$parent.exportScheme = loadedExportScheme;
                        if ($scope.$parent.isExportSchemeValid(loadedExportScheme)) {
                            var params = {
                                exportSchemeId: $scope.selectedExportScheme.id
                            };
                            $scope.$parent.appendScrollVersionsCoordinates(params);

                            Export.startWithExistingExportScheme(params, function(task) {
                                $scope.$parent.exportTaskId = task.id;
                                $scope.$parent.setSimpleExportMode();
                                $scope.$parent.openExportProgressDialog();
                            }, function(response) {
                                CommonDialog.openMessageDialog(response);
                            });
                        } else {
                            $scope.switchToAdvancedMode();
                        }
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

                $scope.hasLicenseMessage = function() {
                    return !!$scope.$parent.dialogData.licenseMessage;
                };

                $scope.hasScrollVersionsCoordinates = function() {
                    return hasScrollVersionsCoordinates();
                };
                
                $scope.isCompatibleScrollVersionsAvailable = function() {
                    return $scope.$parent.dialogData.compatibleScrollVersionsAvailable;
                };

                $scope.getScrollVersionsMessage = function() {
                    if (hasScrollVersionsCoordinates()) {
                        if ($scope.isCompatibleScrollVersionsAvailable()) {
                            var modules = [];
                            if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                                modules.push(AJS.format("version \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.workingVersion.name));
                            }
                            if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace && (Scroll.Versions.Context.user.currentVariant.id != 'all')) {
                                modules.push(AJS.format("variant \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentVariant.name));
                            }
                            if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                                modules.push(AJS.format("language \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentLanguage.displayName));
                            }

                            var msg = "You will be exporting" + " ";
                            for (var i = 0; i < modules.length; i++) {
                                if (i > 0) {
                                    msg = msg + ", ";
                                }
                                msg = msg + modules[i];
                            }
                            msg = msg + ".";
                            return msg;
                        } else {
                            return "The installed version of Scroll Versions is not compatible with Scroll DocBook Exporter. Please update to the latest version.";    
                        }
                    } else {
                        return '';
                    }
                };
                
                $scope.getScrollVersionsMessageClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "info" : "warning";
                };

                $scope.getScrollVersionsMessageIconClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "icon-info" : "icon-warning";
                };

                var onUpdatedHandler = ($scope.$parent.directExportMode) ? $scope.startExport : ng.noop;
                $scope.updateExportSchemeList(onUpdatedHandler);
            } ])
        .controller('AdvancedModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.init = function() {
                    $scope.dialogData = $scope.$parent.dialogData;
                    if (!$scope.$parent.exportSchemeId) {
                        $scope.$parent.exportSchemeId = 'INITIAL';
                        $scope.$parent.exportSchemeName = 'INITIAL';
                    }
                    if (!$scope.$parent.exportScheme) {
                        ExportScheme.get({id: $scope.$parent.exportSchemeId}, function(loadedExportScheme) {
                            $scope.$parent.exportScheme = loadedExportScheme;
                        });
                    }
                    $scope.$parent.exportScheme = $scope.exportScheme;
                    $scope.originalExportScheme = ng.copy($scope.exportScheme);
                };

                $scope.$parent.switchToAdvancedModeCallback = $scope.init;

                $scope.getPageSelectionStrategyLabelStyle = function(pageSelectionStrategy) {
                    return pageSelectionStrategy.enabled ? {} : {color: 'silver'};
                };

                $scope.getI18nTemplateLocation = function(location) {
                    if (location == 'space') {
                        return "Space Templates";
                    } else {
                        return "Global Templates";
                    }
                };

                $scope.isTemplateSelected = function(exportScheme) {
                    exportScheme = exportScheme || $scope.exportScheme; 
                    if (exportScheme && $scope.$parent.dialogData && $scope.$parent.dialogData.templates) {
                        var templateId = exportScheme.exporter.templateId;
                        if (templateId) {
                            for (var i = 0; i < $scope.$parent.dialogData.templates.length; i++) {
                                if (templateId == $scope.$parent.dialogData.templates[i].id) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    }
                    return true;
                };
                $scope.$parent.exportSchemeValidators.push($scope.isTemplateSelected);

                $scope.canStartExport = function() {
                    return $scope.$parent.isExportSchemeValid($scope.$parent.exportScheme);
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.originalExportScheme;
                    $scope.$parent.switchToSimpleMode();
                };

                var isExportSchemeModified = function() {
                    var before = ng.toJson($scope.originalExportScheme);
                    var after = ng.toJson($scope.$parent.exportScheme);
                    return (before != after);
                };

                $scope.startExport = function() {
                    if (!$scope.exportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = isExportSchemeModified();

                    var params = {
                        rootPageId: AJS.params.pageId,
                        exportScheme: $scope.exportScheme
                    };
                    $scope.$parent.appendScrollVersionsCoordinates(params);

                    Export.startWithNewExportScheme(params, function(task) {
                        $scope.$parent.exportTaskId = task.id;
                        $scope.$parent.setAdvancedExportMode();
                        $scope.$parent.openExportProgressDialog();
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

            } ])
        .controller('ExportProgressDialogController', [ '$scope', '$http', '$timeout', '$q', 'TaskStatus', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $timeout, $q, TaskStatus, AuiDialog, CommonDialog) {
                var statusPoller = undefined;

                $scope.exportTaskId = $scope.$parent.exportTaskId;
                var exportFinishedCallback = $scope.$parent.exportFinishedCallback;

                (function pollTaskStatus() {
                    TaskStatus.get({id: $scope.exportTaskId}, function(taskStatus) {
                        $scope.taskStatus = taskStatus;
                        if (taskStatus.status == -2) { // System or license heck failed, see constants in TaskStatus interface.
                            $scope.cancelAndClose();
                            CommonDialog.openTaskStatusMessageDialog(taskStatus);
                        } else {
                            if (taskStatus.finished) {
                                $scope.auiDialog.close();
                                exportFinishedCallback(taskStatus);
                            } else {
                                statusPoller = $timeout(pollTaskStatus, 500);
                            }
                        }
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                })();

                $scope.cancelAndClose = function() {
                    if (statusPoller) {
                        $timeout.cancel(statusPoller);
                    }
                    TaskStatus.remove({id: $scope.$parent.exportTaskId});
                    $scope.auiDialog.close();
                };
            } ])
        .controller('ExportResultController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.getDownloadUrl = function() {
                    if (!$scope.$parent.taskStatus || !$scope.$parent.taskStatus.filename) {
                        return '';
                    }
                    return AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/' + $scope.$parent.exportTaskId + '/' + encodeURIComponent($scope.$parent.taskStatus.filename) || '';
                };

                $scope.$parent.exportFinishedCallback = function() {
                    if ($scope.$parent.taskStatus.status == 0) {
                        // initiate download only if we are not on MSIE (which displays a "block" message)
                        if(!AJS.$.browser.msie) {
                            var downloadUrl = $scope.getDownloadUrl();
                            window.setTimeout(function() {
                                window.location.href = downloadUrl;
                            }, 500);
                        }

                        var lastUsedExportScheme = ng.copy($scope.$parent.exportScheme);
                        lastUsedExportScheme.id = AJS.params.spaceKey + '-LASTUSED';
                        lastUsedExportScheme.name = "My last export settings";
                        lastUsedExportScheme.description = AJS.format("Last used on {1} in space \'\'{0}\'\'.", AJS.params.spaceName, new Date().toLocaleString());
                        ExportScheme.save(lastUsedExportScheme);
                    }
                };

                $scope.isSuccess = function() {
                    return ($scope.$parent.taskStatus && $scope.$parent.taskStatus.status >= 0);
                };

                // http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/
                var number_format = function(number, decimals, dec_point, thousands_sep) {        
                    var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;
                    var d = dec_point == undefined ? "," : dec_point;
                    var t = thousands_sep == undefined ? "." : thousands_sep, s = n < 0 ? "-" : "";
                    var i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "";
                    var j = i.length;
                    j = (j > 3) ? j % 3 : 0;
                    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
                };

                // http://snipplr.com/view/5949/
                $scope.formatFileSize = function() {
                    if (!$scope.taskStatus || !$scope.taskStatus.fileSize) {
                        return '';
                    }
                    var filesize = $scope.taskStatus.fileSize;
                    if (filesize >= 1073741824) {
                        return number_format(filesize / 1073741824, 2, '.', '') + ' GB';
                    } else {
                        if (filesize >= 1048576) {
                            return number_format(filesize / 1048576, 2, '.', '') + ' MB';
                        } else {
                            if (filesize >= 1024) {
                                return number_format(filesize / 1024, 0) + ' KB';
                            } else {
                                return number_format(filesize, 0) + ' bytes';
                            }
                        }
                    }
                    return filesize;
                };

                $scope.canAdministerSpace = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.isGlobalAdmin = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator;
                };

                var isSpaceExportScheme = function(exportScheme) {
                    return exportScheme.id.indexOf('-') > 0;
                };

                $scope.isDisplayUpdateAction = function() {
                    return $scope.$parent.isAdvancedExportMode()
                            && ($scope.$parent.exportSchemeModified)
                            && ($scope.$parent.dialogData.isGlobalAdministrator
                                    || ($scope.$parent.dialogData.isSpaceAdministrator && isSpaceExportScheme($scope.$parent.exportScheme)));
                };

                $scope.isDisplaySaveAsAction = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.updateCurrentExportScheme = function() {
                    if (!isBundledExportScheme($scope.$parent.exportScheme.id) && ($scope.$parent.exportScheme.id != 'INITIAL')) {
                        ExportScheme.save($scope.$parent.exportScheme, function() {
                            $scope.updateSucceededTrigger = new Date();
                            $scope.lastSavedExportSchemeId = $scope.exportScheme.id;
                        }, function(response) {
                            CommonDialog.openMessageDialog(response);
                        });                        
                    } else {
                        CommonDialog.openMessageDialog({
                            data: {
                                title: "Were sorry ...",
                                message: "You tried to update a bundled system export scheme, which is not supported. Please save your settings as new export scheme."
                            }
                        });
                    }
                };

                $scope.saveAsNewExportScheme = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'save-export-scheme-dialog');
                    var saveAsDialog = AuiDialog.create(partial, {className: shortPluginKey + '-save-export-scheme-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 300, width: 560});
                    saveAsDialog.open({
                        exportScheme: ng.copy($scope.$parent.exportScheme),
                        isSpaceAdmin: $scope.$parent.dialogData.isSpaceAdministrator,
                        isGlobalAdmin: $scope.$parent.dialogData.isGlobalAdministrator
                    }).then(function(context) {
                        $scope.updateSucceededTrigger = new Date();
                        $scope.lastSavedExportSchemeId = context.exportSchemeId;
                    }, ng.noop);
                };

                $scope.showRestUrlDialog = function() {
                    var exportSchemeId = $scope.lastSavedExportSchemeId || $scope.$parent.exportScheme.id;
                    var isExportSchemeModified = ($scope.lastSavedExportSchemeId) ? false : $scope.$parent.exportSchemeModified;
                    var compatibleScrollVersionsAvailable = $scope.$parent.dialogData.compatibleScrollVersionsAvailable;

                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'rest-url-dialog');
                    var restUrlDialog = AuiDialog.create(partial, {className: shortPluginKey + '-rest-url-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 250, width: 560});
                    restUrlDialog.open({exportSchemeId : exportSchemeId, isExportSchemeModified: isExportSchemeModified, isCompatibleScrollVersionsAvailable: compatibleScrollVersionsAvailable});
                };

                $scope.openSpaceExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/spaces/' + shortPluginKey + '/export-schemes.action?key=' + AJS.params.spaceKey, '_blank');
                };

                $scope.openGlobalExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/admin/' + shortPluginKey + '/export-schemes.action', '_blank');
                };

                $scope.goBack = function() {
                    if ($scope.$parent.isSimpleExportMode()) {
                        $scope.$parent.switchToSimpleMode();
                    } else if ($scope.$parent.isAdvancedExportMode()) {
                        $scope.$parent.switchToAdvancedMode(false);
                    } else {
                        alert('Unknown export mode. Please close and re-open the dialog.');
                    }
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('SaveExportSchemeDialogController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.saveLocation = 'space';

                $scope.canSubmit = function() {
                    return $scope.exportScheme && $scope.exportScheme.name && ($scope.exportScheme.name.length > 0);
                };

                $scope.saveExportScheme = function() {
                    if ($scope.exportScheme.id) {
                        delete $scope.exportScheme.id;
                    }

                    var params = {};
                    if ($scope.saveLocation == 'space') {
                        params.spaceKey = AJS.params.spaceKey;
                    }

                    var savedExportScheme = ExportScheme.create(params, $scope.exportScheme, function() {
                        $scope.auiDialog.close(true, {exportSchemeId : savedExportScheme.id});
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('RestUrlDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.isExportSchemeModified = $scope.$parent.isExportSchemeModified;

                $scope.getSyncRestUrl = function() {
                    var url = AJS.format('{0}/rest/{1}/1.0/sync-export?exportSchemeId={2}&rootPageId={3}', AJS.params.baseUrl || AJS.$('meta#confluence-base-url').attr('content'), shortPluginKey, $scope.$parent.exportSchemeId, AJS.params.pageId);
                    if (hasScrollVersionsCoordinates() && $scope.$parent.isCompatibleScrollVersionsAvailable) {
                        var userCtx = Scroll.Versions.Context.user;
                        if (userCtx.workingVersion && userCtx.workingVersion.versionId) {
                            url = url + '&versionId=' + userCtx.workingVersion.versionId;
                        }
                        if (userCtx.currentVariant && userCtx.currentVariant.id) {
                            url = url + '&variantId=' + userCtx.currentVariant.id;
                        }
                        if (userCtx.currentLanguage && userCtx.currentLanguage.key) {
                            url = url + '&languageKey=' + userCtx.currentLanguage.key;
                        }
                    }
                    return url;
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .factory('AdvancedExportDialog', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-dialog', {
                    spaceKey: AJS.params.spaceKey,
                    pageId: AJS.params.pageId,
                    exporterKey: exporterKey,
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ExportScheme', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-scheme/:id/', {
                    includeGlobal: true,
                    exporterId: exporterKey,
                    id: '@id',
                    'ie8AntiCache': + (new Date())
                }, {
                    'create':   {method: 'POST'},
                    'save':   {method: 'PUT'}
                });
            } ])
        .factory('Export', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/', {
                    exportSchemeId: 'exportSchemeId',
                    rootPageId: AJS.params.pageId,
                    'ie8AntiCache': + (new Date())
                }, {
                    'startWithExistingExportScheme': {method: 'GET'},
                    'startWithNewExportScheme': {method: 'PUT'}
                });
            } ])
        .factory('TaskStatus', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/async-tasks/:id/', {
                    id: 'id',
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ScrollVersionsPageTree', [ '$resource',
             function($resource) {
                 return $resource(AJS.params.contextPath + '/rest/scroll-versions/1.0/export-pagetree/', {
                     'ie8AntiCache': + (new Date())
                 });
             }
         ]);

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-progress-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-docbook'] =  auiNg._templates['com.k15t.scroll.scroll-docbook'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-progress-dialog.js'] = '<div aui-dialog-page class="export-progress-page" header="Export in Progress" ng-controller="ExportProgressDialogController">    <div aui-dialog-panel header="Export in Progress" class="export-progress-panel">        <form id="export-progress-form" class="aui">            <div style="height: 20px; padding-top: 15px;">                <span class="current-status-message">{{taskStatus.message}}</span>                <span class="current-step-indicator">{{taskStatus.done}} / {{taskStatus.total}}</span>            </div>            <div class="progress-container"><div class="progress-indicator" style="width: {{taskStatus.progress}}%;">&#8203;</div></div>        </form>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/save-export-scheme-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-docbook'] =  auiNg._templates['com.k15t.scroll.scroll-docbook'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['save-export-scheme-dialog.js'] = '<div aui-dialog-page class="save-export-scheme-page" header="Save new Export Scheme" ng-controller="SaveExportSchemeDialogController">    <div aui-dialog-panel class="save-export-scheme-panel">        <form id="save-export-scheme-form" class="aui" style="padding-top: 10px;">            <fieldset class="group">                <legend><span>Save</span></legend>                <div class="radio">                    <input ng-model="saveLocation" value="space" class="radio" type="radio" id="option-spaced" name="save-location" />                    <label for="option-spaced">in this space</label>                </div>                <div class="radio">                    <input ng-model="saveLocation" ng-disabled="!isGlobalAdmin" value="global" class="radio" type="radio" id="option-globally" name="save-location" />                    <label for="option-globally">globally</label>                </div>            </fieldset>            <div class="field-group">                <label for="export-scheme-name">Name</label>                <input ng-model="exportScheme.name" id="export-scheme-name" class="text" style="width: 300px; max-width: 300px;" />            </div>            <div class="field-group">                <label for="export-scheme-desc">Description</label>                <input ng-model="exportScheme.description" id="export-scheme-desc" class="text" style="width: 300px; max-width: 300px;" />            </div>        </form>    </div>    <div class="scroll-save-button" aui-dialog-button ng-click="saveExportScheme()" aui-disabled="!canSubmit()">Save</div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/rest-url-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-docbook'] =  auiNg._templates['com.k15t.scroll.scroll-docbook'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['rest-url-dialog.js'] = '<div aui-dialog-page class="rest-url-page" header="REST URL" ng-controller="RestUrlDialogController">    <div aui-dialog-panel class="rest-url-panel">        <div ng-show="!isExportSchemeModified">            <p>This URL can be used for automated exports of this page with the saved settings:</p>            <p><input class="rest-url" readonly="readonly" onclick="this.select();" style="width: 530px;" value="{{getSyncRestUrl()}}"></p>            <p>For more information please refer to the <a target="_blank" href="http://www.k15t.com/display/DBK/Creating+an+Export+using+the+REST+API">documentation</a>.</p>        </div>        <div ng-show="isExportSchemeModified">            <p>You need to save the export scheme before it may be used for REST exports.</p>        </div>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-docbook:export-dialog-resources', location = '/com/k15t/scroll/docbook/ui/export-dialog/export-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-docbook'] =  auiNg._templates['com.k15t.scroll.scroll-docbook'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-dialog.js'] = '<div ng-controller="ExportDialogController">    <div aui-dialog-page class="simple-mode-page" header="Export to DocBook" ng-controller="SimpleModeController">        <div aui-dialog-panel header="Export Schemes" class="export-schemes-panel">            <div ng-show="hasLicenseMessage() || (hasScrollVersionsCoordinates() && $parent.dialogDataLoaded)" class="dialog-messages">                <div ng-show="hasLicenseMessage()" class="license-message aui-message warning shadowed">                    <p class="title">                        <span class="aui-icon icon-warning"></span>                        <strong>Warning</strong>                    </p>                    <p ng-bind-html="$parent.dialogData.licenseMessage"></p>                </div>                <div ng-show="hasScrollVersionsCoordinates() && $parent.dialogDataLoaded" class="scroll-versions-message aui-message shadowed" ng-class="getScrollVersionsMessageClass()">                    <p><span class="aui-icon" ng-class="getScrollVersionsMessageIconClass()"></span><span ng-bind-html="getScrollVersionsMessage()"></span></p>                </div>            </div>            <form id="export-schemes-form" class="aui">                <ol class="export-schemes">                    <li ng-repeat="exportScheme in exportSchemes" ng-click="selectExportScheme(exportScheme)"                         ng-class="getExportSchemeClass(exportScheme)"                        ng-dblclick="selectAndStartExport(exportScheme)"                        class="export-scheme" data-item-export-scheme-id="{{exportScheme.id}}">                        <span class="export-scheme-preview"></span>                        <div class="export-scheme-meta">                            <div class="export-scheme-name">{{exportScheme.name}}</div>                            <div class="export-scheme-description">{{exportScheme.description}}</div>                        </div>                    </li>                </ol>            </form>        </div>        <div class="scroll-customize-settings-link" aui-dialog-link ng-click="switchToAdvancedMode()">Customize Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="advanced-mode-page" header="Export to DocBook" ng-controller="AdvancedModeController">        <div aui-dialog-panel aui-validate="isTemplateSelected()" header="General" class="general-settings-panel">            <form id="general-settings-form" class="aui">                <div class="field-group">                    <label for="exporter-template-id">Template</label>                    <select ng-model="exportScheme.exporter.templateId"                        ng-options="t.id as t.name group by getI18nTemplateLocation(t.location) for t in $parent.dialogData.templates"                        title="Please select a template."                        id="exporter-template-id" class="select large-field required" />                    <div class="error" ng-hide="isTemplateSelected()">Please select a template.</div>                </div>                <fieldset style="margin-top: 10px;" class="group">                    <legend><span>Export</span></legend>                    <div ng-repeat="pageSelectionStrategy in $parent.dialogData.pageSelectionStrategies" class="radio">                        <input ng-model="exportScheme.pageSelectionStrategy.completeKey"                             ng-disabled="!pageSelectionStrategy.enabled"                            id="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}"                            value="{{pageSelectionStrategy.completeKey}}"                            class="radio pageSelectionStrategy-radio" type="radio"/>                        <label for="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}" ng-style="getPageSelectionStrategyLabelStyle(pageSelectionStrategy)">{{pageSelectionStrategy.name}}</label>                        <div ng-repeat="property in pageSelectionStrategy.properties" ng-show="exportScheme.pageSelectionStrategy.completeKey == pageSelectionStrategy.completeKey" class="configuration-property-container">                            <input ng-model="exportScheme.pageSelectionStrategy.properties[property.name]"                                ng-disabled="!pageSelectionStrategy.enabled"                                 type="text" class="text"                                id="{{pageSelectionStrategy.completeKey}}:{{property.name}}"                             />                            <div class="description" ng-bind-html="property.description"></div>                        </div>                                            </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="Content Processing" class="content-processing-panel">            <form id="content-processing-form" class="aui">                <fieldset class="group">                    <legend><span>Macros</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processTocMacros" class="checkbox" id="cbProcessTocMacros" />                        <label for="cbProcessTocMacros">Output <em>toc</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processChildrenMacros" class="checkbox" id="cbProcessChildrenMacros" />                        <label for="cbProcessChildrenMacros">Output <em>children</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processSectionColumnMacroAsTable" class="checkbox" id="cbProcessSectionColumnMacroAsTable" />                        <label for="cbProcessSectionColumnMacroAsTable">Output <em>section</em> macros as table</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processNumberedHeadingsMacros" class="checkbox" id="cbProcessNumberedHeadingsMacros" />                        <label for="cbProcessNumberedHeadingsMacros">Output <em>numberedheadings</em> macros</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Images</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.replaceThumbnailsWithFullSize" class="checkbox" id="cbThumbnailsPostprocessor" />                        <label for="cbThumbnailsPostprocessor">Export images with original resolution</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Advanced</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.enableHeadingPromotion" class="checkbox" id="cbEnableHeadingPromotion" />                        <label for="cbEnableHeadingPromotion">Merge single, first heading and page title</label>                    </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="DocBook Settings" class="docbook-settings-panel">            <form id="docbook-settings-form" class="aui">                <fieldset class="group">                    <legend><span>Index</span></legend>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.exporter.properties[\'generateIndex\']" id="generateIndex" ng-true-value="true" ng-false-value="false" />                        <label for="generateIndex">Generate Index</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" class="checkbox" ng-model="exportScheme.pageBuilder.usePageLabelsAsIndexTerms" id="labeltoindexterm" ng-true-value="true" ng-false-value="false" />                        <label for="labeltoindexterm">Convert Labels to Index Terms</label>                        <div class="description">Only applies if index is generated</div>                    </div>                </fieldset>             </form>        </div>        <div aui-dialog-panel header="DocBook Metadata" class="docbook-metadata-panel">            <form id="docbook-metadata-form" class="aui">                <div class="field-group">                    <label for="author_firstname">Author First Name</label>                    <input title="Please enter the authors first name." ng-model="exportScheme.exporter.properties[\'metadata.authorFirstname\']" id="author_firstname" class="text medium-field" />                    <div class="error" style="display: none;"></div>                    <div class="description">The first name of the author (for example: <em>Peter</em>).</div>                </div>                <div class="field-group">                    <label for="author_surname">Author Surname</label>                    <input title="Please enter the authors surname." ng-model="exportScheme.exporter.properties[\'metadata.authorSurname\']" id="author_surname" class="text medium-field" />                    <div class="error" style="display: none;">Please enter the authors surname.</div>                    <div class="description">The surname of the author (for example: <em>Parker</em>).</div>                </div>                <div class="field-group">                    <label for="editor_firstname">Editor First Name</label>                    <input title="Please enter the editors first name" ng-model="exportScheme.exporter.properties[\'metadata.editorFirstname\']" id="editor_firstname" class="text medium-field" />                    <div class="error" style="display: none;">Please enter the editors first name</div>                    <div class="description">The first name of the editor (for example: <em>Clark</em>).</div>                </div>                <div class="field-group">                    <label for="editor_surname">Editor Surname</label>                    <input title="Please enter the editors surname" ng-model="exportScheme.exporter.properties[\'metadata.editorSurname\']" id="editor_surname" class="text medium-field" />                    <div class="error" style="display: none;">Please enter the editors surname</div>                    <div class="description">The surname of the editor (for example: <em>Kent</em>).</div>                </div>             </form>        </div>        <div aui-dialog-panel header="Comala Workflows" class="adhoc-workflows-panel">            <form id="adhoc-workflows-form" class="aui">                <fieldset class="group">                    <legend><span>Comala Workflows</span></legend>                    <div class="checkbox">                        <input ng-model="exportScheme.exportAdhocPublishedOnly" ng-disabled="!dialogData.showAdhocWorkflowsCheckBox" type="checkbox" class="checkbox" id="exportAdhocPublishedOnly" />                        <label for="exportAdhocPublishedOnly">Only published versions</label>                        <div class="description">                            Export only pages that have been published with the Comala Workflows plugin.<br/>This option is only enabled, if workflows are activated for this space (<a href="http://www.k15t.com/display/_PK/DBK/adhoc-workflows" target="new">More Info</a>).                        </div>                    </div>                </fieldset>             </form>        </div>        <div class="scroll-simple-mode-link" aui-dialog-link ng-click="switchToSimpleMode()">Simple Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="export-result-page" header="Export Result" ng-controller="ExportResultController">        <div aui-dialog-panel header="Export Result" class="export-result-panel">            <form id="export-result-form" class="aui">                <div class="result-container">                    <div class="download-filename-container">                        <a class="download-filename" ng-href="{{getDownloadUrl()}}">{{taskStatus.filename}}</a>                    </div>                    <div class="download-stats-container">                        <span class="download-stats-line">({{formatFileSize()}}, {{taskStatus.message}})</span>                    </div>                    <div ng-show="isSuccess() && ($parent.dialogData.isGlobalAdministrator || $parent.dialogData.isSpaceAdministrator)" class="export-scheme-management-container">                        <div aui-toolbar style="margin-top: 10px; margin-bottom: 15px;">                            <div aui-toolbar-dropdown title="Save Export Scheme ...">                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplaySaveAsAction()" ng-click="saveAsNewExportScheme()"     title="as new ..." />                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplayUpdateAction()" ng-click="updateCurrentExportScheme()" title="{{$parent.exportSchemeName}}" style="font-style: italic;" />                            </div>                            <div aui-toolbar-button ng-click="showRestUrlDialog()" title="REST URL" />                            <div aui-toolbar-dropdown title="Manage Export Schemes ...">                                <div aui-toolbar-dropdown-item class="manage-space"  ng-show="$parent.canAdministerSpace()" ng-click="openSpaceExportSchemeManagement()"  title="in this space" />                                <div aui-toolbar-dropdown-item class="manage-global" ng-show="$parent.isGlobalAdmin()"      ng-click="openGlobalExportSchemeManagement()" title="globally" />                            </div>                        </div>                        <span aui-fade-out="updateSucceededTrigger" class="export-scheme-saved-message">Successfully saved export scheme.</span>                    </div>                    <div ng-show="!isSuccess()" class="error-description-container">                        <p>When contacting K15t support please make sure to submit the error.zip file.</p>                        <p>The ZIP file contains your export settings, a trace of the error as well as all content exported so far. If this content is confidential please extract the ZIP file and at least provide the \'stacktraces.txt\' file.</p>                    </div>                </div>            </form>        </div>        <div class="scroll-back-link" aui-dialog-link ng-click="goBack()">Back</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div>    </div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.view-source:view-source-menu-resources', location = 'com/atlassian/confluence/plugins/viewsource/js/viewsource.js' */
AJS.toInit(function ($) {
    $("#action-view-source-link").click(function (e) {
        window.open(this.href, (this.id + "-popupwindow").replace(/-/g, "_"), "width=800, height=600, scrollbars, resizable");
            e.preventDefault();
            return false;
        });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/common-dialogs-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-epub'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-epub'; // Will be filled in by Web Resource Transformer;

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-common-dialogs', ['ngResource', 'ngSanitize', 'auiNg']);

    ng.module(shortPluginKey + '-common-dialogs')
        .controller('MessageDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.exceptionExpanded = false;

                $scope.getTitle = function() {
                    if ($scope.message && $scope.message.severity) {
                        if ($scope.message.severity == 'Info' ) {
                            return "Info";
                        } else if ($scope.message.severity == 'Warning' ) {
                            return "Warning";
                        } else if ($scope.message.severity == 'Error' ) {
                            return "Error";
                        }                     
                    } else if ($scope.message.title) {
                        return $scope.message.title;
                    }
                    return "Error";
                };

                $scope.getMessage = function() {
                    if ($scope.message && $scope.message.message) {
                        return $scope.message.message;
                    }
                    return "Error"; 
                };

                $scope.isShowSupportInformation = function() {
                    return ($scope.message && $scope.message.stackTrace);
                };

                $scope.toggleExceptionDisplay = function() {
                    $scope.exceptionExpanded = !$scope.exceptionExpanded;
                };

                $scope.close = function() {
                    $scope.auiDialog.close(true);
                };
            }
        ])
        .provider('CommonDialog', function () {
            this.$get = [function () {
                var partial = auiNg.getPartial(pluginKey, 'common-dialogs', 'message-dialog');
                var defaultOpts = {
                    className : shortPluginKey + '-common-message-dialog',
                    closeOnOutsideClick : false,
                    closeOnEsc : true,
                    width : 760
                };

                return {
                    openMessageDialog: function (response) {
                        var opts = ng.extend({
                            message : response.data,
                            height : (!response.data.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    },
                    openTaskStatusMessageDialog: function (taskStatus) {
                        var opts = ng.extend({
                            message : {
                                message: taskStatus.message,
                                stackTrace: taskStatus.stackTrace,
                                severity: (taskStatus.status == 0) ? 'Info' : 'Error'
                            },
                            height : (!taskStatus.stackTrace) ? 200 : 400
                        }, defaultOpts);
                        auiNg.createDialogApp(shortPluginKey + '-common-dialogs', partial, opts);
                    }
                };
            }];
        });

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:common-dialogs', location = '/com/k15t/scroll/confluence/ui/common-dialogs/message-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-epub'] =  auiNg._templates['com.k15t.scroll.scroll-epub'] || {};
var moduleTemplates = pluginTemplates['common-dialogs'] = pluginTemplates['common-dialogs'] || {};
moduleTemplates['message-dialog.js'] = '<div aui-dialog-page class="message-page" header="{{getTitle()}}" ng-controller="MessageDialogController">    <div aui-dialog-panel class="message-panel">        <div class="aui-message error">            <p ng-bind-html="getMessage()"></p>            <p ng-hide="isShowSupportInformation()">If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a>.</p>        </div>        <div class="support-info-box" ng-show="isShowSupportInformation()">            <p>                <strong>Getting Support</strong>            </p>            <p>                If you need help please contact our <a href="http://support.k15t.com/" target="_new">support team</a> and provide the following information.                <br/>                <a href="" ng-click="toggleExceptionDisplay()">                    <span ng-hide="exceptionExpanded">Show error details &raquo;</span>                    <span ng-show="exceptionExpanded">Hide error details &laquo;</span>                </a>            </p>            <pre class="stacktrace-container" ng-show="exceptionExpanded">{{message.stackTrace}}</pre>        </div>    </div>    <div aui-dialog-link ng-click="close()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-dialog-module.js' */
(function(ng, _, auiNg) {
    'use strict';


    /* -------------------------------- Product specific values ----------------------------------*/

    var pluginKey = 'com.k15t.scroll.scroll-epub'; // Will be filled in by Web Resource Transformer;
    var shortPluginKey = 'scroll-epub'; // Will be filled in by Web Resource Transformer;
    var exporterKey = 'com.k15t.scroll.scroll-epub:epub-exporter'; // Will be filled in by Web Resource Transformer;
    var launcherSelector = '#com-k15t-confluence-' + shortPluginKey + '-launcher, .' + shortPluginKey + '-launcher';

    /* -------------------------------------------------------------------------------------------*/


    ng.module(shortPluginKey + '-export-dialog', ['ngResource', 'ngSanitize', 'auiNg', shortPluginKey + '-common-dialogs']);

    var getDialogClass = function(classname) {
        return classname + ' ' + ((AJS.params.buildNumber >= 4104) ? 'confluence-5-dialog' : 'confluence-4-dialog')  
    };

    var openExportDialog = function(launcher) {
        var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-dialog');
        var opts = {
            className: getDialogClass(shortPluginKey + '-export-dialog'),
            closeOnOutsideClick: false,
            closeOnEsc: true
        };

        var directExportSchemeIdAttr = AJS.$(launcher).closest("." + shortPluginKey + "-launcher").attr("data-export-scheme-id");
        if (directExportSchemeIdAttr) {
            opts.exportSchemeId = directExportSchemeIdAttr;
            opts.directExportMode = true;
        }

        auiNg.createDialogApp(shortPluginKey + '-export-dialog', partial, opts);
    };

    AJS.toInit(function($) {
        AJS.$(launcherSelector).click(function(e) {
            openExportDialog(e.target);
            e.preventDefault();
        });
    });

    var isBundledExportScheme = function(exportSchemeId) {
        return (exportSchemeId.indexOf('bundled_') == 0);
    };

    var hasScrollVersionsCoordinates = function() {
        return window.Scroll
                && Scroll.Versions
                && Scroll.Versions.Context
                && Scroll.Versions.Context.modules
                && Scroll.Versions.Context.user
                && (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace
                    || Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace);
    };


    ng.module(shortPluginKey + '-export-dialog')
        .controller('ExportDialogController', [ '$scope', '$http', '$q', 'AdvancedExportDialog', 'AuiDialog',
            function($scope, $http, $q, AdvancedExportDialog, AuiDialog) {
                $scope.dialogData = AdvancedExportDialog.get(function() {
                    $scope.dialogDataLoaded = true;
                });

                $scope.switchToSimpleModeCallback = ng.noop;
                $scope.switchToAdvancedModeCallback = ng.noop;

                $scope.exportSchemeModified = false;

                $scope.exportSchemeValidators = [];

                $scope.isExportSchemeValid = function(exportScheme) {
                    for (var i = 0; i < $scope.exportSchemeValidators.length; ++i ){
                        var validate = $scope.exportSchemeValidators[i];
                        if (!validate(exportScheme)) {
                            return false;
                        }
                    }
                    return true;
                };

                $scope.exportMode = 'simple';

                $scope.setSimpleExportMode = function() {
                    $scope.exportMode = 'simple';
                };
                $scope.setAdvancedExportMode = function() {
                    $scope.exportMode = 'advanced';
                };
                $scope.isSimpleExportMode = function() {
                    return $scope.exportMode == 'simple';
                };
                $scope.isAdvancedExportMode = function() {
                    return $scope.exportMode == 'advanced';
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.exportScheme;
                    $scope.auiDialog.gotoPage(0);
                    $scope.switchToSimpleModeCallback();
                };

                $scope.switchToAdvancedMode = function(update) {
                    $scope.auiDialog.gotoPage(1);
                    $scope.auiDialog.gotoPanel(0);
                    if (update) {
                        $scope.switchToAdvancedModeCallback();
                    }
                };

                $scope.openExportProgressDialog = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'export-progress-dialog');
                    var progressDialog = AuiDialog.create(partial, {className: shortPluginKey + '-export-progress-dialog', closeOnOutsideClick: false, closeOnEsc: false, height: 200, width: 680});
                    progressDialog.open({exportTaskId: $scope.exportTaskId, exportFinishedCallback: function(taskStatus) {
                        $scope.switchToResultPage(taskStatus);
                    }});
                };

                $scope.switchToResultPage = function(taskStatus) {
                    $scope.taskStatus = taskStatus;
                    $scope.auiDialog.gotoPage(2);
                    $scope.exportFinishedCallback();
                };

                $scope.appendScrollVersionsCoordinates = function(params) {
                    if (hasScrollVersionsCoordinates()) {
                        if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                            params.versionId = Scroll.Versions.Context.user.workingVersion.versionId;
                        }
                        if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                            params.variantId = Scroll.Versions.Context.user.currentVariant.id;
                        }
                        if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                            params.languageKey = Scroll.Versions.Context.user.currentLanguage.key;
                        }
                    }
                };
            } ])
        .controller('SimpleModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.selectExportScheme = function(exportScheme) {
                    $scope.selectedExportScheme = exportScheme;
                    $scope.$parent.exportSchemeId = exportScheme.id;
                    $scope.$parent.exportSchemeName = exportScheme.name;
                };

                $scope.updateExportSchemeList = function(onUpdatedHandler) {                    
                    $scope.exportSchemes = ExportScheme.query({spaceKey: AJS.params.spaceKey}, function() {
                        var selectedExportSchemeId = $scope.$parent.exportSchemeId;
                        if (!selectedExportSchemeId && ($scope.exportSchemes.length > 0)) {
                            selectedExportSchemeId = $scope.exportSchemes[0].id;
                        }
                        _.each($scope.exportSchemes, function(exportScheme){
                            if (exportScheme.id == selectedExportSchemeId) {
                                $scope.selectExportScheme(exportScheme);
                            }
                        });
                        if (!$scope.selectedExportScheme && ($scope.exportSchemes.length > 0)) {
                            $scope.selectExportScheme($scope.exportSchemes[0]);
                        }
                        if (onUpdatedHandler) {
                            onUpdatedHandler();
                        }
                    });
                };
                $scope.$parent.switchToSimpleModeCallback = $scope.updateExportSchemeList;

                $scope.getExportSchemeClass = function(exportScheme) {
                    var classes = ($scope.selectedExportScheme == exportScheme) ? "selected" : "";
                    classes = classes + (isBundledExportScheme(exportScheme.id) ? " bundled" : "");
                    return classes + ((exportScheme.id.indexOf('-LASTUSED', exportScheme.id.length - 9) !== -1) ? " last-used" : "");
                };

                $scope.switchToAdvancedMode = function() {
                    $scope.$parent.switchToAdvancedMode(true);
                };

                $scope.selectAndStartExport = function(exportScheme) {
                    $scope.selectExportScheme(exportScheme);
                    $scope.startExport();
                };

                $scope.canStartExport = function() {
                    return ($scope.selectedExportScheme != undefined);
                };

                $scope.startExport = function() {
                    if (!$scope.selectedExportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = false;

                    ExportScheme.get({id: $scope.selectedExportScheme.id}, function(loadedExportScheme) {
                        $scope.$parent.exportScheme = loadedExportScheme;
                        if ($scope.$parent.isExportSchemeValid(loadedExportScheme)) {
                            var params = {
                                exportSchemeId: $scope.selectedExportScheme.id
                            };
                            $scope.$parent.appendScrollVersionsCoordinates(params);

                            Export.startWithExistingExportScheme(params, function(task) {
                                $scope.$parent.exportTaskId = task.id;
                                $scope.$parent.setSimpleExportMode();
                                $scope.$parent.openExportProgressDialog();
                            }, function(response) {
                                CommonDialog.openMessageDialog(response);
                            });
                        } else {
                            $scope.switchToAdvancedMode();
                        }
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

                $scope.hasLicenseMessage = function() {
                    return !!$scope.$parent.dialogData.licenseMessage;
                };

                $scope.hasScrollVersionsCoordinates = function() {
                    return hasScrollVersionsCoordinates();
                };
                
                $scope.isCompatibleScrollVersionsAvailable = function() {
                    return $scope.$parent.dialogData.compatibleScrollVersionsAvailable;
                };

                $scope.getScrollVersionsMessage = function() {
                    if (hasScrollVersionsCoordinates()) {
                        if ($scope.isCompatibleScrollVersionsAvailable()) {
                            var modules = [];
                            if (Scroll.Versions.Context.modules.VersionManagement.isEnabledInSpace) {
                                modules.push(AJS.format("version \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.workingVersion.name));
                            }
                            if (Scroll.Versions.Context.modules.VariantManagement.isEnabledInSpace) {
                                if (Scroll.Versions.Context.user.currentVariant.id != 'all') {
                                    modules.push(AJS.format("variant \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentVariant.name));
                                } else {
                                    modules.push("\u003cstrong>all variants\u003c\/strong>");
                                }
                            }
                            if (Scroll.Versions.Context.modules.TranslationManagement.isEnabledInSpace) {
                                modules.push(AJS.format("language \u003cstrong>{0}\u003c\/strong>", Scroll.Versions.Context.user.currentLanguage.displayName));
                            }

                            var msg = "You will be exporting" + " ";
                            for (var i = 0; i < modules.length; i++) {
                                if (i > 0) {
                                    msg = msg + ", ";
                                }
                                msg = msg + modules[i];
                            }
                            msg = msg + ".";
                            return msg;
                        } else {
                            return "The installed version of Scroll Versions is not compatible with Scroll EPUB Exporter. Please update to the latest version of Scroll Versions.";    
                        }
                    } else {
                        return '';
                    }
                };
                
                $scope.getScrollVersionsMessageClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "info" : "warning";
                };

                $scope.getScrollVersionsMessageIconClass = function() {
                    return $scope.isCompatibleScrollVersionsAvailable() ? "icon-info" : "icon-warning";
                };

                var onUpdatedHandler = ($scope.$parent.directExportMode) ? $scope.startExport : ng.noop;
                $scope.updateExportSchemeList(onUpdatedHandler);
            } ])
        .controller('AdvancedModeController', [ '$scope', '$http', '$q', 'ExportScheme', 'Export', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, Export, AuiDialog, CommonDialog) {
                $scope.init = function() {
                    $scope.dialogData = $scope.$parent.dialogData;
                    if (!$scope.$parent.exportSchemeId) {
                        $scope.$parent.exportSchemeId = 'INITIAL';
                        $scope.$parent.exportSchemeName = 'INITIAL';
                    }
                    if (!$scope.$parent.exportScheme) {
                        ExportScheme.get({id: $scope.$parent.exportSchemeId}, function(loadedExportScheme) {
                            $scope.$parent.exportScheme = loadedExportScheme;
                        });
                    }
                    $scope.$parent.exportScheme = $scope.exportScheme;
                    $scope.originalExportScheme = ng.copy($scope.exportScheme);
                };

                $scope.$parent.switchToAdvancedModeCallback = $scope.init;

                $scope.getPageSelectionStrategyLabelStyle = function(pageSelectionStrategy) {
                    return pageSelectionStrategy.enabled ? {} : {color: 'silver'};
                };

                $scope.getI18nTemplateLocation = function(location) {
                    if (location == 'space') {
                        return "Space Templates";
                    } else {
                        return "Global Templates";
                    }
                };

                $scope.isTemplateSelected = function(exportScheme) {
                    exportScheme = exportScheme || $scope.exportScheme; 
                    if (exportScheme && $scope.$parent.dialogData && $scope.$parent.dialogData.templates) {
                        var templateId = exportScheme.exporter.templateId;
                        if (templateId) {
                            for (var i = 0; i < $scope.$parent.dialogData.templates.length; i++) {
                                if (templateId == $scope.$parent.dialogData.templates[i].id) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    }
                    return true;
                };
                $scope.$parent.exportSchemeValidators.push($scope.isTemplateSelected);

                $scope.canStartExport = function() {
                    return $scope.$parent.isExportSchemeValid($scope.$parent.exportScheme);
                };

                $scope.switchToSimpleMode = function() {
                    delete $scope.originalExportScheme;
                    $scope.$parent.switchToSimpleMode();
                };

                var isExportSchemeModified = function() {
                    var before = ng.toJson($scope.originalExportScheme);
                    var after = ng.toJson($scope.$parent.exportScheme);
                    return (before != after);
                };

                $scope.startExport = function() {
                    if (!$scope.exportScheme) {
                        return;
                    }

                    $scope.$parent.exportSchemeModified = isExportSchemeModified();

                    var params = {
                        rootPageId: AJS.params.pageId,
                        exportScheme: $scope.exportScheme
                    };
                    $scope.$parent.appendScrollVersionsCoordinates(params);

                    Export.startWithNewExportScheme(params, function(task) {
                        $scope.$parent.exportTaskId = task.id;
                        $scope.$parent.setAdvancedExportMode();
                        $scope.$parent.openExportProgressDialog();
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close(false);
                };

            } ])
        .controller('ExportProgressDialogController', [ '$scope', '$http', '$timeout', '$q', 'TaskStatus', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $timeout, $q, TaskStatus, AuiDialog, CommonDialog) {
                var statusPoller = undefined;

                $scope.exportTaskId = $scope.$parent.exportTaskId;
                $scope.exportCancelled = false;
                var exportFinishedCallback = $scope.$parent.exportFinishedCallback;

                (function pollTaskStatus() {
                    TaskStatus.get({id: $scope.exportTaskId}, function(taskStatus) {
                        $scope.taskStatus = taskStatus;
                        if (taskStatus.status == -2) { // System or license heck failed, see constants in TaskStatus interface.
                            $scope.cancelAndClose();
                            CommonDialog.openTaskStatusMessageDialog(taskStatus);
                        } else {
                            if (taskStatus.finished) {
                                $scope.auiDialog.close();
                                exportFinishedCallback(taskStatus);
                            } else {
                                statusPoller = $timeout(pollTaskStatus, 500);
                            }
                        }
                    }, function(response) {
                        if (!$scope.exportCancelled) {
                            CommonDialog.openMessageDialog(response);
                        }
                    });
                })();

                $scope.cancelAndClose = function() {
                    // Additional guard flag, in case the browser somehow executes a pending TaskStatus.get after our TaskStatus.remove.
                    $scope.exportCancelled = true;

                    if (statusPoller) {
                        $timeout.cancel(statusPoller);
                    }
                    TaskStatus.remove({id: $scope.$parent.exportTaskId});
                    $scope.auiDialog.close();
                };
            } ])
        .controller('ExportResultController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.getDownloadUrl = function() {
                    if (!$scope.$parent.taskStatus || !$scope.$parent.taskStatus.filename) {
                        return '';
                    }
                    return AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/' + $scope.$parent.exportTaskId + '/' + encodeURIComponent($scope.$parent.taskStatus.filename) || '';
                };

                $scope.$parent.exportFinishedCallback = function() {
                    if ($scope.$parent.taskStatus.status == 0) {
                        // Ultra ugly workaround for invisible dropdowns in Confluence 5.10 TODO Fix this in AUI-NG / dialog system
                        // Confluence's AUI overwrites our z-index of 3500 and sets it to 3000 because it doesn't know about our blankets.
                        // This makes the dropdown popup appear under the dialog div.
                        $('#export-result-form .aui-toolbar2 button.aui-dropdown2-trigger').click(function(e) {
                            setTimeout(function(e) {
                                $('#' + $(e.target).attr('aria-controls')).css('z-index', '3500');
                            },0, e)
                        });

                        var downloadUrl = $scope.getDownloadUrl();
                        window.setTimeout(function() {
                            window.location.href = downloadUrl;
                        }, 500);

                        var lastUsedExportScheme = ng.copy($scope.$parent.exportScheme);
                        lastUsedExportScheme.id = AJS.params.spaceKey + '-LASTUSED';
                        lastUsedExportScheme.name = "My last export settings";
                        lastUsedExportScheme.description = AJS.format("Last used on {1} in space \'\'{0}\'\'.", AJS.params.spaceName, new Date().toLocaleString());
                        ExportScheme.save(lastUsedExportScheme);
                    }
                };

                $scope.isSuccess = function() {
                    return ($scope.$parent.taskStatus && $scope.$parent.taskStatus.status >= 0);
                };

                // http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/
                var number_format = function(number, decimals, dec_point, thousands_sep) {        
                    var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;
                    var d = dec_point == undefined ? "," : dec_point;
                    var t = thousands_sep == undefined ? "." : thousands_sep, s = n < 0 ? "-" : "";
                    var i = parseInt(n = Math.abs(+n || 0).toFixed(c)) + "";
                    var j = i.length;
                    j = (j > 3) ? j % 3 : 0;
                    return s + (j ? i.substr(0, j) + t : "") + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + t) + (c ? d + Math.abs(n - i).toFixed(c).slice(2) : "");
                };

                // http://snipplr.com/view/5949/
                $scope.formatFileSize = function() {
                    if (!$scope.taskStatus || !$scope.taskStatus.fileSize) {
                        return '';
                    }
                    var filesize = $scope.taskStatus.fileSize;
                    if (filesize >= 1073741824) {
                        return number_format(filesize / 1073741824, 2, '.', '') + ' GB';
                    } else {
                        if (filesize >= 1048576) {
                            return number_format(filesize / 1048576, 2, '.', '') + ' MB';
                        } else {
                            if (filesize >= 1024) {
                                return number_format(filesize / 1024, 0) + ' KB';
                            } else {
                                return number_format(filesize, 0) + ' bytes';
                            }
                        }
                    }
                    return filesize;
                };

                $scope.canAdministerSpace = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.isGlobalAdmin = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator;
                };

                var isSpaceExportScheme = function(exportScheme) {
                    return exportScheme.id.indexOf('-') > 0;
                };

                $scope.isDisplayUpdateAction = function() {
                    return $scope.$parent.isAdvancedExportMode()
                            && ($scope.$parent.exportSchemeModified)
                            && ($scope.$parent.dialogData.isGlobalAdministrator
                                    || ($scope.$parent.dialogData.isSpaceAdministrator && isSpaceExportScheme($scope.$parent.exportScheme)));
                };

                $scope.isDisplaySaveAsAction = function() {
                    return $scope.$parent.dialogData.isGlobalAdministrator || $scope.$parent.dialogData.isSpaceAdministrator;
                };

                $scope.updateCurrentExportScheme = function() {
                    if (!isBundledExportScheme($scope.$parent.exportScheme.id) && ($scope.$parent.exportScheme.id != 'INITIAL')) {
                        ExportScheme.save($scope.$parent.exportScheme, function() {
                            $scope.updateSucceededTrigger = new Date();
                            $scope.lastSavedExportSchemeId = $scope.exportScheme.id;
                        }, function(response) {
                            CommonDialog.openMessageDialog(response);
                        });                        
                    } else {
                        CommonDialog.openMessageDialog({
                            data: {
                                title: "Were sorry ...",
                                message: "You tried to update a bundled system export scheme, which is not supported. Please save your settings as new export scheme."
                            }
                        });
                    }
                };

                $scope.saveAsNewExportScheme = function() {
                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'save-export-scheme-dialog');
                    var saveAsDialog = AuiDialog.create(partial, {className: shortPluginKey + '-save-export-scheme-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 300, width: 560});
                    saveAsDialog.open({
                        exportScheme: ng.copy($scope.$parent.exportScheme),
                        isSpaceAdmin: $scope.$parent.dialogData.isSpaceAdministrator,
                        isGlobalAdmin: $scope.$parent.dialogData.isGlobalAdministrator
                    }).then(function(context) {
                        $scope.updateSucceededTrigger = new Date();
                        $scope.lastSavedExportSchemeId = context.exportSchemeId;
                    }, ng.noop);
                };

                $scope.showRestUrlDialog = function() {
                    var exportSchemeId = $scope.lastSavedExportSchemeId || $scope.$parent.exportScheme.id;
                    var isExportSchemeModified = ($scope.lastSavedExportSchemeId) ? false : $scope.$parent.exportSchemeModified;
                    var compatibleScrollVersionsAvailable = $scope.$parent.dialogData.compatibleScrollVersionsAvailable;

                    var partial = auiNg.getPartial(pluginKey, 'export-dialog-resources', 'rest-url-dialog');
                    var restUrlDialog = AuiDialog.create(partial, {className: shortPluginKey + '-rest-url-dialog', closeOnOutsideClick: false, closeOnEsc: true, height: 250, width: 560});
                    restUrlDialog.open({exportSchemeId : exportSchemeId, isExportSchemeModified: isExportSchemeModified, isCompatibleScrollVersionsAvailable: compatibleScrollVersionsAvailable});
                };

                $scope.openSpaceExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/spaces/' + shortPluginKey + '/export-schemes.action?key=' + AJS.params.spaceKey, '_blank');
                };

                $scope.openGlobalExportSchemeManagement = function() {
                    window.open(AJS.params.contextPath + '/admin/' + shortPluginKey + '/export-schemes.action', '_blank');
                };

                $scope.goBack = function() {
                    if ($scope.$parent.isSimpleExportMode()) {
                        $scope.$parent.switchToSimpleMode();
                    } else if ($scope.$parent.isAdvancedExportMode()) {
                        $scope.$parent.switchToAdvancedMode(false);
                    } else {
                        alert('Unknown export mode. Please close and re-open the dialog.');
                    }
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('SaveExportSchemeDialogController', [ '$scope', '$http', '$q', 'ExportScheme', 'AuiDialog', 'CommonDialog',
            function($scope, $http, $q, ExportScheme, AuiDialog, CommonDialog) {
                $scope.saveLocation = 'space';

                $scope.canSubmit = function() {
                    return $scope.exportScheme && $scope.exportScheme.name && ($scope.exportScheme.name.length > 0);
                };

                $scope.saveExportScheme = function() {
                    if ($scope.exportScheme.id) {
                        delete $scope.exportScheme.id;
                    }

                    var params = {};
                    if ($scope.saveLocation == 'space') {
                        params.spaceKey = AJS.params.spaceKey;
                    }

                    var savedExportScheme = ExportScheme.create(params, $scope.exportScheme, function() {
                        $scope.auiDialog.close(true, {exportSchemeId : savedExportScheme.id});
                    }, function(response) {
                        CommonDialog.openMessageDialog(response);
                    });
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .controller('RestUrlDialogController', [ '$scope', '$http', '$q',
            function($scope, $http, $q) {
                $scope.isExportSchemeModified = $scope.$parent.isExportSchemeModified;

                $scope.getSyncRestUrl = function() {
                    var url = AJS.format('{0}/rest/{1}/1.0/sync-export?exportSchemeId={2}&rootPageId={3}', AJS.params.baseUrl || AJS.$('meta#confluence-base-url').attr('content'), shortPluginKey, $scope.$parent.exportSchemeId, AJS.params.pageId);
                    if (hasScrollVersionsCoordinates() && $scope.$parent.isCompatibleScrollVersionsAvailable) {
                        var userCtx = Scroll.Versions.Context.user;
                        var modules = Scroll.Versions.Context.modules;

                        if (modules.VersionManagement.isEnabledInSpace && userCtx.workingVersion && userCtx.workingVersion.versionId) {
                            url = url + '&versionId=' + userCtx.workingVersion.versionId;
                        }
                        if (modules.VariantManagement.isEnabledInSpace && userCtx.currentVariant && userCtx.currentVariant.id) {
                            url = url + '&variantId=' + userCtx.currentVariant.id;
                        }
                        if (modules.TranslationManagement.isEnabledInSpace && userCtx.currentLanguage && userCtx.currentLanguage.key) {
                            url = url + '&languageKey=' + userCtx.currentLanguage.key;
                        }
                    }
                    return url;
                };

                $scope.cancelAndClose = function() {
                    $scope.auiDialog.close();
                };
            } ])
        .factory('AdvancedExportDialog', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-dialog', {
                    spaceKey: AJS.params.spaceKey,
                    pageId: AJS.params.pageId,
                    exporterKey: exporterKey,
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ExportScheme', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export-scheme/:id/', {
                    includeGlobal: true,
                    exporterId: exporterKey,
                    id: '@id',
                    'ie8AntiCache': + (new Date())
                }, {
                    'create':   {method: 'POST'},
                    'save':   {method: 'PUT'}
                });
            } ])
        .factory('Export', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/export/', {
                    exportSchemeId: 'exportSchemeId',
                    rootPageId: AJS.params.pageId,
                    'ie8AntiCache': + (new Date())
                }, {
                    'startWithExistingExportScheme': {method: 'GET'},
                    'startWithNewExportScheme': {method: 'PUT'}
                });
            } ])
        .factory('TaskStatus', [ '$resource',
            function($resource) {
                return $resource(AJS.params.contextPath + '/rest/' + shortPluginKey + '/1.0/async-tasks/:id/', {
                    id: 'id',
                    'ie8AntiCache': + (new Date())
                });
            } ])
        .factory('ScrollVersionsPageTree', [ '$resource',
             function($resource) {
                 return $resource(AJS.params.contextPath + '/rest/scroll-versions/1.0/export-pagetree/', {
                     'ie8AntiCache': + (new Date())
                 });
             }
         ]);

})(auiNg.angular10, auiNg._, auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/export-progress-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-epub'] =  auiNg._templates['com.k15t.scroll.scroll-epub'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-progress-dialog.js'] = '<div aui-dialog-page class="export-progress-page" header="Export in Progress" ng-controller="ExportProgressDialogController">    <div aui-dialog-panel header="Export in Progress" class="export-progress-panel">        <form id="export-progress-form" class="aui">            <div style="height: 20px; padding-top: 15px;">                <span class="current-status-message">{{taskStatus.message}}</span>                <span class="current-step-indicator">{{taskStatus.done}} / {{taskStatus.total}}</span>            </div>            <div class="progress-container"><div class="progress-indicator" ng-style="{ width: taskStatus.progress + \'%\' }">&#8203;</div></div>        </form>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/save-export-scheme-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-epub'] =  auiNg._templates['com.k15t.scroll.scroll-epub'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['save-export-scheme-dialog.js'] = '<div aui-dialog-page class="save-export-scheme-page" header="Save new Export Scheme" ng-controller="SaveExportSchemeDialogController">    <div aui-dialog-panel class="save-export-scheme-panel">        <form id="save-export-scheme-form" class="aui" style="padding-top: 10px;">            <fieldset class="group">                <legend><span>Save</span></legend>                <div class="radio">                    <input ng-model="saveLocation" value="space" class="radio" type="radio" id="option-spaced" name="save-location" />                    <label for="option-spaced">in this space</label>                </div>                <div class="radio">                    <input ng-model="saveLocation" ng-disabled="!isGlobalAdmin" value="global" class="radio" type="radio" id="option-globally" name="save-location" />                    <label for="option-globally">globally</label>                </div>            </fieldset>            <div class="field-group">                <label for="export-scheme-name">Name</label>                <input ng-model="exportScheme.name" id="export-scheme-name" class="text" style="width: 300px; max-width: 300px;" />            </div>            <div class="field-group">                <label for="export-scheme-desc">Description</label>                <input ng-model="exportScheme.description" id="export-scheme-desc" class="text" style="width: 300px; max-width: 300px;" />            </div>        </form>    </div>    <div class="scroll-save-button" aui-dialog-button ng-click="saveExportScheme()" aui-disabled="!canSubmit()">Save</div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-resources', location = '/com/k15t/scroll/confluence/ui/export-dialog/rest-url-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-epub'] =  auiNg._templates['com.k15t.scroll.scroll-epub'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['rest-url-dialog.js'] = '<div aui-dialog-page class="rest-url-page" header="REST URL" ng-controller="RestUrlDialogController">    <div aui-dialog-panel class="rest-url-panel">        <div ng-show="!isExportSchemeModified">            <p>This URL can be used for automated exports of this page with the saved settings:</p>            <p><input class="rest-url" readonly="readonly" onclick="this.select();" style="width: 530px;" value="{{getSyncRestUrl()}}"></p>            <p>For more information please refer to the <a target="_blank" href="http://www.k15t.com/display/EPUB/Creating+an+Export+using+the+REST+API">documentation</a>.</p>        </div>        <div ng-show="isExportSchemeModified">            <p>You need to save the export scheme before it may be used for REST exports.</p>        </div>    </div>    <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-resources', location = '/com/k15t/scroll/epub/ui/export-dialog/export-dialog.html.vm' */
(function(window, undefined){ 
window.auiNg = window.auiNg || {};
auiNg._templates = auiNg._templates || {};
 var pluginTemplates = auiNg._templates['com.k15t.scroll.scroll-epub'] =  auiNg._templates['com.k15t.scroll.scroll-epub'] || {};
var moduleTemplates = pluginTemplates['export-dialog-resources'] = pluginTemplates['export-dialog-resources'] || {};
moduleTemplates['export-dialog.js'] = '<div ng-controller="ExportDialogController">    <div aui-dialog-page class="simple-mode-page" header="Export to EPUB" ng-controller="SimpleModeController">        <div aui-dialog-panel header="Export Schemes" class="export-schemes-panel">            <div ng-show="hasLicenseMessage() || (hasScrollVersionsCoordinates() && $parent.dialogDataLoaded)" class="dialog-messages">                <div ng-show="hasLicenseMessage()" class="license-message aui-message warning shadowed">                    <p class="title">                        <span class="aui-icon icon-warning"></span>                        <strong>Warning</strong>                    </p>                    <p ng-bind-html="$parent.dialogData.licenseMessage"></p>                </div>                <div ng-show="hasScrollVersionsCoordinates() && $parent.dialogDataLoaded" class="scroll-versions-message aui-message shadowed" ng-class="getScrollVersionsMessageClass()">                    <p><span class="aui-icon" ng-class="getScrollVersionsMessageIconClass()"></span><span ng-bind-html="getScrollVersionsMessage()"></span></p>                </div>            </div>            <form id="export-schemes-form" class="aui">                <ol class="export-schemes">                    <li ng-repeat="exportScheme in exportSchemes" ng-click="selectExportScheme(exportScheme)"                         ng-class="getExportSchemeClass(exportScheme)"                        ng-dblclick="selectAndStartExport(exportScheme)"                        class="export-scheme" data-item-export-scheme-id="{{exportScheme.id}}">                        <span class="export-scheme-preview"></span>                        <div class="export-scheme-meta">                            <div class="export-scheme-name">{{exportScheme.name}}</div>                            <div class="export-scheme-description">{{exportScheme.description}}</div>                        </div>                    </li>                </ol>            </form>        </div>        <div class="scroll-customize-settings-link" aui-dialog-link ng-click="switchToAdvancedMode()">Customize Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="advanced-mode-page" header="Export to EPUB" ng-controller="AdvancedModeController">        <div aui-dialog-panel aui-validate="isTemplateSelected()" header="General" class="general-settings-panel">            <form id="general-settings-form" class="aui">                <div class="field-group">                    <label for="exporter-template-id">Template</label>                    <select ng-model="exportScheme.exporter.templateId"                        ng-options="t.id as t.name group by getI18nTemplateLocation(t.location) for t in $parent.dialogData.templates"                        title="Please select a template."                        id="exporter-template-id" class="select large-field required" />                    <div class="error" ng-hide="isTemplateSelected()">Please select a template.</div>                </div>                <fieldset style="margin-top: 10px;" class="group">                    <legend><span>Export</span></legend>                    <div ng-repeat="pageSelectionStrategy in $parent.dialogData.pageSelectionStrategies" class="radio">                        <input ng-model="exportScheme.pageSelectionStrategy.completeKey"                             ng-disabled="!pageSelectionStrategy.enabled"                            id="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}"                            value="{{pageSelectionStrategy.completeKey}}"                            class="radio pageSelectionStrategy-radio" type="radio"/>                        <label for="{{pageSelectionStrategy.completeKey.replace(\':\', \'.\')}}" ng-style="getPageSelectionStrategyLabelStyle(pageSelectionStrategy)">{{pageSelectionStrategy.name}}</label>                        <div ng-repeat="property in pageSelectionStrategy.properties" ng-show="exportScheme.pageSelectionStrategy.completeKey == pageSelectionStrategy.completeKey" class="configuration-property-container">                            <input ng-model="exportScheme.pageSelectionStrategy.properties[property.name]"                                ng-disabled="!pageSelectionStrategy.enabled"                                 type="text" class="text"                                id="{{pageSelectionStrategy.completeKey}}:{{property.name}}"                             />                            <div class="description" ng-bind-html="property.description"></div>                        </div>                                            </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel header="Content Processing" class="content-processing-panel">            <form id="content-processing-form" class="aui">                <fieldset class="group">                    <legend><span>Macros</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processTocMacros" class="checkbox" id="cbProcessTocMacros" />                        <label for="cbProcessTocMacros">Output <em>toc</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processChildrenMacros" class="checkbox" id="cbProcessChildrenMacros" />                        <label for="cbProcessChildrenMacros">Output <em>children</em> macros</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processSectionColumnMacroAsTable" class="checkbox" id="cbProcessSectionColumnMacroAsTable" />                        <label for="cbProcessSectionColumnMacroAsTable">Output <em>section</em> macros as table</label>                    </div>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.processNumberedHeadingsMacros" class="checkbox" id="cbProcessNumberedHeadingsMacros" />                        <label for="cbProcessNumberedHeadingsMacros">Output <em>numberedheadings</em> macros</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Images</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.replaceThumbnailsWithFullSize" class="checkbox" id="cbThumbnailsPostprocessor" />                        <label for="cbThumbnailsPostprocessor">Export images with original resolution</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Index Terms</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.usePageLabelsAsIndexTerms" class="checkbox" id="pp_labeltoindexterm" />                        <label for="pp_labeltoindexterm">Convert Labels to Index Terms</label>                    </div>                </fieldset>                <fieldset class="group">                    <legend><span>Advanced</span></legend>                    <div class="checkbox">                        <input type="checkbox" ng-model="exportScheme.pageBuilder.enableHeadingPromotion" class="checkbox" id="cbEnableHeadingPromotion" />                        <label for="cbEnableHeadingPromotion">Merge single, first heading and page title</label>                    </div>                </fieldset>            </form>        </div>        <div aui-dialog-panel ng-controller="MetadataPanelController" aui-validate="hasValidMetadata()" header="Dublin Core Metadata" class="metadata-panel">            <form id="metadata-form" class="aui">                                             <p>Define the Dublin Core Metadata for your electronic publication:</p>                <div class="field-group">                    <label for="dc_title">Title</label>                    <input title="Please enter the book title." ng-model="exportScheme.exporter.properties[\'dcMetadata.title\']" id="dc_title" class="text long-field required" />                    <div class="error" ng-hide="hasValidTitle()">Please enter the book title.</div>                    <div class="description">The title of the electronic publication (for example: <em>Alice in Wonderland</em>).</div>                </div>                <div class="field-group">                    <label for="dc_identifier">ID</label>                    <input title="Please enter the book ID." ng-model="exportScheme.exporter.properties[\'dcMetadata.id\']" id="dc_identifier" class="text medium-field required" />                    <div class="error" ng-hide="hasValidId()">Please enter the book ID.</div>                    <div class="description">The ID of the electronic publication (for example: <em>ISBN: 978-0-86203-324-8</em>).</div>                </div>                <div class="field-group">                    <label for="dc_language">Language</label>                    <input title="Please enter the language abbreviation." ng-model="exportScheme.exporter.properties[\'dcMetadata.language\']" id="dc_language" class="text medium-field" />                    <div class="description">The language abbreviation of the electronic publication (for example: <em>en</em>).</div>                </div>                <div class="field-group">                    <label for="dc_creator">Author(s)</label>                    <input title="Please enter the author(s)." ng-model="exportScheme.exporter.properties[\'dcMetadata.creator\']" id="dc_creator" class="text medium-field" />                    <div class="description">The author(s) of the electronic publication (for example: <em>Lewis Carroll</em>).</div>                </div>                <div class="field-group">                    <label for="dc_publisher">Publisher</label>                    <input title="Please enter the publisher." ng-model="exportScheme.exporter.properties[\'dcMetadata.publisher\']" id="dc_publisher" class="text medium-field" />                    <div class="description">The publisher of the electronic publication (for example: <em>Walker Books Ltd</em>).</div>                </div>            </form>        </div>        <div aui-dialog-panel header="iTunes Artwork" class="artwork-panel">            <form id="artwork-form" class="aui">                                             <div class="field-group" ng-controller="ArtworkWidgetController">                    <label for="artwork_pulldown">Artwork</label>                    <select class="select" id="artwork_pulldown" ng-options="a.url as a.name for a in artworks" ng-model="$parent.exportScheme.exporter.properties[\'artwork.url\']">                        <option value="">No Artwork</option>                    </select>                    <div class="description">Attach images to the current page to use them as artwork for iTunes.</div>                    <div>                        <img id="artwork_preview" ng-src="{{getArtworkUrl()}}" ng-show="getArtworkUrl()" style="margin-top: 20px; max-width: 100%; max-height: 300px;" />                    </div>                </div>            </form>        </div>        <div aui-dialog-panel header="Comala Workflows" class="adhoc-workflows-panel">            <form id="adhoc-workflows-form" class="aui">                <fieldset class="group">                    <legend><span>Comala Workflows</span></legend>                    <div class="checkbox">                        <input ng-model="exportScheme.exportAdhocPublishedOnly" ng-disabled="!dialogData.showAdhocWorkflowsCheckBox" type="checkbox" class="checkbox" id="exportAdhocPublishedOnly" />                        <label for="exportAdhocPublishedOnly">Only published versions</label>                        <div class="description">                            Export only pages that have been published with the Comala Workflows plugin.<br/>This option is only available when using Comala Workflows 4.8 or later (<a href="http://www.k15t.com/display/_PK/EPUB/adhoc-workflows" target="new">More Info</a>).                        </div>                    </div>                </fieldset>             </form>        </div>        <div class="scroll-simple-mode-link" aui-dialog-link ng-click="switchToSimpleMode()">Simple Settings</div>        <div class="scroll-start-export-button" aui-dialog-button ng-click="startExport()" aui-disabled="!canStartExport()">Start Export</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Cancel</div>    </div>    <div aui-dialog-page class="export-result-page" header="Export Result" ng-controller="ExportResultController">        <div aui-dialog-panel header="Export Result" class="export-result-panel">            <form id="export-result-form" class="aui">                <div class="result-container">                    <div class="download-filename-container">                        <a class="download-filename" ng-href="{{getDownloadUrl()}}">{{taskStatus.filename}}</a>                    </div>                    <div class="download-stats-container">                        <span class="download-stats-line">({{formatFileSize()}}, {{taskStatus.message}})</span>                    </div>                    <div ng-show="isSuccess() && ($parent.dialogData.isGlobalAdministrator || $parent.dialogData.isSpaceAdministrator)" class="export-scheme-management-container">                        <div aui-toolbar style="margin-top: 10px; margin-bottom: 15px;">                            <div aui-toolbar-dropdown title="Save Export Scheme ...">                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplaySaveAsAction()" ng-click="saveAsNewExportScheme()"     title="as new ..." />                                <div aui-toolbar-dropdown-item ng-show="$parent.isDisplayUpdateAction()" ng-click="updateCurrentExportScheme()" title="{{$parent.exportSchemeName}}" style="font-style: italic;" />                            </div>                            <div aui-toolbar-button ng-click="showRestUrlDialog()" title="REST URL" />                            <div aui-toolbar-dropdown title="Manage Export Schemes ...">                                <div aui-toolbar-dropdown-item class="manage-space"  ng-show="$parent.canAdministerSpace()" ng-click="openSpaceExportSchemeManagement()"  title="in this space" />                                <div aui-toolbar-dropdown-item class="manage-global" ng-show="$parent.isGlobalAdmin()"      ng-click="openGlobalExportSchemeManagement()" title="globally" />                            </div>                        </div>                        <span aui-fade-out="updateSucceededTrigger" class="export-scheme-saved-message">Successfully saved export scheme.</span>                    </div>                    <div ng-show="!isSuccess()" class="error-description-container">                        <p>When contacting K15t support please make sure to submit the error.zip file.</p>                        <p>The ZIP file contains your export settings, a trace of the error as well as all content exported so far. If this content is confidential please extract the ZIP file and at least provide the \'stacktraces.txt\' file.</p>                    </div>                </div>            </form>        </div>        <div class="scroll-back-link" aui-dialog-link ng-click="goBack()">Back</div>        <div class="scroll-cancel-link" aui-dialog-link ng-click="cancelAndClose()">Close</div>    </div></div>';
})(window);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.k15t.scroll.scroll-epub:export-dialog-artwork-resources', location = '/com/k15t/scroll/epub/ui/export-dialog/custom-panel-controllers.js' */
(function(d,a,c){var b="com.k15t.scroll.scroll-epub";var f="scroll-epub";var e="com.k15t.scroll.scroll-epub:epub-exporter";d.module(f+"-export-dialog").controller("MetadataPanelController",["$scope","$http","$q","AuiDialog",function(l,i,h,k){var o=function(p){return !!(p&&p.exporter&&p.exporter.properties)};var n=function(q,p){return q.exporter.properties[p]};var m=function(p){if(o(p)){var q=n(p,"dcMetadata.title");if(!(q&&q.length>0)){return false}}return true};var j=function(p){if(o(p)){var q=n(p,"dcMetadata.id");if(!(q&&q.length>0)){return false}}return true};var g=function(p){return(m(p)&&j(p))};l.hasValidTitle=function(){return m(l.$parent.exportScheme)};l.hasValidId=function(){return j(l.$parent.exportScheme)};l.hasValidMetadata=function(){return g(l.$parent.exportScheme)};l.$parent.$parent.exportSchemeValidators.push(g)}]).controller("ArtworkWidgetController",["$scope","$http","$q","Artwork","AuiDialog",function(i,k,h,j,g){i.artworks=j.query();i.getArtworkUrl=function(){return(i.$parent.exportScheme&&i.$parent.exportScheme.exporter&&i.$parent.exportScheme.exporter.properties&&i.$parent.exportScheme.exporter.properties["artwork.url"])||""}}]).factory("Artwork",["$resource",function(g){var h={spaceKey:AJS.params.spaceKey,ie8AntiCache:+(new Date())};if(AJS.params.pageId){h.pageId=AJS.params.pageId}return g(AJS.params.contextPath+"/rest/"+f+"/1.0/artwork",h)}])})(auiNg.angular10,auiNg._,auiNg);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.view-storage-format:view-storage-menu-resources', location = 'com/atlassian/confluence/plugins/viewstorage/js/viewstorage.js' */
AJS.toInit(function ($) {
    $(".view-storage-link, .view-storage-link a").click(function (e) {
        window.open(this.href, (this.id + "-popupwindow").replace(/-/g, "_"), "width=800, height=600, scrollbars, resizable");
            e.preventDefault();
            return false;
        });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/doctheme-utils.js' */
Confluence.DocThemeUtils=Confluence.DocThemeUtils||(function(f){var e;function c(){return(a().length)?true:false}function a(){if(!e){e=f("#splitter-content")}return e}function g(i){var h=f(i);f(i).appendTo(c()?a():f("body"));return h}function b(){return c()?a().scrollTop():f(document).scrollTop()}function d(){return c()?a().scrollLeft():f(document).scrollLeft()}return{isDocTheme:c,appendAbsolutePositionedElement:g,getMainContentScrollTop:b,getMainContentScrollLeft:d,getDocThemeContentElement:a}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/scrolling-inline-dialog.js' */
Confluence.ScrollingInlineDialog=function(a,d,c,b){var g=Confluence.DocThemeUtils.getDocThemeContentElement();var e=Confluence.DocThemeUtils.isDocTheme();b=b||{};if(!b.container&&e){b.container=g}var f=function(k,s,J,z){var v;var L="auto";var G;var p=-7;var q;var w;var u=e?g.width():AJS.$(window).width();var K=s.target.position();K.top+=e?g.scrollTop():0;K.left+=e?g.scrollLeft():0;var i=s.target.outerWidth();var m=K.left+i/2;var C=e?g.scrollTop()+AJS.$(window).height()-AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+AJS.$(window).height();var n=10;var o=20;G=K.top+s.target.outerHeight()+z.offsetY;var H=k.find(".arrow").outerWidth();var j=k.outerWidth();var D=s.target.outerWidth();if(z.centerOnHighlight){if(j>D){v=K.left-(j-D)/2;q=m-v-H/2}else{v=K.left+z.offsetX;q=(j-H)/2}}else{v=K.left+z.offsetX;if(j>D){q=m-v-H/2}else{q=(j-H)/2}}q=(q<0)?0:q;var h=(e)?(K.top-g.scrollTop()):(K.top-(window.pageYOffset||document.documentElement.scrollTop));var A=z.maxHeight||0;var t=k.height();var r=h>Math.max(t,A);var l=(G+k.height())<C;w=(!l&&r)||z.onTop;z.onTop=w;var y=u-(v+j+n);if(w){G=K.top-t-8;p=t}if(w===false&&l===false){var x=(G+t)-C;var E=e?g.scrollTop()+x+AJS.$("#footer").outerHeight():(window.pageYOffset||document.documentElement.scrollTop)+x+o;var F=e?g:AJS.$("html, body");F.stop().animate({scrollTop:E},500)}if(z.isRelativeToMouse){if(y<0){L=n;v="auto";q=J.x-(AJS.$(window).width()-z.width)}else{v=J.x-20;q=J.x-v}}else{if(y<0){L=n;v="auto";var I=u-L;var B=I-j;q=m-B-H/2}}return{displayAbove:w,popupCss:{left:v,right:L,top:G},arrowCss:{position:"absolute",left:q,right:"auto",top:p}}};if(!b.calculatePositions){b.calculatePositions=f}return AJS.InlineDialog.call(this,a,d,c,b)};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-panel.js' */
Confluence.HighlightAction=(function(f){var d={};var c;var b={MAINCONTENT_AND_COMMENT:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".wiki-content"),o)},MAINCONTENT_ONLY:function(o){c=c||f(".wiki-content").first();return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(c,o)},COMMENT_ONLY:function(o){return Confluence.HighlightAction.RangeHelper.isSelectionInsideContent(f(".comment-content"),o)}};function a(p,q){var o={onClick:function(){},shouldDisplay:b.MAINCONTENT_AND_COMMENT};d[p]=f.extend(o,q)}function l(o){var p=d[o];if(!p){p=function(){AJS.logError("The button with key "+o+" doesn't have a registered handler")}}return p}function e(p){var o=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-fragment";return f.ajax({type:"POST",contentType:"application/json",url:o,data:JSON.stringify(p)})}function g(o){var p=Confluence.getContextPath()+"/rest/highlighting/1.0/insert-storage-column-table";return f.ajax({type:"POST",contentType:"application/json",url:p,data:JSON.stringify(o)})}function k(q,p,r){var o=i(r);o.tableColumnIndex=p;o.cellModifications=q;return o}function h(o,q){var p=i(q);p.xmlModification=o[0].xmlInsertion;return p}function j(o,q){var p=i(q);p.xmlModification=o;return p}function m(){if(window.getSelection){window.getSelection().empty&&window.getSelection().empty();window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}else{window.document.selection&&window.document.selection.empty()}}function i(p){var o={};o.pageId=p.pageId;o.selectedText=p.selectedText;o.index=p.index;o.numMatches=p.numMatches;o.lastFetchTime=n();return o}function n(){return f("meta[name='confluence-request-time']").attr("content")}return{registerButtonHandler:a,getButtonHandler:l,insertContentAtSelectionEnd:e,insertContentsInTableColumnCells:g,createTableInsertionBean:k,createInsertionBean:h,createXMLModificationBean:j,clearTextSelection:m,WORKING_AREA:b}})(AJS.$);Confluence.HighlightAction.RangeHelper=(function(h){function i(n){return{area:c(n),text:j(n),html:l(n),containingElement:d(n),range:n}}function c(o){var p=Confluence.DocThemeUtils.getMainContentScrollTop();var q=Confluence.DocThemeUtils.getMainContentScrollLeft();var u=o.getClientRects();if(!u.length&&o.parentElement()){var v=h(o.parentElement());var n=v.offset();u=[{top:n.top-((Confluence.DocThemeUtils.isDocTheme())?0:p),left:n.left-((Confluence.DocThemeUtils.isDocTheme())?0:q),bottom:n.top+v.height(),right:n.left+v.width()}]}var x=g(o,u);var s=function(C,B){var A={};A.top=C.top;A.left=C.left+q;A.bottom=B.bottom;if(C.left>=B.right){A.right=C.right}else{A.right=B.right}A.right=A.right+q;A.top=A.top+p;A.bottom=A.bottom+p;A.width=A.right-A.left;A.height=A.bottom-A.top;return A};var r=function(B){var A={};A.width=B.right-B.left;A.height=B.bottom-B.top;A.left=B.left+q;A.right=B.right+q;A.top=B.top+p;A.bottom=B.bottom+p;return A};var z=function(A){if(Confluence.DocThemeUtils.isDocTheme()){var B=Confluence.DocThemeUtils.getDocThemeContentElement().offset();A.left=A.left-B.left;A.right=A.right-B.left;A.top=A.top-B.top;A.bottom=A.bottom-B.top}return A};var y=z(s(x.first,x.last));var t=z(r(x.first));if(Confluence.HighlightAction.debug){var w=h("<div>").attr("id","highlight-actions-debug-helper");Confluence.DocThemeUtils.appendAbsolutePositionedElement(w).css(h.extend({position:"absolute",outline:"1px solid red"},y))}return{first:t,average:y}}function j(n){return(n.text!=undefined)?n.text:n.toString()}function l(n){return(n.cloneContents)?h("<div>").append(n.cloneContents()).html():n.htmlText}function d(o){if(o.commonAncestorContainer){var n=o.commonAncestorContainer;if(n.nodeType==3){return n.parentNode}return n}else{if(o.parentElement){return o.parentElement()}}}function g(p,o){var n={};n.first=o[0];n.last=o[o.length-1];if(p.endOffset!=="undefined"){if(p.endOffset==0){n.last=o[o.length-2]}}return n}function e(){if(window.getSelection&&window.getSelection().isCollapsed){return false}if(document.selection&&(document.selection.type=="None"||document.selection.createRange().htmlText=="")){return false}var q;if(window.getSelection){var n=window.getSelection();q=n.getRangeAt(n.rangeCount-1)}else{if(document.selection){q=document.selection.createRange()}}if(/^\s*$/.test(j(q))){var o=l(q);if(!o){return false}var p=o.toLowerCase().indexOf("<img ")!=-1;if(!p){return false}}if(!k(h(".wiki-content"),q)){return false}return q}function k(n,q){var o=d(q);var p=function(){var r=false;h.each(n,function(s,t){if(t===o||h.contains(t,o)){r=true;return false}});return r};return p()}function b(q,p){var o=f(q);var n=j(m(q,p));var s=j(p);var r=a(o,s);return{pageId:AJS.Meta.get("page-id"),selectedText:s,index:h.inArray(n.length-s.length,r),numMatches:r.length}}function f(n){if(document.createRange){return n.text()}else{range=document.body.createTextRange();range.moveToElementText(n.get(0));return range.text}}function m(p,o){var n;if(document.createRange){n=document.createRange();n.setStart(p.get(0),0);n.setEnd(o.endContainer,o.endOffset)}else{n=document.body.createTextRange();n.moveToElementText(p.get(0));n.setEndPoint("EndToEnd",o)}return n}function a(q,o){var r=0;var p=-1;var n=[];while((p=q.indexOf(o,r))>-1){n.push(p);r=p+1}return n}return{getRangeOption:i,getUserSelectionRange:e,getSelectionRects:c,getSelectionText:j,getSelectionHTML:l,getContainingElement:d,getFirstAndLastSelectionRect:g,isSelectionInsideContent:k,computeSearchTextObject:b}})(AJS.$);AJS.toInit(function(e){var h=e(".wiki-content").first();var a=e("<div>").attr("id","action-dialog-target");var d;var i="selection-action-panel";var b;var f;function n(){var q=Confluence.getContextPath()+"/rest/highlighting/1.0/panel-items";var p=AJS.Meta.get("page-id");if(p!=undefined){q=q+"?pageId="+p}e.get(q,function(r){if(r.length){k(r);g()}})}var m=function(){if(e.browser.msie&&e.browser.version<=8){var p=document.getElementsByTagName("head")[0];var q=document.createElement("style");q.type="text/css";q.styleSheet.cssText=" #inline-dialog-"+i+" :before, #inline-dialog-"+i+" :after { content:none !important;}";p.appendChild(q);setTimeout(function(){p.removeChild(q)},0)}};function k(u){var x=c();var p=29;var y=false;var A=u.length*p;var z=Confluence.HighlightPanel.Templates.panelContent({webItems:u});var w=false;var r=function(C,B,D){if(!w){C.append(z);C.find(".aui-button").tooltip({gravity:"s"});j(C.parent());C.find("button").click(function(G){var E=e(this).attr("data-key");var H=Confluence.HighlightAction.getButtonHandler(E);y=true;d.hide();var F=Confluence.HighlightAction.RangeHelper.getRangeOption(b);if(e.trim(F.text)!==""){F.searchText=Confluence.HighlightAction.RangeHelper.computeSearchTextObject(h,b)}H.onClick(F)})}D();if(!w){setTimeout(m,0)}w=true;return false};var v=function(B){var C=false;B.find("button").each(function(D){var F=e(this);var E=F.attr("data-key");var H=Confluence.HighlightAction.getButtonHandler(E);var G=H.shouldDisplay(b);F.css("display",G?"inline-block":"none");C=C||G});if(!C){d.hide()}else{B.find(".contents").width("auto")}};var q=function(){Confluence.HighlightAction.Analytics.sendAnalyticsForOpeningHighlightOptionPanel();v(this.popup);x.bindHideEvents();a.show()};var t=function(){x.unbindHideEvents();a.hide()};var s={centerOnHighlight:true,onTop:true,fadeTime:0,width:A,persistent:true,initCallback:q,hideCallback:t};d=Confluence.ScrollingInlineDialog(a,i,r,s)}function j(p){p.children().attr("unselectable","on").on("selectstart",false)}function g(){var p;var q=0;var r=1000;e(document).mouseup(function(t){var s=e(t.target);if(s.closest(".aui-inline-dialog").length!==0){return}setTimeout(function(){clearTimeout(p);var u=r;if(e(d[0]).is(":visible")){u=q}p=setTimeout(function(){l()},u)},q)});AJS.bind("quickedit.success",function(){d.hide()})}function l(){b=Confluence.HighlightAction.RangeHelper.getUserSelectionRange();if(!b){d.hide();return}var q=Confluence.HighlightAction.RangeHelper.getSelectionRects(b);if(!q){return}var p=o(q);if(p||!e(d[0]).is(":visible")){e(d[0]).hide();d.show()}}function c(){var s=function(){u();r()};var v=function(){p();x()};var q=false;var w=i+".inline-dialog-check";var u=function(){if(!q){e("body").bind("click."+w,function(z){var y=e(z.target);if(y.closest("#inline-dialog-"+i+" .contents").length===0){if(!b){d.hide()}}});q=true}};var p=function(){if(q){e("body").unbind("click."+w)}q=false};var t=function(y){if(y.keyCode===27){d.hide()}};var r=function(){e(document).on("keydown",t)};var x=function(){e(document).off("keydown",t)};return{bindHideEvents:s,unbindHideEvents:v}}function o(q){Confluence.DocThemeUtils.appendAbsolutePositionedElement(a);var p=false;if(!f||q.first.top!=f.first.top||q.first.height!=f.first.height||q.first.left!=f.first.left||q.first.width!=f.first.width){a.css({top:q.first.top,height:q.first.height,left:q.first.left,width:q.first.width});f=q;p=true}return p}n()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/quote-in-comment.js' */
AJS.toInit(function(f){var a=true;var h=false;var d="com.atlassian.confluence.plugins.confluence-highlight-actions:quote-comment";function b(l){var k=l.getBody().createTextRange();k.moveToElementText(l.getBody());k.collapse(false);k.select()}function e(){var k=40;if(Confluence.DocThemeUtils.isDocTheme()){var l=Confluence.DocThemeUtils.getDocThemeContentElement();var m=l.scrollTop()-f("#header").height()+f("#rte-toolbar").offset().top;l.scrollTop(m-k)}else{var m=f("#rte-toolbar").offset().top;f(document).scrollTop(m-k)}}function j(l,m){var n="<p><br/></p>";if(f.browser.msie&&!h){b(l);n="<p></p>"}var k="<blockquote><p>"+m.html+"</p></blockquote>"+n;l.execCommand("mceInsertContent",false,k);h=false}function i(k){Confluence.HighlightAction.clearTextSelection();setTimeout(function(){var l=AJS&&AJS.Rte&&AJS.Rte.getEditor&&AJS.Rte.getEditor();if(l){Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment();e();j(l,k)}else{Confluence.HighlightAction.Analytics.sendAnalyticsForQuoteInComment(a);h=true;var m=function(){j(AJS.Rte.getEditor(),k);AJS.unbind("quickedit.visible",m)};AJS.bind("quickedit.visible",m);c(g(k.containingElement))}},0)}function g(k){var l=f(k).closest("div.comment");return l}function c(k){if(!k.length>0){f(".quick-comment-prompt").click()}else{k.find(".comment-actions .action-reply-comment").click()}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(d,{onClick:i,shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_AND_COMMENT})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/js/highlight-analytics.js' */
Confluence.HighlightAction.Analytics=(function(c){var b="confluence.highlight.actions.open";var e="confluence.quote.in.comment.insert";var g="confluence.quote.in.comment.append";function d(h,i){AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(h,i):AJS.trigger("analytics",{name:h,data:i})}function a(){d(b)}function f(h){if(h){d(e)}else{d(g)}}return{sendAnalyticsForOpeningHighlightOptionPanel:a,sendAnalyticsForQuoteInComment:f}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-highlight-actions:highlighting-experiment-resources', location = '/soy/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.HighlightPanel == 'undefined') { Confluence.HighlightPanel = {}; }
if (typeof Confluence.HighlightPanel.Templates == 'undefined') { Confluence.HighlightPanel.Templates = {}; }


Confluence.HighlightPanel.Templates.panelContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var webItemList3 = opt_data.webItems;
  var webItemListLen3 = webItemList3.length;
  for (var webItemIndex3 = 0; webItemIndex3 < webItemListLen3; webItemIndex3++) {
    var webItemData3 = webItemList3[webItemIndex3];
    output.append('<button data-key="', soy.$$escapeHtml(webItemData3.key), '" class="aui-button aui-button-compact aui-button-subtle" title="', soy.$$escapeHtml(webItemData3.label), '"><span class="aui-icon aui-icon-small ', soy.$$escapeHtml(webItemData3.styleClass), '"/></button>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.macros.core:flash-autosize', location = 'javascript/flash-autosize.js' */
AJS.toInit(function($) {
    function autoSize(embeds, attempt) {
        var retry;

        if(attempt >= 20) { // 2 sec
            AJS.log('unable to auto size flash - took too long to load');
            return;
        }

        retry = $([]);

        embeds.each(function() {
            var $e = $(this);
            var h, w;
            if(this.GetVariable) {
                // Only set width/height is not already set
                if(!$e.attr("height")) {
                    h = this.GetVariable("height");
                    if(h) {
                        $e.height(h);
                    } else {
                        retry = retry.add($e);
                        return;
                    }
                }
                if(!$e.attr("width")) {
                    w = this.GetVariable("width");
                    if(w) {
                        $e.width(w);
                    } else {
                        retry = retry.add($e);
                        return;
                    }
                }
            }
        });

        if(retry.length) {
            setTimeout(function() {
                autoSize(retry, attempt + 1);
            }, 100);
        }
    }

    autoSize($('embed[type="application/x-shockwave-flash"]'), 0);

    // For preview
    $(window).bind("render-content-loaded", function(e, body) {
        autoSize($('embed[type="application/x-shockwave-flash"]', body), 0);
    });
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:help-dialog-extension', location = '/jira/help-dialog.js' */
if(Confluence.KeyboardShortcuts){Confluence.KeyboardShortcuts.Editor.push({context:"editor.actions",descKey:"Insert JIRA Issue/Filter"+":",keys:[["Ctrl+Shift+J"]]})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:view-comment', location = '/includes/js/comments.js' */
AJS.toInit(function(e){var d=Confluence.storageManager("comments");var a=function(){if(confirm("Are you sure you want to delete the comment?")){this.href=this.href+"&confirm=yes";return true}return false};Confluence.Comments={bindRemoveConfirmation:function(f){e("#comment-"+f+" .comment-action-remove a").click(a)}};if(!e("#comments-section").length){return}if(AJS.isIE6){e(".logo.anonymous").each(function(){var f=document.createElement("div");f.className="replacement";AJS.applyPngFilter(f,this.src);e(this).replaceWith(f)});e(".comment-actions .comment-permalink a").each(function(){e(this).addClass("filtered");var g=e(this).css("background-image").replace(/^url\(\"?|\"?\)$/g,"");var f=g.replace("light","dark");AJS.applyPngFilter(this,g);this.style.cursor="pointer";this.style.background="none";e(this).hover(function(){AJS.applyPngFilter(this,f)},function(){AJS.applyPngFilter(this,g)})})}e("#comments-section .comment:odd").addClass("odd");e(".comment-action-remove a").click(a);var c=e("#addcomment.comment-text"),b=e("#comments-text-editor textarea");b.focus(function(){c.addClass("active")}).blur(function(){if(!e.trim(b.val()).length){c.removeClass("active")}}).bind("reset.default-text",function(){c.removeClass("active")});e("form[name='textcommentform']").submit(function(){var f=b.val();if(!e.trim(f)){alert("Comment text is empty. Cannot create empty comments.");return false}return true});e("#add-comment-rte").click(function(){if(!b.hasClass("placeholded")){d.setItem("text-comment",e.trim(b.val()))}});if(e("#addcomment #rte").length){AJS.bind("init.rte",function(h,g){var f=d.getItem("text-comment");if(f){g.editor.setContent(f);d.setItem("text-comment","")}})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/user.soy' */
// This file was automatically generated from user.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.User == 'undefined') { Confluence.Templates.User = {}; }


Confluence.Templates.User.userLinkUrl = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append(soy.$$escapeHtml(""), '/display/~', soy.$$escapeUri(opt_data.username));
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.logo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.profilePictureInfo['default'] && opt_data.username == opt_data.currentUsername) {
    output.append('<a ', (opt_data.canView) ? ' ' + ((! opt_data.disableUserHover) ? 'class="userLogoLink"' : '') + ' data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : '', ' href="', soy.$$escapeHtml(""), '/users/editmyprofilepicture.action" title="', soy.$$escapeHtml("Add a picture of yourself"), '"><img class="userLogo logo defaultLogo" src="', soy.$$escapeHtml("/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.31/_"), '/images/icons/profilepics/add_profile_pic.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Add a picture of yourself"), '"></a>');
  } else {
    if (opt_data.profilePictureInfo.anonymous) {
      output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.31/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Anonymous"), '" title="', soy.$$escapeHtml("Anonymous"), '">');
    } else if (opt_data.canView) {
      output.append('<a ', (! opt_data.disableUserHover) ? 'class="userLogoLink"' : '', ' data-username="', soy.$$escapeHtml(opt_data.username), '" href="');
      Confluence.Templates.User.userLinkUrl(opt_data, output);
      output.append('"><img class="userLogo logo" src="', soy.$$escapeHtml(""), soy.$$escapeHtml(opt_data.profilePictureInfo.downloadPath), '" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.username), '" title="', soy.$$escapeHtml(opt_data.username), '"></a>');
    } else {
      output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.31/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.username), '" title="', soy.$$escapeHtml(opt_data.username), '">');
    }
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.username && opt_data.username != '') {
    output.append('<a href="');
    Confluence.Templates.User.userLinkUrl(opt_data, output);
    output.append('"', (opt_data.canView) ? 'class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.username) + '"' : 'class="url fn"', '>', (opt_data.fullName && opt_data.fullName != '') ? soy.$$escapeHtml(opt_data.fullName) : soy.$$escapeHtml(opt_data.username), '</a>');
  } else {
    output.append(soy.$$escapeHtml("Anonymous"));
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.fullNameOrAnonymous = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.user && opt_data.user.fullName) ? soy.$$escapeHtml(opt_data.user.fullName) : soy.$$escapeHtml("Anonymous"));
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.User.usernameOrAnonymous = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.user && opt_data.user.name) ? soy.$$escapeHtml(opt_data.user.name) : soy.$$escapeHtml("Anonymous"));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:shared-templates', location = '/includes/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Icons == 'undefined') { Confluence.Templates.Icons = {}; }


Confluence.Templates.Icons.contentIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.content.type == 'trackback') ? '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon icon-trackback" title="' + soy.$$escapeHtml("Track back") + '">' + soy.$$escapeHtml("Track back") + ':</a>' : '<a' + ((opt_data.linkColour) ? ' ' + soy.$$escapeHtml(opt_data.linkColour) : '') + ' href="' + soy.$$escapeHtml(opt_data.linkHref) + '" class="icon ' + soy.$$escapeHtml(opt_data.iconCss) + '" title="' + soy.$$escapeHtml(opt_data.iconTitle) + '">' + soy.$$escapeHtml(opt_data.iconTitle) + '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'soy/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Comments == 'undefined') { Confluence.Templates.Comments = {}; }


Confluence.Templates.Comments.displayReplyEditorLoadingContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="comment-threads"><li class="comment-thread">');
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId, 'parentId': opt_data.parentCommentId}, commenter: opt_data.commenter, state: 'loading', mode: 'reply'}, output);
  output.append('</li></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayTopLevelCommentEditorPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'add'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayEditEditorContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Comments.displayCommentEditorCommon({comment: {'ownerId': opt_data.contentId, 'id': opt_data.commentId}, commenter: opt_data.commenter, state: 'placeholder', mode: 'edit'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.editorLoadErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml(opt_data.message), '</p><p><a href="', soy.$$escapeHtml(opt_data.fallbackUrl), '">', soy.$$escapeHtml("Try again"), '</a></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayCommentEditorCommon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="quick-comment-container comment ', soy.$$escapeHtml(opt_data.mode), '">');
  Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}, output);
  output.append('<div class="quick-comment-body"><div class="quick-comment-loading-container" style="display:', (opt_data.state == 'loading') ? 'block' : 'none', ';"></div><div id="editor-messages"></div><div id="all-messages"></div><form style="display:', (opt_data.state == 'loading') ? 'none' : 'block', ';" class="quick-comment-form aui" method="post" ');
  switch (opt_data.mode) {
    case 'add':
      output.append('name="inlinecommentform" action="', soy.$$escapeHtml(""), '/pages/doaddcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '"');
      break;
    case 'edit':
      output.append('name="editcommentform" action="', soy.$$escapeHtml(""), '/pages/doeditcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '&commentId=', soy.$$escapeHtml(opt_data.comment.id), '"');
      break;
    case 'reply':
      output.append('name="threadedcommentform"  action="', soy.$$escapeHtml(""), '/pages/doaddcomment.action?pageId=', soy.$$escapeHtml(opt_data.comment.ownerId), '&parentId=', soy.$$escapeHtml(opt_data.comment.parentId), '"');
      break;
  }
  output.append(' >', (opt_data.mode == 'add') ? '<div title="' + soy.$$escapeHtml("Add a Comment") + '" class="quick-comment-prompt"><span>' + soy.$$escapeHtml("Write a comment\u2026") + '</span></div>' : '', '</form></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.userLogo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="comment-user-logo">');
  if (opt_data.userInfo.userName == null) {
    output.append('<img class="userLogo logo anonymous" src="', soy.$$escapeHtml("/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.31/_"), '/images/icons/profilepics/anonymous.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Anonymous"), '" title="', soy.$$escapeHtml("Anonymous"), '">');
  } else if (opt_data.userInfo.profilePicture.isDefault) {
    output.append('<a class="userLogoLink" data-username="', soy.$$escapeHtml(opt_data.userInfo.userName), '" href="', soy.$$escapeHtml(""), '/users/editmyprofilepicture.action" title="', soy.$$escapeHtml("Add a picture of yourself"), '"><img class="userLogo logo defaultLogo" src="', soy.$$escapeHtml("/s/en_GB/5637/e1ef10868e8fe2f234a1a0b171b01cde1d9717c4.31/_"), '/images/icons/profilepics/add_profile_pic.png" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml("Add a picture of yourself"), '"></a>');
  } else {
    output.append('<a class="userLogoLink" data-username="', soy.$$escapeHtml(opt_data.userInfo.userName), '" href="');
    Confluence.Templates.User.userLinkUrl({username: opt_data.userInfo.userName}, output);
    output.append('"><img class="userLogo logo" src="', soy.$$escapeHtml(opt_data.userInfo.profilePicture.path), '" alt="', soy.$$escapeHtml("User icon"), ': ', soy.$$escapeHtml(opt_data.userInfo.userName), '" title="', soy.$$escapeHtml(opt_data.userInfo.userName), '"></a>');
  }
  output.append('</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayComment = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.comment.parentId == 0 && opt_data.firstReply) {
    output.append('<div id="comments-section" class="pageSection group"><div class="section-header"><h2 id="comments-section-title" class="section-title">', soy.$$escapeHtml("1 Comment"), '</h2>');
    Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: true}, output);
    output.append('</div></div>');
  } else if (opt_data.firstReply) {
    Confluence.Templates.Comments.commentThread({comment: opt_data.comment, commenter: opt_data.commenter, highlight: opt_data.highlight, topLevel: false}, output);
  } else {
    Confluence.Templates.Comments.commentThreadItem({comment: opt_data.comment, commenter: opt_data.commenter, highlight: true}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentThread = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="comment-threads', (opt_data.topLevel) ? ' top-level" id="page-comments' : '', '">');
  Confluence.Templates.Comments.commentThreadItem(opt_data, output);
  output.append('</ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentThreadItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="comment-thread-', soy.$$escapeHtml(opt_data.comment.id), '" class="comment-thread">');
  Confluence.Templates.Comments.commentView(opt_data, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.commentView = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="comment', (opt_data.highlight == true) ? ' focused' : '', '" id="comment-', soy.$$escapeHtml(opt_data.comment.id), '">');
  Confluence.Templates.Comments.userLogo({userInfo: opt_data.commenter}, output);
  output.append('<div class="comment-header"><h4 class="author">', (opt_data.commenter.userName == null) ? soy.$$escapeHtml("Anonymous") : '<a href="' + soy.$$escapeHtml("") + '/display/~' + soy.$$escapeUri(opt_data.commenter.userName) + '" class="url fn confluence-userlink" data-username="' + soy.$$escapeHtml(opt_data.commenter.userName) + '">' + soy.$$escapeHtml(opt_data.commenter.displayName) + '</a>', '</h4></div><div class="comment-body"><div class="comment-content wiki-content">', opt_data.comment.html, '</div><div class="comment-actions">');
  Confluence.Templates.Comments.displayCommentActions({section: 'secondary', actions: opt_data.comment.secondaryActions, commentId: opt_data.comment.id}, output);
  Confluence.Templates.Comments.displayCommentActions({section: 'primary', actions: opt_data.comment.primaryActions, commentId: opt_data.comment.id}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Comments.displayCommentActions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="comment-actions-', soy.$$escapeHtml(opt_data.section), '">');
  if (opt_data.actions != null) {
    var itemList211 = opt_data.actions;
    var itemListLen211 = itemList211.length;
    for (var itemIndex211 = 0; itemIndex211 < itemListLen211; itemIndex211++) {
      var itemData211 = itemList211[itemIndex211];
      output.append('<li ', (itemData211.style != null) ? ' class="' + soy.$$escapeHtml(itemData211.style) + '"' : '', '><a ', (itemData211.tooltip != null) ? ' title="' + soy.$$escapeHtml(itemData211.tooltip) + '"' : '', ' href="', soy.$$escapeHtml(itemData211.url), '" ', (itemData211.id) ? ' id="' + soy.$$escapeHtml(itemData211.id) + '-' + soy.$$escapeHtml(opt_data.commentId) + '"' : '', '><span>', soy.$$escapeHtml(itemData211.label), '</span></a></li>\n');
    }
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/comment-display-manager.js' */
// TODO this should be merged with Confluence.Comments from comments.js in the core product.
// At the moment it is kept separate because having it in a plugin is better for dev speed.
// This script is dependent on templates in comments.soy
Confluence.CommentDisplayManager = (function($) {

    var createTemplateInjectionContext = function() {
        return {
            "contextPath": AJS.Meta.get("context-path"),
            "staticResourceUrlPrefix": AJS.Meta.get("static-resource-url-prefix")
        };
    };
    
    var createTemplateParameters = function(commenter, comment, highlight) {
        return {
            "comment": comment,
            "commenter": commenter,
            "highlight": highlight,
            "context": createTemplateInjectionContext()
        };
    };
    
    return {

        /**
         * Update the comments section heading if it exists with the current number
         * of comments.
         */
        _updateCommentSectionTitle: function() {
            var $title = $("#comments-section-title");
            if ($title.length == 0) {
                return;
            }

            var count = this.commentCount();
            if (count == 1) {
                $title.text("1 Comment");
            } else {
                $title.text(AJS.format("{0} Comments", count));
            }
        },
        
        /**
         * Add and focus the display on a new comment.
         * 
         * @param commenter the person making the comment. This is an object with the following structure:
         * {
         *     userName:       (string)
         *     displayName:    (string)
         *     profilePicture: {
         *         isDefault: (boolean)
         *         path:      (string)
         *     }
         * }
         * @param comment the comment. This is an object with the following structure:
         * {
         *     id:               (number)
         *     html:             (string)
         *     ownerId:          (number)
         *     parentId:         (number) 0 indicates a top level comment
         *     primaryActions:    (array of actions) may be empty
         *     secondaryActions: (array of actions) may be empty
         * }
         * @param highlight true if you want the comment to appear highlighted
         * @param keepFocus true if you don't want to clear the focus
         * @returns a jQuery wrapped DOM Node which is the top container for the newly added comment.
         */
        addComment: function(commenter, comment, highlight, keepFocus) {
            var templateParams = createTemplateParameters(commenter, comment, highlight);
            
            if (!this.hasComments()) {
                templateParams.firstReply = true;
                var template = Confluence.Templates.Comments.displayComment(templateParams);
                AJS.$("#comments-section").prepend(template);
            } else {
                
                var $appendLocation;
                
                if (comment.parentId == 0) {
                    templateParams.firstReply = false;
                    $appendLocation = AJS.$("#comments-section .comment-threads.top-level");                    
                } else {
                    var $commentThread = AJS.$("#comment-thread-" + comment.parentId);
                    var $replyThread = $commentThread.children(".commentThreads");
                    
                    if ($replyThread.length) {
                        templateParams.firstReply = false;
                        $appendLocation = $replyThread;
                    } else {
                        templateParams.firstReply = true;
                        $appendLocation = $commentThread;
                    }
                }
                if (!keepFocus) {
                    this.clearFocus();
                }

                var $renderedTemplate = $(Confluence.Templates.Comments.displayComment(templateParams));
                $renderedTemplate.addClass('fadeInComment');
                $appendLocation.append($renderedTemplate);
                this._updateCommentSectionTitle();
            }
            
            Confluence.Comments.bindRemoveConfirmation(comment.id);
            var $insertedComment = this.getCommentNode(comment.id);
            // Scroll to the newly added comment.
            $insertedComment.scrollToElement();
            return $insertedComment;
        },        

        /**
         * Add or focus the display on a new comment, or update an existing comment.
         *
         * @see Confluence.CommentDisplayManager.addComment for more information.
         */
        addOrUpdateComment: function(commenter, comment, highlight, keepFocus) {
            var oldComment = this.getCommentNode(comment.id);
            if (oldComment) {
                oldComment.find('.comment-content').html(comment.html);
                if (!keepFocus) {
                    this.clearFocus();
                }
                if (highlight) {
                    oldComment.addClass('focused');
                }
                oldComment.addClass('fadeInComment');
                oldComment.scrollToElement();
                return oldComment;
            } else {
                return this.addComment.apply(this, arguments);
            }
        },

        /**
         * @return true if the comment section is visible.
         */
        isVisible : function() {
            return !$('#page-comments').hasClass("hidden");
        },
        
        /**
         * @return true if there are any comments displayed on the page.
         */
        hasComments: function() {
            return this.commentCount() > 0;
        },
        
        /**
         * @return the number of comments on the page.
         */
        commentCount: function() {
            return AJS.$("#comments-section .comment").not(".quick-comment-container").length;
        },
        
        /**
         * Remove the focus from all comments
         */
        clearFocus: function() {
            $(".comment").removeClass("focused");
        },
        
        /**
         * @param commentId the id of the comment required
         * @returns the jQuery wrapped DOM node for the top div of the identified comment or null if not found.
         */
        getCommentNode: function(commentId) {
            var $node = $("#comment-" + commentId);
            
            if (!$node.length) {
                return null;
            } else {
                return $node;
            }
        },
        
        /**
         * Get the id of the comment the indicated one is a reply to. If the comment is not a reply
         * then return 0.
         * 
         * @param commentId the id of the comment whos parent is required
         * @return the id of the parent comment or 0 if the comment is not a reply.
         */
        getParentId: function(commentId) {
            var $comment = getCommentNode(commentId);
            
            if ($comment != null) {
                var $parentComment = $comment.closest("div.comment");
                if ($parentComment.length) {
                    var idStr = $parentComment.attr("id");
                    var id = /\d+/.exec(idStr);
                    return parseInt(id);
                }
            }
            
            return 0;
        }
    };    
})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-page', location = 'jscripts/scroll-util.js' */
AJS.$(function($) {

    $.fn.extend({
        scrollToElement: function() {
            if(!this.scrollWindowToElement()) {
                // try and scroll the closest overflow set parent (e.g. Documentation Theme)
                this.scrollOverflowContainerToElement();
            }
            return this;
        },

        /**
         * The default theme has scrollbars on the window and therefore this
         * method can make sure the supplied element is visible. However other themes don't scroll the
         * window so this method will return true if it successfully scrolls and false if it is unable
         * to move the window.
         */
        scrollWindowToElement: function() {
            var $element = this;
            function getScrollY() {
                if ('pageYOffset' in window) {  // all browsers, except IE before version 9
                    return window.pageYOffset;
                } else { // Internet Explorer before version 9
                    // we ignore zoom factor which was only an issue before IE8
                    return document.documentElement.scrollTop;
                }
            };

            var scrollY = getScrollY();

            var windowHeight;
            if (typeof(window.innerWidth) == 'number') {
                windowHeight = window.innerHeight;
            } else if (document.documentElement && document.documentElement.clientWidth) {
                // IE 6+ in 'standards compliant mode'
                windowHeight = document.documentElement.clientHeight;
            } else {
                // something old and creaky - just try to make sure the element will be visible and return true so we consider this successful
                $element[0].scrollIntoView(false);
                return true;
            }

            var elementVerticalPosition = $element.offset().top;
            var elementHeight = $element.height();

            var extra = 40; // the calculation seems to be off by 40 pixels - I don't know why (perhaps padding on $element?)

            if ((elementVerticalPosition + elementHeight + extra) > scrollY + windowHeight) {
                $element[0].scrollIntoView(false); // align to the bottom of the viewport
                window.scrollBy(0, extra);
                return scrollY != getScrollY(); // did we successfully scroll the window?
            } else {
                // no scrolling was necessary
                return true;
            }
        },

        /**
         * Find the closest parent with the CSS property overflow set to either 'scroll' or 'auto' and
         * scroll this to show the element.
         *
         * @return true if successfully found a parent to scroll.
         */
        scrollOverflowContainerToElement: function() {
            var $element = this;
            var $parent = null;

            $element.parents().each(function(index) {
                var overflow = AJS.$(this).css("overflow");
                if (overflow == "auto" || overflow == "scroll") {
                    $parent = AJS.$(this);
                    return false;
                }
            });

            if (!$parent) {
                return false;
            }

            var height = $parent.height();

            var extra = 40; // the calculation seems to be off by 40 pixels - I don't know why (perhaps padding on $element?)
            var elementVerticalPosition = $element.offset().top;
            var elementHeight = $element.height();
            var differential = height - (elementVerticalPosition + elementHeight + extra);

            if (differential < 0) {
                $parent[0].scrollTop = $parent[0].scrollTop - differential;
            }

            return true;
        }
    });
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'templates/quick-reload.soy' */
// This file was automatically generated from quick-reload.soy.
// Please don't edit this file by hand.

if (typeof QuickReload == 'undefined') { var QuickReload = {}; }
if (typeof QuickReload.Templates == 'undefined') { QuickReload.Templates = {}; }


QuickReload.Templates.notice = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice aui-message warning"></div>');
  return opt_sb ? '' : output.toString();
};


QuickReload.Templates.noticeItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="qr-notice-item"><span class="qr-notice-text"></span>&nbsp;&nbsp;<a class="qr-notice-show" href="#">', soy.$$escapeHtml(opt_data.show), '</a>&nbsp;&nbsp;<a class="qr-notice-ignore" href="#">', soy.$$escapeHtml("Ignore"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-comments.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(b){var c=Confluence.CommentDisplayManager;function a(d){return d.comment.id}Confluence.QuickReload.Comments=function(){var d=[];return{property:"comments",singleText:function(f,e){return AJS.format("New comment from {0}",e(f.commenter))},manyText:function(e){return AJS.format("{0} new comments",e.length)},showText:function(){return "Show"},ignoreOnce:function(e){d.push(e)},filterNewResults:function(e,g){if(g.length===0){return g}var f=b.map(e,a);return b(g).filter(function(j,l){var h=a(l);if(b.inArray(h,f)>=0){return false}var k=b.inArray(h,d);if(k>=0){d.splice(k,1);return false}return true}).splice(0)},update:function(e){c.clearFocus();b.map(e,function(f){var h=c.getCommentNode(a(f))!=null;var g=c.addOrUpdateComment(f.commenter,f.comment,true,true);if(Confluence.Likes&&!h){Confluence.Likes.appendAction(b(g));Confluence.Likes.updateComment(b(g),{})}})}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-page.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(a){Confluence.QuickReload.Page=function(){return{property:"page",singleText:function(c,b){return AJS.format("New edit by {0}",b(c.editor))},manyText:function(b){return AJS.format("{0} new edits",b.length)},showText:function(){return "Reload"},filterNewResults:function(b,c){return c},update:function(b){window.location.reload()}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-alert.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(b){var a=QuickReload.Templates;Confluence.QuickReload.Notice=function(){var c=b(a.notice());c.appendTo("body");return{addOrUpdateText:function(h,k,e,g){var j="qr-notice-type-"+h;var d=c.find("."+j);if(d.length===0){d=b(a.noticeItem({show:e})).appendTo(c);d.addClass(j);var i=this;var f=function(l){if(c.find(".qr-notice-text").length==1){i.hide(function(){d.remove()})}else{d.remove()}l.preventDefault()};d.find(".qr-notice-ignore").click(f);d.find(".qr-notice-show").click(f).click(g)}d.find(".qr-notice-text").text(k)},bind:function(d,e){return c.bind(d,e)},show:function(){c.animate({opacity:"show"},600)},hide:function(d){c.trigger("close");c.animate({opacity:"hide"},600,d)}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload-timer.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(a){Confluence.QuickReload.SmartTimer=function(k,f){var n=a.extend({min:1000*30,max:1000*60*60,inactivity:1000*60*2},f);var h=3;function e(){return new Date().getTime()}var m=e();var d=null;function l(){return e()-m}function c(){if(!d){return}var o=l()>n.inactivity;m=e();if(o){k();b()}}function i(p){var o=function(){if(!document.hidden){p()}};document.addEventListener("visibilitychange",o,false);a(window).focus(p);a("body").click(p);a(window).scroll(p)}function g(p,o,r){var q=Math.max(Math.min(o,r),p);return isNaN(q)?p:q}function j(){var o=(document.hidden?h:1)*Math.ceil(l()/n.inactivity);return g(1,n.max/n.min,o)}function b(){if(d){clearTimeout(d)}d=setTimeout(function(){k();b()},n.min*j())}i(c);return{start:function(){k();b()},stop:function(){clearTimeout(d);d=null}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickreload:quick-reload', location = 'js/quick-reload.js' */
Confluence.QuickReload=Confluence.QuickReload||{};AJS.toInit(function(i){var b={404:"not found - the plugin has been probably been removed or disabled from Confluence",500:"generic server error",503:"service unavailable",504:"gateway timeout"};if(AJS.DarkFeatures.isEnabled("quickreload.disabled")){return}if(!Confluence.CommentDisplayManager){return}var d=AJS.Meta.get("page-id");if(d==undefined){return}var m=document.title;var g=new Confluence.QuickReload.Comments();var e=[g,new Confluence.QuickReload.Page()];var n=new Confluence.QuickReload.Notice();n.bind("close",function(){document.title=m});var k=function(q){document.title=q+m};var p=function(q){if(q.results.length===1){return q.singleText(q.results[0],function(r){return r.displayName})}return q.manyText(q.results)};var c=i("meta[name='confluence-request-time']").attr("content")||new Date().getTime();var o=0;var f=function(){k(o>0?"("+o+") ":"")};function l(){return i("body").hasClass("contenteditor")}function h(r,q){return Confluence.getContextPath()+"/rest/quickreload/latest/"+r+"?since="+encodeURIComponent(q)}Confluence.QuickReload.update=function(){if(l()){Confluence.QuickReload.disable();return}i.ajax({type:"GET",url:h(d,c),dataType:"json"}).done(function(s,t,q){if(q.status===204){return}var r=false;c=s.time;i.map(e,function(z){var u=s[z.property];z.results=z.results||[];if(u){var A=z.results.concat(z.filterNewResults(z.results,u));var w=A.length-z.results.length;var x=w>0;z.results=A;if(x){var v=false;function y(){z.update(z.results);o-=z.results.length;z.results=[];v||f();Confluence.CommentDisplayManager._updateCommentSectionTitle()}if(AJS.DarkFeatures.isEnabled("confluence.quick-reload-automated")){v=true;return y()}n.addOrUpdateText(z.property,p(z),z.showText(),y)}r|=x;o+=w}});if(r){n.show();f()}}).fail(function(r){r=r||{};var q=b[r.status];if(q){Confluence.QuickReload.disable();AJS.log('Quick comment reload plugin has been disabled in this page due to a server error: "'+q+'". Please refresh the page to get it back.')}})};var j={};if(AJS.DarkFeatures.isEnabled("confluence.quick-reload-automated")){j.min=1000*5}var a=new Confluence.QuickReload.SmartTimer(Confluence.QuickReload.update,j);Confluence.QuickReload.disable=function(){a.stop();n.hide()};Confluence.QuickReload.enable=function(){a.start()};a.start();AJS.bind("page.commentAddedOrUpdated",function(q,r){g.ignoreOnce(r.commentId)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (! opt_data.issueStatus) {
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="', soy.$$escapeHtml("No issue status information was provided"), '"></span>');
  } else if (opt_data.issueStatus.statusCategory) {
    JIRA.Template.Util.Issue.Status.issueStatus(opt_data, output);
  } else {
    JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}, output);
  }
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<img src="', soy.$$escapeHtml(opt_data.iconUrl), '" width="16" height="16" alt="', soy.$$escapeHtml(opt_data.name), '" title="', soy.$$escapeHtml(opt_data.name), (opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '', '" class="jira-issue-status-icon">', (! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth}, output);
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = new soy.StringBuilder('<span class="jira-issue-status-tooltip-title">', soy.$$escapeHtml(opt_data.name), '</span>', (opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  tooltipContent__soy47 = tooltipContent__soy47.toString();
  output.append('<span class=" jira-issue-status-lozenge aui-lozenge ');
  JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data, output);
  output.append((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '', (opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '', ' jira-issue-status-lozenge-max-width-', soy.$$escapeHtml(maxWidth__soy46), '" data-tooltip="', soy.$$escapeHtml(tooltipContent__soy47), '">', soy.$$escapeHtml(opt_data.name), '</span>');
  return opt_sb ? '' : output.toString();
};


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('jira-issue-status-lozenge-', soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray'), ' ', (opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = 'soy/jira-metadata.soy' */
// This file was automatically generated from jira-metadata.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Metadata == 'undefined') { Confluence.Templates.Metadata = {}; }
if (typeof Confluence.Templates.Metadata.JIRA == 'undefined') { Confluence.Templates.Metadata.JIRA = {}; }


Confluence.Templates.Metadata.JIRA.metadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content"><h2 class="title">', soy.$$escapeHtml("JIRA links"), '</h2><div class="items-section">');
  var groupList6 = opt_data.groups;
  var groupListLen6 = groupList6.length;
  for (var groupIndex6 = 0; groupIndex6 < groupListLen6; groupIndex6++) {
    var groupData6 = groupList6[groupIndex6];
    if (groupData6.items.length) {
      switch (groupData6.type) {
        case 'ISSUES':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Issues", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'SPRINTS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Sprints", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'VERSIONS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Versions", type: groupData6.type, links: groupData6.links}, output);
          break;
        case 'EPICS':
          Confluence.Templates.Metadata.JIRA.renderGroup({items: groupData6.items, headingText: "Epics", type: groupData6.type, links: groupData6.links}, output);
          break;
      }
    }
  }
  output.append('</div>');
  Confluence.Templates.Metadata.JIRA.renderAuthPrompts({appLinks: opt_data.unauthorisedAppLinks}, output);
  Confluence.Templates.Metadata.JIRA.renderJiraErrors(opt_data, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.featureDiscovery = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-feature-discovery"><h2>', soy.$$escapeHtml("View related JIRA items here"), '</h2><p>', soy.$$escapeHtml("Now you can see which epics, sprints, versions and issues relate to this page."), '</p><div class="aui-toolbar2" role="toolbar"><div class="aui-toolbar2-inner">');
  aui.buttons.button({text: "Show me", extraClasses: 'showme'}, output);
  aui.buttons.button({text: "Don\x27t show again", type: 'link', extraClasses: 'close'}, output);
  output.append('</div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.nometadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content">');
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("JIRA links cannot be displayed. Either you do not have correct JIRA permissions or the links have been removed.") + '</p>'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderAuthPrompts = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.appLinks.length) {
    var param66 = new soy.StringBuilder();
    if (opt_data.appLinks.length == 1) {
      var appLink__soy69 = opt_data.appLinks[0];
      param66.append('<p>', AJS.format("{0}Login \x26amp; Approve{1} to retrieve data from {2}",'<a class="jira-metadata-auth-link" href="#" data-href="' + appLink__soy69.authorisationUrl + '">','</a>',appLink__soy69.htmlSafeName), '</p>');
    } else {
      param66.append('<p>', soy.$$escapeHtml("Authenticate to retrieve data from the following instances:"), '</p>');
      var appLinkList78 = opt_data.appLinks;
      var appLinkListLen78 = appLinkList78.length;
      for (var appLinkIndex78 = 0; appLinkIndex78 < appLinkListLen78; appLinkIndex78++) {
        var appLinkData78 = appLinkList78[appLinkIndex78];
        param66.append('<div><a class="jira-metadata-auth-link" href="#" data-href="', soy.$$escapeHtml(appLinkData78.authorisationUrl), '">', soy.$$escapeHtml(appLinkData78.name), '</a></div>');
      }
    }
    aui.message.hint({content: param66.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="jira-metadata-section ', soy.$$escapeHtml(opt_data.type), '-section"><div class="section-label"><span class="icon"></span><span>', soy.$$escapeHtml(opt_data.headingText), '</span></div><ul class="jira-metadata-list jira-', soy.$$escapeHtml(opt_data.type), '-list">');
  var itemList94 = opt_data.items;
  var itemListLen94 = itemList94.length;
  for (var itemIndex94 = 0; itemIndex94 < itemListLen94; itemIndex94++) {
    var itemData94 = itemList94[itemIndex94];
    output.append('<li class="jira-metadata-item"><span class="item-label"><a href="', soy.$$escapeHtml(""), '/plugins/servlet/jira-metadata/redirect?u=', soy.$$escapeUri(itemData94.url), '&t=', soy.$$escapeHtml(opt_data.type), '" title="', soy.$$escapeHtml(itemData94.name), '">', soy.$$escapeHtml(itemData94.name), '</a>');
    if (itemData94.status) {
      output.append('&nbsp;');
      if (itemData94.status.statusCategory) {
        JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: itemData94.status, isSubtle: true}, output);
      } else {
        output.append('<span class="item-status">(', soy.$$escapeHtml(itemData94.status.name), ')</span>');
      }
    }
    output.append('</span>', (itemData94.description != '') ? '<span class="item-subtext">' + soy.$$escapeHtml(itemData94.description) + '</span>' : '', '</li>');
  }
  output.append('</ul><ul class="jira-metadata-list ', soy.$$escapeHtml(opt_data.type), '-more-link">');
  var linkList130 = opt_data.links;
  var linkListLen130 = linkList130.length;
  for (var linkIndex130 = 0; linkIndex130 < linkListLen130; linkIndex130++) {
    var linkData130 = linkList130[linkIndex130];
    output.append('<li class="jira-metadata-item"><a href="', soy.$$escapeHtml(""), '/plugins/servlet/jira-metadata/redirect?u=', soy.$$escapeUri(linkData130.url), '&t=', soy.$$escapeHtml(opt_data.type), '&more">', soy.$$escapeHtml(AJS.format("View {0} more in {1}",linkData130.numItems,linkData130.appName)), '</a></li>');
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.loadingMetadata = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog"><h2 class="title">', soy.$$escapeHtml("JIRA links"), '</h2><div class="spinner-container"><div class="spinner"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.renderJiraErrors = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.errors.length == 1) {
    var error__soy150 = opt_data.errors[0];
    aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to retrieve JIRA metadata.") + ' ' + soy.$$escapeHtml(error__soy150.errorMessage) + '</p>'}, output);
  } else if (opt_data.errors.length > 1) {
    var param159 = new soy.StringBuilder('<p>', soy.$$escapeHtml("Unable to retrieve JIRA metadata. The following errors occurred:"), '</p><ul>');
    var errorList163 = opt_data.errors;
    var errorListLen163 = errorList163.length;
    for (var errorIndex163 = 0; errorIndex163 < errorListLen163; errorIndex163++) {
      var errorData163 = errorList163[errorIndex163];
      param159.append('<li>', soy.$$escapeHtml(errorData163.errorMessage), '</li>');
    }
    param159.append('</ul>');
    aui.message.warning({content: param159.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Metadata.JIRA.unknownError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="jira-metadata-dialog" class="rendered-content">');
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to retrieve JIRA metadata. Could not connect to Confluence") + '</p>'}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-metadata:confluence-jira-metadata-resources', location = '/js/jira-metadata.js' */
AJS.toInit(function(h){var i="com.atlassian.confluence.plugins.confluence-jira-metadata";var s=false;var o;var l;var q="jira-metadata-dialog";var g=h("#content-metadata-jira");var t;var e="jira-metadata-discovery";var r=AJS.Meta.get("jira-metadata-count");var k="linked-issues-dropdown";if(r>0){p(r,AJS.Meta.get("jira-metadata-count-incomplete"))}else{if(r==-1){h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata/aggregate?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",cache:false,success:function(u){if(u.count>0){p(u.count,u.incomplete)}}})}}function p(v,u){f(v,u);g.removeClass("hidden");if(b()){o=AJS.InlineDialog(g,q,function(x,w,y){AJS.trigger("analytics",{name:"confluence.jira.metadata.expanded"});if(!l||!s){l=x;y();a(x)}else{y()}return false},{hideDelay:null});g.click(function(){if(h("#"+q).is(":visible")){o.hide()}})}if(g&&j()){m();g.one("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k)})}}function f(v,u){if(!u){h("#content-metadata-jira > span").text(v==1?"1 JIRA link":AJS.format("{0} JIRA links",v))}}function b(){return !g.attr("href")}function m(){t=AJS.InlineDialog(g,e,function(v,u,w){v.html(Confluence.Templates.Metadata.JIRA.featureDiscovery());v.find(".showme").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide();o.show()});v.find(".close").on("click",function(){Confluence.FeatureDiscovery.forPlugin(i).markDiscovered(k);t.hide()});w()},{noBind:true,closeOthers:false,hideDelay:null});t.show();Confluence.FeatureDiscovery.forPlugin(i).addDiscoveryView(k)}function j(){return !AJS.Meta.get("blueprint-index-popup-key")&&Confluence.FeatureDiscovery.forPlugin(i).shouldShow(k)}function a(){d();l.html(Confluence.Templates.Metadata.JIRA.loadingMetadata());l.find(".spinner").spin("medium");h.ajax({url:AJS.contextPath()+"/rest/jira-metadata/1.0/metadata?pageId="+AJS.Meta.get("page-id"),type:"GET",dataType:"json",contentType:"application/json",error:function(u){c();l.html(Confluence.Templates.Metadata.JIRA.unknownError())},success:function(v){c();s=true;f(v.count,false);var w;if(v.count===0&&!(v.unauthorisedAppLinks&&v.unauthorisedAppLinks.length>0)&&v.errors.length==0){AJS.trigger("analytics",{name:"confluence.jira.metadata.error.no-metadata"});w=Confluence.Templates.Metadata.JIRA.nometadata()}else{w=Confluence.Templates.Metadata.JIRA.metadata(v)}var x=l.height();l.html(w);var u=l.height();l.find("#"+q+" > *").not("h2").css("opacity",0).animate({opacity:1},350,"easeInOutQuad");l.css({overflow:"hidden",height:x+"px"}).animate({height:u+"px"},350,"easeInOutQuad",function(){l.css({overflow:"",height:""})});n()},complete:function(){h("#"+q+" .icon-close").click(function(u){u.stopPropagation();h(this).closest(".closable").remove()})}})}function n(){h(".jira-metadata-auth-link").click(function(u){u.preventDefault();AppLinks.authenticateRemoteCredentials(h(this).data("href"),a,function(){})})}function d(){if(l&&l.height()>0){l.css("height",l.height())}}function c(){l&&l.css("height","")}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:blueprint-first-time-tooltip-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/first-time-tooptip.js' */
AJS.bind("sidebar.finished-loading",function(){var a=AJS.Meta.get("blueprint-index-popup-key");AJS.debug("Index key for "+a);if(a){Confluence.Blueprint.showIndexPagePopup(a)}});AJS.toInit(function(a){Confluence.Blueprint.showIndexPagePopup=function(c){var e=function(j){return function(m,k,l){m.html(Confluence.Templates.Blueprints.sidebarIndexPagePopup({indexPageTitle:j.toLowerCase()}));l()}};var b=AJS.$(AJS.$("li.blueprint."+c)[0]);var i=b.text();var h=AJS.$(".icon",b);var g="blueprintIndexSidebarPopup";var d=AJS.InlineDialog(h.is(":visible")?h:AJS.$(".acs-nav-sections .quick-links-section"),g,e(i),{addActiveClass:false,hideDelay:null,noBind:true});AJS.$(document).bind("showLayer",function(j){var k=g+".inline-dialog-check";a("body").unbind("click."+k)});d.show();var f=function(j){AJS.$(document).on("click","#dismiss-index-popup",function(){j.hide();return false})}(d);AJS.bind("quickedit.success",function(){d.hide()})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/js/create-from-template-macro.js' */
AJS.toInit(function(b){var a=b(".create-from-template-button");a.each(function(){var d=b(this);if(d.attr("aria-disabled")=="true"){var c={live:true,gravity:"n",title:"data-tooltip",delayIn:250,delayOut:0};d.tooltip(c)}else{d.click(function(){d.addClass("launching-dialog");Confluence.Blueprint.Dialog.launch(d.data());return false})}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-create-content-plugin:create-from-template-resources', location = 'com/atlassian/confluence/plugins/createcontent/soy/create-from-template-macro.soy' */
// This file was automatically generated from create-from-template-macro.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Blueprints == 'undefined') { Confluence.Templates.Blueprints = {}; }
if (typeof Confluence.Templates.Blueprints.CreateFromTemplate == 'undefined') { Confluence.Templates.Blueprints.CreateFromTemplate = {}; }


Confluence.Templates.Blueprints.CreateFromTemplate.macroTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class=\'aui-button create-from-template-button\'', (! opt_data.hasCreatePermission) ? 'aria-disabled=\'true\' data-tooltip="' + soy.$$escapeHtml("Sorry, you don\x27t have permission to create content. Contact your space administrator to request access.") + '"' : '', 'data-space-key=\'', soy.$$escapeHtml(opt_data.spaceKey), '\' href=\'', soy.$$escapeHtml(opt_data.createContentUrl), '\'', (opt_data.title) ? 'data-title=\'' + soy.$$escapeHtml(opt_data.title) + '\'' : '', (opt_data.templateId) ? 'data-template-id=\'' + soy.$$escapeHtml(opt_data.templateId) + '\'' : '', (opt_data.contentBlueprintId) ? 'data-content-blueprint-id=\'' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '\'' : '', '>', soy.$$escapeHtml(opt_data.buttonLabel), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/tablesorter-date-parser.js' */
(function(A){A(function(){A.tablesorter.addParser({id:"dateAttributeParser",is:function(B,D,C){return A(C).is(".content-report-table-macro .modified")
},format:function(B,D,C,E){return A(C).attr("data-sortable-date")
},type:"numeric"})
})
})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/soy/content-report-table.soy' */
// This file was automatically generated from content-report-table.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Plugins == 'undefined') { Confluence.Templates.Plugins = {}; }
if (typeof Confluence.Templates.Plugins.ContentReport == 'undefined') { Confluence.Templates.Plugins.ContentReport = {}; }


Confluence.Templates.Plugins.ContentReport.contentReportTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var hasSocialColumn__soy3 = opt_data.showCommentsCount || opt_data.showLikesCount;
  if (opt_data.results.length == 0 && opt_data.blueprintKey) {
    output.append('<div class="blueprint-blank-experience ', soy.$$escapeHtml(opt_data.blueprintKey), '"><div class="content"><h2>', soy.$$escapeHtml(opt_data.blankTitle), '</h2><p>', soy.$$escapeHtml(opt_data.blankDescription), '</p></div>', (opt_data.createButtonLabel) ? '<p><button class="create-from-template-button aui-button aui-button-primary" data-space-key="' + soy.$$escapeHtml(opt_data.dataSpaceKey) + '" data-content-blueprint-id="' + soy.$$escapeHtml(opt_data.contentBlueprintId) + '" href="' + soy.$$escapeHtml(opt_data.createContentUrl) + '" >' + soy.$$escapeHtml(opt_data.createButtonLabel) + '</button></p>' : '', '</div>');
  } else {
    output.append('<table class="aui content-report-table-macro', (hasSocialColumn__soy3) ? ' with-extra-columns' : '', '"', (opt_data.analyticsKey) ? ' data-analytics-key="' + soy.$$escapeHtml(opt_data.analyticsKey) + '"' : '', '><thead><tr><th>', soy.$$escapeHtml("Title"), '</th><th>', soy.$$escapeHtml("Creator"), '</th><th>', soy.$$escapeHtml("Modified"), '</th></tr></thead><tbody>');
    var resultList43 = opt_data.results;
    var resultListLen43 = resultList43.length;
    if (resultListLen43 > 0) {
      for (var resultIndex43 = 0; resultIndex43 < resultListLen43; resultIndex43++) {
        var resultData43 = resultList43[resultIndex43];
        output.append('<tr><td class="title"><a href="', soy.$$escapeHtml(resultData43.urlPath), '">', soy.$$escapeHtml(resultData43.title), '</a></td><td class="creator">');
        Confluence.Templates.User.usernameLink({canView: opt_data.canViewProfiles, username: resultData43.creatorName, fullName: resultData43.creatorFullName, contextPath: opt_data.contextPath}, output);
        output.append('</td><td class="modified" data-sortable-date="', soy.$$escapeHtml(resultData43.sortableDate), '">', soy.$$escapeHtml(resultData43.friendlyModificationDate), '</td>', (hasSocialColumn__soy3) ? '<td class="social">' + ((opt_data.showCommentsCount && resultData43.commentCount != 0) ? '<span class="icon icon-comment"></span> <span class="count">' + soy.$$escapeHtml(resultData43.commentCount) + '</span>' : '') + ((opt_data.showLikesCount && resultData43.likeCount != 0) ? '<span class="icon icon-like"></span> <span class="count">' + soy.$$escapeHtml(resultData43.likeCount) + '</span>' : '') + '</td>' : '', '</tr>');
      }
    } else {
      output.append('<tr><td colspan="3">', soy.$$escapeHtml("No content found."), '</td></tr>');
    }
    output.append('</tbody></table>', (opt_data.searchMoreResultsLinkUrl) ? '<div class="more-results"><a href="' + soy.$$escapeHtml("") + soy.$$escapeHtml(opt_data.searchMoreResultsLinkUrl) + '">' + soy.$$escapeHtml("Find more results") + '</a></div>' : '');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-content-report-plugin:resources', location = 'com/atlassian/confluence/plugins/content_report/js/content-report-analytics.js' */
AJS.$(function(A){A(".content-report-table-macro").on("click",".title a",function(D){var B=A(D.delegateTarget).data("analytics-key");
if(B){var C="content-report-table-macro.content-click."+B;
AJS.trigger("analytics",{name:C})
}})
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mentions-plugin:help-dialog-extension', location = 'js/help-dialog.js' */
AJS.toInit(function(a){Confluence.KeyboardShortcuts&&Confluence.KeyboardShortcuts.Autoformat.push({action:"@",context:"autoformat.autocomplete",description:"Mention"})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.js' */
(function(){var f=0,k=[],m={},i={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g,b,c=window.setTimeout,d={},e;function h(){this.returnValue=false}function j(){this.cancelBubble=true}(function(n){var o=n.split(/,/),p,r,q;for(p=0;p<o.length;p+=2){q=o[p+1].split(/ /);for(r=0;r<q.length;r++){i[q[r]]=o[p]}}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.spreadsheetml.template,xltx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe");var g={VERSION:"@@version@@",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:i,ua:(function(){var r=navigator,q=r.userAgent,s=r.vendor,o,n,p;o=/WebKit/.test(q);p=o&&s.indexOf("Apple")!==-1;
n=window.opera&&window.opera.buildNumber;return{windows:navigator.platform.indexOf("Win")!==-1,ie:!o&&!n&&(/MSIE/gi).test(q)&&(/Explorer/gi).test(r.appName),webkit:o,gecko:!o&&/Gecko/.test(q),safari:p,opera:!!n}}()),extend:function(n){g.each(arguments,function(o,p){if(p>0){g.each(o,function(r,q){n[q]=r})}});return n},getElement:function(n){return n&&n.nodeType==1?n:document.getElementById(n)},cleanName:function(n){var o,p;p=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(o=0;o<p.length;o+=2){n=n.replace(p[o],p[o+1])}n=n.replace(/\s+/g,"_");n=n.replace(/[^a-z0-9_\-\.]+/gi,"");return n},addRuntime:function(n,o){o.name=n;k[n]=o;k.push(o);return o},guid:function(){var n=new Date().getTime().toString(32),o;for(o=0;o<5;o++){n+=Math.floor(Math.random()*65535).toString(32)}return(g.guidPrefix||"p")+n+(f++).toString(32)},buildUrl:function(o,n){var p="";g.each(n,function(r,q){p+=(p?"&":"")+encodeURIComponent(q)+"="+encodeURIComponent(r)});if(p){o+=(o.indexOf("?")>0?"&":"?")+p}return o},each:function(q,r){var p,o,n;if(q){p=q.length;if(p===b){for(o in q){if(q.hasOwnProperty(o)){if(r(q[o],o)===false){return}}}}else{for(n=0;n<p;n++){if(r(q[n],n)===false){return}}}}},formatSize:function(n){if(n===b||/\D/.test(n)){return g.translate("N/A")}if(n>1073741824){return Math.round(n/1073741824,1)+" GB"}if(n>1048576){return Math.round(n/1048576,1)+" MB"}if(n>1024){return Math.round(n/1024,1)+" KB"}return n+" b"},getPos:function(o,s){var t=0,r=0,v,u=document,p,q;o=o;s=s||u.body;function n(B){var z,A,w=0,C=0;if(B){A=B.getBoundingClientRect();z=u.compatMode==="CSS1Compat"?u.documentElement:u.body;w=A.left+z.scrollLeft;C=A.top+z.scrollTop}return{x:w,y:C}}if(o&&o.getBoundingClientRect&&(navigator.userAgent.indexOf("MSIE")>0&&u.documentMode!==8)){p=n(o);q=n(s);return{x:p.x-q.x,y:p.y-q.y}}v=o;while(v&&v!=s&&v.nodeType){t+=v.offsetLeft||0;
r+=v.offsetTop||0;v=v.offsetParent}v=o.parentNode;while(v&&v!=s&&v.nodeType){t-=v.scrollLeft||0;r-=v.scrollTop||0;v=v.parentNode}return{x:t,y:r}},getSize:function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}},parseSize:function(n){var o;if(typeof(n)=="string"){n=/^([0-9]+)([mgk]?)$/.exec(n.toLowerCase().replace(/[^0-9mkg]/g,""));o=n[2];n=+n[1];if(o=="g"){n*=1073741824}if(o=="m"){n*=1048576}if(o=="k"){n*=1024}}return n},xmlEncode:function(n){return n?(""+n).replace(l,function(o){return a[o]?"&"+a[o]+";":o}):n},toArray:function(p){var o,n=[];for(o=0;o<p.length;o++){n[o]=p[o]}return n},addI18n:function(n){return g.extend(m,n)},translate:function(n){return m[n]||n},isEmptyObj:function(n){if(n===b){return true}for(var o in n){return false}return true},hasClass:function(p,o){var n;if(p.className==""){return false}n=new RegExp("(^|\\s+)"+o+"(\\s+|$)");return n.test(p.className)},addClass:function(o,n){if(!g.hasClass(o,n)){o.className=o.className==""?n:o.className.replace(/\s+$/,"")+" "+n}},removeClass:function(p,o){var n=new RegExp("(^|\\s+)"+o+"(\\s+|$)");p.className=p.className.replace(n,function(r,q,s){return q===" "&&s===" "?" ":""})},getStyle:function(o,n){if(o.currentStyle){return o.currentStyle[n]}else{if(window.getComputedStyle){return window.getComputedStyle(o,null)[n]}}},addEvent:function(s,n,t){var r,q,p,o;o=arguments[3];n=n.toLowerCase();if(e===b){e="Plupload_"+g.guid()}if(s.addEventListener){r=t;s.addEventListener(n,r,false)}else{if(s.attachEvent){r=function(){var u=window.event;if(!u.target){u.target=u.srcElement}u.preventDefault=h;u.stopPropagation=j;t(u)};s.attachEvent("on"+n,r)}}if(s[e]===b){s[e]=g.guid()}if(!d.hasOwnProperty(s[e])){d[s[e]]={}}q=d[s[e]];if(!q.hasOwnProperty(n)){q[n]=[]}q[n].push({func:r,orig:t,key:o})},removeEvent:function(s,n){var q,t,p;if(typeof(arguments[2])=="function"){t=arguments[2]}else{p=arguments[2]}n=n.toLowerCase();if(s[e]&&d[s[e]]&&d[s[e]][n]){q=d[s[e]][n]}else{return}for(var o=q.length-1;o>=0;o--){if(q[o].key===p||q[o].orig===t){if(s.detachEvent){s.detachEvent("on"+n,q[o].func)
}else{if(s.removeEventListener){s.removeEventListener(n,q[o].func,false)}}q[o].orig=null;q[o].func=null;q.splice(o,1);if(t!==b){break}}}if(!q.length){delete d[s[e]][n]}if(g.isEmptyObj(d[s[e]])){delete d[s[e]];try{delete s[e]}catch(r){s[e]=b}}},removeAllEvents:function(o){var n=arguments[1];if(o[e]===b||!o[e]){return}g.each(d[o[e]],function(q,p){g.removeEvent(o,p,n)})}};g.Uploader=function(r){var p={},u,t=[],q;u=new g.QueueProgress();r=g.extend({chunk_size:0,multipart:true,multi_selection:true,file_data_name:"file",filters:[]},r);function s(){var w,x=0,v;if(this.state==g.STARTED){for(v=0;v<t.length;v++){if(!w&&t[v].status==g.QUEUED){w=t[v];w.status=g.UPLOADING;if(this.trigger("BeforeUpload",w)){this.trigger("UploadFile",w)}}else{x++}}if(x==t.length){this.stop();this.trigger("UploadComplete",t)}}}function o(){var w,v;u.reset();for(w=0;w<t.length;w++){v=t[w];if(v.size!==b){u.size+=v.size;u.loaded+=v.loaded}else{u.size=b}if(v.status==g.DONE){u.uploaded++}else{if(v.status==g.FAILED){u.failed++}else{u.queued++}}}if(u.size===b){u.percent=t.length>0?Math.ceil(u.uploaded/t.length*100):0}else{u.bytesPerSec=Math.ceil(u.loaded/((+new Date()-q||1)/1000));u.percent=u.size>0?Math.ceil(u.loaded/u.size*100):0}}function n(){return !!u.queued}g.extend(this,{state:g.STOPPED,runtime:"",features:{},files:t,settings:r,total:u,id:g.guid(),init:function(){var A=this,B,x,w,z=0,y;if(typeof(r.preinit)=="function"){r.preinit(A)}else{g.each(r.preinit,function(D,C){A.bind(C,D)})}r.page_url=r.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/");if(!/^(\w+:\/\/|\/)/.test(r.url)){r.url=r.page_url+r.url}r.chunk_size=g.parseSize(r.chunk_size);r.max_file_size=g.parseSize(r.max_file_size);A.bind("FilesAdded",function(C,F){C.trigger("Started");var E,D,H=0,I,G=r.filters;if(G&&G.length){I=[];g.each(G,function(J){g.each(J.extensions.split(/,/),function(K){if(/^\s*\*\s*$/.test(K)){I.push("\\.*")}else{I.push("\\."+K.replace(new RegExp("["+("/^$.*+?|()[]{}\\".replace(/./g,"\\$&"))+"]","g"),"\\$&"))}})
});I=new RegExp(I.join("|")+"$","i")}for(E=0;E<F.length;E++){D=F[E];D.loaded=0;D.percent=0;D.status=g.QUEUED;if(I&&!I.test(D.name)){C.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:D});continue}if(D.size!==b&&D.size>r.max_file_size){C.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:D});continue}t.push(D);H++}if(H){c(function(){A.trigger("QueueChanged");A.refresh()},1)}else{return false}});if(r.unique_names){A.bind("UploadFile",function(C,D){var F=D.name.match(/\.([^.]+)$/),E="tmp";if(F){E=F[1]}D.target_name=D.id+"."+E})}A.bind("UploadProgress",function(C,D){D.percent=D.size>0?Math.ceil(D.loaded/D.size*100):100;o()});A.bind("StateChanged",function(C){if(C.state==g.STARTED){q=(+new Date())}else{if(C.state==g.STOPPED){for(B=C.files.length-1;B>=0;B--){if(C.files[B].status==g.UPLOADING){C.files[B].status=g.QUEUED;o()}}}}});A.bind("QueueChanged",o);A.bind("Error",function(C,D){if(D.file){D.file.status=g.FAILED;o();if(C.state==g.STARTED){if(!n()){c(function(){s.call(A)},1)}}}});A.bind("FileUploaded",function(C,D){D.status=g.DONE;D.loaded=D.size;C.trigger("UploadProgress",D);c(function(){s.call(A)},1)});if(r.runtimes){x=[];y=r.runtimes.split(/\s?,\s?/);for(B=0;B<y.length;B++){if(k[y[B]]){x.push(k[y[B]])}}}else{x=k}function v(){var F=x[z++],E,C,D;if(F){E=F.getFeatures();C=A.settings.required_features;if(C){C=C.split(",");for(D=0;D<C.length;D++){if(!E[C[D]]){v();return}}}F.init(A,function(G){if(G&&G.success){A.features=E;A.runtime=F.name;A.trigger("Init",{runtime:F.name});A.trigger("PostInit");A.refresh()}else{v()}})}else{A.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}}v();if(typeof(r.init)=="function"){r.init(A)}else{g.each(r.init,function(D,C){A.bind(C,D)})}},refresh:function(){this.trigger("Refresh")},start:function(){if(this.state!=g.STARTED){this.state=g.STARTED;this.trigger("StateChanged");s.call(this)}},stop:function(){if(this.state!=g.STOPPED){this.state=g.STOPPED;
this.trigger("CancelUpload");this.trigger("StateChanged")}},getFile:function(w){var v;for(v=t.length-1;v>=0;v--){if(t[v].id===w){return t[v]}}},removeFile:function(w){var v;for(v=t.length-1;v>=0;v--){if(t[v].id===w.id){return this.splice(v,1)[0]}}},splice:function(y,w){var x;x=t.splice(y===b?0:y,w===b?t.length:w);this.trigger("FilesRemoved",x);this.trigger("QueueChanged");if(x[0].status==g.UPLOADING&&this.state==g.STARTED){this.trigger("CancelUpload")}if(!n()){var v=this;c(function(){v.trigger("UploadComplete")})}return x},trigger:function(w){var y=p[w.toLowerCase()],x,v;if(y){v=Array.prototype.slice.call(arguments);v[0]=this;for(x=0;x<y.length;x++){if(y[x].func.apply(y[x].scope,v)===false){return false}}}return true},hasEventListener:function(v){return !!p[v.toLowerCase()]},bind:function(v,x,w){var y;v=v.toLowerCase();y=p[v]||[];y.push({func:x,scope:w||this});p[v]=y},unbind:function(v){v=v.toLowerCase();var y=p[v],w,x=arguments[1];if(y){if(x!==b){for(w=y.length-1;w>=0;w--){if(y[w].func===x){y.splice(w,1);break}}}else{y=[]}if(!y.length){delete p[v]}}},unbindAll:function(){var v=this;g.each(p,function(x,w){v.unbind(w)})},destroy:function(){this.trigger("Destroy");this.unbindAll()}})};g.File=function(q,o,p){var n=this;n.id=q;n.name=o;n.size=p;n.loaded=0;n.percent=0;n.status=0};g.Runtime=function(){this.getFeatures=function(){};this.init=function(n,o){}};g.QueueProgress=function(){var n=this;n.size=0;n.loaded=0;n.uploaded=0;n.failed=0;n.queued=0;n.percent=0;n.bytesPerSec=0;n.reset=function(){n.size=n.loaded=n.uploaded=n.failed=n.queued=n.percent=n.bytesPerSec=0}};g.runtimes={};window.plupload=g})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:plupload', location = 'js/plupload.html5.js' */
(function(h,k,j,e){var c={},g;function m(o,p){var n;if("FileReader" in h){n=new FileReader();n.readAsDataURL(o);n.onload=function(){p(n.result)}}else{return p(o.getAsDataURL())}}function l(o,p){var n;if("FileReader" in h){n=new FileReader();n.readAsBinaryString(o);n.onload=function(){p(n.result)}}else{return p(o.getAsBinary())}}function d(r,p,n,v){var q,o,u,s,t=this;m(c[r.id],function(w){q=k.createElement("canvas");q.style.display="none";k.body.appendChild(q);o=q.getContext("2d");u=new Image();u.onerror=u.onabort=function(){v({success:false})};u.onload=function(){var B,x,z,y,A;if(!p.width){p.width=u.width}if(!p.height){p.height=u.height}s=Math.min(p.width/u.width,p.height/u.height);if(s<1||(s===1&&n==="image/jpeg")){B=Math.round(u.width*s);x=Math.round(u.height*s);q.width=B;q.height=x;o.drawImage(u,0,0,B,x);if(n==="image/jpeg"){y=new f(atob(w.substring(w.indexOf("base64,")+7)));if(y.headers&&y.headers.length){A=new a();if(A.init(y.get("exif")[0])){A.setExif("PixelXDimension",B);A.setExif("PixelYDimension",x);y.set("exif",A.getBinary());if(t.hasEventListener("ExifData")){t.trigger("ExifData",r,A.EXIF())}if(t.hasEventListener("GpsData")){t.trigger("GpsData",r,A.GPS())}}}if(p.quality){try{w=q.toDataURL(n,p.quality/100)}catch(C){w=q.toDataURL(n)}}}else{w=q.toDataURL(n)}w=w.substring(w.indexOf("base64,")+7);w=atob(w);if(y&&y.headers&&y.headers.length){w=y.restore(w);y.purge()}q.parentNode.removeChild(q);v({success:true,data:w})}else{v({success:false})}};u.src=w})}j.runtimes.Html5=j.addRuntime("html5",{getFeatures:function(){var s,o,r,q,p,n;o=r=p=n=false;if(h.XMLHttpRequest){s=new XMLHttpRequest();r=!!s.upload;o=!!(s.sendAsBinary||s.upload)}if(o){q=!!(s.sendAsBinary||(h.Uint8Array&&h.ArrayBuffer));p=!!(File&&(File.prototype.getAsDataURL||h.FileReader)&&q);n=!!(File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice))}g=j.ua.safari&&j.ua.windows&&navigator.userAgent&&navigator.userAgent.indexOf("Version/4")>0;return{html5:o,dragdrop:(function(){var t=k.createElement("div");
return("draggable" in t)||("ondragstart" in t&&"ondrop" in t)}()),jpgresize:p,pngresize:p,multipart:p||!!h.FileReader||!!h.FormData,canSendBinary:q,cantSendBlobInFormData:!!(j.ua.gecko&&h.FormData&&h.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:r,chunks:n,multi_selection:!(j.ua.safari&&j.ua.windows),triggerDialog:(j.ua.gecko&&h.FormData||j.ua.webkit||j.ua.windows)}},init:function(p,r){var n,q;function o(x){var v,u,w=[],y,t={};for(u=0;u<x.length;u++){v=x[u];if(t[v.name]){continue}t[v.name]=true;y=j.guid();c[y]=v;if(v.fileSize>0||v.size>0){var s=new j.File(y,v.fileName||v.name,v.fileSize||v.size);s.nativeFile=v;w.push(s)}}if(w.length){p.trigger("FilesAdded",w)}}n=this.getFeatures();if(!n.html5){r({success:false});return}p.upload=function(s){o(s)};p.bind("Init",function(w){var G,F,C=[],v,D,t=w.settings.filters,u,B,s=k.body,E;G=k.createElement("div");G.id=w.id+"_html5_container";j.extend(G.style,{position:"absolute",background:p.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:p.settings.shim_bgcolor?"":0});G.className="plupload html5";if(p.settings.container){s=k.getElementById(p.settings.container);if(j.getStyle(s,"position")==="static"){s.style.position="relative"}}s.appendChild(G);no_type_restriction:for(v=0;v<t.length;v++){u=t[v].extensions.split(/,/);for(D=0;D<u.length;D++){if(u[D]==="*"){C=[];break no_type_restriction}B=j.mimeTypes[u[D]];if(B){C.push(B)}}}G.innerHTML='<input id="'+p.id+'_html5"  style="font-size:999px" type="file" accept="'+C.join(",")+'" '+(p.settings.multi_selection&&p.features.multi_selection?'multiple="multiple"':"")+" />";G.scrollTop=100;E=k.getElementById(p.id+"_html5");if(p.settings.inputFileClazz){E.className+=" "+p.settings.inputFileClazz}if(w.features.triggerDialog){j.extend(E.style,{position:"absolute",width:"100%",height:"100%"})}else{j.extend(E.style,{cssFloat:"right",styleFloat:"right"})}E.onchange=function(){o(this.files);this.value=""};F=k.getElementById(w.settings.browse_button);
if(F){var z=w.settings.browse_button_hover,A=w.settings.browse_button_active,x=w.features.triggerDialog?F:G;if(z){j.addEvent(x,"mouseover",function(){j.addClass(F,z)},w.id);j.addEvent(x,"mouseout",function(){j.removeClass(F,z)},w.id)}if(A){j.addEvent(x,"mousedown",function(){j.addClass(F,A)},w.id);j.addEvent(k.body,"mouseup",function(){j.removeClass(F,A)},w.id)}if(w.features.triggerDialog){j.addEvent(F,"click",function(y){k.getElementById(w.id+"_html5").click();y.preventDefault()},w.id)}}});p.bind("PostInit",function(){var s=j.getElement(p.settings.drop_element),t,u=false;if(s){if(g){j.addEvent(s,"dragenter",function(y){var x,v,w;x=k.getElementById(p.id+"_drop");if(!x){x=k.createElement("input");x.setAttribute("type","file");x.setAttribute("id",p.id+"_drop");x.setAttribute("multiple","multiple");j.addEvent(x,"change",function(){o(this.files);j.removeEvent(x,"change",p.id);x.parentNode.removeChild(x)},p.id);s.appendChild(x);u=true}v=j.getPos(s,k.getElementById(p.settings.container));w=j.getSize(s);if(j.getStyle(s,"position")==="static"){j.extend(s.style,{position:"relative"})}j.extend(x.style,{position:"absolute",display:"block",top:0,left:0,width:w.w+"px",height:w.h+"px",opacity:0})},p.id);j.addEvent(s,"dragleave",function(v){if(!u){t&&t.parentElement.removeChild(t);t=null}u=false});return}j.addEvent(s,"dragover",function(v){v.preventDefault()},p.id);j.addEvent(s,"drop",function(w){if(!$(".disable-attachment-uploader").length){var v=w.dataTransfer;if(v&&v.files){o(v.files)}}t&&t.parentElement.removeChild(t);t=null;w.preventDefault();if(p.settings.stop_propagation){if(w.cancelBubble){w.cancelBubble=true}else{w.stopPropagation()}}},p.id)}});p.bind("Refresh",function(s){var t,u,v,x,w;t=k.getElementById(p.settings.browse_button);if(t){u=j.getPos(t,k.getElementById(s.settings.container));v=j.getSize(t);x=k.getElementById(p.id+"_html5_container");j.extend(x.style,{top:u.y+"px",left:u.x+"px",width:v.w+"px",height:v.h+"px"});if(p.features.triggerDialog){if(j.getStyle(t,"position")==="static"){j.extend(t.style,{position:"relative"})
}w=parseInt(j.getStyle(t,"z-index"),10);if(isNaN(w)){w=0}j.extend(t.style,{zIndex:w});j.extend(x.style,{zIndex:w-1})}}});p.bind("CancelUpload",function(){if(q&&q.abort){q.abort()}});p.bind("UploadFile",function(s,u){var v=s.settings,y,t;function x(A,D,z){var B;if(File.prototype.slice){try{A.slice();return A.slice(D,z)}catch(C){return A.slice(D,z-D)}}else{if(B=File.prototype.webkitSlice||File.prototype.mozSlice){return B.call(A,D,z)}else{return null}}}function w(A){var D=0,C=0,z=("FileReader" in h)?new FileReader:null;function B(){var I,M,K,L,H,J,F,E=s.settings.url;function G(V){var T=0,N="----pluploadboundary"+j.guid(),O,P="--",U="\r\n",R="";q=new XMLHttpRequest;if(q.upload){q.upload.onprogress=function(W){u.loaded=Math.min(u.size,C+W.loaded-T);s.trigger("UploadProgress",u)}}q.onreadystatechange=function(){var W,Y;if(q.readyState==4){try{W=q.status}catch(X){W=0}if(W>=400){s.trigger("Error",{code:j.HTTP_ERROR,message:j.translate("HTTP Error."),file:u,status:W,response:q.responseText||""})}else{if(K){Y={chunk:D,chunks:K,response:q.responseText,status:W};s.trigger("ChunkUploaded",u,Y);C+=J;if(Y.cancelled){u.status=j.FAILED;return}u.loaded=Math.min(u.size,(D+1)*H)}else{u.loaded=u.size}s.trigger("UploadProgress",u);V=I=O=R=null;if(!K||++D>=K){u.status=j.DONE;s.trigger("FileUploaded",u,{response:q.responseText,status:W})}else{B()}}}};if(s.settings.multipart&&n.multipart){L.name=u.target_name||u.name;q.open("post",E,true);j.each(s.settings.headers,function(X,W){q.setRequestHeader(W,X)});if(typeof(V)!=="string"&&!!h.FormData){O=new FormData();j.each(j.extend(L,s.settings.multipart_params),function(X,W){O.append(W,X)});O.append(s.settings.file_data_name,V);q.send(O);return}if(typeof(V)==="string"){q.setRequestHeader("Content-Type","multipart/form-data; boundary="+N);j.each(j.extend(L,s.settings.multipart_params),function(X,W){R+=P+N+U+'Content-Disposition: form-data; name="'+W+'"'+U+U;R+=unescape(encodeURIComponent(X))+U});F=j.mimeTypes[u.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream";
R+=P+N+U+'Content-Disposition: form-data; name="'+s.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(u.name))+'"'+U+"Content-Type: "+F+U+U+V+U+P+N+P+U;T=R.length-V.length;V=R;if(q.sendAsBinary){q.sendAsBinary(V)}else{if(n.canSendBinary){var S=new Uint8Array(V.length);for(var Q=0;Q<V.length;Q++){S[Q]=(V.charCodeAt(Q)&255)}q.send(S.buffer)}}return}}E=j.buildUrl(s.settings.url,j.extend(L,s.settings.multipart_params));q.open("post",E,true);q.setRequestHeader("Content-Type","application/octet-stream");if(V.encoding){q.setRequestHeader("Content-Encoding",V.encoding)}j.each(s.settings.headers,function(X,W){q.setRequestHeader(W,X)});q.send(V.getData?V.getData():V)}if(u.status==j.DONE||u.status==j.FAILED||s.state==j.STOPPED){return}L={name:u.target_name||u.name};if(v.chunk_size&&u.size>v.chunk_size&&(n.chunks||typeof(A)=="string")){H=v.chunk_size;K=Math.ceil(u.size/H);J=Math.min(H,u.size-(D*H));if(typeof(A)=="string"){I=A.substring(D*H,D*H+J)}else{I=x(A,D*H,D*H+J)}L.chunk=D;L.chunks=K}else{J=u.size;I=A}if(typeof(I)!=="string"&&z&&n.cantSendBlobInFormData&&n.chunks&&s.settings.chunk_size){z.onload=function(){G(z.result)};z.readAsBinaryString(I)}else{G(I)}}B()}y=c[u.id];if(n.jpgresize&&s.settings.resize&&/\.(png|jpg|jpeg)$/i.test(u.name)){d.call(s,u,s.settings.resize,/\.png$/i.test(u.name)?"image/png":"image/jpeg",function(z){if(z.success){u.size=z.data.length;w(z.data)}else{w(y)}})}else{w(y)}});p.bind("Destroy",function(s){var u,v,t=k.body,w={inputContainer:s.id+"_html5_container",inputFile:s.id+"_html5",browseButton:s.settings.browse_button,dropElm:s.settings.drop_element};for(u in w){v=k.getElementById(w[u]);if(v){j.removeAllEvents(v,s.id)}}j.removeAllEvents(k.body,s.id);if(s.settings.container){t=k.getElementById(s.settings.container)}t.removeChild(k.getElementById(w.inputContainer))});r({success:true})}});function b(){var q=false,o;function r(t,v){var s=q?0:-8*(v-1),w=0,u;for(u=0;u<v;u++){w|=(o.charCodeAt(t+u)<<Math.abs(s+u*8))}return w}function n(u,s,t){var t=arguments.length===3?t:o.length-s-1;
o=o.substr(0,s)+u+o.substr(t+s)}function p(t,u,w){var x="",s=q?0:-8*(w-1),v;for(v=0;v<w;v++){x+=String.fromCharCode((u>>Math.abs(s+v*8))&255)}n(x,t,w)}return{II:function(s){if(s===e){return q}else{q=s}},init:function(s){q=false;o=s},SEGMENT:function(s,u,t){switch(arguments.length){case 1:return o.substr(s,o.length-s-1);case 2:return o.substr(s,u);case 3:n(t,s,u);break;default:return o}},BYTE:function(s){return r(s,1)},SHORT:function(s){return r(s,2)},LONG:function(s,t){if(t===e){return r(s,4)}else{p(s,t,4)}},SLONG:function(s){var t=r(s,4);return(t>2147483647?t-4294967296:t)},STRING:function(s,t){var u="";for(t+=s;s<t;s++){u+=String.fromCharCode(r(s,1))}return u}}}function f(s){var u={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},t=[],r,n,p=e,q=0,o;r=new b();r.init(s);if(r.SHORT(0)!==65496){return}n=2;o=Math.min(1048576,s.length);while(n<=o){p=r.SHORT(n);if(p>=65488&&p<=65495){n+=2;continue}if(p===65498||p===65497){break}q=r.SHORT(n+2)+2;if(u[p]&&r.STRING(n+4,u[p].signature.length)===u[p].signature){t.push({hex:p,app:u[p].app.toUpperCase(),name:u[p].name.toUpperCase(),start:n,length:q,segment:r.SEGMENT(n,q)})}n+=q}r.init(null);return{headers:t,restore:function(y){r.init(y);var w=new f(y);if(!w.headers){return false}for(var x=w.headers.length;x>0;x--){var z=w.headers[x-1];r.SEGMENT(z.start,z.length,"")}w.purge();n=r.SHORT(2)==65504?4+r.SHORT(4):2;for(var x=0,v=t.length;x<v;x++){r.SEGMENT(n,0,t[x].segment);n+=t[x].length}return r.SEGMENT()},get:function(x){var y=[];for(var w=0,v=t.length;w<v;w++){if(t[w].app===x.toUpperCase()){y.push(t[w].segment)}}return y},set:function(y,x){var z=[];if(typeof(x)==="string"){z.push(x)}else{z=x}for(var w=ii=0,v=t.length;w<v;w++){if(t[w].app===y.toUpperCase()){t[w].segment=z[ii];t[w].length=z[ii].length;ii++}if(ii>=z.length){break}}},purge:function(){t=[];r.init(null)}}}function a(){var q,n,o={},t;q=new b();n={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};
t={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};
function p(u,C){var w=q.SHORT(u),z,F,G,B,A,v,x,D,E=[],y={};for(z=0;z<w;z++){x=v=u+12*z+2;G=C[q.SHORT(x)];if(G===e){continue}B=q.SHORT(x+=2);A=q.LONG(x+=2);x+=4;E=[];switch(B){case 1:case 7:if(A>4){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.BYTE(x+F)}break;case 2:if(A>4){x=q.LONG(x)+o.tiffHeader}y[G]=q.STRING(x,A-1);continue;case 3:if(A>2){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.SHORT(x+F*2)}break;case 4:if(A>1){x=q.LONG(x)+o.tiffHeader}for(F=0;F<A;F++){E[F]=q.LONG(x+F*4)}break;case 5:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.LONG(x+F*4)/q.LONG(x+F*4+4)}break;case 9:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.SLONG(x+F*4)}break;case 10:x=q.LONG(x)+o.tiffHeader;for(F=0;F<A;F++){E[F]=q.SLONG(x+F*4)/q.SLONG(x+F*4+4)}break;default:continue}D=(A==1?E[0]:E);if(t.hasOwnProperty(G)&&typeof D!="object"){y[G]=t[G][D]}else{y[G]=D}}return y}function s(){var v=e,u=o.tiffHeader;q.II(q.SHORT(u)==18761);if(q.SHORT(u+=2)!==42){return false}o.IFD0=o.tiffHeader+q.LONG(u+=2);v=p(o.IFD0,n.tiff);o.exifIFD=("ExifIFDPointer" in v?o.tiffHeader+v.ExifIFDPointer:e);o.gpsIFD=("GPSInfoIFDPointer" in v?o.tiffHeader+v.GPSInfoIFDPointer:e);return true}function r(w,u,z){var B,y,x,A=0;if(typeof(u)==="string"){var v=n[w.toLowerCase()];for(hex in v){if(v[hex]===u){u=hex;break}}}B=o[w.toLowerCase()+"IFD"];y=q.SHORT(B);for(i=0;i<y;i++){x=B+12*i+2;if(q.SHORT(x)==u){A=x+8;break}}if(!A){return false}q.LONG(A,z);return true}return{init:function(u){o={tiffHeader:10};if(u===e||!u.length){return false}q.init(u);if(q.SHORT(0)===65505&&q.STRING(4,5).toUpperCase()==="EXIF\0"){return s()}return false},EXIF:function(){var u;u=p(o.exifIFD,n.exif);if(u.ExifVersion){u.ExifVersion=String.fromCharCode(u.ExifVersion[0],u.ExifVersion[1],u.ExifVersion[2],u.ExifVersion[3])}return u},GPS:function(){var u;u=p(o.gpsIFD,n.gps);if(u.GPSVersionID){u.GPSVersionID=u.GPSVersionID.join(".")}return u},setExif:function(u,v){if(u!=="PixelXDimension"&&u!=="PixelYDimension"){return false}return r("exif",u,v)},getBinary:function(){return q.SEGMENT()
}}}})(window,document,plupload);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.position.js' */
/*
 * jQuery UI Position 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
(function(G,H){G.ui=G.ui||{};var D=/left|center|right/,E=/top|center|bottom/,A="center",F={},B=G.fn.position,C=G.fn.offset;G.fn.position=function(J){if(!J||!J.of){return B.apply(this,arguments)}J=G.extend({},J);var N=G(J.of),M=N[0],P=(J.collision||"flip").split(" "),O=J.offset?J.offset.split(" "):[0,0],L,I,K;if(M.nodeType===9){L=N.width();I=N.height();K={top:0,left:0}}else{if(M.setTimeout){L=N.width();I=N.height();K={top:N.scrollTop(),left:N.scrollLeft()}}else{if(M.preventDefault){J.at="left top";L=I=0;K={top:J.of.pageY,left:J.of.pageX}}else{L=N.outerWidth();I=N.outerHeight();K=N.offset()}}}G.each(["my","at"],function(){var Q=(J[this]||"").split(" ");if(Q.length===1){Q=D.test(Q[0])?Q.concat([A]):E.test(Q[0])?[A].concat(Q):[A,A]}Q[0]=D.test(Q[0])?Q[0]:A;Q[1]=E.test(Q[1])?Q[1]:A;J[this]=Q});if(P.length===1){P[1]=P[0]}O[0]=parseInt(O[0],10)||0;if(O.length===1){O[1]=O[0]}O[1]=parseInt(O[1],10)||0;if(J.at[0]==="right"){K.left+=L}else{if(J.at[0]===A){K.left+=L/2}}if(J.at[1]==="bottom"){K.top+=I}else{if(J.at[1]===A){K.top+=I/2}}K.left+=O[0];K.top+=O[1];return this.each(function(){var T=G(this),V=T.outerWidth(),S=T.outerHeight(),U=parseInt(G.curCSS(this,"marginLeft",true))||0,R=parseInt(G.curCSS(this,"marginTop",true))||0,X=V+U+(parseInt(G.curCSS(this,"marginRight",true))||0),Y=S+R+(parseInt(G.curCSS(this,"marginBottom",true))||0),W=G.extend({},K),Q;if(J.my[0]==="right"){W.left-=V}else{if(J.my[0]===A){W.left-=V/2}}if(J.my[1]==="bottom"){W.top-=S}else{if(J.my[1]===A){W.top-=S/2}}if(!F.fractions){W.left=Math.round(W.left);W.top=Math.round(W.top)}Q={left:W.left-U,top:W.top-R};G.each(["left","top"],function(a,Z){if(G.ui.position[P[a]]){G.ui.position[P[a]][Z](W,{targetWidth:L,targetHeight:I,elemWidth:V,elemHeight:S,collisionPosition:Q,collisionWidth:X,collisionHeight:Y,offset:O,my:J.my,at:J.at})}});if(G.fn.bgiframe){T.bgiframe()}T.offset(G.extend(W,{using:J.using}))})};G.ui.position={fit:{left:function(I,J){var L=G(window),K=J.collisionPosition.left+J.collisionWidth-L.width()-L.scrollLeft();I.left=K>0?I.left-K:Math.max(I.left-J.collisionPosition.left,I.left)},top:function(I,J){var L=G(window),K=J.collisionPosition.top+J.collisionHeight-L.height()-L.scrollTop();I.top=K>0?I.top-K:Math.max(I.top-J.collisionPosition.top,I.top)}},flip:{left:function(J,L){if(L.at[0]===A){return }var N=G(window),M=L.collisionPosition.left+L.collisionWidth-N.width()-N.scrollLeft(),I=L.my[0]==="left"?-L.elemWidth:L.my[0]==="right"?L.elemWidth:0,K=L.at[0]==="left"?L.targetWidth:-L.targetWidth,O=-2*L.offset[0];J.left+=L.collisionPosition.left<0?I+K+O:M>0?I+K+O:0},top:function(J,L){if(L.at[1]===A){return }var N=G(window),M=L.collisionPosition.top+L.collisionHeight-N.height()-N.scrollTop(),I=L.my[1]==="top"?-L.elemHeight:L.my[1]==="bottom"?L.elemHeight:0,K=L.at[1]==="top"?L.targetHeight:-L.targetHeight,O=-2*L.offset[1];J.top+=L.collisionPosition.top<0?I+K+O:M>0?I+K+O:0}}};if(!G.offset.setOffset){G.offset.setOffset=function(M,J){if(/static/.test(G.curCSS(M,"position"))){M.style.position="relative"}var L=G(M),O=L.offset(),I=parseInt(G.curCSS(M,"top",true),10)||0,N=parseInt(G.curCSS(M,"left",true),10)||0,K={top:(J.top-O.top)+I,left:(J.left-O.left)+N};if("using" in J){J.using.call(M,K)}else{L.css(K)}};G.fn.offset=function(I){var J=this[0];if(!J||!J.ownerDocument){return null}if(I){if(G.isFunction(I)){return this.each(function(K){G(this).offset(I.call(this,K,G(this).offset()))})}return this.each(function(){G.offset.setOffset(this,I)})}return C.call(this)}}if(!G.curCSS){G.curCSS=G.css}(function(){var I=document.getElementsByTagName("body")[0],P=document.createElement("div"),M,O,J,N,L;M=document.createElement(I?"div":"body");J={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(I){G.extend(J,{position:"absolute",left:"-1000px",top:"-1000px"})}for(var K in J){M.style[K]=J[K]}M.appendChild(P);O=I||document.documentElement;O.insertBefore(M,O.firstChild);P.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;";N=G(P).offset(function(Q,R){return R}).offset();M.innerHTML="";O.removeChild(M);L=N.top+N.left+(I?2000:0);F.fractions=L>21&&L<22})()}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.droppable.js' */
/*
 * jQuery UI Droppable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
(function(A,B){A.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var D=this.options,C=D.accept;this.isover=0;this.isout=1;this.accept=A.isFunction(C)?C:function(E){return E.is(C)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};A.ui.ddmanager.droppables[D.scope]=A.ui.ddmanager.droppables[D.scope]||[];A.ui.ddmanager.droppables[D.scope].push(this);(D.addClasses&&this.element.addClass("ui-droppable"))},destroy:function(){var C=A.ui.ddmanager.droppables[this.options.scope];for(var D=0;D<C.length;D++){if(C[D]==this){C.splice(D,1)}}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(C,D){if(C=="accept"){this.accept=A.isFunction(D)?D:function(E){return E.is(D)}}A.Widget.prototype._setOption.apply(this,arguments)},_activate:function(D){var C=A.ui.ddmanager.current;if(this.options.activeClass){this.element.addClass(this.options.activeClass)}(C&&this._trigger("activate",D,this.ui(C)))},_deactivate:function(D){var C=A.ui.ddmanager.current;if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}(C&&this._trigger("deactivate",D,this.ui(C)))},_over:function(D){var C=A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return }if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.hoverClass){this.element.addClass(this.options.hoverClass)}this._trigger("over",D,this.ui(C))}},_out:function(D){var C=A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return }if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("out",D,this.ui(C))}},_drop:function(D,E){var C=E||A.ui.ddmanager.current;if(!C||(C.currentItem||C.element)[0]==this.element[0]){return false}var F=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var G=A.data(this,"droppable");if(G.options.greedy&&!G.options.disabled&&G.options.scope==C.options.scope&&G.accept.call(G.element[0],(C.currentItem||C.element))&&A.ui.intersect(C,A.extend(G,{offset:G.element.offset()}),G.options.tolerance)){F=true;return false}});if(F){return false}if(this.accept.call(this.element[0],(C.currentItem||C.element))){if(this.options.activeClass){this.element.removeClass(this.options.activeClass)}if(this.options.hoverClass){this.element.removeClass(this.options.hoverClass)}this._trigger("drop",D,this.ui(C));return this.element}return false},ui:function(C){return{draggable:(C.currentItem||C.element),helper:C.helper,position:C.position,offset:C.positionAbs}}});A.extend(A.ui.droppable,{version:"1.8.24"});A.ui.intersect=function(P,J,N){if(!J.offset){return false}var E=(P.positionAbs||P.position.absolute).left,D=E+P.helperProportions.width,M=(P.positionAbs||P.position.absolute).top,L=M+P.helperProportions.height;var G=J.offset.left,C=G+J.proportions.width,O=J.offset.top,K=O+J.proportions.height;switch(N){case"fit":return(G<=E&&D<=C&&O<=M&&L<=K);break;case"intersect":return(G<E+(P.helperProportions.width/2)&&D-(P.helperProportions.width/2)<C&&O<M+(P.helperProportions.height/2)&&L-(P.helperProportions.height/2)<K);break;case"pointer":var H=((P.positionAbs||P.position.absolute).left+(P.clickOffset||P.offset.click).left),I=((P.positionAbs||P.position.absolute).top+(P.clickOffset||P.offset.click).top),F=A.ui.isOver(I,H,O,G,J.proportions.height,J.proportions.width);return F;break;case"touch":return((M>=O&&M<=K)||(L>=O&&L<=K)||(M<O&&L>K))&&((E>=G&&E<=C)||(D>=G&&D<=C)||(E<G&&D>C));break;default:return false;break}};A.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(F,H){var C=A.ui.ddmanager.droppables[F.options.scope]||[];var G=H?H.type:null;var I=(F.currentItem||F.element).find(":data(droppable)").andSelf();droppablesLoop:for(var E=0;E<C.length;E++){if(C[E].options.disabled||(F&&!C[E].accept.call(C[E].element[0],(F.currentItem||F.element)))){continue}for(var D=0;D<I.length;D++){if(I[D]==C[E].element[0]){C[E].proportions.height=0;continue droppablesLoop}}C[E].visible=C[E].element.css("display")!="none";if(!C[E].visible){continue}if(G=="mousedown"){C[E]._activate.call(C[E],H)}C[E].offset=C[E].element.offset();C[E].proportions={width:C[E].element[0].offsetWidth,height:C[E].element[0].offsetHeight}}},drop:function(C,D){var E=false;A.each(A.ui.ddmanager.droppables[C.options.scope]||[],function(){if(!this.options){return }if(!this.options.disabled&&this.visible&&A.ui.intersect(C,this,this.options.tolerance)){E=this._drop.call(this,D)||E}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],(C.currentItem||C.element))){this.isout=1;this.isover=0;this._deactivate.call(this,D)}});return E},dragStart:function(C,D){C.element.parents(":not(body,html)").bind("scroll.droppable",function(){if(!C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}})},drag:function(C,D){if(C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}A.each(A.ui.ddmanager.droppables[C.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible){return }var G=A.ui.intersect(C,this,this.options.tolerance);var I=!G&&this.isover==1?"isout":(G&&this.isover==0?"isover":null);if(!I){return }var H;if(this.options.greedy){var F=this.options.scope;var E=this.element.parents(":data(droppable)").filter(function(){return A.data(this,"droppable").options.scope===F});if(E.length){H=A.data(E[0],"droppable");H.greedyChild=(I=="isover"?1:0)}}if(H&&I=="isover"){H.isover=0;H.isout=1;H._out.call(H,D)}this[I]=1;this[I=="isout"?"isover":"isout"]=0;this[I=="isover"?"_over":"_out"].call(this,D);if(H&&I=="isout"){H.isout=0;H.isover=1;H._over.call(H,D)}})},dragStop:function(C,D){C.element.parents(":not(body,html)").unbind("scroll.droppable");if(!C.options.refreshPositions){A.ui.ddmanager.prepareOffsets(C,D)}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.resizable.js' */
/*
 * jQuery UI Resizable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(C,D){C.widget("ui.resizable",C.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var F=this,J=this.options;this.element.addClass("ui-resizable");C.extend(this,{_aspectRatio:!!(J.aspectRatio),aspectRatio:J.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:J.helper||J.ghost||J.animate?J.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap(C('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=J.handles||(!C(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var K=this.handles.split(",");this.handles={};for(var G=0;G<K.length;G++){var I=C.trim(K[G]),E="ui-resizable-"+I;var H=C('<div class="ui-resizable-handle '+E+'"></div>');H.css({zIndex:J.zIndex});if("se"==I){H.addClass("ui-icon ui-icon-gripsmall-diagonal-se")}this.handles[I]=".ui-resizable-"+I;this.element.append(H)}}this._renderAxis=function(P){P=P||this.element;for(var M in this.handles){if(this.handles[M].constructor==String){this.handles[M]=C(this.handles[M],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var N=C(this.handles[M],this.element),O=0;O=/sw|ne|nw|se|n|s/.test(M)?N.outerHeight():N.outerWidth();var L=["padding",/ne|nw|n/.test(M)?"Top":/se|sw|s/.test(M)?"Bottom":/^e$/.test(M)?"Right":"Left"].join("");P.css(L,O);this._proportionallyResize()}if(!C(this.handles[M]).length){continue}}};this._renderAxis(this.element);this._handles=C(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!F.resizing){if(this.className){var L=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}F.axis=L&&L[1]?L[1]:"se"}});if(J.autoHide){this._handles.hide();C(this.element).addClass("ui-resizable-autohide").hover(function(){if(J.disabled){return }C(this).removeClass("ui-resizable-autohide");F._handles.show()},function(){if(J.disabled){return }if(!F.resizing){C(this).addClass("ui-resizable-autohide");F._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var E=function(G){C(G).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){E(this.element);var F=this.element;F.after(this.originalElement.css({position:F.css("position"),width:F.outerWidth(),height:F.outerHeight(),top:F.css("top"),left:F.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);E(this.originalElement);return this},_mouseCapture:function(F){var G=false;for(var E in this.handles){if(C(this.handles[E])[0]==F.target){G=true}}return !this.options.disabled&&G},_mouseStart:function(G){var J=this.options,F=this.element.position(),E=this.element;this.resizing=true;this.documentScroll={top:C(document).scrollTop(),left:C(document).scrollLeft()};if(E.is(".ui-draggable")||(/absolute/).test(E.css("position"))){E.css({position:"absolute",top:F.top,left:F.left})}this._renderProxy();var K=B(this.helper.css("left")),H=B(this.helper.css("top"));if(J.containment){K+=C(J.containment).scrollLeft()||0;H+=C(J.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:K,top:H};this.size=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalSize=this._helper?{width:E.outerWidth(),height:E.outerHeight()}:{width:E.width(),height:E.height()};this.originalPosition={left:K,top:H};this.sizeDiff={width:E.outerWidth()-E.width(),height:E.outerHeight()-E.height()};this.originalMousePosition={left:G.pageX,top:G.pageY};this.aspectRatio=(typeof J.aspectRatio=="number")?J.aspectRatio:((this.originalSize.width/this.originalSize.height)||1);var I=C(".ui-resizable-"+this.axis).css("cursor");C("body").css("cursor",I=="auto"?this.axis+"-resize":I);E.addClass("ui-resizable-resizing");this._propagate("start",G);return true},_mouseDrag:function(E){var H=this.helper,G=this.options,M={},P=this,J=this.originalMousePosition,N=this.axis;var Q=(E.pageX-J.left)||0,O=(E.pageY-J.top)||0;var I=this._change[N];if(!I){return false}var L=I.apply(this,[E,Q,O]),K=C.browser.msie&&C.browser.version<7,F=this.sizeDiff;this._updateVirtualBoundaries(E.shiftKey);if(this._aspectRatio||E.shiftKey){L=this._updateRatio(L,E)}L=this._respectSize(L,E);this._propagate("resize",E);H.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});if(!this._helper&&this._proportionallyResizeElements.length){this._proportionallyResize()}this._updateCache(L);this._trigger("resize",E,this.ui());return false},_mouseStop:function(H){this.resizing=false;var I=this.options,M=this;if(this._helper){var G=this._proportionallyResizeElements,E=G.length&&(/textarea/i).test(G[0].nodeName),F=E&&C.ui.hasScroll(G[0],"left")?0:M.sizeDiff.height,K=E?0:M.sizeDiff.width;var N={width:(M.helper.width()-K),height:(M.helper.height()-F)},J=(parseInt(M.element.css("left"),10)+(M.position.left-M.originalPosition.left))||null,L=(parseInt(M.element.css("top"),10)+(M.position.top-M.originalPosition.top))||null;if(!I.animate){this.element.css(C.extend(N,{top:L,left:J}))}M.helper.height(M.size.height);M.helper.width(M.size.width);if(this._helper&&!I.animate){this._proportionallyResize()}}C("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",H);if(this._helper){this.helper.remove()}return false},_updateVirtualBoundaries:function(G){var J=this.options,I,H,F,K,E;E={minWidth:A(J.minWidth)?J.minWidth:0,maxWidth:A(J.maxWidth)?J.maxWidth:Infinity,minHeight:A(J.minHeight)?J.minHeight:0,maxHeight:A(J.maxHeight)?J.maxHeight:Infinity};if(this._aspectRatio||G){I=E.minHeight*this.aspectRatio;F=E.minWidth/this.aspectRatio;H=E.maxHeight*this.aspectRatio;K=E.maxWidth/this.aspectRatio;if(I>E.minWidth){E.minWidth=I}if(F>E.minHeight){E.minHeight=F}if(H<E.maxWidth){E.maxWidth=H}if(K<E.maxHeight){E.maxHeight=K}}this._vBoundaries=E},_updateCache:function(E){var F=this.options;this.offset=this.helper.offset();if(A(E.left)){this.position.left=E.left}if(A(E.top)){this.position.top=E.top}if(A(E.height)){this.size.height=E.height}if(A(E.width)){this.size.width=E.width}},_updateRatio:function(H,G){var I=this.options,J=this.position,F=this.size,E=this.axis;if(A(H.height)){H.width=(H.height*this.aspectRatio)}else{if(A(H.width)){H.height=(H.width/this.aspectRatio)}}if(E=="sw"){H.left=J.left+(F.width-H.width);H.top=null}if(E=="nw"){H.top=J.top+(F.height-H.height);H.left=J.left+(F.width-H.width)}return H},_respectSize:function(L,G){var J=this.helper,I=this._vBoundaries,Q=this._aspectRatio||G.shiftKey,P=this.axis,S=A(L.width)&&I.maxWidth&&(I.maxWidth<L.width),M=A(L.height)&&I.maxHeight&&(I.maxHeight<L.height),H=A(L.width)&&I.minWidth&&(I.minWidth>L.width),R=A(L.height)&&I.minHeight&&(I.minHeight>L.height);if(H){L.width=I.minWidth}if(R){L.height=I.minHeight}if(S){L.width=I.maxWidth}if(M){L.height=I.maxHeight}var F=this.originalPosition.left+this.originalSize.width,O=this.position.top+this.size.height;var K=/sw|nw|w/.test(P),E=/nw|ne|n/.test(P);if(H&&K){L.left=F-I.minWidth}if(S&&K){L.left=F-I.maxWidth}if(R&&E){L.top=O-I.minHeight}if(M&&E){L.top=O-I.maxHeight}var N=!L.width&&!L.height;if(N&&!L.left&&L.top){L.top=null}else{if(N&&!L.top&&L.left){L.left=null}}return L},_proportionallyResize:function(){var J=this.options;if(!this._proportionallyResizeElements.length){return }var G=this.helper||this.element;for(var F=0;F<this._proportionallyResizeElements.length;F++){var H=this._proportionallyResizeElements[F];if(!this.borderDif){var E=[H.css("borderTopWidth"),H.css("borderRightWidth"),H.css("borderBottomWidth"),H.css("borderLeftWidth")],I=[H.css("paddingTop"),H.css("paddingRight"),H.css("paddingBottom"),H.css("paddingLeft")];this.borderDif=C.map(E,function(K,M){var L=parseInt(K,10)||0,N=parseInt(I[M],10)||0;return L+N})}if(C.browser.msie&&!(!(C(G).is(":hidden")||C(G).parents(":hidden").length))){continue}H.css({height:(G.height()-this.borderDif[0]-this.borderDif[2])||0,width:(G.width()-this.borderDif[1]-this.borderDif[3])||0})}},_renderProxy:function(){var F=this.element,I=this.options;this.elementOffset=F.offset();if(this._helper){this.helper=this.helper||C('<div style="overflow:hidden;"></div>');var E=C.browser.msie&&C.browser.version<7,G=(E?1:0),H=(E?2:-1);this.helper.addClass(this._helper).css({width:this.element.outerWidth()+H,height:this.element.outerHeight()+H,position:"absolute",left:this.elementOffset.left-G+"px",top:this.elementOffset.top-G+"px",zIndex:++I.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(G,F,E){return{width:this.originalSize.width+F}},w:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{left:I.left+F,width:G.width-F}},n:function(H,F,E){var J=this.options,G=this.originalSize,I=this.originalPosition;return{top:I.top+E,height:G.height-E}},s:function(G,F,E){return{height:this.originalSize.height+E}},se:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},sw:function(G,F,E){return C.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[G,F,E]))},ne:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[G,F,E]))},nw:function(G,F,E){return C.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[G,F,E]))}},_propagate:function(F,E){C.ui.plugin.call(this,F,[E,this.ui()]);(F!="resize"&&this._trigger(F,E,this.ui()))},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});C.extend(C.ui.resizable,{version:"1.8.24"});C.ui.plugin.add("resizable","alsoResize",{start:function(F,G){var E=C(this).data("resizable"),I=E.options;var H=function(J){C(J).each(function(){var K=C(this);K.data("resizable-alsoresize",{width:parseInt(K.width(),10),height:parseInt(K.height(),10),left:parseInt(K.css("left"),10),top:parseInt(K.css("top"),10)})})};if(typeof (I.alsoResize)=="object"&&!I.alsoResize.parentNode){if(I.alsoResize.length){I.alsoResize=I.alsoResize[0];H(I.alsoResize)}else{C.each(I.alsoResize,function(J){H(J)})}}else{H(I.alsoResize)}},resize:function(G,I){var F=C(this).data("resizable"),J=F.options,H=F.originalSize,L=F.originalPosition;var K={height:(F.size.height-H.height)||0,width:(F.size.width-H.width)||0,top:(F.position.top-L.top)||0,left:(F.position.left-L.left)||0},E=function(M,N){C(M).each(function(){var Q=C(this),R=C(this).data("resizable-alsoresize"),P={},O=N&&N.length?N:Q.parents(I.originalElement[0]).length?["width","height"]:["width","height","top","left"];C.each(O,function(S,U){var T=(R[U]||0)+(K[U]||0);if(T&&T>=0){P[U]=T||null}});Q.css(P)})};if(typeof (J.alsoResize)=="object"&&!J.alsoResize.nodeType){C.each(J.alsoResize,function(M,N){E(M,N)})}else{E(J.alsoResize)}},stop:function(E,F){C(this).removeData("resizable-alsoresize")}});C.ui.plugin.add("resizable","animate",{stop:function(I,N){var O=C(this).data("resizable"),J=O.options;var H=O._proportionallyResizeElements,E=H.length&&(/textarea/i).test(H[0].nodeName),F=E&&C.ui.hasScroll(H[0],"left")?0:O.sizeDiff.height,L=E?0:O.sizeDiff.width;var G={width:(O.size.width-L),height:(O.size.height-F)},K=(parseInt(O.element.css("left"),10)+(O.position.left-O.originalPosition.left))||null,M=(parseInt(O.element.css("top"),10)+(O.position.top-O.originalPosition.top))||null;O.element.animate(C.extend(G,M&&K?{top:M,left:K}:{}),{duration:J.animateDuration,easing:J.animateEasing,step:function(){var P={width:parseInt(O.element.css("width"),10),height:parseInt(O.element.css("height"),10),top:parseInt(O.element.css("top"),10),left:parseInt(O.element.css("left"),10)};if(H&&H.length){C(H[0]).css({width:P.width,height:P.height})}O._updateCache(P);O._propagate("resize",I)}})}});C.ui.plugin.add("resizable","containment",{start:function(F,P){var R=C(this).data("resizable"),J=R.options,L=R.element;var G=J.containment,K=(G instanceof C)?G.get(0):(/parent/.test(G))?L.parent().get(0):G;if(!K){return }R.containerElement=C(K);if(/document/.test(G)||G==document){R.containerOffset={left:0,top:0};R.containerPosition={left:0,top:0};R.parentData={element:C(document),left:0,top:0,width:C(document).width(),height:C(document).height()||document.body.parentNode.scrollHeight}}else{var N=C(K),I=[];C(["Top","Right","Left","Bottom"]).each(function(T,S){I[T]=B(N.css("padding"+S))});R.containerOffset=N.offset();R.containerPosition=N.position();R.containerSize={height:(N.innerHeight()-I[3]),width:(N.innerWidth()-I[1])};var O=R.containerOffset,E=R.containerSize.height,M=R.containerSize.width,H=(C.ui.hasScroll(K,"left")?K.scrollWidth:M),Q=(C.ui.hasScroll(K)?K.scrollHeight:E);R.parentData={element:K,left:O.left,top:O.top,width:H,height:Q}}},resize:function(G,P){var S=C(this).data("resizable"),I=S.options,F=S.containerSize,O=S.containerOffset,M=S.size,N=S.position,Q=S._aspectRatio||G.shiftKey,E={top:0,left:0},H=S.containerElement;if(H[0]!=document&&(/static/).test(H.css("position"))){E=O}if(N.left<(S._helper?O.left:0)){S.size.width=S.size.width+(S._helper?(S.position.left-O.left):(S.position.left-E.left));if(Q){S.size.height=S.size.width/S.aspectRatio}S.position.left=I.helper?O.left:0}if(N.top<(S._helper?O.top:0)){S.size.height=S.size.height+(S._helper?(S.position.top-O.top):S.position.top);if(Q){S.size.width=S.size.height*S.aspectRatio}S.position.top=S._helper?O.top:0}S.offset.left=S.parentData.left+S.position.left;S.offset.top=S.parentData.top+S.position.top;var L=Math.abs((S._helper?S.offset.left-E.left:(S.offset.left-E.left))+S.sizeDiff.width),R=Math.abs((S._helper?S.offset.top-E.top:(S.offset.top-O.top))+S.sizeDiff.height);var K=S.containerElement.get(0)==S.element.parent().get(0),J=/relative|absolute/.test(S.containerElement.css("position"));if(K&&J){L-=S.parentData.left}if(L+S.size.width>=S.parentData.width){S.size.width=S.parentData.width-L;if(Q){S.size.height=S.size.width/S.aspectRatio}}if(R+S.size.height>=S.parentData.height){S.size.height=S.parentData.height-R;if(Q){S.size.width=S.size.height*S.aspectRatio}}},stop:function(F,M){var O=C(this).data("resizable"),G=O.options,K=O.position,L=O.containerOffset,E=O.containerPosition,H=O.containerElement;var I=C(O.helper),P=I.offset(),N=I.outerWidth()-O.sizeDiff.width,J=I.outerHeight()-O.sizeDiff.height;if(O._helper&&!G.animate&&(/relative/).test(H.css("position"))){C(this).css({left:P.left-E.left-L.left,width:N,height:J})}if(O._helper&&!G.animate&&(/static/).test(H.css("position"))){C(this).css({left:P.left-E.left-L.left,width:N,height:J})}}});C.ui.plugin.add("resizable","ghost",{start:function(G,H){var E=C(this).data("resizable"),I=E.options,F=E.size;E.ghost=E.originalElement.clone();E.ghost.css({opacity:0.25,display:"block",position:"relative",height:F.height,width:F.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof I.ghost=="string"?I.ghost:"");E.ghost.appendTo(E.helper)},resize:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost){E.ghost.css({position:"relative",height:E.size.height,width:E.size.width})}},stop:function(F,G){var E=C(this).data("resizable"),H=E.options;if(E.ghost&&E.helper){E.helper.get(0).removeChild(E.ghost.get(0))}}});C.ui.plugin.add("resizable","grid",{resize:function(E,M){var O=C(this).data("resizable"),H=O.options,K=O.size,I=O.originalSize,J=O.originalPosition,N=O.axis,L=H._aspectRatio||E.shiftKey;H.grid=typeof H.grid=="number"?[H.grid,H.grid]:H.grid;var G=Math.round((K.width-I.width)/(H.grid[0]||1))*(H.grid[0]||1),F=Math.round((K.height-I.height)/(H.grid[1]||1))*(H.grid[1]||1);if(/^(se|s|e)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F}else{if(/^(ne)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F;O.position.top=J.top-F}else{if(/^(sw)$/.test(N)){O.size.width=I.width+G;O.size.height=I.height+F;O.position.left=J.left-G}else{O.size.width=I.width+G;O.size.height=I.height+F;O.position.top=J.top-F;O.position.left=J.left-G}}}}});var B=function(E){return parseInt(E,10)||0};var A=function(E){return !isNaN(parseInt(E,10))}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.selectable.js' */
/*
 * jQuery UI Selectable 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.selectable",A.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var C=this;this.element.addClass("ui-selectable");this.dragged=false;var D;this.refresh=function(){D=A(C.options.filter,C.element[0]);D.addClass("ui-selectee");D.each(function(){var E=A(this);var F=E.offset();A.data(this,"selectable-item",{element:this,$element:E,left:F.left,top:F.top,right:F.left+E.outerWidth(),bottom:F.top+E.outerHeight(),startselected:false,selected:E.hasClass("ui-selected"),selecting:E.hasClass("ui-selecting"),unselecting:E.hasClass("ui-unselecting")})})};this.refresh();this.selectees=D.addClass("ui-selectee");this._mouseInit();this.helper=A("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(E){var C=this;this.opos=[E.pageX,E.pageY];if(this.options.disabled){return }var D=this.options;this.selectees=A(D.filter,this.element[0]);this._trigger("start",E);A(D.appendTo).append(this.helper);this.helper.css({left:E.clientX,top:E.clientY,width:0,height:0});if(D.autoRefresh){this.refresh()}this.selectees.filter(".ui-selected").each(function(){var F=A.data(this,"selectable-item");F.startselected=true;if(!E.metaKey&&!E.ctrlKey){F.$element.removeClass("ui-selected");F.selected=false;F.$element.addClass("ui-unselecting");F.unselecting=true;C._trigger("unselecting",E,{unselecting:F.element})}});A(E.target).parents().andSelf().each(function(){var G=A.data(this,"selectable-item");if(G){var F=(!E.metaKey&&!E.ctrlKey)||!G.$element.hasClass("ui-selected");G.$element.removeClass(F?"ui-unselecting":"ui-selected").addClass(F?"ui-selecting":"ui-unselecting");G.unselecting=!F;G.selecting=F;G.selected=F;if(F){C._trigger("selecting",E,{selecting:G.element})}else{C._trigger("unselecting",E,{unselecting:G.element})}return false}})},_mouseDrag:function(J){var D=this;this.dragged=true;if(this.options.disabled){return }var F=this.options;var E=this.opos[0],I=this.opos[1],C=J.pageX,H=J.pageY;if(E>C){var G=C;C=E;E=G}if(I>H){var G=H;H=I;I=G}this.helper.css({left:E,top:I,width:C-E,height:H-I});this.selectees.each(function(){var K=A.data(this,"selectable-item");if(!K||K.element==D.element[0]){return }var L=false;if(F.tolerance=="touch"){L=(!(K.left>C||K.right<E||K.top>H||K.bottom<I))}else{if(F.tolerance=="fit"){L=(K.left>E&&K.right<C&&K.top>I&&K.bottom<H)}}if(L){if(K.selected){K.$element.removeClass("ui-selected");K.selected=false}if(K.unselecting){K.$element.removeClass("ui-unselecting");K.unselecting=false}if(!K.selecting){K.$element.addClass("ui-selecting");K.selecting=true;D._trigger("selecting",J,{selecting:K.element})}}else{if(K.selecting){if((J.metaKey||J.ctrlKey)&&K.startselected){K.$element.removeClass("ui-selecting");K.selecting=false;K.$element.addClass("ui-selected");K.selected=true}else{K.$element.removeClass("ui-selecting");K.selecting=false;if(K.startselected){K.$element.addClass("ui-unselecting");K.unselecting=true}D._trigger("unselecting",J,{unselecting:K.element})}}if(K.selected){if(!J.metaKey&&!J.ctrlKey&&!K.startselected){K.$element.removeClass("ui-selected");K.selected=false;K.$element.addClass("ui-unselecting");K.unselecting=true;D._trigger("unselecting",J,{unselecting:K.element})}}}});return false},_mouseStop:function(E){var C=this;this.dragged=false;var D=this.options;A(".ui-unselecting",this.element[0]).each(function(){var F=A.data(this,"selectable-item");F.$element.removeClass("ui-unselecting");F.unselecting=false;F.startselected=false;C._trigger("unselected",E,{unselected:F.element})});A(".ui-selecting",this.element[0]).each(function(){var F=A.data(this,"selectable-item");F.$element.removeClass("ui-selecting").addClass("ui-selected");F.selecting=false;F.selected=true;F.startselected=true;C._trigger("selected",E,{selected:F.element})});this._trigger("stop",E);this.helper.remove();return false}});A.extend(A.ui.selectable,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.accordion.js' */
/*
 * jQuery UI Accordion 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var C=this,D=C.options;C.running=0;C.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");C.headers=C.element.find(D.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(D.disabled){return }A(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(D.disabled){return }A(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(D.disabled){return }A(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(D.disabled){return }A(this).removeClass("ui-state-focus")});C.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(D.navigation){var E=C.element.find("a").filter(D.navigationFilter).eq(0);if(E.length){var F=E.closest(".ui-accordion-header");if(F.length){C.active=F}else{C.active=E.closest(".ui-accordion-content").prev()}}}C.active=C._findActive(C.active||D.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top");C.active.next().addClass("ui-accordion-content-active");C._createIcons();C.resize();C.element.attr("role","tablist");C.headers.attr("role","tab").bind("keydown.accordion",function(G){return C._keydown(G)}).next().attr("role","tabpanel");C.headers.not(C.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide();if(!C.active.length){C.headers.eq(0).attr("tabIndex",0)}else{C.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0})}if(!A.browser.safari){C.headers.find("a").attr("tabIndex",-1)}if(D.event){C.headers.bind(D.event.split(" ").join(".accordion ")+".accordion",function(G){C._clickHandler.call(C,G,this);G.preventDefault()})}},_createIcons:function(){var C=this.options;if(C.icons){A("<span></span>").addClass("ui-icon "+C.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(C.icons.header).toggleClass(C.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var C=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var D=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(C.autoHeight||C.fillHeight){D.css("height","")}return A.Widget.prototype.destroy.call(this)},_setOption:function(C,D){A.Widget.prototype._setOption.apply(this,arguments);if(C=="active"){this.activate(D)}if(C=="icons"){this._destroyIcons();if(D){this._createIcons()}}if(C=="disabled"){this.headers.add(this.headers.next())[D?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")}},_keydown:function(F){if(this.options.disabled||F.altKey||F.ctrlKey){return }var G=A.ui.keyCode,E=this.headers.length,C=this.headers.index(F.target),D=false;switch(F.keyCode){case G.RIGHT:case G.DOWN:D=this.headers[(C+1)%E];break;case G.LEFT:case G.UP:D=this.headers[(C-1+E)%E];break;case G.SPACE:case G.ENTER:this._clickHandler({target:F.target},F.target);F.preventDefault()}if(D){A(F.target).attr("tabIndex",-1);A(D).attr("tabIndex",0);D.focus();return false}return true},resize:function(){var C=this.options,E;if(C.fillSpace){if(A.browser.msie){var D=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}E=this.element.parent().height();if(A.browser.msie){this.element.parent().css("overflow",D)}this.headers.each(function(){E-=A(this).outerHeight(true)});this.headers.next().each(function(){A(this).height(Math.max(0,E-A(this).innerHeight()+A(this).height()))}).css("overflow","auto")}else{if(C.autoHeight){E=0;this.headers.next().each(function(){E=Math.max(E,A(this).height("").height())}).height(E)}}return this},activate:function(C){this.options.active=C;var D=this._findActive(C)[0];this._clickHandler({target:D},D);return this},_findActive:function(C){return C?typeof C==="number"?this.headers.filter(":eq("+C+")"):this.headers.not(this.headers.not(C)):C===false?A([]):this.headers.filter(":eq(0)")},_clickHandler:function(C,G){var L=this.options;if(L.disabled){return }if(!C.target){if(!L.collapsible){return }this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(L.icons.headerSelected).addClass(L.icons.header);this.active.next().addClass("ui-accordion-content-active");var I=this.active.next(),F={options:L,newHeader:A([]),oldHeader:L.active,newContent:A([]),oldContent:I},D=(this.active=A([]));this._toggle(D,I,F);return }var H=A(C.currentTarget||G),J=H[0]===this.active[0];L.active=L.collapsible&&J?false:this.headers.index(H);if(this.running||(!L.collapsible&&J)){return }var E=this.active,D=H.next(),I=this.active.next(),F={options:L,newHeader:J&&L.collapsible?A([]):H,oldHeader:this.active,newContent:J&&L.collapsible?A([]):D,oldContent:I},K=this.headers.index(this.active[0])>this.headers.index(H[0]);this.active=J?A([]):H;this._toggle(D,I,F,J,K);E.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(L.icons.headerSelected).addClass(L.icons.header);if(!J){H.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(L.icons.header).addClass(L.icons.headerSelected);H.next().addClass("ui-accordion-content-active")}return },_toggle:function(C,I,G,J,K){var M=this,N=M.options;M.toShow=C;M.toHide=I;M.data=G;var D=function(){if(!M){return }return M._completed.apply(M,arguments)};M._trigger("changestart",null,M.data);M.running=I.size()===0?C.size():I.size();if(N.animated){var F={};if(N.collapsible&&J){F={toShow:A([]),toHide:I,complete:D,down:K,autoHeight:N.autoHeight||N.fillSpace}}else{F={toShow:C,toHide:I,complete:D,down:K,autoHeight:N.autoHeight||N.fillSpace}}if(!N.proxied){N.proxied=N.animated}if(!N.proxiedDuration){N.proxiedDuration=N.duration}N.animated=A.isFunction(N.proxied)?N.proxied(F):N.proxied;N.duration=A.isFunction(N.proxiedDuration)?N.proxiedDuration(F):N.proxiedDuration;var L=A.ui.accordion.animations,E=N.duration,H=N.animated;if(H&&!L[H]&&!A.easing[H]){H="slide"}if(!L[H]){L[H]=function(O){this.slide(O,{easing:H,duration:E||700})}}L[H](F)}else{if(N.collapsible&&J){C.toggle()}else{I.hide();C.show()}D(true)}I.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur();C.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(C){this.running=C?0:--this.running;if(this.running){return }if(this.options.clearStyle){this.toShow.add(this.toHide).css({height:"",overflow:""})}this.toHide.removeClass("ui-accordion-content-active");if(this.toHide.length){this.toHide.parent()[0].className=this.toHide.parent()[0].className}this._trigger("change",null,this.data)}});A.extend(A.ui.accordion,{version:"1.8.24",animations:{slide:function(K,I){K=A.extend({easing:"swing",duration:300},K,I);if(!K.toHide.size()){K.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},K);return }if(!K.toShow.size()){K.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},K);return }var D=K.toShow.css("overflow"),H=0,E={},G={},F=["height","paddingTop","paddingBottom"],C;var J=K.toShow;C=J[0].style.width;J.width(J.parent().width()-parseFloat(J.css("paddingLeft"))-parseFloat(J.css("paddingRight"))-(parseFloat(J.css("borderLeftWidth"))||0)-(parseFloat(J.css("borderRightWidth"))||0));A.each(F,function(L,N){G[N]="hide";var M=(""+A.css(K.toShow[0],N)).match(/^([\d+-.]+)(.*)$/);E[N]={value:M[1],unit:M[2]||"px"}});K.toShow.css({height:0,overflow:"hidden"}).show();K.toHide.filter(":hidden").each(K.complete).end().filter(":visible").animate(G,{step:function(L,M){if(M.prop=="height"){H=(M.end-M.start===0)?0:(M.now-M.start)/(M.end-M.start)}K.toShow[0].style[M.prop]=(H*E[M.prop].value)+E[M.prop].unit},duration:K.duration,easing:K.easing,complete:function(){if(!K.autoHeight){K.toShow.css("height","")}K.toShow.css({width:C,overflow:D});K.complete()}})},bounceslide:function(C){this.slide(C,{easing:C.down?"easeOutBounce":"swing",duration:C.down?1000:200})}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.autocomplete.js' */
/*
 * jQuery UI Autocomplete 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
(function(A,B){var C=0;A.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var D=this,F=this.element[0].ownerDocument,E;this.isMultiLine=this.element.is("textarea");this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(G){if(D.options.disabled||D.element.propAttr("readOnly")){return }E=false;var H=A.ui.keyCode;switch(G.keyCode){case H.PAGE_UP:D._move("previousPage",G);break;case H.PAGE_DOWN:D._move("nextPage",G);break;case H.UP:D._keyEvent("previous",G);break;case H.DOWN:D._keyEvent("next",G);break;case H.ENTER:case H.NUMPAD_ENTER:if(D.menu.active){E=true;G.preventDefault()}case H.TAB:if(!D.menu.active){return }D.menu.select(G);break;case H.ESCAPE:D.element.val(D.term);D.close(G);break;default:clearTimeout(D.searching);D.searching=setTimeout(function(){if(D.term!=D.element.val()){D.selectedItem=null;D.search(null,G)}},D.options.delay);break}}).bind("keypress.autocomplete",function(G){if(E){E=false;G.preventDefault()}}).bind("focus.autocomplete",function(){if(D.options.disabled){return }D.selectedItem=null;D.previous=D.element.val()}).bind("blur.autocomplete",function(G){if(D.options.disabled){return }clearTimeout(D.searching);D.closing=setTimeout(function(){D.close(G);D._change(G)},150)});this._initSource();this.menu=A("<ul></ul>").addClass("ui-autocomplete").appendTo(A(this.options.appendTo||"body",F)[0]).mousedown(function(G){var H=D.menu.element[0];if(!A(G.target).closest(".ui-menu-item").length){setTimeout(function(){A(document).one("mousedown",function(I){if(I.target!==D.element[0]&&I.target!==H&&!A.ui.contains(H,I.target)){D.close()}})},1)}setTimeout(function(){clearTimeout(D.closing)},13)}).menu({focus:function(H,I){var G=I.item.data("item.autocomplete");if(false!==D._trigger("focus",H,{item:G})){if(/^key/.test(H.originalEvent.type)){D.element.val(G.value)}}},selected:function(I,J){var H=J.item.data("item.autocomplete"),G=D.previous;if(D.element[0]!==F.activeElement){D.element.focus();D.previous=G;setTimeout(function(){D.previous=G;D.selectedItem=H},1)}if(false!==D._trigger("select",I,{item:H})){D.element.val(H.value)}D.term=D.element.val();D.close(I);D.selectedItem=H},blur:function(G,H){if(D.menu.element.is(":visible")&&(D.element.val()!==D.term)){D.element.val(D.term)}}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");if(A.fn.bgiframe){this.menu.element.bgiframe()}D.beforeunloadHandler=function(){D.element.removeAttr("autocomplete")};A(window).bind("beforeunload",D.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();A(window).unbind("beforeunload",this.beforeunloadHandler);A.Widget.prototype.destroy.call(this)},_setOption:function(D,E){A.Widget.prototype._setOption.apply(this,arguments);if(D==="source"){this._initSource()}if(D==="appendTo"){this.menu.element.appendTo(A(E||"body",this.element[0].ownerDocument)[0])}if(D==="disabled"&&E&&this.xhr){this.xhr.abort()}},_initSource:function(){var D=this,F,E;if(A.isArray(this.options.source)){F=this.options.source;this.source=function(H,G){G(A.ui.autocomplete.filter(F,H.term))}}else{if(typeof this.options.source==="string"){E=this.options.source;this.source=function(H,G){if(D.xhr){D.xhr.abort()}D.xhr=A.ajax({url:E,data:H,dataType:"json",success:function(J,I){G(J)},error:function(){G([])}})}}else{this.source=this.options.source}}},search:function(E,D){E=E!=null?E:this.element.val();this.term=this.element.val();if(E.length<this.options.minLength){return this.close(D)}clearTimeout(this.closing);if(this._trigger("search",D)===false){return }return this._search(E)},_search:function(D){this.pending++;this.element.addClass("ui-autocomplete-loading");this.source({term:D},this._response())},_response:function(){var E=this,D=++C;return function(F){if(D===C){E.__response(F)}E.pending--;if(!E.pending){E.element.removeClass("ui-autocomplete-loading")}}},__response:function(D){if(!this.options.disabled&&D&&D.length){D=this._normalize(D);this._suggest(D);this._trigger("open")}else{this.close()}},close:function(D){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.deactivate();this._trigger("close",D)}},_change:function(D){if(this.previous!==this.element.val()){this._trigger("change",D,{item:this.selectedItem})}},_normalize:function(D){if(D.length&&D[0].label&&D[0].value){return D}return A.map(D,function(E){if(typeof E==="string"){return{label:E,value:E}}return A.extend({label:E.label||E.value,value:E.value||E.label},E)})},_suggest:function(D){var E=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(E,D);this.menu.deactivate();this.menu.refresh();E.show();this._resizeMenu();E.position(A.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next(new A.Event("mouseover"))}},_resizeMenu:function(){var D=this.menu.element;D.outerWidth(Math.max(D.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(F,E){var D=this;A.each(E,function(G,H){D._renderItem(F,H)})},_renderItem:function(D,E){return A("<li></li>").data("item.autocomplete",E).append(A("<a></a>").text(E.label)).appendTo(D)},_move:function(E,D){if(!this.menu.element.is(":visible")){this.search(null,D);return }if(this.menu.first()&&/^previous/.test(E)||this.menu.last()&&/^next/.test(E)){this.element.val(this.term);this.menu.deactivate();return }this.menu[E](D)},widget:function(){return this.menu.element},_keyEvent:function(E,D){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(E,D);D.preventDefault()}}});A.extend(A.ui.autocomplete,{escapeRegex:function(D){return D.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(F,D){var E=new RegExp(A.ui.autocomplete.escapeRegex(D),"i");return A.grep(F,function(G){return E.test(G.label||G.value||G)})}})}(jQuery));(function(A){A.widget("ui.menu",{_create:function(){var B=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(C){if(!A(C.target).closest(".ui-menu-item a").length){return }C.preventDefault();B.select(C)});this.refresh()},refresh:function(){var C=this;var B=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");B.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(D){C.activate(D,A(this).parent())}).mouseleave(function(){C.deactivate()})},activate:function(E,D){this.deactivate();if(this.hasScroll()){var F=D.offset().top-this.element.offset().top,B=this.element.scrollTop(),C=this.element.height();if(F<0){this.element.scrollTop(B+F)}else{if(F>=C){this.element.scrollTop(B+F-C+D.height())}}}this.active=D.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",E,{item:D})},deactivate:function(){if(!this.active){return }this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(B){this.move("next",".ui-menu-item:first",B)},previous:function(B){this.move("prev",".ui-menu-item:last",B)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(E,D,C){if(!this.active){this.activate(C,this.element.children(D));return }var B=this.active[E+"All"](".ui-menu-item").eq(0);if(B.length){this.activate(C,B)}else{this.activate(C,this.element.children(D))}},nextPage:function(D){if(this.hasScroll()){if(!this.active||this.last()){this.activate(D,this.element.children(".ui-menu-item:first"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children(".ui-menu-item").filter(function(){var F=A(this).offset().top-E-C+A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(".ui-menu-item:last")}this.activate(D,B)}else{this.activate(D,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))}},previousPage:function(D){if(this.hasScroll()){if(!this.active||this.first()){this.activate(D,this.element.children(".ui-menu-item:last"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children(".ui-menu-item").filter(function(){var F=A(this).offset().top-E+C-A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(".ui-menu-item:first")}this.activate(D,B)}else{this.activate(D,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element[A.fn.prop?"prop":"attr"]("scrollHeight")},select:function(B){this._trigger("selected",B,{item:this.active})}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.button.js' */
/*
 * jQuery UI Button 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(F,B){var K,E,A,H,I="ui-button ui-widget ui-state-default ui-corner-all",C="ui-state-hover ui-state-active ",G="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",J=function(){var L=F(this).find(":ui-button");setTimeout(function(){L.button("refresh")},1)},D=function(M){var L=M.name,N=M.form,O=F([]);if(L){if(N){O=F(N).find("[name='"+L+"']")}else{O=F("[name='"+L+"']",M.ownerDocument).filter(function(){return !this.form})}}return O};F.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",J);if(typeof this.options.disabled!=="boolean"){this.options.disabled=!!this.element.propAttr("disabled")}else{this.element.propAttr("disabled",this.options.disabled)}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var L=this,N=this.options,O=this.type==="checkbox"||this.type==="radio",P="ui-state-hover"+(!O?" ui-state-active":""),M="ui-state-focus";if(N.label===null){N.label=this.buttonElement.html()}this.buttonElement.addClass(I).attr("role","button").bind("mouseenter.button",function(){if(N.disabled){return }F(this).addClass("ui-state-hover");if(this===K){F(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){if(N.disabled){return }F(this).removeClass(P)}).bind("click.button",function(Q){if(N.disabled){Q.preventDefault();Q.stopImmediatePropagation()}});this.element.bind("focus.button",function(){L.buttonElement.addClass(M)}).bind("blur.button",function(){L.buttonElement.removeClass(M)});if(O){this.element.bind("change.button",function(){if(H){return }L.refresh()});this.buttonElement.bind("mousedown.button",function(Q){if(N.disabled){return }H=false;E=Q.pageX;A=Q.pageY}).bind("mouseup.button",function(Q){if(N.disabled){return }if(E!==Q.pageX||A!==Q.pageY){H=true}})}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(N.disabled||H){return false}F(this).toggleClass("ui-state-active");L.buttonElement.attr("aria-pressed",L.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(N.disabled||H){return false}F(this).addClass("ui-state-active");L.buttonElement.attr("aria-pressed","true");var Q=L.element[0];D(Q).not(Q).map(function(){return F(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")})}else{this.buttonElement.bind("mousedown.button",function(){if(N.disabled){return false}F(this).addClass("ui-state-active");K=this;F(document).one("mouseup",function(){K=null})}).bind("mouseup.button",function(){if(N.disabled){return false}F(this).removeClass("ui-state-active")}).bind("keydown.button",function(Q){if(N.disabled){return false}if(Q.keyCode==F.ui.keyCode.SPACE||Q.keyCode==F.ui.keyCode.ENTER){F(this).addClass("ui-state-active")}}).bind("keyup.button",function(){F(this).removeClass("ui-state-active")});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(Q){if(Q.keyCode===F.ui.keyCode.SPACE){F(this).click()}})}}}this._setOption("disabled",N.disabled);this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox"}else{if(this.element.is(":radio")){this.type="radio"}else{if(this.element.is("input")){this.type="input"}else{this.type="button"}}}if(this.type==="checkbox"||this.type==="radio"){var L=this.element.parents().filter(":last"),N="label[for='"+this.element.attr("id")+"']";this.buttonElement=L.find(N);if(!this.buttonElement.length){L=L.length?L.siblings():this.element.siblings();this.buttonElement=L.filter(N);if(!this.buttonElement.length){this.buttonElement=L.find(N)}}this.element.addClass("ui-helper-hidden-accessible");var M=this.element.is(":checked");if(M){this.buttonElement.addClass("ui-state-active")}this.buttonElement.attr("aria-pressed",M)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(I+" "+C+" "+G).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle){this.buttonElement.removeAttr("title")}F.Widget.prototype.destroy.call(this)},_setOption:function(L,M){F.Widget.prototype._setOption.apply(this,arguments);if(L==="disabled"){if(M){this.element.propAttr("disabled",true)}else{this.element.propAttr("disabled",false)}return }this._resetButton()},refresh:function(){var L=this.element.is(":disabled");if(L!==this.options.disabled){this._setOption("disabled",L)}if(this.type==="radio"){D(this.element[0]).each(function(){if(F(this).is(":checked")){F(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true")}else{F(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}})}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true")}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label)}return }var P=this.buttonElement.removeClass(G),N=F("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(P.empty()).text(),M=this.options.icons,L=M.primary&&M.secondary,O=[];if(M.primary||M.secondary){if(this.options.text){O.push("ui-button-text-icon"+(L?"s":(M.primary?"-primary":"-secondary")))}if(M.primary){P.prepend("<span class='ui-button-icon-primary ui-icon "+M.primary+"'></span>")}if(M.secondary){P.append("<span class='ui-button-icon-secondary ui-icon "+M.secondary+"'></span>")}if(!this.options.text){O.push(L?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle){P.attr("title",N)}}}else{O.push("ui-button-text-only")}P.addClass(O.join(" "))}});F.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(L,M){if(L==="disabled"){this.buttons.button("option",L,M)}F.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var L=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(L?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(L?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return F(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");F.Widget.prototype.destroy.call(this)}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
/*
 * jQuery UI Datepicker 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return }this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target)}},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker()}else{if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else{$.datepicker._showDatepicker(input[0])}}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return }divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target)}inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{$.datepicker._hideDatepicker()}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){$.datepicker.log(err)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return }var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}var beforeShow=$.datepicker._get(inst,"beforeShow");var beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return }extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var self=this;self.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus()}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft());var viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return }if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return }var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst)){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return }this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return }var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof (inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return -(a[1].length-b[1].length)});var index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!=-1){return index+1}else{throw"Unknown name at position "+iValue}};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(iValue<value.length){throw"Extra/unparsed characters found in date: "+value.substring(iValue)}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return }var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths");var id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var curRows=Math.ceil((leadDays+daysInMonth)/7);var numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.bind("mouseout",function(event){var elem=$(event.target).closest(selector);if(!elem.length){return }elem.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(event){var elem=$(event.target).closest(selector);if($.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||!elem.length){return }elem.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");elem.addClass("ui-state-hover");if(elem.hasClass("ui-datepicker-prev")){elem.addClass("ui-datepicker-prev-hover")}if(elem.hasClass("ui-datepicker-next")){elem.addClass("ui-datepicker-next-hover")}})}function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8.24";window["DP_jQuery_"+dpuuid]=$})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.dialog.js' */
/*
 * jQuery UI Dialog 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
(function(D,E){var B="ui-dialog ui-widget ui-widget-content ui-corner-all ",A={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},C={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};D.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",collision:"fit",using:function(G){var F=D(this).css(G).offset().top;if(F<0){D(this).css("top",G.top-F)}}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}this.options.title=this.options.title||this.originalTitle;var N=this,O=N.options,L=O.title||"&#160;",G=D.ui.dialog.getTitleId(N.element),M=(N.uiDialog=D("<div></div>")).appendTo(document.body).hide().addClass(B+O.dialogClass).css({zIndex:O.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(P){if(O.closeOnEscape&&!P.isDefaultPrevented()&&P.keyCode&&P.keyCode===D.ui.keyCode.ESCAPE){N.close(P);P.preventDefault()}}).attr({role:"dialog","aria-labelledby":G}).mousedown(function(P){N.moveToTop(false,P)}),I=N.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(M),H=(N.uiDialogTitlebar=D("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(M),K=D('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){K.addClass("ui-state-hover")},function(){K.removeClass("ui-state-hover")}).focus(function(){K.addClass("ui-state-focus")}).blur(function(){K.removeClass("ui-state-focus")}).click(function(P){N.close(P);return false}).appendTo(H),J=(N.uiDialogTitlebarCloseText=D("<span></span>")).addClass("ui-icon ui-icon-closethick").text(O.closeText).appendTo(K),F=D("<span></span>").addClass("ui-dialog-title").attr("id",G).html(L).prependTo(H);if(D.isFunction(O.beforeclose)&&!D.isFunction(O.beforeClose)){O.beforeClose=O.beforeclose}H.find("*").add(H).disableSelection();if(O.draggable&&D.fn.draggable){N._makeDraggable()}if(O.resizable&&D.fn.resizable){N._makeResizable()}N._createButtons(O.buttons);N._isOpen=false;if(D.fn.bgiframe){M.bgiframe()}},_init:function(){if(this.options.autoOpen){this.open()}},destroy:function(){var F=this;if(F.overlay){F.overlay.destroy()}F.uiDialog.hide();F.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");F.uiDialog.remove();if(F.originalTitle){F.element.attr("title",F.originalTitle)}return F},widget:function(){return this.uiDialog},close:function(I){var F=this,H,G;if(false===F._trigger("beforeClose",I)){return }if(F.overlay){F.overlay.destroy()}F.uiDialog.unbind("keypress.ui-dialog");F._isOpen=false;if(F.options.hide){F.uiDialog.hide(F.options.hide,function(){F._trigger("close",I)})}else{F.uiDialog.hide();F._trigger("close",I)}D.ui.dialog.overlay.resize();if(F.options.modal){H=0;D(".ui-dialog").each(function(){if(this!==F.uiDialog[0]){G=D(this).css("z-index");if(!isNaN(G)){H=Math.max(H,G)}}});D.ui.dialog.maxZ=H}return F},isOpen:function(){return this._isOpen},moveToTop:function(J,I){var F=this,H=F.options,G;if((H.modal&&!J)||(!H.stack&&!H.modal)){return F._trigger("focus",I)}if(H.zIndex>D.ui.dialog.maxZ){D.ui.dialog.maxZ=H.zIndex}if(F.overlay){D.ui.dialog.maxZ+=1;F.overlay.$el.css("z-index",D.ui.dialog.overlay.maxZ=D.ui.dialog.maxZ)}G={scrollTop:F.element.scrollTop(),scrollLeft:F.element.scrollLeft()};D.ui.dialog.maxZ+=1;F.uiDialog.css("z-index",D.ui.dialog.maxZ);F.element.attr(G);F._trigger("focus",I);return F},open:function(){if(this._isOpen){return }var G=this,H=G.options,F=G.uiDialog;G.overlay=H.modal?new D.ui.dialog.overlay(G):null;G._size();G._position(H.position);F.show(H.show);G.moveToTop(true);if(H.modal){F.bind("keydown.ui-dialog",function(K){if(K.keyCode!==D.ui.keyCode.TAB){return }var J=D(":tabbable",this),L=J.filter(":first"),I=J.filter(":last");if(K.target===I[0]&&!K.shiftKey){L.focus(1);return false}else{if(K.target===L[0]&&K.shiftKey){I.focus(1);return false}}})}D(G.element.find(":tabbable").get().concat(F.find(".ui-dialog-buttonpane :tabbable").get().concat(F.get()))).eq(0).focus();G._isOpen=true;G._trigger("open");return G},_createButtons:function(I){var H=this,F=false,G=D("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),J=D("<div></div>").addClass("ui-dialog-buttonset").appendTo(G);H.uiDialog.find(".ui-dialog-buttonpane").remove();if(typeof I==="object"&&I!==null){D.each(I,function(){return !(F=true)})}if(F){D.each(I,function(K,M){M=D.isFunction(M)?{click:M,text:K}:M;var L=D('<button type="button"></button>').click(function(){M.click.apply(H.element[0],arguments)}).appendTo(J);D.each(M,function(N,O){if(N==="click"){return }if(N in L){L[N](O)}else{L.attr(N,O)}});if(D.fn.button){L.button()}});G.appendTo(H.uiDialog)}},_makeDraggable:function(){var F=this,I=F.options,J=D(document),H;function G(K){return{position:K.position,offset:K.offset}}F.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(K,L){H=I.height==="auto"?"auto":D(this).height();D(this).height(D(this).height()).addClass("ui-dialog-dragging");F._trigger("dragStart",K,G(L))},drag:function(K,L){F._trigger("drag",K,G(L))},stop:function(K,L){I.position=[L.position.left-J.scrollLeft(),L.position.top-J.scrollTop()];D(this).removeClass("ui-dialog-dragging").height(H);F._trigger("dragStop",K,G(L));D.ui.dialog.overlay.resize()}})},_makeResizable:function(K){K=(K===E?this.options.resizable:K);var G=this,J=G.options,F=G.uiDialog.css("position"),I=(typeof K==="string"?K:"n,e,s,w,se,sw,ne,nw");function H(L){return{originalPosition:L.originalPosition,originalSize:L.originalSize,position:L.position,size:L.size}}G.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:G.element,maxWidth:J.maxWidth,maxHeight:J.maxHeight,minWidth:J.minWidth,minHeight:G._minHeight(),handles:I,start:function(L,M){D(this).addClass("ui-dialog-resizing");G._trigger("resizeStart",L,H(M))},resize:function(L,M){G._trigger("resize",L,H(M))},stop:function(L,M){D(this).removeClass("ui-dialog-resizing");J.height=D(this).height();J.width=D(this).width();G._trigger("resizeStop",L,H(M));D.ui.dialog.overlay.resize()}}).css("position",F).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var F=this.options;if(F.height==="auto"){return F.minHeight}else{return Math.min(F.minHeight,F.height)}},_position:function(G){var H=[],I=[0,0],F;if(G){if(typeof G==="string"||(typeof G==="object"&&"0" in G)){H=G.split?G.split(" "):[G[0],G[1]];if(H.length===1){H[1]=H[0]}D.each(["left","top"],function(K,J){if(+H[K]===H[K]){I[K]=H[K];H[K]=J}});G={my:H.join(" "),at:H.join(" "),offset:I.join(" ")}}G=D.extend({},D.ui.dialog.prototype.options.position,G)}else{G=D.ui.dialog.prototype.options.position}F=this.uiDialog.is(":visible");if(!F){this.uiDialog.show()}this.uiDialog.css({top:0,left:0}).position(D.extend({of:window},G));if(!F){this.uiDialog.hide()}},_setOptions:function(I){var G=this,F={},H=false;D.each(I,function(J,K){G._setOption(J,K);if(J in A){H=true}if(J in C){F[J]=K}});if(H){this._size()}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option",F)}},_setOption:function(I,J){var G=this,F=G.uiDialog;switch(I){case"beforeclose":I="beforeClose";break;case"buttons":G._createButtons(J);break;case"closeText":G.uiDialogTitlebarCloseText.text(""+J);break;case"dialogClass":F.removeClass(G.options.dialogClass).addClass(B+J);break;case"disabled":if(J){F.addClass("ui-dialog-disabled")}else{F.removeClass("ui-dialog-disabled")}break;case"draggable":var H=F.is(":data(draggable)");if(H&&!J){F.draggable("destroy")}if(!H&&J){G._makeDraggable()}break;case"position":G._position(J);break;case"resizable":var K=F.is(":data(resizable)");if(K&&!J){F.resizable("destroy")}if(K&&typeof J==="string"){F.resizable("option","handles",J)}if(!K&&J!==false){G._makeResizable(J)}break;case"title":D(".ui-dialog-title",G.uiDialogTitlebar).html(""+(J||"&#160;"));break}D.Widget.prototype._setOption.apply(G,arguments)},_size:function(){var J=this.options,G,I,F=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});if(J.minWidth>J.width){J.width=J.minWidth}G=this.uiDialog.css({height:"auto",width:J.width}).height();I=Math.max(0,J.minHeight-G);if(J.height==="auto"){if(D.support.minHeight){this.element.css({minHeight:I,height:"auto"})}else{this.uiDialog.show();var H=this.element.css("height","auto").height();if(!F){this.uiDialog.hide()}this.element.height(Math.max(H,I))}}else{this.element.height(Math.max(J.height-G,0))}if(this.uiDialog.is(":data(resizable)")){this.uiDialog.resizable("option","minHeight",this._minHeight())}}});D.extend(D.ui.dialog,{version:"1.8.24",uuid:0,maxZ:0,getTitleId:function(F){var G=F.attr("id");if(!G){this.uuid+=1;G=this.uuid}return"ui-dialog-title-"+G},overlay:function(F){this.$el=D.ui.dialog.overlay.create(F)}});D.extend(D.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:D.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(F){return F+".dialog-overlay"}).join(" "),create:function(G){if(this.instances.length===0){setTimeout(function(){if(D.ui.dialog.overlay.instances.length){D(document).bind(D.ui.dialog.overlay.events,function(H){if(D(H.target).zIndex()<D.ui.dialog.overlay.maxZ){return false}})}},1);D(document).bind("keydown.dialog-overlay",function(H){if(G.options.closeOnEscape&&!H.isDefaultPrevented()&&H.keyCode&&H.keyCode===D.ui.keyCode.ESCAPE){G.close(H);H.preventDefault()}});D(window).bind("resize.dialog-overlay",D.ui.dialog.overlay.resize)}var F=(this.oldInstances.pop()||D("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});if(D.fn.bgiframe){F.bgiframe()}this.instances.push(F);return F},destroy:function(F){var G=D.inArray(F,this.instances);if(G!=-1){this.oldInstances.push(this.instances.splice(G,1)[0])}if(this.instances.length===0){D([document,window]).unbind(".dialog-overlay")}F.remove();var H=0;D.each(this.instances,function(){H=Math.max(H,this.css("z-index"))});this.maxZ=H},height:function(){var G,F;if(D.browser.msie&&D.browser.version<7){G=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);F=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);if(G<F){return D(window).height()+"px"}else{return G+"px"}}else{return D(document).height()+"px"}},width:function(){var F,G;if(D.browser.msie){F=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);G=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);if(F<G){return D(window).width()+"px"}else{return F+"px"}}else{return D(document).width()+"px"}},resize:function(){var F=D([]);D.each(D.ui.dialog.overlay.instances,function(){F=F.add(this)});F.css({width:0,height:0}).css({width:D.ui.dialog.overlay.width(),height:D.ui.dialog.overlay.height()})}});D.extend(D.ui.dialog.overlay.prototype,{destroy:function(){D.ui.dialog.overlay.destroy(this.$el)}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.progressbar.js' */
/*
 * jQuery UI Progressbar 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
(function(A,B){A.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=A("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();A.Widget.prototype.destroy.apply(this,arguments)},value:function(C){if(C===B){return this._value()}this._setOption("value",C);return this},_setOption:function(C,D){if(C==="value"){this.options.value=D;this._refreshValue();if(this._value()===this.options.max){this._trigger("complete")}}A.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var C=this.options.value;if(typeof C!=="number"){C=0}return Math.min(this.options.max,Math.max(this.min,C))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var D=this.value();var C=this._percentage();if(this.oldValue!==D){this.oldValue=D;this._trigger("change")}this.valueDiv.toggle(D>this.min).toggleClass("ui-corner-right",D===this.options.max).width(C.toFixed(0)+"%");this.element.attr("aria-valuenow",D)}});A.extend(A.ui.progressbar,{version:"1.8.24"})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.slider.js' */
/*
 * jQuery UI Slider 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(B,C){var A=5;B.widget("ui.slider",B.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var E=this,J=this.options,I=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),H="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",D=(J.values&&J.values.length)||1,G=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(J.disabled?" ui-slider-disabled ui-disabled":""));this.range=B([]);if(J.range){if(J.range===true){if(!J.values){J.values=[this._valueMin(),this._valueMin()]}if(J.values.length&&J.values.length!==2){J.values=[J.values[0],J.values[0]]}}this.range=B("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((J.range==="min"||J.range==="max")?" ui-slider-range-"+J.range:""))}for(var F=I.length;F<D;F+=1){G.push(H)}this.handles=I.add(B(G.join("")).appendTo(E.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(K){K.preventDefault()}).hover(function(){if(!J.disabled){B(this).addClass("ui-state-hover")}},function(){B(this).removeClass("ui-state-hover")}).focus(function(){if(!J.disabled){B(".ui-slider .ui-state-focus").removeClass("ui-state-focus");B(this).addClass("ui-state-focus")}else{B(this).blur()}}).blur(function(){B(this).removeClass("ui-state-focus")});this.handles.each(function(K){B(this).data("index.ui-slider-handle",K)});this.handles.keydown(function(O){var L=B(this).data("index.ui-slider-handle"),P,M,K,N;if(E.options.disabled){return }switch(O.keyCode){case B.ui.keyCode.HOME:case B.ui.keyCode.END:case B.ui.keyCode.PAGE_UP:case B.ui.keyCode.PAGE_DOWN:case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:O.preventDefault();if(!E._keySliding){E._keySliding=true;B(this).addClass("ui-state-active");P=E._start(O,L);if(P===false){return }}break}N=E.options.step;if(E.options.values&&E.options.values.length){M=K=E.values(L)}else{M=K=E.value()}switch(O.keyCode){case B.ui.keyCode.HOME:K=E._valueMin();break;case B.ui.keyCode.END:K=E._valueMax();break;case B.ui.keyCode.PAGE_UP:K=E._trimAlignValue(M+((E._valueMax()-E._valueMin())/A));break;case B.ui.keyCode.PAGE_DOWN:K=E._trimAlignValue(M-((E._valueMax()-E._valueMin())/A));break;case B.ui.keyCode.UP:case B.ui.keyCode.RIGHT:if(M===E._valueMax()){return }K=E._trimAlignValue(M+N);break;case B.ui.keyCode.DOWN:case B.ui.keyCode.LEFT:if(M===E._valueMin()){return }K=E._trimAlignValue(M-N);break}E._slide(O,L,K)}).keyup(function(L){var K=B(this).data("index.ui-slider-handle");if(E._keySliding){E._keySliding=false;E._stop(L,K);E._change(L,K);B(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(F){var G=this.options,J,L,E,H,N,K,M,I,D;if(G.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();J={x:F.pageX,y:F.pageY};L=this._normValueFromMouse(J);E=this._valueMax()-this._valueMin()+1;N=this;this.handles.each(function(O){var P=Math.abs(L-N.values(O));if(E>P){E=P;H=B(this);K=O}});if(G.range===true&&this.values(1)===G.min){K+=1;H=B(this.handles[K])}M=this._start(F,K);if(M===false){return false}this._mouseSliding=true;N._handleIndex=K;H.addClass("ui-state-active").focus();I=H.offset();D=!B(F.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=D?{left:0,top:0}:{left:F.pageX-I.left-(H.width()/2),top:F.pageY-I.top-(H.height()/2)-(parseInt(H.css("borderTopWidth"),10)||0)-(parseInt(H.css("borderBottomWidth"),10)||0)+(parseInt(H.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(F,K,L)}this._animateOff=true;return true},_mouseStart:function(D){return true},_mouseDrag:function(F){var D={x:F.pageX,y:F.pageY},E=this._normValueFromMouse(D);this._slide(F,this._handleIndex,E);return false},_mouseStop:function(D){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(D,this._handleIndex);this._change(D,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(E){var D,H,G,F,I;if(this.orientation==="horizontal"){D=this.elementSize.width;H=E.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{D=this.elementSize.height;H=E.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}G=(H/D);if(G>1){G=1}if(G<0){G=0}if(this.orientation==="vertical"){G=1-G}F=this._valueMax()-this._valueMin();I=this._valueMin()+G*F;return this._trimAlignValue(I)},_start:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}return this._trigger("start",F,D)},_slide:function(H,G,F){var D,E,I;if(this.options.values&&this.options.values.length){D=this.values(G?0:1);if((this.options.values.length===2&&this.options.range===true)&&((G===0&&F>D)||(G===1&&F<D))){F=D}if(F!==this.values(G)){E=this.values();E[G]=F;I=this._trigger("slide",H,{handle:this.handles[G],value:F,values:E});D=this.values(G?0:1);if(I!==false){this.values(G,F,true)}}}else{if(F!==this.value()){I=this._trigger("slide",H,{handle:this.handles[G],value:F});if(I!==false){this.value(F)}}}},_stop:function(F,E){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("stop",F,D)},_change:function(F,E){if(!this._keySliding&&!this._mouseSliding){var D={handle:this.handles[E],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(E);D.values=this.values()}this._trigger("change",F,D)}},value:function(D){if(arguments.length){this.options.value=this._trimAlignValue(D);this._refreshValue();this._change(null,0);return }return this._value()},values:function(E,H){var G,D,F;if(arguments.length>1){this.options.values[E]=this._trimAlignValue(H);this._refreshValue();this._change(null,E);return }if(arguments.length){if(B.isArray(arguments[0])){G=this.options.values;D=arguments[0];for(F=0;F<G.length;F+=1){G[F]=this._trimAlignValue(D[F]);this._change(null,F)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(E)}else{return this.value()}}}else{return this._values()}},_setOption:function(E,F){var D,G=0;if(B.isArray(this.options.values)){G=this.options.values.length}B.Widget.prototype._setOption.apply(this,arguments);switch(E){case"disabled":if(F){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(D=0;D<G;D+=1){this._change(null,D)}this._animateOff=false;break}},_value:function(){var D=this.options.value;D=this._trimAlignValue(D);return D},_values:function(D){var G,F,E;if(arguments.length){G=this.options.values[D];G=this._trimAlignValue(G);return G}else{F=this.options.values.slice();for(E=0;E<F.length;E+=1){F[E]=this._trimAlignValue(F[E])}return F}},_trimAlignValue:function(G){if(G<=this._valueMin()){return this._valueMin()}if(G>=this._valueMax()){return this._valueMax()}var D=(this.options.step>0)?this.options.step:1,F=(G-this._valueMin())%D,E=G-F;if(Math.abs(F)*2>=D){E+=(F>0)?D:(-D)}return parseFloat(E.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var G=this.options.range,F=this.options,M=this,E=(!this._animateOff)?F.animate:false,H,D={},I,K,J,L;if(this.options.values&&this.options.values.length){this.handles.each(function(O,N){H=(M.values(O)-M._valueMin())/(M._valueMax()-M._valueMin())*100;D[M.orientation==="horizontal"?"left":"bottom"]=H+"%";B(this).stop(1,1)[E?"animate":"css"](D,F.animate);if(M.options.range===true){if(M.orientation==="horizontal"){if(O===0){M.range.stop(1,1)[E?"animate":"css"]({left:H+"%"},F.animate)}if(O===1){M.range[E?"animate":"css"]({width:(H-I)+"%"},{queue:false,duration:F.animate})}}else{if(O===0){M.range.stop(1,1)[E?"animate":"css"]({bottom:(H)+"%"},F.animate)}if(O===1){M.range[E?"animate":"css"]({height:(H-I)+"%"},{queue:false,duration:F.animate})}}}I=H})}else{K=this.value();J=this._valueMin();L=this._valueMax();H=(L!==J)?(K-J)/(L-J)*100:0;D[M.orientation==="horizontal"?"left":"bottom"]=H+"%";this.handle.stop(1,1)[E?"animate":"css"](D,F.animate);if(G==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[E?"animate":"css"]({width:H+"%"},F.animate)}if(G==="max"&&this.orientation==="horizontal"){this.range[E?"animate":"css"]({width:(100-H)+"%"},{queue:false,duration:F.animate})}if(G==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[E?"animate":"css"]({height:H+"%"},F.animate)}if(G==="max"&&this.orientation==="vertical"){this.range[E?"animate":"css"]({height:(100-H)+"%"},{queue:false,duration:F.animate})}}}});B.extend(B.ui.slider,{version:"1.8.24"})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.ui.tabs.js' */
/*
 * jQuery UI Tabs 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(D,F){var C=0,B=0;function E(){return ++C}function A(){return ++B}D.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(G,H){if(G=="selected"){if(this.options.collapsible&&H==this.options.selected){return }this.select(H)}else{this.options[G]=H;this._tabify()}},_tabId:function(G){return G.title&&G.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+E()},_sanitizeSelector:function(G){return G.replace(/:/g,"\\:")},_cookie:function(){var G=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+A());return D.cookie.apply(null,[G].concat(D.makeArray(arguments)))},_ui:function(H,G){return{tab:H,panel:G,index:this.anchors.index(H)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var G=D(this);G.html(G.data("label.tabs")).removeData("label.tabs")})},_tabify:function(R){var S=this,I=this.options,H=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=D(" > li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return D("a",this)[0]});this.panels=D([]);this.anchors.each(function(V,T){var U=D(T).attr("href");var W=U.split("#")[0],X;if(W&&(W===location.toString().split("#")[0]||(X=D("base")[0])&&W===X.href)){U=T.hash;T.href=U}if(H.test(U)){S.panels=S.panels.add(S.element.find(S._sanitizeSelector(U)))}else{if(U&&U!=="#"){D.data(T,"href.tabs",U);D.data(T,"load.tabs",U.replace(/#.*$/,""));var Z=S._tabId(T);T.href="#"+Z;var Y=S.element.find("#"+Z);if(!Y.length){Y=D(I.panelTemplate).attr("id",Z).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(S.panels[V-1]||S.list);Y.data("destroy.tabs",true)}S.panels=S.panels.add(Y)}else{I.disabled.push(V)}}});if(R){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(I.selected===F){if(location.hash){this.anchors.each(function(U,T){if(T.hash==location.hash){I.selected=U;return false}})}if(typeof I.selected!=="number"&&I.cookie){I.selected=parseInt(S._cookie(),10)}if(typeof I.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}I.selected=I.selected||(this.lis.length?0:-1)}else{if(I.selected===null){I.selected=-1}}I.selected=((I.selected>=0&&this.anchors[I.selected])||I.selected<0)?I.selected:0;I.disabled=D.unique(I.disabled.concat(D.map(this.lis.filter(".ui-state-disabled"),function(U,T){return S.lis.index(U)}))).sort();if(D.inArray(I.selected,I.disabled)!=-1){I.disabled.splice(D.inArray(I.selected,I.disabled),1)}this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(I.selected>=0&&this.anchors.length){S.element.find(S._sanitizeSelector(S.anchors[I.selected].hash)).removeClass("ui-tabs-hide");this.lis.eq(I.selected).addClass("ui-tabs-selected ui-state-active");S.element.queue("tabs",function(){S._trigger("show",null,S._ui(S.anchors[I.selected],S.element.find(S._sanitizeSelector(S.anchors[I.selected].hash))[0]))});this.load(I.selected)}D(window).bind("unload",function(){S.lis.add(S.anchors).unbind(".tabs");S.lis=S.anchors=S.panels=null})}else{I.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[I.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");if(I.cookie){this._cookie(I.selected,I.cookie)}for(var L=0,Q;(Q=this.lis[L]);L++){D(Q)[D.inArray(L,I.disabled)!=-1&&!D(Q).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}if(I.cache===false){this.anchors.removeData("cache.tabs")}this.lis.add(this.anchors).unbind(".tabs");if(I.event!=="mouseover"){var K=function(U,T){if(T.is(":not(.ui-state-disabled)")){T.addClass("ui-state-"+U)}};var N=function(U,T){T.removeClass("ui-state-"+U)};this.lis.bind("mouseover.tabs",function(){K("hover",D(this))});this.lis.bind("mouseout.tabs",function(){N("hover",D(this))});this.anchors.bind("focus.tabs",function(){K("focus",D(this).closest("li"))});this.anchors.bind("blur.tabs",function(){N("focus",D(this).closest("li"))})}var G,M;if(I.fx){if(D.isArray(I.fx)){G=I.fx[0];M=I.fx[1]}else{G=M=I.fx}}function J(T,U){T.css("display","");if(!D.support.opacity&&U.opacity){T[0].style.removeAttribute("filter")}}var O=M?function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.hide().removeClass("ui-tabs-hide").animate(M,M.duration||"normal",function(){J(U,M);S._trigger("show",null,S._ui(T,U[0]))})}:function(T,U){D(T).closest("li").addClass("ui-tabs-selected ui-state-active");U.removeClass("ui-tabs-hide");S._trigger("show",null,S._ui(T,U[0]))};var P=G?function(U,T){T.animate(G,G.duration||"normal",function(){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");J(T,G);S.element.dequeue("tabs")})}:function(U,T,V){S.lis.removeClass("ui-tabs-selected ui-state-active");T.addClass("ui-tabs-hide");S.element.dequeue("tabs")};this.anchors.bind(I.event+".tabs",function(){var U=this,W=D(U).closest("li"),T=S.panels.filter(":not(.ui-tabs-hide)"),V=S.element.find(S._sanitizeSelector(U.hash));if((W.hasClass("ui-tabs-selected")&&!I.collapsible)||W.hasClass("ui-state-disabled")||W.hasClass("ui-state-processing")||S.panels.filter(":animated").length||S._trigger("select",null,S._ui(this,V[0]))===false){this.blur();return false}I.selected=S.anchors.index(this);S.abort();if(I.collapsible){if(W.hasClass("ui-tabs-selected")){I.selected=-1;if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){P(U,T)}).dequeue("tabs");this.blur();return false}else{if(!T.length){if(I.cookie){S._cookie(I.selected,I.cookie)}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this));this.blur();return false}}}if(I.cookie){S._cookie(I.selected,I.cookie)}if(V.length){if(T.length){S.element.queue("tabs",function(){P(U,T)})}S.element.queue("tabs",function(){O(U,V)});S.load(S.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}if(D.browser.msie){this.blur()}});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(G){if(typeof G=="string"){G=this.anchors.index(this.anchors.filter("[href$='"+G+"']"))}return G},destroy:function(){var G=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var H=D.data(this,"href.tabs");if(H){this.href=H}var I=D(this).unbind(".tabs");D.each(["href","load","cache"],function(J,K){I.removeData(K+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){if(D.data(this,"destroy.tabs")){D(this).remove()}else{D(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}});if(G.cookie){this._cookie(null,G.cookie)}return this},add:function(J,I,H){if(H===F){H=this.anchors.length}var G=this,L=this.options,N=D(L.tabTemplate.replace(/#\{href\}/g,J).replace(/#\{label\}/g,I)),M=!J.indexOf("#")?J.replace("#",""):this._tabId(D("a",N)[0]);N.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var K=G.element.find("#"+M);if(!K.length){K=D(L.panelTemplate).attr("id",M).data("destroy.tabs",true)}K.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(H>=this.lis.length){N.appendTo(this.list);K.appendTo(this.list[0].parentNode)}else{N.insertBefore(this.lis[H]);K.insertBefore(this.panels[H])}L.disabled=D.map(L.disabled,function(P,O){return P>=H?++P:P});this._tabify();if(this.anchors.length==1){L.selected=0;N.addClass("ui-tabs-selected ui-state-active");K.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){G._trigger("show",null,G._ui(G.anchors[0],G.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[H],this.panels[H]));return this},remove:function(G){G=this._getIndex(G);var I=this.options,J=this.lis.eq(G).remove(),H=this.panels.eq(G).remove();if(J.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(G+(G+1<this.anchors.length?1:-1))}I.disabled=D.map(D.grep(I.disabled,function(L,K){return L!=G}),function(L,K){return L>=G?--L:L});this._tabify();this._trigger("remove",null,this._ui(J.find("a")[0],H[0]));return this},enable:function(G){G=this._getIndex(G);var H=this.options;if(D.inArray(G,H.disabled)==-1){return }this.lis.eq(G).removeClass("ui-state-disabled");H.disabled=D.grep(H.disabled,function(J,I){return J!=G});this._trigger("enable",null,this._ui(this.anchors[G],this.panels[G]));return this},disable:function(H){H=this._getIndex(H);var G=this,I=this.options;if(H!=I.selected){this.lis.eq(H).addClass("ui-state-disabled");I.disabled.push(H);I.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[H],this.panels[H]))}return this},select:function(G){G=this._getIndex(G);if(G==-1){if(this.options.collapsible&&this.options.selected!=-1){G=this.options.selected}else{return this}}this.anchors.eq(G).trigger(this.options.event+".tabs");return this},load:function(J){J=this._getIndex(J);var H=this,L=this.options,G=this.anchors.eq(J)[0],I=D.data(G,"load.tabs");this.abort();if(!I||this.element.queue("tabs").length!==0&&D.data(G,"cache.tabs")){this.element.dequeue("tabs");return }this.lis.eq(J).addClass("ui-state-processing");if(L.spinner){var K=D("span",G);K.data("label.tabs",K.html()).html(L.spinner)}this.xhr=D.ajax(D.extend({},L.ajaxOptions,{url:I,success:function(N,M){H.element.find(H._sanitizeSelector(G.hash)).html(N);H._cleanup();if(L.cache){D.data(G,"cache.tabs",true)}H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.success(N,M)}catch(O){}},error:function(O,M,N){H._cleanup();H._trigger("load",null,H._ui(H.anchors[J],H.panels[J]));try{L.ajaxOptions.error(O,M,J,G)}catch(N){}}}));H.element.dequeue("tabs");return this},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(H,G){this.anchors.eq(H).removeData("cache.tabs").data("load.tabs",G);return this},length:function(){return this.anchors.length}});D.extend(D.ui.tabs,{version:"1.8.24"});D.extend(D.ui.tabs.prototype,{rotation:null,rotate:function(I,K){var G=this,L=this.options;var H=G._rotate||(G._rotate=function(M){clearTimeout(G.rotation);G.rotation=setTimeout(function(){var N=L.selected;G.select(++N<G.anchors.length?N:0)},I);if(M){M.stopPropagation()}});var J=G._unrotate||(G._unrotate=!K?function(M){if(M.clientX){G.rotate(null)}}:function(M){H()});if(I){this.element.bind("tabsshow",H);this.anchors.bind(L.event+".tabs",J);H()}else{clearTimeout(G.rotation);this.element.unbind("tabsshow",H);this.anchors.unbind(L.event+".tabs",J);delete this._rotate;delete this._unrotate}return this}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.core.js' */
/*
 * jQuery UI Effects 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
jQuery.effects||(function(H,E){H.effects={};H.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(O,N){H.fx.step[N]=function(P){if(!P.colorInit){P.start=M(P.elem,N);P.end=K(P.end);P.colorInit=true}P.elem.style[N]="rgb("+Math.max(Math.min(parseInt((P.pos*(P.end[0]-P.start[0]))+P.start[0],10),255),0)+","+Math.max(Math.min(parseInt((P.pos*(P.end[1]-P.start[1]))+P.start[1],10),255),0)+","+Math.max(Math.min(parseInt((P.pos*(P.end[2]-P.start[2]))+P.start[2],10),255),0)+")"}});function K(O){var N;if(O&&O.constructor==Array&&O.length==3){return O}if(N=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(O)){return[parseInt(N[1],10),parseInt(N[2],10),parseInt(N[3],10)]}if(N=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(O)){return[parseFloat(N[1])*2.55,parseFloat(N[2])*2.55,parseFloat(N[3])*2.55]}if(N=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(O)){return[parseInt(N[1],16),parseInt(N[2],16),parseInt(N[3],16)]}if(N=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(O)){return[parseInt(N[1]+N[1],16),parseInt(N[2]+N[2],16),parseInt(N[3]+N[3],16)]}if(N=/rgba\(0, 0, 0, 0\)/.exec(O)){return A.transparent}return A[H.trim(O).toLowerCase()]}function M(P,N){var O;do{O=(H.curCSS||H.css)(P,N);if(O!=""&&O!="transparent"||H.nodeName(P,"body")){break}N="backgroundColor"}while(P=P.parentNode);return K(O)}var A={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]};var F=["add","remove","toggle"],C={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function G(){var Q=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,R={},O,P;if(Q&&Q.length&&Q[0]&&Q[Q[0]]){var N=Q.length;while(N--){O=Q[N];if(typeof Q[O]=="string"){P=O.replace(/\-(\w)/g,function(S,T){return T.toUpperCase()});R[P]=Q[O]}}}else{for(O in Q){if(typeof Q[O]==="string"){R[O]=Q[O]}}}return R}function B(O){var N,P;for(N in O){P=O[N];if(P==null||H.isFunction(P)||N in C||(/scrollbar/).test(N)||(!(/color/i).test(N)&&isNaN(parseFloat(P)))){delete O[N]}}return O}function I(N,P){var Q={_:0},O;for(O in P){if(N[O]!=P[O]){Q[O]=P[O]}}return Q}H.effects.animateClass=function(N,O,Q,P){if(H.isFunction(Q)){P=Q;Q=null}return this.queue(function(){var U=H(this),R=U.attr("style")||" ",V=B(G.call(this)),T,S=U.attr("class")||"";H.each(F,function(W,X){if(N[X]){U[X+"Class"](N[X])}});T=B(G.call(this));U.attr("class",S);U.animate(I(V,T),{queue:false,duration:O,easing:Q,complete:function(){H.each(F,function(W,X){if(N[X]){U[X+"Class"](N[X])}});if(typeof U.attr("style")=="object"){U.attr("style").cssText="";U.attr("style").cssText=R}else{U.attr("style",R)}if(P){P.apply(this,arguments)}H.dequeue(this)}})})};H.fn.extend({_addClass:H.fn.addClass,addClass:function(O,N,Q,P){return N?H.effects.animateClass.apply(this,[{add:O},N,Q,P]):this._addClass(O)},_removeClass:H.fn.removeClass,removeClass:function(O,N,Q,P){return N?H.effects.animateClass.apply(this,[{remove:O},N,Q,P]):this._removeClass(O)},_toggleClass:H.fn.toggleClass,toggleClass:function(P,O,N,R,Q){if(typeof O=="boolean"||O===E){if(!N){return this._toggleClass(P,O)}else{return H.effects.animateClass.apply(this,[(O?{add:P}:{remove:P}),N,R,Q])}}else{return H.effects.animateClass.apply(this,[{toggle:P},O,N,R])}},switchClass:function(N,P,O,R,Q){return H.effects.animateClass.apply(this,[{add:P,remove:N},O,R,Q])}});H.extend(H.effects,{version:"1.8.24",save:function(O,P){for(var N=0;N<P.length;N++){if(P[N]!==null){O.data("ec.storage."+P[N],O[0].style[P[N]])}}},restore:function(O,P){for(var N=0;N<P.length;N++){if(P[N]!==null){O.css(P[N],O.data("ec.storage."+P[N]))}}},setMode:function(N,O){if(O=="toggle"){O=N.is(":hidden")?"show":"hide"}return O},getBaseline:function(O,P){var Q,N;switch(O[0]){case"top":Q=0;break;case"middle":Q=0.5;break;case"bottom":Q=1;break;default:Q=O[0]/P.height}switch(O[1]){case"left":N=0;break;case"center":N=0.5;break;case"right":N=1;break;default:N=O[1]/P.width}return{x:N,y:Q}},createWrapper:function(N){if(N.parent().is(".ui-effects-wrapper")){return N.parent()}var O={width:N.outerWidth(true),height:N.outerHeight(true),"float":N.css("float")},R=H("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),Q=document.activeElement;try{Q.id}catch(P){Q=document.body}N.wrap(R);if(N[0]===Q||H.contains(N[0],Q)){H(Q).focus()}R=N.parent();if(N.css("position")=="static"){R.css({position:"relative"});N.css({position:"relative"})}else{H.extend(O,{position:N.css("position"),zIndex:N.css("z-index")});H.each(["top","left","bottom","right"],function(S,T){O[T]=N.css(T);if(isNaN(parseInt(O[T],10))){O[T]="auto"}});N.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})}return R.css(O).show()},removeWrapper:function(N){var O,P=document.activeElement;if(N.parent().is(".ui-effects-wrapper")){O=N.parent().replaceWith(N);if(N[0]===P||H.contains(N[0],P)){H(P).focus()}return O}return N},setTransition:function(O,Q,N,P){P=P||{};H.each(Q,function(S,R){var T=O.cssUnit(R);if(T[0]>0){P[R]=T[0]*N+T[1]}});return P}});function D(O,N,P,Q){if(typeof O=="object"){Q=N;P=null;N=O;O=N.effect}if(H.isFunction(N)){Q=N;P=null;N={}}if(typeof N=="number"||H.fx.speeds[N]){Q=P;P=N;N={}}if(H.isFunction(P)){Q=P;P=null}N=N||{};P=P||N.duration;P=H.fx.off?0:typeof P=="number"?P:P in H.fx.speeds?H.fx.speeds[P]:H.fx.speeds._default;Q=Q||N.complete;return[O,N,P,Q]}function L(N){if(!N||typeof N==="number"||H.fx.speeds[N]){return true}if(typeof N==="string"&&!H.effects[N]){return true}return false}H.fn.extend({effect:function(Q,P,S,U){var O=D.apply(this,arguments),R={options:O[1],duration:O[2],callback:O[3]},T=R.options.mode,N=H.effects[Q];if(H.fx.off||!N){if(T){return this[T](R.duration,R.callback)}else{return this.each(function(){if(R.callback){R.callback.call(this)}})}}return N.call(this,R)},_show:H.fn.show,show:function(O){if(L(O)){return this._show.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="show";return this.effect.apply(this,N)}},_hide:H.fn.hide,hide:function(O){if(L(O)){return this._hide.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="hide";return this.effect.apply(this,N)}},__toggle:H.fn.toggle,toggle:function(O){if(L(O)||typeof O==="boolean"||H.isFunction(O)){return this.__toggle.apply(this,arguments)}else{var N=D.apply(this,arguments);N[1].mode="toggle";return this.effect.apply(this,N)}},cssUnit:function(N){var O=this.css(N),P=[];H.each(["em","px","%","pt"],function(Q,R){if(O.indexOf(R)>0){P=[parseFloat(O),R]}});return P}});var J={};H.each(["Quad","Cubic","Quart","Quint","Expo"],function(O,N){J[N]=function(P){return Math.pow(P,O+2)}});H.extend(J,{Sine:function(N){return 1-Math.cos(N*Math.PI/2)},Circ:function(N){return 1-Math.sqrt(1-N*N)},Elastic:function(N){return N===0||N===1?N:-Math.pow(2,8*(N-1))*Math.sin(((N-1)*80-7.5)*Math.PI/15)},Back:function(N){return N*N*(3*N-2)},Bounce:function(P){var N,O=4;while(P<((N=Math.pow(2,--O))-1)/11){}return 1/Math.pow(4,3-O)-7.5625*Math.pow((N*3-2)/22-P,2)}});H.each(J,function(O,N){H.easing["easeIn"+O]=N;H.easing["easeOut"+O]=function(P){return 1-N(1-P)};H.easing["easeInOut"+O]=function(P){return P<0.5?N(P*2)/2:N(P*-2+2)/-2+1}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.blind.js' */
/*
 * jQuery UI Effects Blind 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.blind=function(C){return this.queue(function(){var E=A(this),D=["position","top","bottom","left","right"];var I=A.effects.setMode(E,C.options.mode||"hide");var H=C.options.direction||"vertical";A.effects.save(E,D);E.show();var K=A.effects.createWrapper(E).css({overflow:"hidden"});var F=(H=="vertical")?"height":"width";var J=(H=="vertical")?K.height():K.width();if(I=="show"){K.css(F,0)}var G={};G[F]=I=="show"?J:0;K.animate(G,C.duration,C.options.easing,function(){if(I=="hide"){E.hide()}A.effects.restore(E,D);A.effects.removeWrapper(E);if(C.callback){C.callback.apply(E[0],arguments)}E.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.bounce.js' */
/*
 * jQuery UI Effects Bounce 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.bounce=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var K=A.effects.setMode(F,C.options.mode||"effect");var N=C.options.direction||"up";var D=C.options.distance||20;var E=C.options.times||5;var H=C.duration||250;if(/show|hide/.test(K)){L.push("opacity")}A.effects.save(F,L);F.show();A.effects.createWrapper(F);var G=(N=="up"||N=="down")?"top":"left";var P=(N=="up"||N=="left")?"pos":"neg";var D=C.options.distance||(G=="top"?F.outerHeight(true)/3:F.outerWidth(true)/3);if(K=="show"){F.css("opacity",0).css(G,P=="pos"?-D:D)}if(K=="hide"){D=D/(E*2)}if(K!="hide"){E--}if(K=="show"){var I={opacity:1};I[G]=(P=="pos"?"+=":"-=")+D;F.animate(I,H/2,C.options.easing);D=D/2;E--}for(var J=0;J<E;J++){var O={},M={};O[G]=(P=="pos"?"-=":"+=")+D;M[G]=(P=="pos"?"+=":"-=")+D;F.animate(O,H/2,C.options.easing).animate(M,H/2,C.options.easing);D=(K=="hide")?D*2:D/2}if(K=="hide"){var I={opacity:0};I[G]=(P=="pos"?"-=":"+=")+D;F.animate(I,H/2,C.options.easing,function(){F.hide();A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}})}else{var O={},M={};O[G]=(P=="pos"?"-=":"+=")+D;M[G]=(P=="pos"?"+=":"-=")+D;F.animate(O,H/2,C.options.easing).animate(M,H/2,C.options.easing,function(){A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}})}F.queue("fx",function(){F.dequeue()});F.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.clip.js' */
/*
 * jQuery UI Effects Clip 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.clip=function(C){return this.queue(function(){var G=A(this),K=["position","top","bottom","left","right","height","width"];var J=A.effects.setMode(G,C.options.mode||"hide");var L=C.options.direction||"vertical";A.effects.save(G,K);G.show();var D=A.effects.createWrapper(G).css({overflow:"hidden"});var F=G[0].tagName=="IMG"?D:G;var H={size:(L=="vertical")?"height":"width",position:(L=="vertical")?"top":"left"};var E=(L=="vertical")?F.height():F.width();if(J=="show"){F.css(H.size,0);F.css(H.position,E/2)}var I={};I[H.size]=J=="show"?E:0;I[H.position]=J=="show"?0:E/2;F.animate(I,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){G.hide()}A.effects.restore(G,K);A.effects.removeWrapper(G);if(C.callback){C.callback.apply(G[0],arguments)}G.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.drop.js' */
/*
 * jQuery UI Effects Drop 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.drop=function(C){return this.queue(function(){var F=A(this),E=["position","top","bottom","left","right","opacity"];var J=A.effects.setMode(F,C.options.mode||"hide");var I=C.options.direction||"left";A.effects.save(F,E);F.show();A.effects.createWrapper(F);var G=(I=="up"||I=="down")?"top":"left";var D=(I=="up"||I=="left")?"pos":"neg";var K=C.options.distance||(G=="top"?F.outerHeight(true)/2:F.outerWidth(true)/2);if(J=="show"){F.css("opacity",0).css(G,D=="pos"?-K:K)}var H={opacity:J=="show"?1:0};H[G]=(J=="show"?(D=="pos"?"+=":"-="):(D=="pos"?"-=":"+="))+K;F.animate(H,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){F.hide()}A.effects.restore(F,E);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}F.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.explode.js' */
/*
 * jQuery UI Effects Explode 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.explode=function(C){return this.queue(function(){var J=C.options.pieces?Math.round(Math.sqrt(C.options.pieces)):3;var F=C.options.pieces?Math.round(Math.sqrt(C.options.pieces)):3;C.options.mode=C.options.mode=="toggle"?(A(this).is(":visible")?"hide":"show"):C.options.mode;var I=A(this).show().css("visibility","hidden");var K=I.offset();K.top-=parseInt(I.css("marginTop"),10)||0;K.left-=parseInt(I.css("marginLeft"),10)||0;var H=I.outerWidth(true);var D=I.outerHeight(true);for(var G=0;G<J;G++){for(var E=0;E<F;E++){I.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-E*(H/F),top:-G*(D/J)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:H/F,height:D/J,left:K.left+E*(H/F)+(C.options.mode=="show"?(E-Math.floor(F/2))*(H/F):0),top:K.top+G*(D/J)+(C.options.mode=="show"?(G-Math.floor(J/2))*(D/J):0),opacity:C.options.mode=="show"?0:1}).animate({left:K.left+E*(H/F)+(C.options.mode=="show"?0:(E-Math.floor(F/2))*(H/F)),top:K.top+G*(D/J)+(C.options.mode=="show"?0:(G-Math.floor(J/2))*(D/J)),opacity:C.options.mode=="show"?1:0},C.duration||500)}}setTimeout(function(){C.options.mode=="show"?I.css({visibility:"visible"}):I.css({visibility:"visible"}).hide();if(C.callback){C.callback.apply(I[0])}I.dequeue();A("div.ui-effects-explode").remove()},C.duration||500)})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.fade.js' */
/*
 * jQuery UI Effects Fade 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.fade=function(C){return this.queue(function(){var D=A(this),E=A.effects.setMode(D,C.options.mode||"hide");D.animate({opacity:E},{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){(C.callback&&C.callback.apply(this,arguments));D.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.fold.js' */
/*
 * jQuery UI Effects Fold 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.fold=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var I=A.effects.setMode(F,C.options.mode||"hide");var P=C.options.size||15;var O=!(!C.options.horizFirst);var H=C.duration?C.duration/2:A.fx.speeds._default/2;A.effects.save(F,L);F.show();var E=A.effects.createWrapper(F).css({overflow:"hidden"});var J=((I=="show")!=O);var G=J?["width","height"]:["height","width"];var D=J?[E.width(),E.height()]:[E.height(),E.width()];var K=/([0-9]+)%/.exec(P);if(K){P=parseInt(K[1],10)/100*D[I=="hide"?0:1]}if(I=="show"){E.css(O?{height:0,width:P}:{height:P,width:0})}var N={},M={};N[G[0]]=I=="show"?D[0]:P;M[G[1]]=I=="show"?D[1]:0;E.animate(N,H,C.options.easing).animate(M,H,C.options.easing,function(){if(I=="hide"){F.hide()}A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(F[0],arguments)}F.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.highlight.js' */
/*
 * jQuery UI Effects Highlight 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.highlight=function(C){return this.queue(function(){var E=A(this),D=["backgroundImage","backgroundColor","opacity"],G=A.effects.setMode(E,C.options.mode||"show"),F={backgroundColor:E.css("backgroundColor")};if(G=="hide"){F.opacity=0}A.effects.save(E,D);E.show().css({backgroundImage:"none",backgroundColor:C.options.color||"#ffff99"}).animate(F,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){(G=="hide"&&E.hide());A.effects.restore(E,D);(G=="show"&&!A.support.opacity&&this.style.removeAttribute("filter"));(C.callback&&C.callback.apply(this,arguments));E.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.pulsate.js' */
/*
 * jQuery UI Effects Pulsate 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.pulsate=function(C){return this.queue(function(){var G=A(this),J=A.effects.setMode(G,C.options.mode||"show"),I=((C.options.times||5)*2)-1,H=C.duration?C.duration/2:A.fx.speeds._default/2,D=G.is(":visible"),E=0;if(!D){G.css("opacity",0).show();E=1}if((J=="hide"&&D)||(J=="show"&&!D)){I--}for(var F=0;F<I;F++){G.animate({opacity:E},H,C.options.easing);E=(E+1)%2}G.animate({opacity:E},H,C.options.easing,function(){if(E==0){G.hide()}(C.callback&&C.callback.apply(this,arguments))});G.queue("fx",function(){G.dequeue()}).dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.scale.js' */
/*
 * jQuery UI Effects Scale 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.puff=function(C){return this.queue(function(){var G=A(this),H=A.effects.setMode(G,C.options.mode||"hide"),F=parseInt(C.options.percent,10)||150,E=F/100,D={height:G.height(),width:G.width()};A.extend(C.options,{fade:true,mode:H,percent:H=="hide"?F:100,from:H=="hide"?D:{height:D.height*E,width:D.width*E}});G.effect("scale",C.options,C.duration,C.callback);G.dequeue()})};A.effects.scale=function(C){return this.queue(function(){var H=A(this);var E=A.extend(true,{},C.options);var K=A.effects.setMode(H,C.options.mode||"effect");var I=parseInt(C.options.percent,10)||(parseInt(C.options.percent,10)==0?0:(K=="hide"?0:100));var J=C.options.direction||"both";var D=C.options.origin;if(K!="effect"){E.origin=D||["middle","center"];E.restore=true}var G={height:H.height(),width:H.width()};H.from=C.options.from||(K=="show"?{height:0,width:0}:G);var F={y:J!="horizontal"?(I/100):1,x:J!="vertical"?(I/100):1};H.to={height:G.height*F.y,width:G.width*F.x};if(C.options.fade){if(K=="show"){H.from.opacity=0;H.to.opacity=1}if(K=="hide"){H.from.opacity=1;H.to.opacity=0}}E.from=H.from;E.to=H.to;E.mode=K;H.effect("size",E,C.duration,C.callback);H.dequeue()})};A.effects.size=function(C){return this.queue(function(){var D=A(this),O=["position","top","bottom","left","right","width","height","overflow","opacity"];var N=["position","top","bottom","left","right","overflow","opacity"];var K=["width","height","overflow"];var Q=["fontSize"];var L=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var G=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var H=A.effects.setMode(D,C.options.mode||"effect");var J=C.options.restore||false;var F=C.options.scale||"both";var P=C.options.origin;var E={height:D.height(),width:D.width()};D.from=C.options.from||E;D.to=C.options.to||E;if(P){var I=A.effects.getBaseline(P,E);D.from.top=(E.height-D.from.height)*I.y;D.from.left=(E.width-D.from.width)*I.x;D.to.top=(E.height-D.to.height)*I.y;D.to.left=(E.width-D.to.width)*I.x}var M={from:{y:D.from.height/E.height,x:D.from.width/E.width},to:{y:D.to.height/E.height,x:D.to.width/E.width}};if(F=="box"||F=="both"){if(M.from.y!=M.to.y){O=O.concat(L);D.from=A.effects.setTransition(D,L,M.from.y,D.from);D.to=A.effects.setTransition(D,L,M.to.y,D.to)}if(M.from.x!=M.to.x){O=O.concat(G);D.from=A.effects.setTransition(D,G,M.from.x,D.from);D.to=A.effects.setTransition(D,G,M.to.x,D.to)}}if(F=="content"||F=="both"){if(M.from.y!=M.to.y){O=O.concat(Q);D.from=A.effects.setTransition(D,Q,M.from.y,D.from);D.to=A.effects.setTransition(D,Q,M.to.y,D.to)}}A.effects.save(D,J?O:N);D.show();A.effects.createWrapper(D);D.css("overflow","hidden").css(D.from);if(F=="content"||F=="both"){L=L.concat(["marginTop","marginBottom"]).concat(Q);G=G.concat(["marginLeft","marginRight"]);K=O.concat(L).concat(G);D.find("*[width]").each(function(){var S=A(this);if(J){A.effects.save(S,K)}var R={height:S.height(),width:S.width()};S.from={height:R.height*M.from.y,width:R.width*M.from.x};S.to={height:R.height*M.to.y,width:R.width*M.to.x};if(M.from.y!=M.to.y){S.from=A.effects.setTransition(S,L,M.from.y,S.from);S.to=A.effects.setTransition(S,L,M.to.y,S.to)}if(M.from.x!=M.to.x){S.from=A.effects.setTransition(S,G,M.from.x,S.from);S.to=A.effects.setTransition(S,G,M.to.x,S.to)}S.css(S.from);S.animate(S.to,C.duration,C.options.easing,function(){if(J){A.effects.restore(S,K)}})})}D.animate(D.to,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(D.to.opacity===0){D.css("opacity",D.from.opacity)}if(H=="hide"){D.hide()}A.effects.restore(D,J?O:N);A.effects.removeWrapper(D);if(C.callback){C.callback.apply(this,arguments)}D.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.shake.js' */
/*
 * jQuery UI Effects Shake 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.shake=function(C){return this.queue(function(){var F=A(this),L=["position","top","bottom","left","right"];var K=A.effects.setMode(F,C.options.mode||"effect");var N=C.options.direction||"left";var D=C.options.distance||20;var E=C.options.times||3;var H=C.duration||C.options.duration||140;A.effects.save(F,L);F.show();A.effects.createWrapper(F);var G=(N=="up"||N=="down")?"top":"left";var P=(N=="up"||N=="left")?"pos":"neg";var I={},O={},M={};I[G]=(P=="pos"?"-=":"+=")+D;O[G]=(P=="pos"?"+=":"-=")+D*2;M[G]=(P=="pos"?"-=":"+=")+D*2;F.animate(I,H,C.options.easing);for(var J=1;J<E;J++){F.animate(O,H,C.options.easing).animate(M,H,C.options.easing)}F.animate(O,H,C.options.easing).animate(I,H/2,C.options.easing,function(){A.effects.restore(F,L);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}});F.queue("fx",function(){F.dequeue()});F.dequeue()})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.slide.js' */
/*
 * jQuery UI Effects Slide 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.slide=function(C){return this.queue(function(){var F=A(this),E=["position","top","bottom","left","right"];var J=A.effects.setMode(F,C.options.mode||"show");var I=C.options.direction||"left";A.effects.save(F,E);F.show();A.effects.createWrapper(F).css({overflow:"hidden"});var G=(I=="up"||I=="down")?"top":"left";var D=(I=="up"||I=="left")?"pos":"neg";var K=C.options.distance||(G=="top"?F.outerHeight(true):F.outerWidth(true));if(J=="show"){F.css(G,D=="pos"?(isNaN(K)?"-"+K:-K):K)}var H={};H[G]=(J=="show"?(D=="pos"?"+=":"-="):(D=="pos"?"-=":"+="))+K;F.animate(H,{queue:false,duration:C.duration,easing:C.options.easing,complete:function(){if(J=="hide"){F.hide()}A.effects.restore(F,E);A.effects.removeWrapper(F);if(C.callback){C.callback.apply(this,arguments)}F.dequeue()}})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery-ui/jquery.effects.transfer.js' */
/*
 * jQuery UI Effects Transfer 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
(function(A,B){A.effects.transfer=function(C){return this.queue(function(){var G=A(this),I=A(C.options.to),F=I.offset(),H={top:F.top,left:F.left,height:I.innerHeight(),width:I.innerWidth()},E=G.offset(),D=A('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(C.options.className).css({top:E.top,left:E.left,height:G.innerHeight(),width:G.innerWidth(),position:"absolute"}).animate(H,C.duration,C.options.easing,function(){D.remove();(C.callback&&C.callback.apply(G[0],arguments));G.dequeue()})})}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:jquery-ui-other', location = 'js-vendor/jquery/jquery.ui.menu.js' */
(function(A){A.widget("ui.menu",{_create:function(){var B=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(C){if(!A(C.target).closest(".ui-menu-item a").length){return }C.preventDefault();B.select(C)});this.refresh()},refresh:function(){var C=this;var B=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");B.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(D){C.activate(D,A(this).parent())}).mouseleave(function(){C.deactivate()})},activate:function(E,D){this.deactivate();if(this.hasScroll()){var F=D.offset().top-this.element.offset().top,B=this.element.attr("scrollTop"),C=this.element.height();if(F<0){this.element.attr("scrollTop",B+F)}else{if(F>C){this.element.attr("scrollTop",B+F-C+D.height())}}}this.active=D.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",E,{item:D})},deactivate:function(){if(!this.active){return }this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null},next:function(B){this.move("next",".ui-menu-item:first",B)},previous:function(B){this.move("prev",".ui-menu-item:last",B)},first:function(){return this.active&&!this.active.prev().length},last:function(){return this.active&&!this.active.next().length},move:function(E,D,C){if(!this.active){this.activate(C,this.element.children(D));return }var B=this.active[E+"All"](".ui-menu-item").eq(0);if(B.length){this.activate(C,B)}else{this.activate(C,this.element.children(D))}},nextPage:function(D){if(this.hasScroll()){if(!this.active||this.last()){this.activate(D,this.element.children(":first"));return }var E=this.active.offset().top,C=this.element.height(),B=this.element.children("li").filter(function(){var F=A(this).offset().top-E-C+A(this).height();return F<10&&F>-10});if(!B.length){B=this.element.children(":last")}this.activate(D,B)}else{this.activate(D,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(C){if(this.hasScroll()){if(!this.active||this.first()){this.activate(C,this.element.children(":last"));return }var D=this.active.offset().top,B=this.element.height();result=this.element.children("li").filter(function(){var E=A(this).offset().top-D+B-A(this).height();return E<10&&E>-10});if(!result.length){result=this.element.children(":first")}this.activate(C,result)}else{this.activate(C,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(B){this._trigger("selected",B,{item:this.active})}})}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/drag-and-drop-support.js' */
var DragnDropSupport=(function(){var c,a;try{c=new XMLHttpRequest();a=!!(c.sendAsBinary||c.upload)&&!(jQuery.browser.mozilla&&jQuery.browser.version.indexOf("1.9.1")>-1)}catch(b){a=false}c=null;return{hasXhrSupport:a}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/drag-and-drop-utils.js' */
AJS.DragAndDrop={};(function(b){var c,a=/^\w+:\/\/[^\/?#]+/.exec(location.href);AJS.DragAndDropUtils={hasXhrOrGearsSupport:function(){return(AJS.DragAndDropUtils.hasXhrSupport||AJS.DragAndDropUtils.isGearsInstalledNoPrompt())},hasXhrSupport:DragnDropSupport.hasXhrSupport,base:a,init:function(d){d&&d(DragnDropSupport.hasXhrSupport)},bindDragEnter:function(d,f){if(d.addEventListener){f=(this.isFireFox35OrLater()?this.firefox35DragEnterAndOverCallbackWrapper(f):f);f&&d.addEventListener("dragenter",f,false)}else{if(d.attachEvent){var e=this.ieDragEnterAndDragOverCallbackWrapper(f);d.attachEvent("ondragenter",e);b(window).unload(function(){d.detachEvent("ondragenter",e)})}}},bindDragOver:function(d,f){if(d.addEventListener){if(this.isFireFox35OrLater()){f=this.firefox35DragEnterAndOverCallbackWrapper(f)}else{if(b.browser.safari){f=this.safariDragOverCallbackWrapper(f)}}f&&d.addEventListener("dragover",f,false)}else{if(d.attachEvent){var e=this.ieDragEnterAndDragOverCallbackWrapper(f);d.attachEvent("ondragover",e);b(window).unload(function(){d.detachEvent("ondragover",e)})}}},bindDragLeave:function(d,e){if(!e){return}if(b.browser.safari||this.isFireFox35OrLater()||tinymce.isIE11){d.addEventListener("dragleave",e,false)}else{if(b.browser.msie){d.attachEvent("ondragleave",e);b(window).unload(function(){d.detachEvent("ondragleave",e)})}else{if(b.browser.mozilla){d.addEventListener("dragexit",e,false)}}}},bindDrop:function(e,g){if(b.browser.mozilla){var d=(this.isFireFox35OrLater()?"drop":"dragdrop");e.addEventListener(d,this.mozillaDropCallbackWrapper(g),false)}else{if(b.browser.msie){if(g){var f=function(h){g(h);AJS.DragAndDropUtils.stopPropagation(h)};e.attachEvent("ondrop",f);b(window).unload(function(){e.detachEvent("ondrop",f)})}}else{if(b.browser.safari){g&&e.addEventListener("drop",function(h){g(h);AJS.DragAndDropUtils.stopPropagation(h)},false)}}}},niceSize:function(d){var g=[" B"," kB"," MB"," GB"," TB"," PB"," EB"," ZB"," YB"];for(var e=0,f=g.length;e<f;e++){if(d<Math.pow(2,10*(e+1))){return(!e?d:(d/Math.pow(2,10*e)).toFixed(2))+g[e]
}}return(d/Math.pow(2,10*(e+1))).toFixed(2)+g[g.length-1]},ieDragEnterAndDragOverCallbackWrapper:function(d){return function(f){f=f||window.event;if(!f){return}d&&d(f);b.browser.msie&&(f.returnValue=false)}},safariDragOverCallbackWrapper:function(d){return function(f){f=f||window.event;if(!f){return}if(f.target.type=="file"){return}d&&d(f);(b.inArray("public.file-url",f.dataTransfer.types)!=-1)&&f.preventDefault()}},mozillaDropCallbackWrapper:function(d){return function(f){if(!f){return}d&&d(f);f.preventDefault();if(AJS.DragAndDropUtils.isFireFox35OrLater()){AJS.DragAndDropUtils.firefox35FileDataInEvent(f)&&f.stopPropagation()}else{f.stopPropagation()}}},firefox35DragEnterAndOverCallbackWrapper:function(d){return function(f){if(!f){return}d&&d(f);AJS.DragAndDropUtils.firefox35FileDataInEvent(f)&&f.preventDefault()}},firefox35FileDataInEvent:function(d){return b.inArray("application/x-moz-file",d.dataTransfer.types)!=-1},stopPropagation:function(d){d=d||window.event;if(!d){return}if(d.stopPropagation){d.stopPropagation()}else{d.cancelBubble=true}},preventDefault:function(d){d=d||window.event;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},isGearsInstalledNoPrompt:function(){try{return !!window.google&&!!google.gears&&!!google.gears.factory.create("beta.desktop")}catch(d){return false}},isGearsInstalledWithPermissions:function(d){var e={returnUrl:location.href};d=b.extend({},e,d);if(AJS.DragAndDropUtils.isGearsInstalledNoPrompt()){return google.gears.factory.getPermission("Confluence",Confluence.getContextPath()+"/images/logo/confluence_64.png","Allow Confluence to use Google Gears to perform drag-and-drop file uploads?")}else{AJS.log("Gears installation prompt is disabled, since it has been discontinued");return false}},isFireFox35OrLater:function(){return !this.isFireFox30()&&b.browser.version.indexOf("1.9.")!=-1},isFireFox30:function(){return b.browser.version.indexOf("1.9.0")!=-1},isIE9:function(){if(AJS.$.browser.msie){var d=parseFloat(AJS.$.browser.version);
if(d>=9&&d<10){return true}}return false},enableDropZoneOn:function(d,e){if(!d){throw new Error("Cannot enable drop zone on invalid container. Received: "+d)}e=e||AJS.DragAndDrop.defaultDropHandler;this.bindDragEnter(d);this.bindDragOver(d);this.bindDragLeave(d);this.bindDrop(d,e)},getFilesFromDropEvent:function(f){if(AJS.DragAndDropUtils.isFolderDropEvent(f)){AJS.DragAndDropUtils.displayMessageDialog("No files were found in the items dragged onto this window. It is possible that you may have dragged a folder - this is not supported. \u003cp\u003e\u003cstrong\u003eNote to Mac OSX users:\u003c/strong\u003e Some items may appear as files but are actually folders and are therefore not supported. Examples include iWork and Keynote files.\u003c/p\u003e");return[]}var g=this.getDesktopInstance().getDragData(f,"application/x-gears-files");var d;try{d=g&&g.files}catch(h){AJS.log("Error retrieving file data from drop event")}return d||[]},isFolderDropEvent:function(d){try{return(this.getDesktopInstance().getDragData(d,"application/x-gears-files")||{}).count==0}catch(f){AJS.log("Error retrieving file data from drop event")}},displayMessageDialog:function(e){var d=new AJS.Dialog(600,200,"drag-and-drop-message-dialog");d.addHeader("Drag & Drop").addPanel("Panel 1","<div>"+e+"</div>").addButton("Done",function(f){d.remove()});d.show()},getDesktopInstance:function(){if(!c){c=google.gears.factory.create("beta.desktop")}return c},bindDragOverlay:function(d){var e=this;this.bindDragEnter(d,function(){e.displayDragOverlay(d)})},getDragOverlay:function(d){return b("#dragOverlay",d)},displayDragOverlay:function(e,g){g=g||"";var d=this.getDragOverlay(e);if(d.length===0){var f=AJS.DragAndDrop.Templates.dragOverlay({clazz:g});b(f).prependTo(e);var h=this;this.bindDragLeave(this.getDragOverlay(e)[0],function(){h.hideDragOverlay(e)})}else{d.show()}},hideDragOverlay:function(d){this.getDragOverlay(d).hide()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/default-drop-handler.js' */
AJS.toInit(function(b){var c;function a(){var f=document.getElementById("fileuploadShim");if(!f){f=document.createElement("div");f.setAttribute("id","fileuploadShim");document.body.appendChild(f)}var e=new plupload.Uploader({runtimes:"html5",dragdrop:true,drop_element:b("body")[0],browse_button:f.getAttribute("id"),multipart:false,stop_propagation:true,max_file_size:+AJS.Meta.get("global-settings-attachment-max-size")}),d=function(){if(AJS.Editor&&AJS.Editor.isVisible()&&AJS.Confluence.EditorUploadProgressDialog){c=AJS.Confluence.EditorUploadProgressDialog}else{c=new AJS.DragAndDropProgressDialog()}};c=null;e.init();AJS.DragAndDrop.defaultDropHandler=null;e.bind("FilesAdded",function(g,l){if(AJS.Editor&&AJS.Editor.isVisible()){Confluence.Uploader&&Confluence.Uploader.trigger("FilesAdded",l);return}!c&&d();for(var j=0,k=l.length;j<k;j++){var h=l[j];if(h.status!==plupload.FAILED){c.render({workId:h.id,status:h.status,file:h})}}e.start()});e.bind("BeforeUpload",function(g,j){if(AJS.Editor&&AJS.Editor.isVisible()){return}var i=AJS.DragAndDropUtils.base+Confluence.getContextPath()+"/plugins/drag-and-drop/upload.action";var h=AJS.Meta.get("page-id");var k=h!=0?{pageId:h}:{draftId:AJS.Meta.get("draft-id")},l=j.name.substr(j.name.lastIndexOf(".")+1);k.filename=j.name;k.size=j.size;k.mimeType=plupload.mimeTypes[l.toLowerCase()]||"application/x-upload-data";k.spaceKey=AJS.Meta.get("space-key");k.atl_token=AJS.Meta.get("atl-token");g.settings.url=plupload.buildUrl(i,k);c.cancelListeners.push(function(o,m){var n=g.getFile(m.workId);n&&g.removeFile(n);c.renderInfo(m.workId,"File was manually removed from the queue.")});c.show()});e.bind("UploadProgress",function(g,h){c.renderUpdateToBytesUploaded(h.id,h.loaded,h.size);c.hideCloseButton()});e.bind("FileUploaded",function(g,i,h){if(h.status===0){c.renderError(i.id,"The server is not responding. Please check that it is running.")}else{c.renderComplete(i.id)}});e.bind("Error",function(h,i){if(AJS.Editor&&AJS.Editor.isVisible()){return}var g,j;
if(i.response){try{g=AJS.$.parseJSON(i.response);j=g.actionErrors[0]}catch(k){if(k.name==="SyntaxError"){j="Invalid response received from the server."}else{j=i.message}}c.renderError(i.file.id,j)}else{j=i.message;if(i.code==plupload.FILE_SIZE_ERROR){j=AJS.format("File of size {0} exceeds maximum upload limit of {1}",AJS.DragAndDropUtils.niceSize(i.file.size).toString(),AJS.DragAndDropUtils.niceSize(AJS.Meta.get("global-settings-attachment-max-size")).toString());!c&&d();c.render({workId:i.file.id,status:i.file.status,file:i.file,errorMessage:j});if(!c.isVisible()){c.show();c.showCloseButton()}}}});e.bind("UploadComplete",function(){if(!e.total.queued){c.showCloseButton();if(!c.hasErrors()){setTimeout(function(){c.hide();c.clearRenderOutput();window.location.reload()},1000)}}})}AJS.DragAndDropUtils.hasXhrSupport&&a()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/observable-array-list.js' */
AJS.ObservableArrayList=function(){this._data=[];this._pushObservers=[]};AJS.ObservableArrayList.prototype={push:function(a){this._data.push(a);this._notifyPushObservers(a)},length:function(){return this._data.length},remove:function(b,a){return this._remove.call(this._data,b,a)},_remove:function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)},shift:function(){return this._data.shift()},removeByPredicate:function(b){var d=[],a=this._data.length;for(var c=0;c<a;c++){if(!b(this._data[c])){d.push(this._data[c])}}this._data=d;return a-this._data.length},addPushObserver:function(a){if(AJS.$.isFunction(a)){this._pushObservers.push(a)}else{throw new Error("Attempting to add an observer that is not a function: "+a)}},_notifyPushObservers:function(c){for(var a=0,b=this._pushObservers.length;a<b;a++){this._pushObservers[a](c)}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'js/upload-progress-dialog.js' */
(function(a){AJS.DragAndDropProgressDialog=function(b){var c=this;var d={header:"Attach File(s)",width:600,height:400};this._options=a.extend({},d,b);this.id="drag-and-drop-progress-dialog";this._dialog=new AJS.Dialog(this._options.width,this._options.height,this.id);this._dialog.addHeader(this._options.header).addPanel("Panel 1",AJS.DragAndDrop.Templates.uploadFileStatusContainer()).addButton("Done",function(){c.hide();c.clearRenderOutput()},"all-file-uploads-complete");this._dialog.getCurrentPanel().setPadding(0);this._$closeButton=a(".all-file-uploads-complete");a(document).keydown(function(f){if(f.which==27){if(!c._$closeButton.prop("disabled")){c.hide();c.clearRenderOutput()}return AJS.stopEvent(f)}});this._$container=a("#upload-statuses");this._workIdsOfFilesInProgress=[];this.cancelListeners=[];this.onShowListeners=[];this._hidden=true;this.hasErrorMessage=false};AJS.DragAndDropProgressDialog.prototype={show:function(){if(this._hidden){this._dialog.show();this._hidden=false;a.each(this.onShowListeners,function(b,c){c()})}this.hideCloseButton()},hide:function(){if(!this._hidden){this._dialog.hide();this._hidden=true}},isVisible:function(){return !this._hidden},_getProgressElementId:function(b){return"file-"+b+"-progress"},render:function(c){this._workIdsOfFilesInProgress.push(c.workId);this._$container.append(AJS.DragAndDrop.Templates.fileStatus({filename:c.file.name,progressElementId:this._getProgressElementId(c.workId),workId:c.workId,showCancel:(c.status==plupload.QUEUED)}));var b=a("#"+this._getProgressElementId(c.workId));b.progressbar({value:0});if(c.status==plupload.QUEUED){a("#file-upload-cancel-"+c.workId).click((function(d){return function(f){a.each(d,function(e,g){g(f,c)})}})(this.cancelListeners))}else{this.renderError(c.workId,c.errorMessage)}},renderError:function(e,d){if(a.inArray(e,this._workIdsOfFilesInProgress)==-1){throw new Error("No file status found with id: "+e)}var b=a("#file-status-block-"+e);
var c=b.attr("data-filename");b.html(aui.message.warning({content:d,titleContent:c}));this.hasErrorMessage=true},renderInfo:function(e,d){if(a.inArray(e,this._workIdsOfFilesInProgress)==-1){throw new Error("No file status found with id: "+e)}var b=a("#file-status-block-"+e);var c=b.attr("data-filename");b.html(aui.message.info({content:d,titleContent:c}));this.hasErrorMessage=true},hasErrors:function(){return this.hasErrorMessage},renderUpdateToBytesUploaded:function(h,g,b){if(a.inArray(h,this._workIdsOfFilesInProgress)==-1){throw new Error("No file status found with id: "+h)}var d=AJS.DragAndDropUtils.niceSize(g);var f=a("#file-"+h+"-uploaded");if(!!f.length){f.text(d)}else{a("#file-upload-progress-text-"+h).html(AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage({fileId:h,uploadedSizeNice:d,totalSizeNice:AJS.DragAndDropUtils.niceSize(b)}))}var e=Math.round(g*100/b);var c=a("#"+this._getProgressElementId(h));c.progressbar("option","value",e)},renderComplete:function(b){if(a.inArray(b,this._workIdsOfFilesInProgress)==-1){throw new Error("No file status found with id: "+b)}a("#cancel-or-success-placeholder-"+b).html(AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon())},renderCancelled:function(c){if(a.inArray(c,this._workIdsOfFilesInProgress)==-1){throw new Error("No file status found with id: "+c)}var b=a("#"+this._getProgressElementId(c));if(b.progressbar("option","value")==0){b.progressbar("option","value",100)}b.progressbar("disable");a("#file-upload-progress-text-"+c).html("Cancelled.");a("#cancel-or-success-placeholder-"+c).hide()},clearRenderOutput:function(){this.showCloseButton();this._$container.empty();this._workIdsOfFilesInProgress=[];this.hasErrorMessage=false},hideCloseButton:function(){this._$closeButton.hide()},showCloseButton:function(){this._$closeButton.show()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:support', location = 'templates/drag-and-drop.soy' */
// This file was automatically generated from drag-and-drop.soy.
// Please don't edit this file by hand.

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.DragAndDrop == 'undefined') { AJS.DragAndDrop = {}; }
if (typeof AJS.DragAndDrop.Templates == 'undefined') { AJS.DragAndDrop.Templates = {}; }


AJS.DragAndDrop.Templates.fileStatus = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="file-status-block-', soy.$$escapeHtml(opt_data.workId), '" data-filename="', soy.$$escapeHtml(opt_data.filename), '"><label>', soy.$$escapeHtml(opt_data.filename), '</label><div class="file-upload-progress-block"><div class="aui-progressbar" id="', soy.$$escapeHtml(opt_data.progressElementId), '"><div id="file-upload-progress-text-', soy.$$escapeHtml(opt_data.workId), '" class="file-upload-progress-text">', soy.$$escapeHtml("Waiting..."), '</div></div>', (opt_data.showCancel) ? '<div id="cancel-or-success-placeholder-' + soy.$$escapeHtml(opt_data.workId) + '" class="cancel-or-success-placeholder ui-state-default"><span id="file-upload-cancel-' + soy.$$escapeHtml(opt_data.workId) + '" class="aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml("Cancel Upload") + '">' + soy.$$escapeHtml("Cancel") + '</span></div>' : '', '</div></li>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusContainer = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul id="upload-statuses"></ul>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusSuccessIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class=\'aui-icon aui-icon-small aui-iconfont-success\'></span>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.uploadFileStatusProgressMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span id="file-', soy.$$escapeHtml(opt_data.fileId), '-uploaded">', soy.$$escapeHtml(opt_data.uploadedSizeNice), '</span> ', soy.$$escapeHtml("of"), ' ', soy.$$escapeHtml(opt_data.totalSizeNice));
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dropZone = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="attachments-drop-zone"><div class="drop-zone-image"></div><div class="drop-zone-text">', soy.$$escapeHtml("Drop files here to attach them"), '</div></div>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dragOverlay = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="dragOverlay" class="', soy.$$escapeHtml(opt_data.clazz), '"><div class="overlay-blanket"></div><div class="overlay-center"><p>', soy.$$escapeHtml("Drop files to insert them into the page"), '</p></div><div class="overlay-drop-zone"></div></div>');
  return opt_sb ? '' : output.toString();
};


AJS.DragAndDrop.Templates.dragAndDropTip = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="attach-tip-discovery"><span class="img"></span><div class="text"><strong>', soy.$$escapeHtml("Tip:"), ' </strong><p>', soy.$$escapeHtml("Drop files straight into your page to insert them directly."), '</p><div><a class="close-tip" href="#">', soy.$$escapeHtml("Ok, got it!"), '</a></div></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.drag-and-drop:drag-and-drop-for-view-content', location = 'js/view-content-client.js' */
AJS.toInit(function(a){AJS.DragAndDropUtils.init(function(b){var c=a("body")[0];if(!b&&!AJS.DragAndDropUtils.isIE9()){AJS.DragAndDropUtils.enableDropZoneOn(c)}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:proxy-js', location = '/jira/proxy.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{makeRequest:function(a){var b=contextPath||AJS.params.contextPath;if(a.processData){if(a.appId){a.data=AJS.$.extend(a.data||{},{appId:a.appId})}else{if(a.appType){a.data=AJS.$.extend(a.data||{},{appType:a.appType})}}a.data=AJS.$.extend(a.data||{},{path:a.url})}else{var c=a.url;a=AJS.$.extend(a,{beforeSend:function(d){if(a.appId){d.setRequestHeader("X-AppId",a.appId)}else{if(a.appType){d.setRequestHeader("X-AppType",a.appType)}}d.setRequestHeader("X-AppPath",c)}})}a=AJS.$.extend(a,{url:b+"/plugins/servlet/applinks/proxy"});return AJS.$.ajax(a)},createProxyGetUrl:function(b){var c="";if(b.includeContext){c=contextPath||AJS.params.contextPath}var a=c+"/plugins/servlet/applinks/proxy";if(b.appId){a+="?appId="+encodeURIComponent(b.appId)}else{if(b.appType){a+="?appType="+encodeURIComponent(b.appType)}else{AJS.log("You need to specify an appType or appId");return""}}if(b.path){a+="&path="+encodeURIComponent(b.path)}return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/fecru-compatibility.js' */
if(jQuery!=undefined&&AJS!=undefined){jQuery=AJS.$};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/rest-service.js' */
AppLinks=AJS.$.extend(window.AppLinks||{},{Event:{NAMESPACE:"applinks",}});AppLinks.Event=AJS.$.extend(window.AppLinks.Event,{PREREADY:AppLinks.Event.NAMESPACE+".preready",READY:AppLinks.Event.NAMESPACE+".ready"});if(AJS.AppLinksInitialisationBinder){AppLinks.initialisationBinder=AJS.AppLinksInitialisationBinder}else{AppLinks.initialisationBinder=function(a){AJS.toInit(a)}}AppLinks.initialisationBinder(function(){var b=AJS.$;AppLinks=b.extend(window.AppLinks||{},{failure:function(e){if(e.status==401){window.location.reload()}else{var c=AppLinks.parseError(e);var d=b(".page-error");if(d.length>0){d.html(c).fadeIn("slow")}else{alert("REST request failed: "+c)}}},jsonRequest:function(d,e,f,g,c){if(f){f=JSON.stringify(f)}b(".page-error").fadeOut("fast");if(!c){c=AppLinks.failure}return jQuery.ajax({url:d,type:e,data:f,dataType:"json",contentType:"application/json; charset=utf-8",cache:false,success:g,error:c})},xmlRequest:function(d,e,f,g,c){if(f){f=JSON.stringify(f)}b(".page-error").fadeOut("fast");if(!c){c=AppLinks.failure}return jQuery.ajax({url:d,type:e,data:f,dataType:"xml",contentType:"application/xml; charset=utf-8",cache:false,success:g,error:c})},parseError:function(f){var c;try{c=JSON.parse(f.responseText)}catch(d){if(f.statusText){return c=f.statusText}else{return f}}if(c.message){if(b.isArray(c.message)){return c.message.join(" ")}return c.message}else{return f.statusText}},put:function(d,e,f,c){return AppLinks.jsonRequest(d,"PUT",e,f,c)},post:function(d,e,f,c){return AppLinks.jsonRequest(d,"POST",e,f,c)},update:function(d,e,c){AppLinks.put(AppLinks.self_link(d),d,e,c)},get:function(d,e,c){return AppLinks.jsonRequest(d,"GET",null,e,c)},getXml:function(d,e,c){return AppLinks.xmlRequest(d,"GET",null,e,c)},self_link:function(e){for(var c=0,f=e.link.length;c<f;c++){var d=e.link[c];if(d.rel=="self"){return d.href}}throw"No self-link found"},del:function(f,e,d){var c;if(typeof(f)=="string"){c=f}else{c=AppLinks.self_link(f)}return AppLinks.jsonRequest(c,"DELETE",null,e,d)},SPI:b.extend({},{API_VERSION:"1.0",REST_RESOURCE_URL:AJS.contextPath()+"/rest/applinks/",BASE_URL:AJS.contextPath()+"/rest/applinks/1.0",setApiVersion:function(c){AppLinks.SPI.API_VERSION=c;AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL+AppLinks.SPI.API_VERSION)},setBaseUrl:function(c){AppLinks.SPI.BASE_URL=c},getRemoteRestBaseUrl:function(c){return c+"/rest/applinks/"+AppLinks.SPI.API_VERSION},getRemotePluginServletBaseUrl:function(c){return c+"/plugins/servlet"},getAllLinks:function(e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink";return AppLinks.get(c,e,d)},getAllLinksWithAuthInfo:function(e,d){var c=AppLinks.SPI.BASE_URL+"/listApplicationlinks";return AppLinks.get(c,e,d)},getLinksOfType:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/type/"+e;return AppLinks.get(c,f,d)},tryToFetchManifest:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/manifest.json?url="+encodeURIComponent(e);return AppLinks.get(c,f,d)},getManifestFor:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/manifest/"+f+".json";return AppLinks.get(c,e,d)},getLocalManifest:function(e,d){var c=AppLinks.SPI.BASE_URL+"/manifest.json";return AppLinks.get(c,e,d)},getRemoteManifest:function(e,f,d){var c=AppLinks.SPI.getRemoteRestBaseUrl(e)+"/manifest.json";return AppLinks.get(c,f,d)},getRemoteOAuthConsumerInfo:function(e,f,d){var c=AppLinks.SPI.getRemotePluginServletBaseUrl(e)+"/oauth/consumer-info";return AppLinks.getXml(c,f,d)},createStaticUrlAppLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createStaticUrlAppLink?typeId="+f;return AppLinks.post(c,null,e,d)},createLink:function(j,h,l,d,i,k,f,m,e){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var g={applicationLink:j,username:h,password:l,createTwoWayLink:d,customRpcURL:i,rpcUrl:k,configFormValues:f};return AppLinks.post(c,g,m,e)},createLinkWithOrphanedTrust:function(j,h,m,d,i,k,f,l,n,e){var c=AppLinks.SPI.BASE_URL+"/applicationlinkForm/createAppLink";var g={applicationLink:j,username:h,password:m,createTwoWayLink:d,customRpcURL:i,rpcUrl:k,configFormValues:f,orphanedTrust:l};return AppLinks.post(c,g,n,e)},verifyTwoWayLinkDetails:function(c,i,j,f,h,e){var d=AppLinks.SPI.BASE_URL+"/applicationlinkForm/details";var g={username:j,password:f,remoteUrl:c,rpcUrl:i};return AppLinks.post(d,g,h,e)},getApplicationLinkInfo:function(e,f,d){var c=AppLinks.SPI.BASE_URL+"/applicationlinkInfo/id/"+e;return AppLinks.get(c,f,d)},deleteLink:function(g,c,f,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+g.id;if(c){d+="?reciprocate=true"}return AppLinks.del(d,f,e)},makePrimary:function(e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/primary/"+e.id;return AppLinks.post(c,null,d)},relocate:function(h,f,c,g,e){var d=AppLinks.SPI.BASE_URL+"/relocateApplicationlink/"+h.id+"?newUrl="+encodeURIComponent(f)+"&nowarning="+(c?"true":"false");return AppLinks.post(d,null,g,e)},legacyUpgrade:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/upgrade/legacy/"+f.id;return AppLinks.post(c,null,e,d)},ualUpgrade:function(g,c,f,e){var d=AppLinks.SPI.BASE_URL+"/upgrade/ual/"+g.id;return AppLinks.post(d,c,f,e)},getEntityTypesForApplicationType:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/type/entity/"+f;return AppLinks.get(c,e,d)},getLocalEntitiesWithLinksToApplication:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entitylink/localEntitiesWithLinksTo/"+c+".json";return AppLinks.get(d,f,e)},getEntityLinksForApplication:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entities/"+c+".json";AppLinks.get(d,f,e)},getEntityLinksForApplicationUsingAnonymousAccess:function(c,f,e){var d=AppLinks.SPI.BASE_URL+"/entities/anonymous/"+c+".json";return AppLinks.get(d,f,e)},createNonUalEntityLink:function(l,g,d,f,j,e,k,i){var c=AppLinks.SPI.BASE_URL+"/entitylink/"+l+"/"+g+"?reciprocate=false";var h={applicationId:d,typeId:f,key:j,name:e,isPrimary:false};return AppLinks.put(c,h,k,i)},createEntityLink:function(h,g,d,c,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+h+"/"+g+"?reciprocate=";e+=(c?"true":"false");return AppLinks.put(e,d,i,f)},getConfiguredEntityLinks:function(f,e,g,d){var c=AppLinks.SPI.BASE_URL+"/entitylink/primaryLinks/"+f+"/"+e+".json";return AppLinks.get(c,g,d)},deleteEntityLink:function(h,g,d,c,i,f){var e=AppLinks.SPI.BASE_URL+"/entitylink/"+h+"/"+g+"?typeId="+d.typeId+"&key="+d.key+"&applicationId="+d.applicationId+"&reciprocate="+c;return AppLinks.del(e,i,f)},makePrimaryEntityLink:function(g,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/entitylink/primary/"+g+"/"+f+"?typeId="+c.typeId+"&key="+c.key+"&applicationId="+c.applicationId;return AppLinks.post(d,null,h,e)},canDeleteAppLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/permission/reciprocate-application-delete/"+f;return AppLinks.get(c,e,d)},canDeleteEntityLink:function(g,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-delete/"+c.applicationId+"/"+g+"/"+f+"/"+c.typeId+"/"+c.key;return AppLinks.get(d,h,e)},canCreateReciprocateEntityLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/permission/reciprocate-entity-create/"+f;return AppLinks.get(c,e,d)},processPermissionCode:function(d){var c={noPermission:function(){},missing:function(){},credentialsRequired:function(e){},authenticationFailed:function(e){},noAuthentication:function(e){},noAuthenticationConfigured:function(){},noConnection:function(){},allowed:function(){},unrecognisedCode:function(e){},updateView:function(g,f,e){}};if(!d){d={}}d=b.extend(c,d);return function(f){var e=f.code;if(e=="NO_PERMISSION"){d.noPermission()}else{if(e=="MISSING"){d.missing()}else{if(e=="CREDENTIALS_REQUIRED"){d.credentialsRequired(f.url)}else{if(e=="AUTHENTICATION_FAILED"){d.authenticationFailed(f.url)}else{if(e=="NO_AUTHENTICATION"){d.noAuthentication(f.url)}else{if(e=="NO_AUTHENTICATION_CONFIGURED"){d.noAuthenticationConfigured()}else{if(e=="NO_CONNECTION"){d.noConnection()}else{if(e=="ALLOWED"){d.allowed()}else{d.unrecognisedCode(f.code)}}}}}}}}}},addAuthenticationTrigger:function(e,c,d){if(!d){d={}}if(typeof d.onSuccess=="undefined"){d.onSuccess=function(){location.reload()}}if(typeof d.onFailure=="undefined"){d.onFailure=function(){return true}}b(e).unbind("click");b(e).click(function(){if(d.before){d.before()}AppLinks.authenticateRemoteCredentials(c,d.onSuccess,d.onFailure)})},deleteOrphanedTrust:function(g,e,f,d){var c=AppLinks.SPI.BASE_URL+"/orphaned-trust/"+e+"/"+g;return AppLinks.del(c,f,d)},getOrphanedTrust:function(e,d){var c=AppLinks.SPI.BASE_URL+"/orphaned-trust/";return AppLinks.get(c,e,d)},showCreateEntityLinkSuggestion:function(){return true},getApplicationLink:function(f,e,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+f;return AppLinks.get(c,e,d)},createApplicationLink:function(f,d,i,j,c,k,g){var e=AppLinks.SPI.BASE_URL+"/applicationlink";var h={id:f,name:d,rpcUrl:i,displayUrl:j,typeId:c};return AppLinks.put(e,h,k,g)},createConsumer:function(e,n,d,m,i,l,g,p,h,k,o,f){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+e+"/authentication/consumer";var j={key:n,name:d,description:m,sharedSecret:i,publicKey:l,outgoing:k,twoLOAllowed:g,executingTwoLOUser:p,twoLOImpersonationAllowed:h};return AppLinks.put(c,j,o,f)},createConsumerAutoConfigure:function(j,i,f,c,h,e){var d=AppLinks.SPI.BASE_URL+"/applicationlink/"+j+"/authentication/consumer?autoConfigure=true";var g={twoLOAllowed:i,executingTwoLOUser:f,twoLOImpersonationAllowed:c};return AppLinks.put(d,g,h,e)},registerProvider:function(i,h,e,g,d){var c=AppLinks.SPI.BASE_URL+"/applicationlink/"+i+"/authentication/provider";var f={config:e,provider:h};return AppLinks.put(c,f,g,d)}},(window.AppLinks&&window.AppLinks.SPI)||{})});var a="applinks";AppLinks.UI={showInfoBox:function(c){b(".aui-message.success").remove();AppLinks.UI.createMessage("success",c,"page-info")},hideInfoBox:function(){b(".aui-message.success").remove()},showErrorBox:function(c){AppLinks.UI.createMessage("error",c,"page-error")},hideErrorBox:function(){b(".aui-message.error").remove()},showWarningBox:function(d){if(b.isArray(d)&&d.length>0){var c=b("<ul></ul>");b(d).each(function(f){c.append(b("<li/>",{text:d[f]}))});var e=b('<div class="page-warning"></div>').append(c);AppLinks.UI.createMessage("warning",e.html(),"page-warning")}else{AppLinks.UI.createMessage("warning",d,"page-warning")}},hideWarningBox:function(){b(".aui-message.warning").remove()},shortenString:function(d,c){if(d.length>c){d=d.substring(0,c)+"..."}return d},createMessage:function(d,e,c){var f=b('<div class="'+c+'">');f.html(e);AJS.messages[d](".applinks-message-bar",{title:"",body:f.wrap("<div></div>").parent().html(),closeable:true})},displayValidationErrorMessages:function(c,f,e){if(b.isArray(e)){b(e).each(function(j,h){var k=b('<div class="error applinks-error">');k.text(h);b(f).find("."+c).append(k)})}else{if(typeof e!="undefined"){var g=b('<div class="error applinks-error">');g.text(e.toString());b(f).find("."+c).append(g)}}},displayValidationError:function(c,d,e){return function(j){if(j.status==401){window.location.reload();return}b(".applinks-error").remove();b(".loading").remove();var h=j.responseText;var i=b.parseJSON(h);var g=i.message;if(typeof i.fields=="undefined"){AppLinks.UI.displayValidationErrorMessages(c,d,g)}else{var f=i.fields;b(f).each(function(k){var l=b('<div class="error applinks-error" id="'+f[k]+'-error">');l.text(g[k]);if(b(d).find("."+f[k]).length>0){l.insertAfter(b(d).find("."+f[k]))}else{l.insertAfter(b(d).find("."+c).append(l))}})}b(d).find("."+c).addClass("fully-populated-errors");if(e){e()}}},addProtocolToURL:function(c){var f=b.trim(c);var e=f.toLowerCase();var d=false;if(e.length>=7){if(e.substring(0,7).indexOf("http")!=-1){d=true}}if(!d){f="http://"+f}return f},prettyJoin:function(d,g,f){if(!f){f=AppLinks.I18n.getText("applinks.and")}var c=d.length;var e="";b.each(d,function(h,i){if(h==(c-1)&&c>1){e+=" "+f+"  "+g(i)}else{e+=g(i);if(h+2<c){e+=", "}}});return e},showLoadingIcon:function(c){b('<span class="loading">&nbsp;</span>').insertAfter(c)},hideLoadingIcon:function(c){b(c).next(".loading").remove()},findUrl:function(f){var e=undefined;var g=f.toLowerCase();var d=g.indexOf("http:");if(d==-1){d=g.indexOf("https:")}if(d>-1){var c=g.indexOf(" ",d);if(c==-1){c=g.length}e=f.substring(d,c)}return e},findApplicationType:function(c){c=c.toLowerCase();if(c.indexOf("jira")!=-1){return"jira"}else{if(c.indexOf("fisheye")!=-1){return"fecru"}else{if(c.indexOf("confluence")!=-1){return"confluence"}else{if(c.indexOf("refapp")!=-1){return"refapp"}else{return undefined}}}}},escapeSelector:function(c){return c.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},sanitiseHTML:function(c){var d={"<":"&lt;",'"':"&quot;","&":"&amp;"};return c.replace(/[<"&]/g,function(e){return d[e]})},refreshOrphanedTrust:function(){var c=function(d){b("tr.orphaned-trust-row").each(function(){var j=b(this);var k=j.attr("data-id");var g=j.attr("data-type");var f=false;for(var e=0;e<d.orphanedTrust.length;e++){var h=d.orphanedTrust[e];if(k==h.id&&g==h.type){f=true;break}}if(!f){j.remove();if(d.orphanedTrust.length==0){b(".orphaned-trust-warning").hide()}}})};AppLinks.SPI.getOrphanedTrust(c)},removeCssClass:function(c,d){b(c).removeClass(function(f,h){var g=h.split(" ");var e="";b.each(g,function(i,j){if(j.indexOf(d)!=-1){e=j}});return e})}};(function(){var c=b({});b.each(["bind","unbind","trigger"],function(d,e){AppLinks.UI[e]=function(){return c[e].apply(c,arguments)}})})();AppLinks.I18n={interpolate:function(d,c){if(c){if(!b.isArray(c)){c=[new String(c)]}c.unshift(d);d=AJS.format.apply(AJS,c)}return d},getTextWithPrefix:function(c,d){return AppLinks.I18n.interpolate(appLinksI18n.entries[a+"."+c],d)},getText:function(c,d){return AppLinks.I18n.interpolate(AppLinks.I18n.resolveValue(c),d)},getApplicationTypeName:function(c){return appLinksI18n.entries["applinks.application.type."+c]},getEntityTypeName:function(c){return appLinksI18n.entries["applinks.entity.type."+c]},getPluralizedEntityTypeName:function(c){return appLinksI18n.entries["applinks.entity.type.plural."+c]},getAuthenticationTypeName:function(c){return appLinksI18n.entries["applinks.auth.provider."+c]},resolveValue:function(c){var d=appLinksI18n.entries[c];return typeof d=="undefined"?c:d}};AppLinks.Docs={createDocLink:function(d,e,c){if(!c){c=""}else{c=" "+c}return b("<a/>",{"class":"ual-help-link"+c,href:AppLinks.Docs.getDocHref(d,e),target:"_blank",text:AppLinks.I18n.getText("applinks.help"),title:AppLinks.I18n.getText("applinks.help")})},getDocHref:function(d,e){var c=AppLinks.Docs.resolveValue("applinks.docs.root")+"/"+AppLinks.Docs.resolveValue(d);if(e){c+="#"+AppLinks.Docs.resolveValue(e)}return c},resolveValue:function(c){var d=applinksDocs.entries[c];return typeof d=="undefined"?c:d}};b(document).trigger(AppLinks.Event.PREREADY);b(document).trigger(AppLinks.Event.READY)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/json2.js' */
if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/autocomplete.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){AppLinks.autoComplete={cacheManager:function(c){var a={},b=[],c=c||30;return{get:function(d){return a[d]},put:function(d,e){a[d]=e;b.push(d);if(b.length>c){delete a[b.shift()]}},clear:function(){a={};b=[]}}}};(function(d){var c=function(f){AJS.log("InputDrivenDropDown: truncating text");var h=f.$.closest(".aui-dropdown").width(),g=20;d("a span:not(.icon)",f.$).each(function(){var j=d(this),i=AJS("var","&#8230;"),l=i.width(),k=false;j.wrapInner(d("<em>"));d("em",j).each(function(){var m=d(this);m.show();if(this.offsetLeft+this.offsetWidth>h){var t=this.childNodes,s=false;for(var o=t.length-1;o>=0;o--){var p=t[o],n=1,r=(p.nodeType==3)?"nodeValue":"innerHTML",q=p[r];do{if(n<=q.length){p[r]=q.substr(0,q.length-n++)}else{break}}while(this.offsetLeft+this.offsetWidth+l>h-g);if(n<=q.length){s=true;break}}if(s){k=true}else{m.hide()}}});if(k){j.append(i);this.elpss=i}})};var b=function(f,l){if(!l.length||!l[0]){return}AJS.log("InputDrivenDropDown: highlighting tokens");for(var h=0,j=l.length;h<j;h++){var g=l[h];l[h]=g?g.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g,"\\$"):""}var k=new RegExp("("+l.join("|")+")","gi");d("li a:not(.dropdown-prevent-highlight) span",f.$).each(function(){var m=d(this),i=m.html().replace(k,"<strong>$1</strong>");m.html(i)})};var e=function(j,g){var i=j.options,h=j.dd;if(h){h.hide();h.$.remove()}i.ajsDropDownOptions=i.ajsDropDownOptions||{};if(i.ajsDropDownOptions&&!i.ajsDropDownOptions.alignment){i.ajsDropDownOptions.alignment="left"}i.ajsDropDownOptions.selectionHandler=i.ajsDropDownOptions.selectionHandler||function(l,k){if(l.type!="click"){l.preventDefault();d("a",k).click();document.location=d("a",k).attr("href")}};i.ajsDropDownOptions.displayHandler=function(k){return AJS.escapeHtml(k.name)};var f=j.dd=new AJS.dropDown(g.matrix,i.ajsDropDownOptions)[0];if(i.ajsDropDownOptions&&i.ajsDropDownOptions.className){f.$.addClass(i.ajsDropDownOptions.className)}if(i.dropdownPlacement){i.dropdownPlacement(f.$)}else{AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");d("body").append(f.$)}b(f,g.queryTokens||[g.query]);c(f);if(i.dropdownPostprocess){i.dropdownPostprocess(f.$)}f.show(j._effect);if(typeof i.onShow=="function"){i.onShow.call(f,f.$)}return f};function a(g,f){this._effect="appear";this._timer=null;this.id=g;this.options=f;this.inactive=false;this.busy=false;this.cacheManager=AppLinks.autoComplete.cacheManager()}a.prototype.clearCache=function(){this.cacheManager.clear()};a.prototype.change=function(h,g){var f=this;if(h!=f._value||g){f._value=h;f.busy=false;clearTimeout(f._timer);if(g||(/\S{0,}/).test(h)){var i=f.cacheManager.get(h);if(i){e(f,i)}else{f.busy=true;f._timer=setTimeout(function(){f.options.getDataAndRunCallback.call(f,h,f.show)},200)}}else{f.dd&&f.dd.hide()}}};a.prototype.dropDownLength=function(){return this.dd.links?this.dd.links.length:0};a.prototype.dropDownItem=function(f){return this.dropDownLength()>f?this.dd.links[f]:null};a.prototype.hide=function(){this.dd&&this.dd.hide()};a.prototype.remove=function(){var f=this.dd;if(f){this.hide();f.$.remove()}this.inactive=true;this.options.onDeath&&this.options.onDeath()};a.prototype.show=function(g,i,h){if(this.inactive){AJS.log("Quick search abandoned before server response received, ignoring. "+this);return}var f={matrix:g,query:i,queryTokens:h};this.cacheManager.put(i,f);e(this,f);this.busy=false};AppLinks.inputDrivenDropdown=function(f){return new a("inputdriven-dropdown",f)}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/wizard.js' */
AJS.$(document).bind(AppLinks.Event.PREREADY,function(){(function(d){d.fn.wizard=function(v){var u={width:500,height:350,onshow:function(w,x){return true},aftershow:function(){return true},oncancel:function(){return true},onsubmit:function(){return true},aftersubmit:function(){return true},onnext:function(){return true},onprevious:function(){return true},cancelLabel:AppLinks.I18n.getText("applinks.cancel"),submitLabel:AppLinks.I18n.getText("applinks.create"),nextLabel:AppLinks.I18n.getText("applinks.next"),previousLabel:AppLinks.I18n.getText("applinks.previous"),id:""};if(!v){v={}}v=d.extend(u,v);var t=this;this.each(function(){var D=d(this);var w=new AJS.Dialog(v.width,v.height,v.id);var L=q(w,v.onshow,v.aftershow);var K=c(w,v.oncancel);var z=h(w,v.onsubmit,v.aftersubmit);var M=a(w,v.onprevious);var I=m(w,v.onnext);var G=k(w);var B=o(w);var C=g(w);var H=l(w);var J=s(w);var E=n(w);if(v.showButtonId){d("#"+v.showButtonId).click(L)}var y=f(D);for(var A=0;A<y.length;A++){var F=y[A];j(w,F);if(F.className){w.addHeader(F.title,F.className+"-header")}else{w.addHeader(F.title)}if(A!=0&&d(F.div).attr("previous")!="false"){w.addButton(v.previousLabel,M,"applinks-previous-button")}if(A<y.length-1&&d(F.div).attr("submit")!="true"&&d(F.div).attr("next")!="false"){w.addButton(v.nextLabel,I,"applinks-next-button")}if(d(F.div).attr("submit")=="true"){w.addButton(v.submitLabel,z,"wizard-submit")}if(!w.getPage(A).buttonpanel){w.addButton("",null);d(w.getPage(A).buttonpanel).empty();var x=d('<a class="button-panel-button applinks-cancel-link">'+v.cancelLabel+"</a>");w.getPage(A).buttonpanel.append(x);x.click(K)}else{var x=d('<a class="button-panel-link button-panel-cancel-link applinks-cancel-link">'+v.cancelLabel+"</a>");d(w.getPage(A).buttonpanel).append(x);x.click(K)}if(A<y.length-1){w.addPage()}}t={dialog:w,nextPage:I,prevPage:M,submit:z,cancel:K,show:L,disableNextBtn:G,enableNextBtn:B,disableSubmitBtn:C,enableSubmitBtn:H,disablePreviousBtn:J,enablePreviousBtn:E};w.gotoPage(0);w.gotoPanel(0)});return t};function s(t){return function(){b(r(t,"applinks-previous-button"))}}function n(t){return function(){i(r(t,"applinks-previous-button"))}}function k(t){return function(){b(r(t,"applinks-next-button"))}}function o(t){return function(){i(r(t,"applinks-next-button"))}}function g(t){return function(v){var u=r(t,"wizard-submit");b(u);if(typeof(v)=="undefined"||v){d('<span class="loading">&nbsp;</span>').insertBefore(u)}else{u.parent().find(".loading").remove()}}}function l(t){return function(){var u=r(t,"wizard-submit");i(u);u.parent().find(".loading").remove()}}function r(u,t){return d(u.getPage(u.curpage).buttonpanel).find("."+t)}function p(t){d(t.popup.element).find("form").each(function(){this.reset()})}function i(t){t.attr("disabled",false)}function b(t){t.attr("disabled",true)}function q(t,u,v){return function(w){if(u(t,w)!==false){t.gotoPage(0);t.gotoPanel(0);d(document).unbind("keydown.ual.dialog");d(document).bind("keydown.ual.dialog",e(t));t.show();v()}}}function c(t,u){return function(){if(u(t)!==false){t.hide();p(t)}}}function a(t,u){return function(){if(u(t)!==false){t.prevPage()}}}function m(t,u){return function(){if(u(t)!==false){t.nextPage()}}}function e(t){return function(u){if(u.keyCode===27){p(t);d(document).unbind("keydown.ual.dialog")}}}function h(u,v,t){return function(){if(v(u)!==false){t(u);p(u)}}}function j(v,w){var u=d("> div[panel]",w.div);if(u.length>0){u.each(function(y,z){var x=v.addPanel(z.title,null,z.className,"menu-"+z.id);x.getCurrentPanel().body.append(u[y])})}else{var t=v.addPanel(w.title);t.getCurrentPanel().body.append(w.div)}}function f(v){var u=d(" > div",v);var t=[];u.each(function(x){var w=d(this);t[x]={title:w.attr("title")||null,className:w.attr("class"),div:w}});return t}})(jQuery)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/applinkwizard.js' */
(function(a){AppLinks.Wizard={getWizard:function(){return a("#create-application-link-container").data("wizard")},initAuthenticationUI:function(d){var h=a(d);var f=h.find(".create-reciprocal-link");var c=h.find(".ual-arrow");var l=h.find(".two-way-link-details");var j=h.find(".reciprocal-link-description");var b=h.find(".no-reciprocal-link-description");f.click(function(){if(f.is(":checked")){c.removeClass("no-background");l.show();j.show();b.hide()}else{c.addClass("no-background");l.hide();j.hide();b.show()}});var i=h.find(".same-user-radio-btn");var k=h.find(".different-user-radio-btn");var e=h.find(".different-userbase-image");var g=h.find(".same-userbase-image");i.click(function(){e.addClass("different-userbase-image-grey");g.removeClass("same-userbase-image-grey")});k.click(function(){g.addClass("same-userbase-image-grey");e.removeClass("different-userbase-image-grey")})},initNonUALUI:function(e){var c=a(e);var b=c.find(".application-types");for(var d=0;d<nonAppLinksApplicationTypes.length;d++){a('<option value="'+nonAppLinksApplicationTypes[d].typeId+'">'+nonAppLinksApplicationTypes[d].label+"</option>").appendTo(b)}},fetchManifest:function(e,h,d,b){var i=h.find("#application-url");if(i.val()==""){var c=h.find("#application-types");if(c.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(i);return false}var g=function(j){e.enableSubmitBtn();e.enablePreviousBtn();e.cancel();AppLinks.UI.listApplicationLinks(j.applicationLink.id,"new",j)};AppLinks.SPI.createStaticUrlAppLink(c.val(),g,null);return true}var f=AppLinks.UI.addProtocolToURL(i.val());AppLinks.UI.showLoadingIcon(i);var g=function(l){var k=l;e.enableNextBtn();h.find(".loading").remove();h.find(".reciprocal-rpc-url").val(a("#baseUrl").val());if(typeof l.typeId!="undefined"){AppLinks.Wizard.handleUALManifest(k,h);e.dialog.gotoPage(2);h.find(".reciprocal-link-username").focus();if(d){d(k)}}else{if(l.code=="applinks.warning.redirected.host"&&!i.data("hasWarnedAboutRedirection")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("hasWarnedAboutRedirection","true");var m=function(){a(i).removeData("hasWarnedAboutRedirection");a(i).unbind("change",m)};i.bind("change",m)}else{if(l.code=="applinks.warning.unknown.host"&&!i.data("forceWhenHostIsOffline")){AppLinks.UI.displayValidationErrorMessages("manifest-validation-errors",h,l.warning);i.data("forceWhenHostIsOffline","true");var j=function(){a(i).removeData("forceWhenHostIsOffline");a(i).unbind("change",j)};i.bind("change",j)}else{if(k.code=="applinks.warning.unknown.host"||k.code=="applinks.warning.redirected.host"){delete k.warning;delete k.code}AppLinks.Wizard.handleNonUALManifest(k,f,h);e.dialog.gotoPage(1);h.find(".application-name").focus();if(b){b(k)}}}}};e.disableNextBtn();AppLinks.SPI.tryToFetchManifest(f,g,AppLinks.UI.displayValidationError("manifest-validation-errors",h,function(){e.enableNextBtn()}));return f},handleUALManifest:function(f,e){var c=a(e);c.find(".remote-app-image").removeClass(function(j,l){var k=l.split(" ");var i="";a.each(k,function(m,n){if(n.indexOf("application-type-image-")!=-1){i=n}});return i});c.find(".remote-app-image").addClass("application-type-image-"+f.typeId);c.find(".link-to-app-type").html(AppLinks.I18n.getText("applinks.create.title.link.to",AppLinks.I18n.getApplicationTypeName(f.typeId)));c.find(".remote-app-name").text(AppLinks.UI.shortenString(f.name,20));c.find(".create-reciprocal-link").attr("checked",true);c.find("#reciprocal-link-back-to-server").html(AppLinks.I18n.getText("applinks.create.link.back.to.server",AJS.escapeHtml(f.name)));var d=["administrator",AJS.escapeHtml(f.name),'<a target="_blank" href="'+AppLinks.Docs.getDocHref("applinks.docs.adding.application.link")+'">',"</a>"];var h=f.applinksVersion.split(".");var b=parseInt(h[0]);var g=parseInt(h[1]);if((f.typeId=="jira"||f.typeId=="confluence")&&(b==3&&g<10)){d[0]="system administrator"}c.find(".reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.link",d));c.find(".no-reciprocal-link-description").hide();c.find(".no-reciprocal-link-description").html(AppLinks.I18n.getText("applinks.create.two.way.no.link",AJS.escapeHtml(f.name)));c.find(".reciprocal-link-username").val("");c.find(".reciprocal-link-password").val("");c.find(".ual-arrow").removeClass("no-background");c.find(".two-way-link-details").show();c.find(".reciprocal-link-description").show();c.find(".no-reciprocal-link-description").hide()},handleNonUALManifest:function(d,e,c){var b=a(c);b.find(".application-name").val("");b.find(".application-types option:first-child").attr("selected","selected");b.find(".non-ual-application-url").text(e);if(d.warning){b.find(".create-non-ual-warning").show();b.find(".create-non-ual-warning").html(d.warning)}else{b.find(".create-non-ual-warning").hide()}},checkReciprocalLinkFormThreeStepMode:function(c,d,g,j,f){var h=a(c);if(h.find(".create-reciprocal-link").is(":checked")){var k=a.trim(h.find(".reciprocal-rpc-url").val());if(k==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(h.find(".reciprocal-rpc-url"));if(f){f()}return}var e=h.find(".reciprocal-link-username");var b=h.find(".reciprocal-link-password");if(e.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(e);if(f){f()}return false}var i=function(l){h.find(".same-user-description").find("input").attr("checked",true);h.find(".trust-radio-btn").attr("checked",true);h.find(".same-user-radio-btn").click();g(l)};k=AppLinks.UI.addProtocolToURL(k);AppLinks.SPI.verifyTwoWayLinkDetails(j,k,e.val(),b.val(),i,AppLinks.UI.displayValidationError("two-way-link-errors",c,f));return false}else{d();return false}},checkReciprocalLinkFormTwoStepMode:function(f,h,b,i){var c=a(f);var g=a.trim(c.find(".reciprocal-rpc-url").val());if(g==""){a("<div class='error applinks-error'>"+AppLinks.I18n.getText("applinks.error.url.field.empty")+"</div>").insertAfter(c.find(".reciprocal-rpc-url"));if(i){i()}return}var d=c.find(".reciprocal-link-username");var e=c.find(".reciprocal-link-password");if(d.val()==""){a('<div class="error applinks-error">'+AppLinks.I18n.getText("applinks.error.username.empty")+"</div>").insertAfter(d);if(i){i()}return false}g=AppLinks.UI.addProtocolToURL(g);AppLinks.SPI.verifyTwoWayLinkDetails(h,g,d.val(),e.val(),b,AppLinks.UI.displayValidationError("two-way-link-errors",f,i));return false}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'js/urls.js' */
(function(){AppLinks.Urls={generateUrl:function(b,a){var c=b;if(typeof a=="undefined"){return c}else{AJS.$.each(a,function(d,e){if(c.indexOf("?")<0){c=c+"?"}else{c=c+"&"}c=c+d+"="+encodeURIComponent(JSON.stringify(e))});return c}},generateApplinksAdminUrl:function(d,c,a){var b=d+"/plugins/servlet/applinks/listApplicationLinks";if(c==="confluence"){b=d+"/admin/listapplicationlinks.action"}return AppLinks.Urls.generateUrl(b,a)}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-oauth-ui', location = 'js/oauth-dialog.js' */
AJS.$(document).bind(AppLinks.Event.READY,function(){(function(a){AppLinks.OAuthCallback=function(){};AppLinks.OAuthCallback.prototype.success=function(){this.aouthWindow.close();this.onSuccess()};AppLinks.OAuthCallback.prototype.failure=function(){this.aouthWindow.close();this.onFailure()};AppLinks.OAuthCallback.prototype.show=function(b,d,c){this.onSuccess=d;this.onFailure=c;this.aouthWindow=window.open(b,"com_atlassian_applinks_authentication")};oauthCallback=new AppLinks.OAuthCallback();AppLinks.authenticateRemoteCredentials=function(b,d,c){a(".applinks-error").remove();oauthCallback.show(b,d,c)}})(AJS.$)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-date-picker', location = 'js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
/*
 * jQuery UI Datepicker 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.8.24"}});var PROP_NAME="datepicker";var dpuuid=new Date().getTime();var instActive;function Datepicker(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){if(this.debug){console.log.apply("",arguments)}},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase();var inline=(nodeName=="div"||nodeName=="span");if(!target.id){this.uuid+=1;target.id="dp"+this.uuid}var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{});if(nodeName=="input"){this._connectDatepicker(target,inst)}else{if(inline){this._inlineDatepicker(target,inst)}}},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:(!inline?this.dpDiv:bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')))}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName)){return }this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled){this._disableDatepicker(target)}},_attachments:function(input,inst){var appendText=this._get(inst,"appendText");var isRTL=this._get(inst,"isRTL");if(inst.append){inst.append.remove()}if(appendText){inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger){inst.trigger.remove()}var showOn=this._get(inst,"showOn");if(showOn=="focus"||showOn=="both"){input.focus(this._showDatepicker)}if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText");var buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]){$.datepicker._hideDatepicker()}else{if($.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else{$.datepicker._showDatepicker(input[0])}}return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,12-1,20);var dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0;var maxI=0;for(var i=0;i<names.length;i++){if(names[i].length>max){max=names[i].length;maxI=i}}return maxI};date.setMonth(findMax(this._get(inst,(dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))));date.setDate(findMax(this._get(inst,(dateFormat.match(/DD/)?"dayNames":"dayNamesShort")))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName)){return }divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)});$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);this._updateAlternate(inst);if(inst.settings.disabled){this._disableDatepicker(target)}inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px;"/>');this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=(date&&date.constructor==Date?this._formatDate(inst,date):date);this._dialogInput.val(date);this._pos=(pos?(pos.length?pos:[pos.pageX,pos.pageY]):null);if(!this._pos){var browserWidth=document.documentElement.clientWidth;var browserHeight=document.documentElement.clientHeight;var scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;var scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[(browserWidth/2)-100+scrollX,(browserHeight/2)-150+scrollY]}this._dialogInput.css("left",(this._pos[0]+20)+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI){$.blockUI(this.dpDiv)}$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName=="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(nodeName=="div"||nodeName=="span"){$target.removeClass(this.markerClassName).empty()}}},_enableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)})},_disableDatepicker:function(target){var $target=$(target);var inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName)){return }var nodeName=target.nodeName.toLowerCase();if(nodeName=="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}}this._disabledInputs=$.map(this._disabledInputs,function(value){return(value==target?null:value)});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target){return false}for(var i=0;i<this._disabledInputs.length;i++){if(this._disabledInputs[i]==target){return true}}return false},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string"){return(name=="defaults"?$.extend({},$.datepicker._defaults):(inst?(name=="all"?$.extend({},inst.settings):this._get(inst,name)):null))}var settings=name||{};if(typeof name=="string"){settings={};settings[name]=value}if(inst){if(this._curInst==inst){this._hideDatepicker()}var date=this._getDateDatepicker(target,true);var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined){inst.settings.minDate=this._formatDate(inst,minDate)}if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined){inst.settings.maxDate=this._formatDate(inst,maxDate)}this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst){this._updateDatepicker(inst)}},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);if(inst&&!inst.inline){this._setDateFromField(inst,noDefault)}return(inst?this._getDate(inst):null)},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target);var handled=true;var isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing){switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);if(sel[0]){$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0])}var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{$.datepicker._hideDatepicker()}return false;break;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M");break;case 34:$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M");break;case 35:if(event.ctrlKey||event.metaKey){$.datepicker._clearDate(event.target)}handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey){$.datepicker._gotoToday(event.target)}handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?+1:-1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths")),"M")}break;case 38:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,-7,"D")}handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,(isRTL?-1:+1),"D")}handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey){$.datepicker._adjustDate(event.target,(event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths")),"M")}break;case 40:if(event.ctrlKey||event.metaKey){$.datepicker._adjustDate(event.target,+7,"D")}handled=event.ctrlKey||event.metaKey;break;default:handled=false}}else{if(event.keyCode==36&&event.ctrlKey){$.datepicker._showDatepicker(this)}else{handled=false}}if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));var chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||(chr<" "||!chars||chars.indexOf(chr)>-1)}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal){try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),(inst.input?inst.input.val():null),$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){$.datepicker.log(err)}}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!="input"){input=$("input",input.parentNode)[0]}if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input){return }var inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!=inst){$.datepicker._curInst.dpDiv.stop(true,true);if(inst&&$.datepicker._datepickerShowing){$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}}var beforeShow=$.datepicker._get(inst,"beforeShow");var beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false){return }extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog){input.value=""}if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);$.datepicker._pos[1]+=input.offsetHeight}var isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")=="fixed";return !isFixed});if(isFixed&&$.browser.opera){$.datepicker._pos[0]-=document.documentElement.scrollLeft;$.datepicker._pos[1]-=document.documentElement.scrollTop}var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:($.datepicker._inDialog&&$.blockUI?"static":(isFixed?"fixed":"absolute")),display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim");var duration=$.datepicker._get(inst,"duration");var postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects[showAnim]){inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[showAnim||"show"]((showAnim?duration:null),postProcess)}if(!showAnim||!duration){postProcess()}if(inst.input.is(":visible")&&!inst.input.is(":disabled")){inst.input.focus()}$.datepicker._curInst=inst}},_updateDatepicker:function(inst){var self=this;self.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst);var cols=numMonths[1];var width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1){inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",(width*cols)+"em")}inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement){inst.input.focus()}if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&inst.yearshtml){inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml)}origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth();var dpHeight=inst.dpDiv.outerHeight();var inputWidth=inst.input?inst.input.outerWidth():0;var inputHeight=inst.input?inst.input.outerHeight():0;var viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft());var viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=(this._get(inst,"isRTL")?(dpWidth-inputWidth):0);offset.left-=(isFixed&&offset.left==inst.input.offset().left)?$(document).scrollLeft():0;offset.top-=(isFixed&&offset.top==(inst.input.offset().top+inputHeight))?$(document).scrollTop():0;offset.left-=Math.min(offset.left,(offset.left+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,(offset.top+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var inst=this._getInst(obj);var isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj))){obj=obj[isRTL?"previousSibling":"nextSibling"]}var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||(input&&inst!=$.data(input,PROP_NAME))){return }if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim");var duration=this._get(inst,"duration");var postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&$.effects[showAnim]){inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess)}else{inst.dpDiv[(showAnim=="slideDown"?"slideUp":(showAnim=="fadeIn"?"fadeOut":"hide"))]((showAnim?duration:null),postProcess)}if(!showAnim){postProcess()}this._datepickerShowing=false;var onClose=this._get(inst,"onClose");if(onClose){onClose.apply((inst.input?inst.input[0]:null),[(inst.input?inst.input.val():""),inst])}this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst){return }var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if((($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)))||($target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst)){$.datepicker._hideDatepicker()}},_adjustDate:function(id,offset,period){var target=$(id);var inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0])){return }this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id);var inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=inst.currentYear}else{var date=new Date();inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id);var inst=this._getInst(target[0]);inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0])){return }var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);var inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id);var inst=this._getInst(target[0]);dateStr=(dateStr!=null?dateStr:this._formatDate(inst));if(inst.input){inst.input.val(dateStr)}this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");if(onSelect){onSelect.apply((inst.input?inst.input[0]:null),[dateStr,inst])}else{if(inst.input){inst.input.trigger("change")}}if(inst.inline){this._updateDatepicker(inst)}else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof (inst.input[0])!="object"){inst.input.focus()}this._lastInput=null}},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");var date=this._getDate(inst);var dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[(day>0&&day<6),""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/86400000)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null){throw"Invalid arguments"}value=(typeof value=="object"?value.toString():value+"");if(value==""){return null}var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var year=-1;var month=-1;var day=-1;var doy=-1;var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var getNumber=function(match){var isDoubled=lookAhead(match);var size=(match=="@"?14:(match=="!"?20:(match=="y"&&isDoubled?4:(match=="o"?3:2))));var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substring(iValue).match(digits);if(!num){throw"Missing number at position "+iValue}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return -(a[1].length-b[1].length)});var index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!=-1){return index+1}else{throw"Unknown name at position "+iValue}};var checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat)){throw"Unexpected literal at position "+iValue}iValue++};var iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{checkLiteral()}}else{switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/10000);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case"'":if(lookAhead("'")){checkLiteral()}else{literal=true}break;default:checkLiteral()}}}if(iValue<value.length){throw"Extra/unparsed characters found in date: "+value.substring(iValue)}if(year==-1){year=new Date().getFullYear()}else{if(year<100){year+=new Date().getFullYear()-new Date().getFullYear()%100+(year<=shortYearCutoff?0:-100)}}if(doy>-1){month=1;day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim){break}month++;day-=dim}while(true)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day){throw"Invalid date"}return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/100)+Math.floor(1970/400))*24*60*60*10000000),formatDate:function(format,date,settings){if(!date){return""}var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort;var dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames;var monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort;var monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};var formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match)){while(num.length<len){num="0"+num}}return num};var formatName=function(match,value,shortNames,longNames){return(lookAhead(match)?longNames[value]:shortNames[value])};var output="";var literal=false;if(date){for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{output+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round((new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTime()-new Date(date.getFullYear(),0,0).getTime())/86400000),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=(lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100);break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*10000+this._ticksTo1970;break;case"'":if(lookAhead("'")){output+="'"}else{literal=true}break;default:output+=format.charAt(iFormat)}}}}return output},_possibleChars:function(format){var chars="";var literal=false;var lookAhead=function(match){var matches=(iFormat+1<format.length&&format.charAt(iFormat+1)==match);if(matches){iFormat++}return matches};for(var iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)=="'"&&!lookAhead("'")){literal=false}else{chars+=format.charAt(iFormat)}}else{switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":if(lookAhead("'")){chars+="'"}else{literal=true}break;default:chars+=format.charAt(iFormat)}}}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal){return }var dateFormat=this._get(inst,"dateFormat");var dates=inst.lastVal=inst.input?inst.input.val():null;var date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event);dates=(noDefault?"":dates)}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=(dates?date.getDate():0);inst.currentMonth=(dates?date.getMonth():0);inst.currentYear=(dates?date.getFullYear():0);this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date()))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date();date.setDate(date.getDate()+offset);return date};var offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date();var year=date.getFullYear();var month=date.getMonth();var day=date.getDate();var pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g;var matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)};var newDate=(date==null||date===""?defaultDate:(typeof date=="string"?offsetString(date):(typeof date=="number"?(isNaN(date)?defaultDate:offsetNumeric(date)):new Date(date.getTime()))));newDate=(newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate);if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){if(!date){return null}date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date;var origMonth=inst.selectedMonth;var origYear=inst.selectedYear;var newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date()));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();if((origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange){this._notifyChange(inst)}this._adjustInstDate(inst);if(inst.input){inst.input.val(clear?"":this._formatDate(inst))}},_getDate:function(inst){var startDate=(!inst.currentYear||(inst.input&&inst.input.val()=="")?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths");var id="#"+inst.id.replace(/\\\\/g,"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return false},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var today=new Date();today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL");var showButtonPanel=this._get(inst,"showButtonPanel");var hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext");var navigationAsDateFormat=this._get(inst,"navigationAsDateFormat");var numMonths=this._getNumberOfMonths(inst);var showCurrentAtPos=this._get(inst,"showCurrentAtPos");var stepMonths=this._get(inst,"stepMonths");var isMultiMonth=(numMonths[0]!=1||numMonths[1]!=1);var currentDate=this._daylightSavingAdjust((!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var drawMonth=inst.drawMonth-showCurrentAtPos;var drawYear=inst.drawYear;if(drawMonth<0){drawMonth+=12;drawYear--}if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-(numMonths[0]*numMonths[1])+1,maxDate.getDate()));maxDraw=(minDate&&maxDraw<minDate?minDate:maxDraw);while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=(!navigationAsDateFormat?prevText:this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)));var prev=(this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>"));var nextText=this._get(inst,"nextText");nextText=(!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)));var next=(this._canAdjustMonth(inst,+1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":(hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>"));var currentText=this._get(inst,"currentText");var gotoDate=(this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today);currentText=(!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)));var controls=(!inst.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>":"");var buttonPanel=(showButtonPanel)?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";var firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=(isNaN(firstDay)?0:firstDay);var showWeek=this._get(inst,"showWeek");var dayNames=this._get(inst,"dayNames");var dayNamesShort=this._get(inst,"dayNamesShort");var dayNamesMin=this._get(inst,"dayNamesMin");var monthNames=this._get(inst,"monthNames");var monthNamesShort=this._get(inst,"monthNamesShort");var beforeShowDay=this._get(inst,"beforeShowDay");var showOtherMonths=this._get(inst,"showOtherMonths");var selectOtherMonths=this._get(inst,"selectOtherMonths");var calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week;var defaultDate=this._getDefaultDate(inst);var html="";for(var row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay));var cornerClass=" ui-corner-all";var calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1){switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?(isRTL?next:prev):"")+(/all|right/.test(cornerClass)&&row==0?(isRTL?prev:next):"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var thead=(showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"");for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth){inst.selectedDay=Math.min(inst.selectedDay,daysInMonth)}var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;var curRows=Math.ceil((leadDays+daysInMonth)/7);var numRows=(isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows);this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=(!showWeek?"":'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>");for(var dow=0;dow<7;dow++){var daySettings=(beforeShowDay?beforeShowDay.apply((inst.input?inst.input[0]:null),[printDate]):[true,""]);var otherMonth=(printDate.getMonth()!=drawMonth);var unselectable=(otherMonth&&!selectOtherMonths)||!daySettings[0]||(minDate&&printDate<minDate)||(maxDate&&printDate>maxDate);tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+((printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent)||(defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime())?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":(unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>"))+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+((numMonths[0]>0&&col==numMonths[1]-1)?'<div class="ui-datepicker-row-break"></div>':""):"");group+=calender}html+=group}html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth");var changeYear=this._get(inst,"changeYear");var showMonthAfterYear=this._get(inst,"showMonthAfterYear");var html='<div class="ui-datepicker-title">';var monthHtml="";if(secondary||!changeMonth){monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>"}else{var inMinYear=(minDate&&minDate.getFullYear()==drawYear);var inMaxYear=(maxDate&&maxDate.getFullYear()==drawYear);monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;month<12;month++){if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())){monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>"}}monthHtml+="</select>"}if(!showMonthAfterYear){html+=monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")}if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear){html+='<span class="ui-datepicker-year">'+drawYear+"</span>"}else{var years=this._get(inst,"yearRange").split(":");var thisYear=new Date().getFullYear();var determineYear=function(value){var year=(value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):(value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10)));return(isNaN(year)?thisYear:year)};var year=determineYear(years[0]);var endYear=Math.max(year,determineYear(years[1]||""));year=(minDate?Math.max(year,minDate.getFullYear()):year);endYear=(maxDate?Math.min(endYear,maxDate.getFullYear()):endYear);inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;year<=endYear;year++){inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>"}inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");if(showMonthAfterYear){html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml}html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0);var month=inst.drawMonth+(period=="M"?offset:0);var day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0);var date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();if(period=="M"||period=="Y"){this._notifyChange(inst)}},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");var newDate=(minDate&&date<minDate?minDate:date);newDate=(maxDate&&newDate>maxDate?maxDate:newDate);return newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange){onChange.apply((inst.input?inst.input[0]:null),[inst.selectedYear,inst.selectedMonth+1,inst])}},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return(numMonths==null?[1,1]:(typeof numMonths=="number"?[1,numMonths]:numMonths))},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return new Date(year,month,1).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst);var date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0){date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()))}return this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min");var maxDate=this._getMinMaxDate(inst,"max");return((!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime()))},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=(typeof shortYearCutoff!="string"?shortYearCutoff:new Date().getFullYear()%100+parseInt(shortYearCutoff,10));return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=(day?(typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day))):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay)));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.bind("mouseout",function(event){var elem=$(event.target).closest(selector);if(!elem.length){return }elem.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(event){var elem=$(event.target).closest(selector);if($.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||!elem.length){return }elem.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");elem.addClass("ui-state-hover");if(elem.hasClass("ui-datepicker-prev")){elem.addClass("ui-datepicker-prev-hover")}if(elem.hasClass("ui-datepicker-next")){elem.addClass("ui-datepicker-next-hover")}})}function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]==null||props[name]==undefined){target[name]=props[name]}}return target}function isArray(a){return(a&&(($.browser.safari&&typeof a=="object"&&a.length)||(a.constructor&&a.constructor.toString().match(/\Array\(\)/))))}$.fn.datepicker=function(options){if(!this.length){return this}if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv);$.datepicker.initialized=true}var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options=="string"&&(options=="isDisabled"||options=="getDate"||options=="widget")){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}if(options=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))}return this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker();$.datepicker.initialized=false;$.datepicker.uuid=new Date().getTime();$.datepicker.version="1.8.24";window["DP_jQuery_"+dpuuid]=$})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-date-picker', location = 'js/aui-date-picker.js' */
(function(A){var B=0;AJS.DatePicker=function(H,D){var G,C,E,F;G={};F=B++;E=A(H);E.attr("data-aui-dp-uuid",F);D=A.extend(undefined,AJS.DatePicker.prototype.defaultOptions,D);G.getField=function(){return E};G.getOptions=function(){return D};C=function(){var O,L,T,P,S,R,U,Q,I,K;G.hide=function(){I.hide()};G.show=function(){I.show()};G.setDate=function(W){if(typeof O!=="undefined"){O.datepicker("setDate",W)}};G.getDate=function(W){if(typeof O!=="undefined"){return O.datepicker("getDate")}};R=function(X){K.off();if(D.hint){var Y=A("<div/>").addClass("aui-datepicker-hint");Y.append("<span/>").text(D.hint);K.append(Y)}O=A("<div/>");O.attr("data-aui-dp-popup-uuid",F);K.append(O);var W={dateFormat:D.dateFormat,defaultDate:E.val(),maxDate:E.attr("max"),minDate:E.attr("min"),nextText:">",onSelect:function(a,Z){E.val(a);E.change();G.hide();U=true;E.focus();D.onSelect&&D.onSelect.call(this,a)},onChangeMonthYear:function(){setTimeout(I.refresh,0)},prevText:"<"};A.extend(W,X);if(D.firstDay>-1){W.firstDay=D.firstDay}if(typeof E.attr("step")!=="undefined"){AJS.log("WARNING: The AJS date picker polyfill currently does not support the step attribute!")}O.datepicker(W);E.on("focusout",T);E.on("propertychange keyup input paste",S)};L=function(X){var W=A(X.target);X.preventDefault();if(!(W.closest(K).length||W.is(E))){if(!W.closest(".ui-datepicker-header").length){G.hide()}}};T=function(W){if(!(Q)){A("body").on("focus blur click mousedown","*",L);Q=true}};P=function(W){if(!(U)){G.show()}else{U=false}};S=function(W){var X=A(this).val();if(X){O.datepicker("setDate",E.val());O.datepicker("option",{maxDate:E.attr("max"),minDate:E.attr("min")})}};G.destroyPolyfill=function(){G.hide();E.attr("placeholder",null);E.off("propertychange keyup input paste",S);E.off("focus click",P);E.off("focusout",T);if(AJS.DatePicker.prototype.browserSupportsDateField){E[0].type="date"}if(typeof O!=="undefined"){O.datepicker("destroy")}delete G.destroyPolyfill;delete G.show;delete G.hide};U=false;Q=false;if(!(D.languageCode in AJS.DatePicker.prototype.localisations)){D.languageCode=""}var N=AJS.DatePicker.prototype.localisations[D.languageCode];var V="";var J=240;if(N.size==="large"){J=325;V="aui-datepicker-dialog-large"}var M={hideCallback:function(){A("body").off("focus blur click mousedown","*",L);Q=false},hideDelay:null,noBind:true,persistent:true,width:J};if(D.position){M.calculatePositions=function(W,Y){var X=A(W[0]);return D.position.call(this,X,Y)}}I=AJS.InlineDialog(E,undefined,function(X,W,Y){if(typeof O==="undefined"){K=X;R(N)}Y()},M);I.addClass("aui-datepicker-dialog");I.addClass(V);E.on("focus click",P);E.attr("placeholder",D.dateFormat);if(D.overrideBrowserDefault&&AJS.DatePicker.prototype.browserSupportsDateField){E[0].type="text"}};G.reset=function(){if(typeof G.destroyPolyfill==="function"){G.destroyPolyfill()}if((!(AJS.DatePicker.prototype.browserSupportsDateField))||D.overrideBrowserDefault){C()}};G.reset();return G};AJS.DatePicker.prototype.browserSupportsDateField=(A('<input type="date" />')[0].type==="date");AJS.DatePicker.prototype.defaultOptions={overrideBrowserDefault:false,firstDay:-1,languageCode:AJS.$("html").attr("lang")||"en-AU",dateFormat:A.datepicker.W3C};AJS.DatePicker.prototype.localisations={"":{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:0,isRTL:false,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],showMonthAfterYear:false,yearSuffix:""},af:{dayNames:["Sondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrydag","Saterdag"],dayNamesMin:["Son","Maa","Din","Woe","Don","Vry","Sat"],firstDay:1,isRTL:false,monthNames:["Januarie","Februarie","Maart","April","Mei","Junie","Julie","Augustus","September","Oktober","November","Desember"],showMonthAfterYear:false,yearSuffix:""},"ar-DZ":{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:6,isRTL:true,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},ar:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:6,isRTL:true,monthNames:[" ","","","","","","","",""," "," "," "],showMonthAfterYear:false,yearSuffix:""},az:{dayNames:["Bazar","Bazar ertsi","rnb axam","rnb","Cm axam","Cm","nb"],dayNamesMin:["B","Be","a","","Ca","C",""],firstDay:1,isRTL:false,monthNames:["Yanvar","Fevral","Mart","Aprel","May","yun","yul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],showMonthAfterYear:false,yearSuffix:""},bg:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},bs:{dayNames:["Nedelja","Ponedeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesMin:["Ned","Pon","Uto","Sri","et","Pet","Sub"],firstDay:1,isRTL:false,monthNames:["Januar","Februar","Mart","April","Maj","Juni","Juli","August","Septembar","Oktobar","Novembar","Decembar"],showMonthAfterYear:false,yearSuffix:""},ca:{dayNames:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],dayNamesMin:["Dug","Dln","Dmt","Dmc","Djs","Dvn","Dsb"],firstDay:1,isRTL:false,monthNames:["Gener","Febrer","Mar&ccedil;","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],showMonthAfterYear:false,yearSuffix:""},cs:{dayNames:["nedle","pondl","ter","steda","tvrtek","ptek","sobota"],dayNamesMin:["ne","po","t","st","t","p","so"],firstDay:1,isRTL:false,monthNames:["leden","nor","bezen","duben","kvten","erven","ervenec","srpen","z","jen","listopad","prosinec"],showMonthAfterYear:false,yearSuffix:""},da:{dayNames:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["Sn","Man","Tir","Ons","Tor","Fre","Lr"],firstDay:1,isRTL:false,monthNames:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],showMonthAfterYear:false,yearSuffix:""},de:{dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],firstDay:1,isRTL:false,monthNames:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],showMonthAfterYear:false,yearSuffix:""},el:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},"en-AU":{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,isRTL:false,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],showMonthAfterYear:false,yearSuffix:""},"en-GB":{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,isRTL:false,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],showMonthAfterYear:false,yearSuffix:""},"en-NZ":{dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],firstDay:1,isRTL:false,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],showMonthAfterYear:false,yearSuffix:""},eo:{dayNames:["Dimano","Lundo","Mardo","Merkredo","ado","Vendredo","Sabato"],dayNamesMin:["Dim","Lun","Mar","Mer","a","Ven","Sab"],firstDay:0,isRTL:false,monthNames:["Januaro","Februaro","Marto","Aprilo","Majo","Junio","Julio","Agusto","Septembro","Oktobro","Novembro","Decembro"],showMonthAfterYear:false,yearSuffix:""},es:{dayNames:["Domingo","Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesMin:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],firstDay:1,isRTL:false,monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],showMonthAfterYear:false,yearSuffix:""},et:{dayNames:["Phapev","Esmaspev","Teisipev","Kolmapev","Neljapev","Reede","Laupev"],dayNamesMin:["Phap","Esmasp","Teisip","Kolmap","Neljap","Reede","Laup"],firstDay:1,isRTL:false,monthNames:["Jaanuar","Veebruar","Mrts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],showMonthAfterYear:false,yearSuffix:"",size:"large"},eu:{dayNames:["Igandea","Astelehena","Asteartea","Asteazkena","Osteguna","Ostirala","Larunbata"],dayNamesMin:["Iga","Ast","Ast","Ast","Ost","Ost","Lar"],firstDay:1,isRTL:false,monthNames:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],showMonthAfterYear:false,yearSuffix:""},fa:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:6,isRTL:true,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},fi:{dayNames:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],dayNamesMin:["Su","Ma","Ti","Ke","To","Pe","Su"],firstDay:1,isRTL:false,monthNames:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],showMonthAfterYear:false,yearSuffix:""},fo:{dayNames:["Sunnudagur","Mnadagur","Tsdagur","Mikudagur","Hsdagur","Frggjadagur","Leyardagur"],dayNamesMin:["Sun","Mn","Ts","Mik","Hs","Fr","Ley"],firstDay:0,isRTL:false,monthNames:["Januar","Februar","Mars","Aprl","Mei","Juni","Juli","August","September","Oktober","November","Desember"],showMonthAfterYear:false,yearSuffix:""},"fr-CH":{dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesMin:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],firstDay:1,isRTL:false,monthNames:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],showMonthAfterYear:false,yearSuffix:""},fr:{dayNames:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesMin:["Dim.","Lun.","Mar.","Mer.","Jeu.","Ven.","Sam."],firstDay:1,isRTL:false,monthNames:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],showMonthAfterYear:false,yearSuffix:""},gl:{dayNames:["Domingo","Luns","Martes","M&eacute;rcores","Xoves","Venres","S&aacute;bado"],dayNamesMin:["Dom","Lun","Mar","M&eacute;r","Xov","Ven","S&aacute;b"],firstDay:1,isRTL:false,monthNames:["Xaneiro","Febreiro","Marzo","Abril","Maio","Xuo","Xullo","Agosto","Setembro","Outubro","Novembro","Decembro"],showMonthAfterYear:false,yearSuffix:""},he:{dayNames:["","","","","","",""],dayNamesMin:["'","'","'","'","'","'",""],firstDay:0,isRTL:true,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},hr:{dayNames:["Nedjelja","Ponedjeljak","Utorak","Srijeda","etvrtak","Petak","Subota"],dayNamesMin:["Ned","Pon","Uto","Sri","et","Pet","Sub"],firstDay:1,isRTL:false,monthNames:["Sijeanj","Veljaa","Oujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],showMonthAfterYear:false,yearSuffix:""},hu:{dayNames:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","Szombat"],dayNamesMin:["Vas","Ht","Ked","Sze","Cs","Pn","Szo"],firstDay:1,isRTL:false,monthNames:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],showMonthAfterYear:true,yearSuffix:""},hy:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},id:{dayNames:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],dayNamesMin:["Min","Sen","Sel","Rab","kam","Jum","Sab"],firstDay:0,isRTL:false,monthNames:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","Nopember","Desember"],showMonthAfterYear:false,yearSuffix:""},is:{dayNames:["Sunnudagur","M&aacute;nudagur","&THORN;ri&eth;judagur","Mi&eth;vikudagur","Fimmtudagur","F&ouml;studagur","Laugardagur"],dayNamesMin:["Sun","M&aacute;n","&THORN;ri","Mi&eth;","Fim","F&ouml;s","Lau"],firstDay:0,isRTL:false,monthNames:["Jan&uacute;ar","Febr&uacute;ar","Mars","Apr&iacute;l","Ma&iacute","J&uacute;n&iacute;","J&uacute;l&iacute;","&Aacute;g&uacute;st","September","Okt&oacute;ber","N&oacute;vember","Desember"],showMonthAfterYear:false,yearSuffix:""},it:{dayNames:["Domenica","Luned&#236","Marted&#236","Mercoled&#236","Gioved&#236","Venerd&#236","Sabato"],dayNamesMin:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],firstDay:1,isRTL:false,monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],showMonthAfterYear:false,yearSuffix:""},ja:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:0,isRTL:false,monthNames:["1","2","3","4","5","6","7","8","9","10","11","12"],showMonthAfterYear:true,yearSuffix:""},ko:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:0,isRTL:false,monthNames:["1(JAN)","2(FEB)","3(MAR)","4(APR)","5(MAY)","6(JUN)","7(JUL)","8(AUG)","9(SEP)","10(OCT)","11(NOV)","12(DEC)"],showMonthAfterYear:false,yearSuffix:""},kz:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},lt:{dayNames:["sekmadienis","pirmadienis","antradienis","treiadienis","ketvirtadienis","penktadienis","etadienis"],dayNamesMin:["sek","pir","ant","tre","ket","pen","e"],firstDay:1,isRTL:false,monthNames:["Sausis","Vasaris","Kovas","Balandis","Gegu","Birelis","Liepa","Rugpjtis","Rugsjis","Spalis","Lapkritis","Gruodis"],showMonthAfterYear:false,yearSuffix:""},lv:{dayNames:["svtdiena","pirmdiena","otrdiena","trediena","ceturtdiena","piektdiena","sestdiena"],dayNamesMin:["svt","prm","otr","tre","ctr","pkt","sst"],firstDay:1,isRTL:false,monthNames:["Janvris","Februris","Marts","Aprlis","Maijs","Jnijs","Jlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],showMonthAfterYear:false,yearSuffix:""},ml:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},ms:{dayNames:["Ahad","Isnin","Selasa","Rabu","Khamis","Jumaat","Sabtu"],dayNamesMin:["Aha","Isn","Sel","Rab","kha","Jum","Sab"],firstDay:0,isRTL:false,monthNames:["Januari","Februari","Mac","April","Mei","Jun","Julai","Ogos","September","Oktober","November","Disember"],showMonthAfterYear:false,yearSuffix:""},nl:{dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesMin:["zon","maa","din","woe","don","vri","zat"],firstDay:1,isRTL:false,monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],showMonthAfterYear:false,yearSuffix:""},no:{dayNames:["sndag","mandag","tirsdag","onsdag","torsdag","fredag","lrdag"],dayNamesMin:["sn","man","tir","ons","tor","fre","lr"],firstDay:1,isRTL:false,monthNames:["januar","februar","mars","april","mai","juni","juli","august","september","oktober","november","desember"],showMonthAfterYear:false,yearSuffix:""},pl:{dayNames:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],dayNamesMin:["Nie","Pn","Wt","r","Czw","Pt","So"],firstDay:1,isRTL:false,monthNames:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],showMonthAfterYear:false,yearSuffix:""},"pt-BR":{dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],firstDay:0,isRTL:false,monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],showMonthAfterYear:false,yearSuffix:""},pt:{dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S&aacute;bado"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","S&aacute;b"],firstDay:0,isRTL:false,monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],showMonthAfterYear:false,yearSuffix:""},rm:{dayNames:["Dumengia","Glindesdi","Mardi","Mesemna","Gievgia","Venderdi","Sonda"],dayNamesMin:["Dum","Gli","Mar","Mes","Gie","Ven","Som"],firstDay:1,isRTL:false,monthNames:["Schaner","Favrer","Mars","Avrigl","Matg","Zercladur","Fanadur","Avust","Settember","October","November","December"],showMonthAfterYear:false,yearSuffix:""},ro:{dayNames:["Duminic","Luni","Mari","Miercuri","Joi","Vineri","Smbt"],dayNamesMin:["Dum","Lun","Mar","Mie","Joi","Vin","Sm"],firstDay:1,isRTL:false,monthNames:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],showMonthAfterYear:false,yearSuffix:""},ru:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},sk:{dayNames:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"],dayNamesMin:["Ned","Pon","Uto","Str","tv","Pia","Sob"],firstDay:1,isRTL:false,monthNames:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],showMonthAfterYear:false,yearSuffix:""},sl:{dayNames:["Nedelja","Ponedeljek","Torek","Sreda","&#x10C;etrtek","Petek","Sobota"],dayNamesMin:["Ned","Pon","Tor","Sre","&#x10C;et","Pet","Sob"],firstDay:1,isRTL:false,monthNames:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],showMonthAfterYear:false,yearSuffix:""},sq:{dayNames:["E Diel","E Hn","E Mart","E Mrkur","E Enjte","E Premte","E Shtune"],dayNamesMin:["Di","H","Ma","M","En","Pr","Sh"],firstDay:1,isRTL:false,monthNames:["Janar","Shkurt","Mars","Prill","Maj","Qershor","Korrik","Gusht","Shtator","Tetor","Nntor","Dhjetor"],showMonthAfterYear:false,yearSuffix:""},"sr-SR":{dayNames:["Nedelja","Ponedeljak","Utorak","Sreda","etvrtak","Petak","Subota"],dayNamesMin:["Ned","Pon","Uto","Sre","et","Pet","Sub"],firstDay:1,isRTL:false,monthNames:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],showMonthAfterYear:false,yearSuffix:""},sr:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},sv:{dayNames:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],dayNamesMin:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"],firstDay:1,isRTL:false,monthNames:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],showMonthAfterYear:false,yearSuffix:""},ta:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},th:{dayNames:["","","","","","",""],dayNamesMin:[".",".",".",".",".",".","."],firstDay:0,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},tj:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},tr:{dayNames:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"],dayNamesMin:["Pz","Pt","Sa","a","Pe","Cu","Ct"],firstDay:1,isRTL:false,monthNames:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],showMonthAfterYear:false,yearSuffix:""},uk:{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:false,yearSuffix:""},vi:{dayNames:["Ch Nht","Th Hai","Th Ba","Th T","Th Nm","Th Su","Th By"],dayNamesMin:["CN","T2","T3","T4","T5","T6","T7"],firstDay:0,isRTL:false,monthNames:["Thng Mt","Thng Hai","Thng Ba","Thng T","Thng Nm","Thng Su","Thng By","Thng Tm","Thng Chn","Thng Mi","Thng Mi Mt","Thng Mi Hai"],showMonthAfterYear:false,yearSuffix:""},"zh-CN":{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:true,yearSuffix:""},"zh-HK":{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:0,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:true,yearSuffix:""},"zh-TW":{dayNames:["","","","","","",""],dayNamesMin:["","","","","","",""],firstDay:1,isRTL:false,monthNames:["","","","","","","","","","","",""],showMonthAfterYear:true,yearSuffix:""}};A.fn.datePicker=function(C){return(new AJS.DatePicker(this,C))}}(jQuery));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({labelContent: soy.$$escapeHtml(opt_data.labelText), name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-jira-type="', soy.$$escapeHtml(opt_data.jiraType), '"><label for="', soy.$$escapeHtml(opt_data.name), '">', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label><textarea rows="10" id="', soy.$$escapeHtml(opt_data.name), '" name="', soy.$$escapeHtml(opt_data.name), '" class="textarea long-field">', soy.$$escapeHtml(opt_data.value), '</textarea>');
  if (opt_data.errorTexts) {
    var errorList36 = opt_data.errorTexts;
    var errorListLen36 = errorList36.length;
    for (var errorIndex36 = 0; errorIndex36 < errorListLen36; errorIndex36++) {
      var errorData36 = errorList36[errorIndex36];
      output.append('<div class="error">', soy.$$escapeHtml(errorData36), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.numberField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.options.length) {
    aui.form.selectField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  } else {
    aui.form.valueField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: "None", isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  }
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field jira-field-unrenderable', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '"><label>', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label>');
  aui.form.value({content: opt_data.reasonContent}, output);
  if (opt_data.errorTexts) {
    var errorList116 = opt_data.errorTexts;
    var errorListLen116 = errorList116.length;
    for (var errorIndex116 = 0; errorIndex116 < errorListLen116; errorIndex116++) {
      var errorData116 = errorList116[errorIndex116];
      output.append('<div class="error">', soy.$$escapeHtml(errorData116), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.dateField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.form.textField({labelContent: soy.$$escapeHtml(opt_data.labelText), name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}, output);
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="field-group jira-field', (opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '', '" data-jira-type="', soy.$$escapeHtml(opt_data.jiraType), '"><label for="', soy.$$escapeHtml(opt_data.name), '">', soy.$$escapeHtml(opt_data.labelText), (opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '', '</label><select id="', soy.$$escapeHtml(opt_data.name), '" name="', soy.$$escapeHtml(opt_data.name), '">');
  var optionList152 = opt_data.options;
  var optionListLen152 = optionList152.length;
  for (var optionIndex152 = 0; optionIndex152 < optionListLen152; optionIndex152++) {
    var optionData152 = optionList152[optionIndex152];
    output.append('<option value="', soy.$$escapeHtml(optionData152.value), '" ', (optionData152.selected) ? 'selected' : '', ' data-icon-url="', soy.$$escapeHtml(optionData152.iconUrl), '">', soy.$$escapeHtml(optionData152.text), '</option>');
  }
  output.append('</select>');
  if (opt_data.errorTexts) {
    var errorList168 = opt_data.errorTexts;
    var errorListLen168 = errorList168.length;
    for (var errorIndex168 = 0; errorIndex168 < errorListLen168; errorIndex168++) {
      var errorData168 = errorList168[errorIndex168];
      output.append('<div class="error">', soy.$$escapeHtml(errorData168), '</div>');
    }
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.iconUrl) {
    aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}, output);
  }
  output.append('<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - (New label)",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var userOption__soy195 = new soy.StringBuilder(soy.$$escapeHtml(opt_data.displayName), ' - (', soy.$$escapeHtml(opt_data.name), ')');
  userOption__soy195 = userOption__soy195.toString();
  output.append('<span title="', userOption__soy195, '">', userOption__soy195, '</span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=(function(I,P){var k="YYYY-MM-DD";var g={template:jiraIntegration.templates.fields.stringField,getContext:u,getValue:A};var y={template:jiraIntegration.templates.fields.stringField,getContext:q,getValue:D,behavior:o};var t={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:B,behavior:j};var r={template:jiraIntegration.templates.fields.textareaField,getContext:u,getValue:A};var F={template:jiraIntegration.templates.fields.numberField,getContext:u,getValue:C};var c={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:B};var O={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:P.bind(b,null,"name"),behavior:R};var L={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:P.bind(b,null,"id")};var K={template:jiraIntegration.templates.fields.timeTrackingField,getContext:Q,getValue:e};var J={template:jiraIntegration.templates.fields.dateField,getContext:u,getValue:A,behavior:x};var i={template:jiraIntegration.templates.fields.select2WithIconField,getContext:H,getValue:P.bind(b,null,"name"),behavior:a};var l={"com.pyxis.greenhopper.jira:gh-epic-label":g,string:g,summary:g,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":g,"com.atlassian.jira.plugin.system.customfieldtypes:url":g,environment:r,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":r,description:r,"com.atlassian.jira.plugin.system.customfieldtypes:float":F,array:c,labels:t,"com.atlassian.jira.plugin.system.customfieldtypes:labels":c,resolution:O,fixVersions:O,priority:i,versions:O,components:O,security:O,"com.atlassian.jira.plugin.system.customfieldtypes:version":O,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":O,"com.atlassian.jira.plugin.system.customfieldtypes:project":O,assignee:y,reporter:y,timetracking:K,duedate:J,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":J,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":L,"com.atlassian.jira.plugin.system.customfieldtypes:select":L};var v={ignoreFieldsWithDefaultValue:false};function m(U,S,V){var T=S.schema.system||"customfield_"+S.schema.customId;return{labelText:S.name,name:T,isRequired:S.required,errorTexts:V[T],jiraType:U}}function u(W,S,T,U){var V=W.name;W.value=(I.isPlainObject(U[V])?U[V].name:U[V])||(T&&T.fields[V])||"";return W}function A(S){return S.val()}function C(S){var T=S.val();if(s(T)){return Number(T)}return T||null}function x(S){var U=S.find("input");if(!!navigator.userAgent.match(/Trident/)&&AJS.version<"5.3.5"){var T="placeholder" in document.createElement("input");U.attr("placeholder",k);if(!T){U.on("focus",function(){if(U.val()===U.attr("placeholder")){U.val("")}}).on("blur",function(){if(U.val()===""){U.val(U.attr("placeholder"))}}).blur()}}else{U.datePicker({overrideBrowserDefault:true})}}function h(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].join(","))||(T&&T.fields[V]&&T.fields[V].join(","));return W}function B(S){return P.map(S.val().split(","),I.trim)}function f(Y,S,T,V){var W=Y.name;var U=V[W];var Z=T&&T.fields[W];var X;if(U){X=I.isArray(U)?P.pluck(U,"name"):[U.name]}else{if(Z){X=I.isArray(Z)?P.pluck(Z,"name"):[Z.name]}else{X=[]}}Y.options=P.map(S.allowedValues,function(aa){return{value:aa.name||aa.id,text:aa.name||aa.value,selected:P.contains(X,aa.name||aa.id)}});Y.isMultiple=P.contains(S.operations,"add");return Y}function b(V,T){var W=T.val();var S=T.attr("multiple");var U=function(Y){var X={};X[V]=Y;return X};if(S){return I.isArray(W)?P.map(W,U):[U(W)]}return U(W)}function R(S){S.find("select[multiple]").auiSelect2()}function q(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].name)||(T&&T.fields[V]&&T.fields[V].name)||"";return W}function D(S){return{name:S.val()}}function N(T,W,V,U,X){var Z=T.find("input");var Y=T.attr("name");Z.removeClass("text");var S={minimumInputLength:1,id:Y,name:Y,query:function(ab){function aa(ac){ab.callback({results:ac})}n(W,V,ab.term,U).done(aa)}};Z.auiSelect2(I.extend(S,X));T.find("div.aui-select2-container").addClass("jira-select2-drop-box")}function o(S,V,U,T){var W={formatInputTooShort:function(){return "Find users..."},formatResult:function(X){return jiraIntegration.templates.fields.userOptionSelect({name:X.id,displayName:X.text})}};N(S,V,U,T,W)}function j(S,V,U,T){var W=S.find("input");jiraIntegration.fields._labelPicker.build(W,function(X){return n(V,U,X,T)})}function n(W,U,V,T){var S=I.extend({restType:U,issueKey:(T&&T.key)||"",term:V},W);return I.ajax({type:"POST",contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",data:JSON.stringify(S)})}function Q(W,S,T,U){var V=W.name;W.value=(U[V]&&U[V].remainingEstimate)||(T&&T.fields[V]&&T.fields[V].remainingEstimate)||"";return W}function e(S){return{remainingEstimate:S.val()}}function H(X,S,T,U){var V=X.name;var W=(U[V]&&U[V].name)||(T&&T.fields&&T.fields[V]&&T.fields[V].name)||"";X.options=P.map(S.allowedValues,function(Y){return{value:Y.name,text:Y.name,selected:W===Y.name,iconUrl:Y.iconUrl}});return X}function z(T){var S;if(T.id){S=I(T.element).attr("data-icon-url")}return jiraIntegration.templates.fields.select2WithIconOption({optionValue:T.text,iconUrl:S})}function a(W,V,T,S){if(!I.fn.auiSelect2){AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.");return}var U=W.find("select");U.addClass("jira-select2-drop-box");U.auiSelect2({hasAvatar:true,minimumResultsForSearch:-1,formatSelection:z,formatResult:z})}function p(T,S){if(P.has(l,T)&&console&&console.warn){console.warn("Redefining handler for type "+T+".")}l[T]=S}function E(S){return S.schema?(S.schema.system||S.schema.custom||S.schema.customId):S}function M(S){return l[E(S)]}function w(S){var T=d(S);return T&&M(T)}function d(S){return S.closest(".jira-field").attr("data-jira-type")}function G(T,S){return I.ajax({type:"GET",url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+T.serverId+"/projects/"+T.projectKey+"/issue-types/"+T.issueType+"/fields-meta"}).pipe(function(V){var U=[];P.each(V.fields,function(X){var W=E(X);if(X.required&&!P.contains(S.excludedFields,W)){U.push(X)}});return U})}function s(S){return/\d/.test(S)&&/^-?\d*\.?\d*$/.test(S)}return{addFieldHandler:p,getFieldHandler:M,canRender:function(S){var U=E(S);var T=l[U];if(!T){return false}return S.operations&&S.operations.length&&(!T.canRender||T.canRender(S))},renderField:function(W,Y,Z,X){var S=Y.schema.system||Y.schema.custom||Y.schema.customId;var U=l[S];var V=m(S,Y,X||{});var aa=!U||(U.canRender&&!U.canRender(Y));var T=!Y.operations||!Y.operations.length;if(aa||T){V.reasonContent=aa?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(W?W.url:"#")+'">',"</a>"):T?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(W?W.url:"#")+'">',"</a>"):null;if(!V.reasonContent){throw new Error("Invalid unrenderable reason.")}return jiraIntegration.templates.fields.unrenderableTypeField(V)}return U.template(U.getContext(V,Y,W,Z||{}))},getJSON:function(S){var T=w(S);return T&&T.getValue&&T.getValue(S)},attachFieldBehaviors:function(U,T,S){U.find(".jira-field").each(function(X,W){var V=I(W);var Z=d(V);var Y=Z&&M(Z);var aa=Y&&Y.behavior;if(aa){aa(V,T,Z,S)}})},renderCreateRequiredFields:function(W,V,U,T,S){T=P.extend({},v,T);function X(Y){if(T.ignoreFieldsWithDefaultValue){Y=P.filter(Y,function(aa){return !aa.hasDefaultValue})}var Z=P.filter(Y,function(aa){return !jiraIntegration.fields.canRender(aa)});if(Z.length){if(S){S(Z)}return}W.html(P.map(Y,function(aa){return jiraIntegration.fields.renderField(null,aa,null,null)}).join(""));jiraIntegration.fields.attachFieldBehaviors(W,{serverId:U.serverId,projectKey:U.projectKey},null)}if(T.requiredFields){X(T.requiredFields)}else{G(U,T).done(X)}}}}(AJS.$,window._));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(a){var b=function(d,c){d.auiSelect2({tags:true,multiple:true,tokenSeparators:[","," "],createSearchChoice:function(e){if(!e){return null}return{id:e,text:e,isNew:true}},query:function(f){var e=function(g){f.callback({results:g})};c(f.term).done(e)},formatResult:function(e){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:e.text,isNew:e.isNew}})}})};return{build:b}}(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/soy/confluence-jira-content-templates.soy' */
// This file was automatically generated from confluence-jira-content-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.CreateJiraContent == 'undefined') { Confluence.CreateJiraContent = {}; }


Confluence.CreateJiraContent.createIssueDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="jira-content-create-issue-form" class="aui top-label"><div class="dialog-header"><div class="title left-position"><h2 id="create-issues-dialog-header">', soy.$$escapeHtml("Create Issue"), '</h2></div><div class="servers"><select class="select hidden" id="jira-servers" /></div><br class="clear" /></div><span id="create-issue-loading"><span class="aui-icon aui-icon-wait"></span> ', soy.$$escapeHtml("Loading\u2026"), '</span><div class="dialog-content hidden"><div class="main-field"><select class="select stretch-out" id="jira-projects" name="pid" title="database select" /><span id="projectSpinner" class="project-spinner"></span></div><div class="main-field last-main-field"><select class="select" id="jira-issue-types" name="issuetype"><option value=\'-1\'>', soy.$$escapeHtml("select"), '</option></select></div><div id="issue-content"><div id="create-from-text"><div class="field-group main-field"><label for="issue-summary">', soy.$$escapeHtml("Summary"), '<span class="aui-icon icon-required"> required</span></label><input id="issue-summary" class="text" value="', soy.$$escapeHtml(opt_data.summary), '" maxlength="255" /></div><div class="field-group main-field"><label for="issue-description">', soy.$$escapeHtml("Description"), '<span class="aui-icon icon-required"> required</span></label><textarea class="textarea" name="comment" id="issue-description">', (opt_data.isCutLongText) ? soy.$$escapeHtml(opt_data.comment) : '', '</textarea></div></div><div id="jira-required-fields-panel"></div><div id="create-from-table"></div></div><div id="jira-epic-content"></div><div id="create-issue-form-messages" class="hidden"></div></div><div id="prepare-issue-messages" class="issue-messages hidden"></div><div class="buttons-group hidden"><input class="aui-button submit create-issue-submit" type="submit" value="', soy.$$escapeHtml("Create"), '" /><a class="create-issue-cancel" href="#">', soy.$$escapeHtml("Cancel"), '</a><span id="form-spinner"></span><span id="form-message-spinner"></span><span id="form-message"></span></div><div id="jiraserver-issue-messages" class="issue-messages"></div><div id="create-issue-messages"></div><div id="text-suggestion" class="text-suggestion hidden"></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.renderUnsupportedFieldsWarningMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.unsupportedFields.length == 1) {
    var field__soy27 = new soy.StringBuilder('<strong>', soy.$$escapeHtml(opt_data.unsupportedFields), '</strong>');
    field__soy27 = field__soy27.toString();
    output.append(AJS.format("The required field {0} is not available in this dialog. You will need to",field__soy27));
  } else {
    var fieldList__soy34 = new soy.StringBuilder();
    Confluence.CreateJiraContent.buildFieldList({fields: opt_data.unsupportedFields}, fieldList__soy34);
    fieldList__soy34 = fieldList__soy34.toString();
    output.append(AJS.format("The required fields {0} are not available in this dialog. You will need to",fieldList__soy34));
  }
  output.append(' <a href="', soy.$$escapeHtml(opt_data.projectLinkUrl), '" id="create-issue-in-jira-link" target="_blank">', soy.$$escapeHtml("create your issue directly in JIRA"), '</a>.');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.buildFieldList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var joinText__soy45 = new soy.StringBuilder((opt_data.fields.length == 2) ? ' ' + soy.$$escapeHtml("and") + ' ' : ', ');
  joinText__soy45 = joinText__soy45.toString();
  var fieldList53 = opt_data.fields;
  var fieldListLen53 = fieldList53.length;
  for (var fieldIndex53 = 0; fieldIndex53 < fieldListLen53; fieldIndex53++) {
    var fieldData53 = fieldList53[fieldIndex53];
    output.append((! (fieldIndex53 == 0)) ? soy.$$escapeHtml(joinText__soy45) : '', '<strong>', soy.$$escapeHtml(fieldData53), '</strong>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.renderEpicContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="epic-link" class="main-field checkbox"><input class="checkbox" type="checkbox" id="epicCheck" checked="checked" name="epickCheck" value="', soy.$$escapeHtml(opt_data.epicKey), '"/><label for="epicCheck">', soy.$$escapeHtml("Link to epic"), ' </label>', opt_data.epicHtmlPlaceHolder, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createPreviewIssuesFromTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="main-field issue-preview"><div class="preview-message" > ', soy.$$escapeHtml("Following issues will be created:"), ' </div>');
  var issueList74 = opt_data.issues;
  var issueListLen74 = issueList74.length;
  if (issueListLen74 > 0) {
    for (var issueIndex74 = 0; issueIndex74 < issueListLen74; issueIndex74++) {
      var issueData74 = issueList74[issueIndex74];
      Confluence.CreateJiraContent.issuePreviewTemplate({summary: issueData74.summary}, output);
    }
  } else {
    output.append(soy.$$escapeHtml("Issue not found."));
  }
  output.append((opt_data.numberOfRemainingIssues > 0) ? '<div id="issue-remaining">' + ((opt_data.numberOfRemainingIssues == 1) ? soy.$$escapeHtml("+ 1 more issue.") : '') + ((opt_data.numberOfRemainingIssues > 1) ? soy.$$escapeHtml(AJS.format("+ {0} more issues.",opt_data.numberOfRemainingIssues)) : '') + '</div>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueFromTextSuggestedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.numberOfIssues) ? '<span class="aui-icon aui-icon-info"/>' + soy.$$escapeHtml("Looks like you are creating issues from a table.") + '<br/><a id="text-suggested-link" href="#">' + soy.$$escapeHtml(AJS.format("Create {0} issues from this table.",opt_data.numberOfIssues)) + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueFromTableSuggestedLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-info"/><a id="table-suggested-link" href="#">', soy.$$escapeHtml("Create a single issue"), '</a> ', soy.$$escapeHtml("from the highlighted text."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issuePreviewTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="issue-container"><img class="icon ico-left"><div class="issue-content"><span class="issue-summary">', soy.$$escapeHtml(opt_data.summary), '</span></div><div class="text-right"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.displayMessages = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ul>');
  var messageList110 = opt_data.messages;
  var messageListLen110 = messageList110.length;
  for (var messageIndex110 = 0; messageIndex110 < messageListLen110; messageIndex110++) {
    var messageData110 = messageList110[messageIndex110];
    output.append('<li>', soy.$$escapeHtml(messageData110), ' </li>');
  }
  output.append('</ul></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.issueMacroXml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name=\'jira\'><ac:parameter ac:name=\'showSummary\'>', soy.$$escapeHtml(opt_data.showSummary), '</ac:parameter><ac:parameter ac:name=\'server\'>', soy.$$escapeHtml(opt_data.serverName), '</ac:parameter><ac:parameter ac:name=\'serverId\'>', soy.$$escapeHtml(opt_data.serverId), '</ac:parameter><ac:parameter ac:name=\'key\'>', soy.$$escapeHtml(opt_data.issueKey), '</ac:parameter>"</ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createIssueMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.canInsertMacro == true) ? soy.$$escapeHtml(AJS.format("The issue {0} is created and its link is inserted in the page. To see the result, ",opt_data.issueKey)) + ' <a href="' + soy.$$escapeHtml(opt_data.currentUrl) + '">' + soy.$$escapeHtml("reload ") + '</a> ' + soy.$$escapeHtml("this page.") : soy.$$escapeHtml(AJS.format("The issue {0} is created but not be able to insert to the page. You can edit the page to insert the issue later.",opt_data.issueKey)));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.createdIssuesMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var createdIssueMessagesContent__soy139 = new soy.StringBuilder();
  Confluence.CreateJiraContent.displayMessages({messages: opt_data.createdIssueMessages}, createdIssueMessagesContent__soy139);
  createdIssueMessagesContent__soy139 = createdIssueMessagesContent__soy139.toString();
  output.append(createdIssueMessagesContent__soy139, (opt_data.canInsertMacro == true) ? soy.$$escapeHtml("The issues are created and theirs links are inserted in the page. To see the result, ") + ' <a href="' + soy.$$escapeHtml(opt_data.currentUrl) + '">' + soy.$$escapeHtml("reload ") + '</a> ' + soy.$$escapeHtml("this page.") : soy.$$escapeHtml("The issues are created but not be able to insert to the page. You can edit the page to insert the issues later."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.updatePageFromTableError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var createdIssueMessagesContent__soy162 = new soy.StringBuilder();
  Confluence.CreateJiraContent.displayMessages({messages: opt_data.createdIssueMessages}, createdIssueMessagesContent__soy162);
  createdIssueMessagesContent__soy162 = createdIssueMessagesContent__soy162.toString();
  output.append(createdIssueMessagesContent__soy162, soy.$$escapeHtml("The issues are created but not be able to insert to the page. You can edit the page to insert the issues later."));
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.getOAuthMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="oauth-link-text-message">', soy.$$escapeHtml("Atlassian JIRA needs your permission to connect to "), ' ', soy.$$escapeHtml(opt_data.confluenceApplicationName), '.</div><button class="oauth-init aui-button">', soy.$$escapeHtml("Allow access"), '</button>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOptionWithImage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.imageUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.imageUrl) + '" class="select-option-image" />' : '', '<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.selectOptionProject = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.imageUrl) {
    aui.avatar.avatar({avatarImageUrl: opt_data.imageUrl, isProject: true, size: 'xsmall', tagName: 'span'}, output);
  }
  output.append('<span class="select-option" title="', soy.$$escapeHtml(opt_data.optionValue), '">', soy.$$escapeHtml(opt_data.optionValue), '</span>');
  return opt_sb ? '' : output.toString();
};


Confluence.CreateJiraContent.summaryStoredValue = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="summary-stored-value"><span class="info">');
  aui.avatar.avatar({avatarImageUrl: opt_data.storedValue.projectIcon, isProject: true, size: 'xsmall', tagName: 'span'}, output);
  output.append('<span class="ellipsis project-name" title="', soy.$$escapeHtml(opt_data.storedValue.projectText), '">', soy.$$escapeHtml(opt_data.storedValue.projectText), '</span> <img class="aui-avatar-xsmall" src="', soy.$$escapeHtml(opt_data.storedValue.issueTypeIcon), '" /><span class="ellipsis issue-type" title="', soy.$$escapeHtml(opt_data.storedValue.issueTypeText), '">', soy.$$escapeHtml(opt_data.storedValue.issueTypeText), '</span></span><a href="#" title="', soy.$$escapeHtml("Edit"), '">', soy.$$escapeHtml("Edit"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/create-issue-analytics.js' */
Confluence.CreateJiraContent.Analytics=(function(k){var y="confluence.jira.content.dialog.open";var s="confluence.jira.content.create.text";var d="confluence.jira.content.create.table";var v="confluence.jira.content.error";var a="confluence.jira.content.jim.insert.fail";var t="confluence.jira.content.switch.to.table";var q="confluence.jira.content.switch.to.text";var w="confluence.jira.content.edit.description";var m="confluence.jira.content.summary.truncated";var n="confluence.jira.content.with.epic";var l="confluence.jira.content.required.fields";var g="confluence.jira.content.create.directly.in.jira";var o="confluence.jira.content.sorted.table";var z="table";function e(B,C){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:B,properties:C})}function c(){e(y)}function b(B){e(((B===z)?t:q))}function i(D,C){if(D===z){var B={total:C};e(d,B)}else{e(s)}}function r(){e(w)}function A(){e(n)}function j(C){var B={total:C};e(m,B)}function p(C,D){var B={type:C,reason:D};e(a,B)}function u(){e(o)}function x(C){var B={cause:C};e(v,B)}function f(){e(l)}function h(){k("#create-issue-in-jira-link").click(function(B){e(g)})}return{sendAnalyticsForDialogOpen:c,sendAnalyticsForModeChange:b,sendAnalyticsForCreatingIssue:i,sendAnalyticsForDescriptionEdited:r,sendAnalyticsForCreatedIssueWithEpic:A,sendAnalyticsForTruncatedSummary:j,sendAnalyticsForJIMInsertFailed:p,sendAnalyticsForSortedTable:u,bindAnalyticsForCreateDirectlyInJira:h,sendAnalyticsForCreateError:x,sendAnalyticsForRequiredFields:f}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/page-helper.js' */
AJS.toInit(function(f){var g="com.atlassian.confluence.plugins.confluence-jira-content:create-JIRA-issue-summary";var c=f("div.jira-issues-created");if(c.length>0){if(window.history&&window.history.replaceState){var e=window.location.href;var d=e.substr(0,e.indexOf("JIRAIssuesCreated")-1);window.history.replaceState({},document.title,d)}var b=c.find("#jira-content-message-panel-error-warning");var a=c.find("#jira-content-message-panel-view-more-link");a.click(function(h){h.preventDefault();a.hide();b.show()});if(c.hasClass("success")){setTimeout(function(){c.hide()},10000)}}Confluence&&Confluence.HighlightAction&&Confluence.HighlightAction.registerButtonHandler(g,{onClick:function(h){if(Confluence.CreateJiraContent.FeatureDiscovery.shouldShowFeatureDiscovery()){Confluence.CreateJiraContent.Dialogs.showFeatureDiscoveryDialog(h)}else{Confluence.CreateJiraContent.Dialogs.showCreateIssueDialog(h)}},shouldDisplay:Confluence.HighlightAction.WORKING_AREA.MAINCONTENT_ONLY})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jira-inline-dialog.js' */
Confluence.CreateJiraContent.Dialogs=Confluence.CreateJiraContent.Dialogs||(function(e){var j=360;var g=500;var i=370;var k;var c;var d={hideDelay:null,maxHeight:g};function b(m){k&&k.remove();var l={preHideCallback:function(){var o=e(document.activeElement);var p=o.is("#jira-content-create-issue-form [data-aui-dp-uuid]")||o.is("#jira-content-create-issue-form input.select2-input.select2-focused")||o.is("#jira-content-create-issue-form .select2-focusser.select2-offscreen");return(e("#formSpinner.aui-icon.aui-icon-wait").length===0)&&(!e("#select2-drop-mask").is(":visible"))&&!p&&!e(".aui-inline-dialog .ui-datepicker-inline").is(":visible")},width:j,hideCallback:function(){Confluence.CreateJiraContent.FormHelper.bindHideEventToDialog()}};var n=function(p,o,q){Confluence.CreateJiraContent.CreateIssue.addFormContent(p,m);q();return false};k=f(m,"create-issue-dialog",l,n);Confluence.CreateJiraContent.CreateIssue.setDialogObject(k);Confluence.CreateJiraContent.Analytics.sendAnalyticsForDialogOpen()}function a(m){c&&c.remove();var l={width:i};var n=function(p,o,q){Confluence.CreateJiraContent.FeatureDiscovery.addFeatureDiscoveryContent(p,m,b);q();return false};c=f(m,"create-issue-feature-discovery-dialog",l,n);Confluence.CreateJiraContent.FeatureDiscovery.setFeatureDialogObject(c)}function f(p,r,m,q){var l=e("<div>");h(p.area.average,l);var o=m.hideCallback;m.hideCallback=function(){l.remove();o&&o()};var n=Confluence.ScrollingInlineDialog(l,r,q,e.extend({},d,m));n.show();return n}function h(m,l){Confluence.DocThemeUtils.appendAbsolutePositionedElement(l);l.css({top:m.top,height:m.height,left:m.left,width:m.width,"z-index":-9999,position:"absolute"}).addClass("confluence-jira-content-dialog-target")}return{showCreateIssueDialog:b,showFeatureDiscoveryDialog:a}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/create-issue-form.js' */
Confluence.CreateJiraContent.CreateIssue=(function(q){var s="table";var h="text";var G=3;var r;var n;var o;var g;var C;var z;var j;var J=function(){return j};var f=function(K){j=K};var B=function(M){var K=r.find("#jira-servers option:selected").val();var L=r.find("#jira-projects option:selected").val();var N=[];n.find("> tbody > tr").each(function(O,P){q(P).find("td:eq("+M+")").each(function(U,Q){var T=q.trim(q(Q).text());if(T.length){var S=Confluence.CreateJiraContent.FormTextHelper.removeLineBreaksAndTruncate(T);var R=Confluence.CreateJiraContent.FormTextHelper.isCutLongText(T);var V=(R==true)?T:"";N.push({summary:S,description:V})}})});return N};var p=function(){var K=r.find("#text-suggestion");if(o!=null&&o.length>1){var L=Confluence.CreateJiraContent.issueFromTextSuggestedLink({numberOfIssues:o.length});K.html(L)}else{K.hide()}};var c=function(){if(z===s){var L=r.find("#create-from-table");L.empty();if(r.find("#jira-projects option:selected").val()!=-1){o=B(g);var N=0;var M=q(o);if(M.length>G){M=M.slice(0,G);N=o.length-G}var K=Confluence.CreateJiraContent.createPreviewIssuesFromTable({issues:M,numberOfRemainingIssues:N});L.html(K)}var O=r.find("#jira-issue-types option:selected").val();if(O!=-1){Confluence.CreateJiraContent.FormHelper.changeIssuesTypeIconForPreviewPanel(r.find("#jira-issue-types option:selected").val())}C.refresh()}};var i=function(){c(g);var K=r.find("#text-suggestion");var L=Confluence.CreateJiraContent.issueFromTableSuggestedLink();K.html(L)};var w=function(K){Confluence.CreateJiraContent.FormHelper.removeDisplayMessages();F(K);if(K==h){q("#create-issues-dialog-header").text("Create Issue");p();r.find("#create-from-table").hide();r.find("#create-from-text").show()}else{if(z===s){q("#create-issues-dialog-header").text("Create Issues");i();r.find("#create-from-text").hide();r.find("#create-from-table").show()}}AJS.trigger("confluence-jira-content.form-updated")};var I=function(){r.on("click","#text-suggested-link, #table-suggested-link",function(M){var L=q(this);var N=(L.attr("id")==="text-suggested-link");var K=(N)?s:h;w(K);M.preventDefault();return false})};var t=function(){var N=[];var L=r.find("#issue-summary");var K=r.find("#issue-description");var M={summary:q.trim(L.val()),description:q.trim(K.val())};N.push(M);return N};var x=function(){if(Confluence.CreateJiraContent.FormHelper.validateCreateIssueForm()){var K=t();Confluence.CreateJiraContent.FormHelper.createIssues(K,D)}};var k=function(K){var L=[];n.find("td:nth-child("+(K+1)+")").each(function(O,M){var N=q.trim(q(M).text());if(N.length>0){L.push(O)}});return L};var b=function(){if(Confluence.CreateJiraContent.FormHelper.validateCreateIssueForm()){var K=k(g);Confluence.CreateJiraContent.FormHelper.createIssues(o,D,g,K)}};var H=function(){r.submit(function(){if(z===h){x()}else{b()}return false})};var l=function(){return h};var F=function(K){z=K};var m=function(){return n.find("> thead > tr > th.tablesorter-headerSortUp, > thead > tr > th.tablesorter-headerSortDown").length>0};var e=function(){if(m()){var K=aui.message.warning({content:"You are creating issues on the sorted table. These ones could not be appended to the page."});r.children("#prepare-issue-messages").html(K);Confluence.CreateJiraContent.Analytics.sendAnalyticsForSortedTable()}};var a=function(){n=q(j.containingElement).closest("table");if(n.length>0){return true}return false};var d=function(K){C=K};var y=function(){return C};var u=function(L){var K=L.find(".create-issue-cancel");K.on("click",function(M){C.isCancelButtonClicked=true;C.hide();M.preventDefault()})};var A=function(){g=q(j.containingElement).closest("td").index();if(g==-1&&j.range.startContainer){var K=q(j.range.startContainer);g=K.closest("td").index()}if(g==-1){g=0}o=B(g)};var v=function(){var L=Confluence.CreateJiraContent.FormTextHelper.trunc(j.text);var M=Confluence.CreateJiraContent.FormTextHelper.isCutLongText(L);var K=Confluence.CreateJiraContent.createIssueDialog({summary:L,isCutLongText:M,comment:j.text});return K};var E=function(){return z===h};var D={addFormContent:function(M,L){f(L);var K=v();M.html(K);r=M.find("#jira-content-create-issue-form");F(l());o=null;if(a()){A()}if(o==null||o.length==1){M.find("#text-suggestion").remove()}else{I()}w(z);Confluence.CreateJiraContent.FormHelper.init(r);H();u(r);e()},setDialogObject:d,getDialogObject:y,getSelectionObject:J,fillPreviewIssuesFromTable:c,isInSortedTable:m,isInTextMode:E};return D})(AJS.$);Confluence.CreateJiraContent.FormTextHelper=(function(){var a=255;var b="\u2026";return{trunc:function(c){return c.length<=a?c:c.substr(0,a-1)+b},isCutLongText:function(c){if(c.length>=a){return true}return false},removeLineBreaksAndTruncate:function(c){var d=c.replace(/\n|\r|\r\n/g," ");return this.trunc(d)}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jira-form-helper.js' */
Confluence.CreateJiraContent.FormHelper=(function(ax,Q){var aM="-1",aQ="loading",j="select",A="Select project",aF="Select issue type",a="Loading\u2026",s="aui-bottom-arrow-color";var ah=null;var h=null;var C=false;var v=["project","issuetype","summary","reporter"];var J;var O;var M;var aK;var aI,Z;var aG=Confluence.storageManager("jira-content");var b;var e;var ab=function(aR){O={$serverSelect:aR.find("#jira-servers"),$projectSelect:aR.find("#jira-projects"),$issueTypeSelect:aR.find("#jira-issue-types"),$projectSpinner:aR.find("#projectSpinner"),$hiddenItems:aR.children().not(".dialog-header, #jiraserver-issue-messages"),$requiredFieldsPanel:aR.find("#jira-required-fields-panel"),$summaryField:aR.find("#issue-summary"),$descriptionField:aR.find("#issue-description"),$jiraEpicContent:aR.find("#jira-epic-content")};M=aR;aK="Story,New Feature".toLowerCase();aK=aK.split(",");E(O.$issueTypeSelect);J=Confluence.CreateJiraContent.JiraIssue.FieldStatus.VISIBLE};var ap="savedFormValues";var aA=function(){if(ax.browser.msie){M.find("input, textarea").keydown(function(aR){if(aR.keyCode==27){return false}})}};var aJ=function(aS,aT){var aR=aui.form.optionOrOptgroup({value:aM,text:aT?aT:j});aS.html(aR);aS.auiSelect2("val",aM)};var S=function(){var aR=O.$projectSelect;aR.auiSelect2("enable",false);var aS=aui.form.optionOrOptgroup({value:aM,text:a});aR.html(aS);aR.auiSelect2("val",a)};var z=function(){O.$projectSelect.auiSelect2("enable",true)};var aB=function(aR){aJ(aR)};var u=function(aS,aT){var aR={escapeMarkup:function(aU){return aU},formatResult:k,formatSelection:k};aS.auiSelect2(ax.extend(aR,aT))};var ai=function(aT){var aR=O.$serverSelect;var aS=[];ax.each(aT,function(aV,aW){var aU=aui.form.optionOrOptgroup({value:aW.id,text:aW.name});aS.push(aU)});aR.append(aS.join(""));if(aT.length==1){aR.hide()}else{u(O.$serverSelect,{containerCssClass:"select-container select-server-container",dropdownCssClass:"server-dropdown",width:"180px",minimumResultsForSearch:-1})}if(b){F(X(aR,b.serverId))}else{F(false)}};var au=function(){return Confluence.CreateJiraContent.DataHelper.loadServers().done(function(aR){if(aR.length){ai(aR)}else{T("Don\'t have any JIRA server, please check the application link configuration.")}})};var G=function(aS){var aR=O.$projectSelect;aJ(aR,A);var aT=[];ax.each(aS,function(aV,aW){var aU=aui.form.optionOrOptgroup({value:aW.id,text:aW.name});aT.push(aU)});aR.append(aT.join(""))};var ag=function(aR,aS,aT){I(aR);G(aS);z();aT();AJS.trigger("confluence-jira-content.form-updated")};var p=function(){var aT=g();var aS=aj(aT);if(aS){var aR=function(){if(b&&b.serverId==aT.id){var aU=X(O.$projectSelect,b.projectId);F(aU);if(aU){x();U()}}else{F(false);E(O.$issueTypeSelect)}};if(aT&&aT.authUrl){H(401)}else{S();return Confluence.CreateJiraContent.DataHelper.loadProjects(aT.id).done(function(aU){if(aU.errors&&aU.errors.length){var aV=aU.errors[0];if(aV.authenticationUri){H(401)}else{T(aV.message)}aB(O.$projectSelect);z()}else{H(200,aU);ag(aT.id,aU,aR)}}).fail(function(aU){H(aU.status);aB(O.$projectSelect);z()})}}};var am=function(aS){for(var aR=0;aR<aK.length;aR++){if(aK[aR]==aS.toLowerCase()){return true}}return false};var E=function(aR){aR.auiSelect2("enable",false);aJ(aR,aF);aR.prev().find("a").removeAttr("tabindex")};var aE=function(aR){aR.auiSelect2("enable",true);aR.prev().find("a").attr("tabindex","0")};var x=function(){var aR=O.$projectSelect.val();var aS=O.$issueTypeSelect;if(aR&&aR!=aM){aE(aS);at(aS);if(b){F(X(aS,b.issueTypeId))}else{F(false)}}else{E(aS)}};var K=function(){return Confluence.CreateJiraContent.DataHelper.getIssueTypes(O.$serverSelect.val(),O.$projectSelect.val())};var at=function(aT){var aS=null;var aR=[];var aU=K();ax.each(aU,function(aX,aV){if(!aS&&am(aV.name)){aS=aV.id}var aW=aui.form.optionOrOptgroup({value:aV.id,text:aV.name});aR.push(aW)});aT.html(aR.join(""));aT.auiSelect2("val",aS);if(Q.isEmpty(aU)){aJ(aT,aF)}};var N=function(aR){m(false);M.find("#form-message-spinner").addClass("aui-icon aui-icon-wait");M.find("#form-message").text(aR)};var n=function(){M.find("#form-message-spinner").removeClass("aui-icon aui-icon-wait");M.find("#form-message").empty()};var q=function(){O.$summaryField.parent().show();M.find("#create-issue-form-messages").empty().addClass("hidden");M.find("#issue-content, #jira-epic-content").removeClass("hidden");aw()};var o=function(){if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){O.$descriptionField.parent().hide()}else{if(!C){if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED){O.$descriptionField.siblings("label").children("span").show()}else{O.$descriptionField.siblings("label").children("span").hide()}O.$descriptionField.parent().show()}}aw()};var al=function(aS){C=true;var aR=M.find("#create-issue-form-messages");var aT=Confluence.CreateJiraContent.renderUnsupportedFieldsWarningMessage({unsupportedFields:Q.map(aS,function(aU){return aU.name}),projectLinkUrl:i()});AJS.messages.warning(aR,{body:aT,closeable:false});Confluence.CreateJiraContent.Analytics.sendAnalyticsForRequiredFields();Confluence.CreateJiraContent.Analytics.bindAnalyticsForCreateDirectlyInJira();O.$summaryField.parent().hide();O.$descriptionField.parent().hide();aR.removeClass("hidden");aw()};var af=function(aR){jiraIntegration.fields.renderCreateRequiredFields(O.$requiredFieldsPanel,null,{serverId:O.$serverSelect.val(),projectKey:ay().key,issueType:O.$issueTypeSelect.val()},{requiredFields:aR},Q.bind(al,this));h=O.$requiredFieldsPanel.find(".jira-field").children("input,select,textarea");t()};var U=function(){q();h=null;C=false;O.$requiredFieldsPanel.empty();if(O.$projectSelect.val()!==aM){var aS=function(aT){J=aT.descriptionFieldStatus;if(!Q.isEmpty(aT.requiredFields)){af(aT.requiredFields)}aC(aT.epicField);n();AJS.trigger("confluence-jira-content.form-updated")};var aR=function(aT){n()};N("Checking for required fields\u2026");Confluence.CreateJiraContent.JiraIssue.getCreateIssueMeta(ad(),aS,aR);aw()}else{aC()}};var aC=function(aR){ax.when(aI,Z).done(function(){var aS=ah&&!C&&((O.$projectSelect.val()===aM)||(aR&&ah!==O.$issueTypeSelect.val()));O.$jiraEpicContent.toggle(aS?true:false)})};var aj=function(aR){if(!aR.supportedVersion){O.$hiddenItems.addClass("hidden");T(AJS.format("The version of selected JIRA server is not supported. You may want to upgrade to the newer version or \u003ca href=\"{0}\" target=\"_blank\"\u003ecreate issue in JIRA\u003c/a\u003e.",aR.url))}else{O.$hiddenItems.removeClass("hidden")}if(M.find("#text-suggestion").length){ax("#inline-dialog-create-issue-dialog > #arrow-create-issue-dialog").addClass(s)}aw();return aR.supportedVersion};var az=function(){O.$serverSelect.change(function(aT){ax("#jiraserver-issue-messages").empty();var aS=Confluence.CreateJiraContent.DataHelper.getServerById(aT.val);var aR=aj(aS);if(aR){O.$jiraEpicContent.empty();O.$hiddenItems.removeClass("hidden");F(false);b=W();ax.when(p()).done(function(){if(!b){E(O.$issueTypeSelect);ak(M.find("#jira-issue-types option:selected").val())}O.$projectSelect.change()})}});O.$projectSelect.change(function(aS){var aR=O.$projectSelect.val();if(b&&aR!=b.projectId){b=false}x();Confluence.CreateJiraContent.CreateIssue.fillPreviewIssuesFromTable();ak(M.find("#jira-issue-types option:selected").val());AJS.trigger("confluence-jira-content.form-updated");U()});O.$issueTypeSelect.change(function(aR){ak(aR.val);AJS.trigger("confluence-jira-content.form-updated");U()});M.on("keyup",O.$summaryField,function(aR){AJS.trigger("confluence-jira-content.form-updated")});M.on("keyup",O.$descriptionField,function(aR){AJS.trigger("confluence-jira-content.form-updated")});if(!Confluence.CreateJiraContent.CreateIssue.getDialogObject()){AJS.bind("confluence-jira-content.form-updated",function(){m(R());o()});AJS.bind("confluence-jira-content.form-switched",function(){o()})}ax("#jira-content-create-issue-form .dialog-content").on("click",".summary-stored-value a",function(){F(false);b=false;return false});aA()};var t=function(){h.on("change",function(aS){AJS.trigger("confluence-jira-content.form-updated")});if(AJS.version<="5.4.5"){var aR=M.find("input[data-aui-dp-uuid]");aR.each(function(aS,aT){var aV=ax(aT),aU=aV.attr("data-aui-dp-uuid");aV.on("click",function(){var aW=ax("[data-aui-dp-popup-uuid="+aU+"]");var aX=aW.datepicker("option","onSelect");aW.datepicker("option","onSelect",function(aZ,aY){aX(aZ,aY);aV.change()});aW.parents(".aui-inline-dialog").addClass("datepicker-patch")})})}};var m=function(aR){if(aR){ax(".create-issue-submit").removeAttr("disabled")}else{ax(".create-issue-submit").attr("disabled","disabled")}};var R=function(){var aT=function(aU,aV){return(ax.trim(aU.val())!==aV)};var aS=function(){var aU="placeholder" in document.createElement("input");return Q.find(h,function(aY){var aV=ax(aY),aW=ax.trim(aV.val());if(aU){return !aW}else{var aX=aV.attr("placeholder");return(!aW||aW==aX)}})};var aR=aT(O.$projectSelect,aM)&&aT(O.$issueTypeSelect,aM)&&!C&&!aS();if(Confluence.CreateJiraContent.CreateIssue.isInTextMode()&&aR){aR=aT(O.$summaryField,"");if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED){aR=aT(O.$descriptionField,"")}}return aR};var ak=function(aS){if(aS!=-1){var aT=K();var aU=Q.find(aT,function(aV){return aV.id===aS});if(aU){var aR=aU.iconUrl;M.find(".issue-container img").attr("src",aR)}}};var ao=function(){ax("#create-issue-messages",M).empty()};var av=function(){ax("#form-spinner",M).addClass("aui-icon aui-icon-wait");ax(".create-issue-cancel",M).addClass("hidden");ax("input,select,textarea,submit",M).disable()};var Y=function(){return O.$projectSelect.val()};var r=function(aT){var aR={fields:{project:{id:Y()},issuetype:{id:O.$issueTypeSelect.val()}}};if(h){h.each(function(aX,aW){var aY=ax(aW);aR.fields[aY.attr("name")]=jiraIntegration.fields.getJSON(aY)})}var aS={issues:[]};var aV=0;var aU=0;ax.each(aT,function(aY,aW){if(Confluence.CreateJiraContent.FormTextHelper.isCutLongText(aW.summary)){aV++}else{if(!aW.description){aU++}}var aX=Q.clone(aR);aX.fields=Q.extend({},aX.fields,aW);if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED&&aW.description.length==0){aX.fields.description=aW.summary}if(J===Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){delete aX.fields.description}aS.issues.push(aX)});if(aV>0){Confluence.CreateJiraContent.Analytics.sendAnalyticsForTruncatedSummary(aV)}if(aU>0){Confluence.CreateJiraContent.Analytics.sendAnalyticsForDescriptionEdited()}return JSON.stringify(aS)};var aN=function(aS,aR){var aT=[];if(aS){ax.each(aS,function(aV,aW){var aU=AJS.format("Can not create issue for row {0} with error: {1}",(aR[aW.failedElementNumber]+1),D(aW));aT.push(aU)})}return aT};var an=function(){Confluence.CreateJiraContent.DataHelper.clearProjects(O.$serverSelect.val())};var aP=function(){O.$hiddenItems.addClass("hidden");var aS=g();if(aS.authUrl){var aR=function(){an();O.$hiddenItems.removeClass("hidden");ax("#jiraserver-issue-messages").empty();O.$jiraEpicContent.empty();p()};aq(aR)}else{T("JIRA server configuration could be changed. You may try to refresh the page to update latest configuration.")}};var H=function(aR,aS){if(aR==200&&aS&&aS.length===0){an();O.$hiddenItems.addClass("hidden");T(AJS.format("You do not have permission to access any projects in {0}",AJS.escapeHtml(g().name)))}else{switch(aR){case 401:aP();break;case 404:case 500:case 504:O.$hiddenItems.addClass("hidden");T("Cannot connect to this JIRA server at this time.");break;default:O.$hiddenItems.removeClass("hidden")}}aw()};var ad=function(){return{serverId:O.$serverSelect.val(),projectId:O.$projectSelect.val(),issueTypeId:O.$issueTypeSelect.val(),defaultRequiredFields:v}};var ar=function(aU,aV,aT,aS){var aR=ax("#epic-link > .checkbox");if(aR.is(":checked")&&aR.is(":visible")){Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatedIssueWithEpic();Confluence.CreateJiraContent.JiraIssue.getCreateIssueMeta(ad(),function(aX){if(aX.epicField){var aW=aR.val();ax.each(aU,function(aZ,aY){aY[aX.epicField]=aW})}w(aU,aV,aT,aS)})}else{w(aU,aV,aT,aS)}};var D=function(aU){var aV=Q.values(aU.elementErrors.errors);var aS=Q.keys(aU.elementErrors.errors);var aR=ad();for(var aT=0;aT<aS.length;aT++){var aX=Confluence.CreateJiraContent.JiraIssue.getFieldName(aS[aT],aR);if(aX&&aV[aT].indexOf(aX)==-1){aV[aT]=aX+": "+aV[aT]}}var aW=Q.union(Q.values(aU.elementErrors.errorMessages),aV);aW=aW.join(", ");aW=aW.replace(".,",",");return aW};var w=function(aT,aV,aS,aR){ao();av();var aU=Confluence.getContextPath()+"/rest/jira-integration/1.0/issues";ax.ajax({type:"POST",contentType:"application/json",url:aU+"?applicationId="+O.$serverSelect.val(),data:r(aT),success:function(aW){if(aS!=undefined){aO(aW,aV,aS,aR)}else{if(!aW.errors){ac(aW.issues[0],aV)}else{Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreateError("rest");V([],false,[D(aW.errors[0])])}}},error:function(aZ){var aY=[];var aX=[];if(aZ.status==500){try{aX=JSON.parse(aZ.responseText);if(aX instanceof Array){ax.each(aX[0].errors,function(a1,a0){aY.push(a0)})}else{aY.push(aX)}}catch(aW){aX=[];aY.push("Parse error:"+aW.message)}}else{aY.push("Unable to create JIRA issues, please check the application link configuration.")}Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreateError("xhr");V(aX,false,aY)}})};var ac=function(aR,aT){if(aT.isInSortedTable()&&aT.getSelectionObject().searchText.numMatches!=1){V([aR],false,[]);return}var aS=Confluence.HighlightAction.createInsertionBean([{xmlInsertion:B(aR)}],aT.getSelectionObject().searchText);Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatingIssue("text");Confluence.HighlightAction.insertContentAtSelectionEnd(aS).done(function(aU){if(!aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("text","algorithm")}V([aR],aU,[])}).fail(function(aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("text","server");V([aR],false,[],aU.statusText)})};var B=function(aR){var aT=g();var aS=Confluence.CreateJiraContent.issueMacroXml({showSummary:false,serverName:aT.name,serverId:aT.id,issueKey:aR.issue.key});return aS};var aa=function(aT){if(aT.formObject.isInSortedTable()){V(aT.createdIssues,false,aT.errorMessages);return}var aS=[];ax.each(aT.createdIssues,function(aU,aV){var aW={};aW.rowIndex=aT.createdIssueRowIndexes[aU];aW.xmlInsertion=B(aV);aS.push(aW)});var aR=Confluence.HighlightAction.createTableInsertionBean(aS,aT.tableColumnIndex,aT.formObject.getSelectionObject().searchText);Confluence.CreateJiraContent.Analytics.sendAnalyticsForCreatingIssue("table",aT.createdIssues.length);Confluence.HighlightAction.insertContentsInTableColumnCells(aR).done(function(aU){if(!aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("table","algorithm")}V(aT.createdIssues,aU,aT.errorMessages)}).fail(function(aU){Confluence.CreateJiraContent.Analytics.sendAnalyticsForJIMInsertFailed("table","server");V(aT.createdIssues,false,aT.errorMessages,aU.statusText)})};var V=function(aV,aT,aZ,aW){var aS=g().url;if(aV.length==1){aS+="/browse/"+aV[0].issue.key}else{var aU="key in (";aU+=ax.map(aV,function(a0){return a0.issue.key}).join(",");aU+=")";aS+="/issues/?jql="+encodeURIComponent(aU)}var aY=window.location.href.split("#")[0];var aX=aY.indexOf("JIRAIssuesCreated");if(aX>0){aY=aY.substring(0,aX-1)}var aR=aY+(aY.indexOf("?")>0?"&":"?")+"JIRAIssuesCreated=true&numOfIssues="+aV.length+"&issuesURL="+encodeURIComponent(aS)+"&addedToPage="+aT;if(aV.length>0){aR+="&issueId="+encodeURIComponent(aV[0].issue.key)}if(aW!=undefined){aR+="&statusText="+aW}ax.each(aZ,function(a0,a1){aR+="&errorMessages="+a1});ax("#form-spinner").removeClass("aui-icon aui-icon-wait");Confluence.CreateJiraContent.CreateIssue.getDialogObject().hide();window.location.replace(aR)};var aO=function(aU,aW,aS,aT){var aR=[];ax.each(aU.issues,function(aY,aX){aR.push(aT[aX.elementNumber])});var aV=aN(aU.errors,aT);if(aU.issues.length){aa({createdIssues:aU.issues,createdIssueRowIndexes:aR,tableColumnIndex:aS,formObject:aW,errorMessages:aV})}else{if(aU.errors.length){V([],false,aV)}}};var k=function(aR){return Confluence.CreateJiraContent.selectOption({optionValue:aR.text})};var f=function(aR){var aS;if(aR){if(aR.id>=0){aS=Confluence.CreateJiraContent.DataHelper.getIssueTypeIconUrl(O.$serverSelect.val(),O.$projectSelect.val(),aR.id)}return Confluence.CreateJiraContent.selectOptionWithImage({optionValue:aR.text,imageUrl:aS})}};var L=function(aR){var aS;if(aR){if(aR.id>=0){aS=Confluence.CreateJiraContent.DataHelper.getProjectIconUrl(O.$serverSelect.val(),aR.id)}return Confluence.CreateJiraContent.selectOptionProject({optionValue:aR.text,imageUrl:aS})}};var g=function(){return Confluence.CreateJiraContent.DataHelper.getServerById(O.$serverSelect.val())};var ay=function(){var aS=O.$serverSelect.val();var aR=O.$projectSelect.val();var aT=Confluence.CreateJiraContent.DataHelper.getProjects(aS);return Q.find(aT,function(aU){return aU.id===aR})};var i=function(){var aT=g().url+"/secure/CreateIssueDetails!Init.jspa?pid="+ay().id+"&issuetype="+O.$issueTypeSelect.val();var aS=O.$summaryField.val();if(aS.length){aT=aT+"&summary="+encodeURIComponent(aS)}if(J!==Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN){var aR=O.$descriptionField.val();if(aR.length){aT=aT+"&description="+encodeURIComponent(aR)}}return aT};var T=function(aR){AJS.messages.warning(ax("#jiraserver-issue-messages"),{body:aR,closeable:false});if(!M.find("#text-suggestion").is(":visible")){ax("#inline-dialog-create-issue-dialog > #arrow-create-issue-dialog").removeClass(s)}};var aq=function(aR){var aT=g();var aS={onSuccess:function(){aT.authUrl=null;aR()},onFailure:function(){}};T(Confluence.CreateJiraContent.getOAuthMessage({confluenceApplicationName:"Confluence"}));ax(".oauth-init",ax("#jiraserver-issue-messages")).click(function(aU){AppLinks.authenticateRemoteCredentials(aT.authUrl,aS.onSuccess,aS.onFailure);aU.preventDefault()})};var P=function(){O.$serverSelect.auiSelect2("close");O.$projectSelect.auiSelect2("close");O.$issueTypeSelect.auiSelect2("close");if(Confluence.CreateJiraContent.CreateIssue.getDialogObject().isCancelButtonClicked!==true){aH(ad())}};var aH=function(aR){if(aR.serverId&&aR.projectId&&aR.issueTypeId){aG.setItem(ap,JSON.stringify(aR))}};var W=function(aS){try{aS=aS||ap;var aR=JSON.parse(aG.getItem(aS));if(aR&&aR.serverId&&aR.projectId&&aR.issueTypeId){return aR}else{return false}}catch(aT){return false}};var F=function(aX){var aW=M.find(".dialog-content > .main-field"),aS=M.find(".dialog-content .summary-stored-value");if(aX){var aV=O.$projectSelect.val();var aR=O.$issueTypeSelect.val();if(aV!=-1&&aV!=null&&aR!=-1&&aR!=-1){var aU=y();if(aU){aS.remove();var aT=Confluence.CreateJiraContent.summaryStoredValue({storedValue:aU});ax(aT).insertBefore(M.find("#issue-content"));aW.addClass("hidden")}}}else{aW.removeClass("hidden");aS.addClass("hidden")}aw()};var y=function(){var aR=O.$projectSelect,aU=O.$issueTypeSelect;var aV=aR.auiSelect2("data").text,aT=aU.auiSelect2("data").text;var aW=aR.auiSelect2("container").find(".select2-chosen img"),aS=aU.auiSelect2("container").find(".select2-chosen img");if(aV&&aT&&aW&&aS){return{projectText:aV,issueTypeText:aT,projectIcon:aW.attr("src"),issueTypeIcon:aS.attr("src")}}else{return null}};var ae=function(aR,aS){return(aR.find('option[value="'+aS+'"]').length)};var X=function(aR,aS){if(ae(aR,aS)){aR.auiSelect2("val",aS);return true}else{b=false;return false}};var I=function(aR){var aT=function(aU){ah=aU;aD(aR)};var aS=function(){ah=(aR===g().id)?null:ah};Confluence.CreateJiraContent.JiraIssue.resolveEpicIssueType(aR,aT,aS)};var aD=function(aR){if(Z&&Z.readyState!==4&&Z.abort){Z.abort()}var aS=O.$jiraEpicContent;Z=ax.ajax({type:"GET",contentType:"application/json",url:AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/find-epic-issue",data:{pageId:AJS.params.pageId,serverId:aR,epicIssueTypeId:ah},success:function(aU){if(!aU||!aU.epicKey){aS.empty();return}var aV=Confluence.CreateJiraContent.renderEpicContent({epicKey:aU.epicKey,epicHtmlPlaceHolder:aU.epicHtmlPlaceHolder});aS.html(aV);e=aS.find(".summary").text();var aT=aS.find("a:first-child").clone();aS.find(".jira-issue").html(aT);c(aS);aw()},error:function(aT){aS.empty();AJS.logError("confluence-jira-content:epicLinkJiraIssuePageHandling - Error when detect epic on page with status="+aT.status)}})};var c=function(aR){aR.find(".jira-issue").attr("title",e).tooltip({gravity:"sw"})};var d=function(){M.find("#create-issue-loading").remove()};var aL=function(){d();var aR=O.$serverSelect.val();if(aR){M.find("#jira-servers, .dialog-content, #prepare-issue-messages, .buttons-group, #text-suggestion").removeClass("hidden");O.$jiraEpicContent.empty();p()}};var l=function(){d();T("Unable to get a list of linked JIRA servers from Confluence. You may want to check your application links for more details.")};var aw=function(){if(Confluence.CreateJiraContent.CreateIssue.getDialogObject()){Confluence.CreateJiraContent.CreateIssue.getDialogObject().refresh()}};return{init:function(aR){ab(aR);u(O.$projectSelect,{containerCssClass:"select-container select-project-container",dropdownCssClass:"projects-dropdown",formatSelection:L,formatResult:L});u(O.$issueTypeSelect,{containerCssClass:"select-container select-issuetype-container",dropdownCssClass:"issue-types-dropdown",minimumResultsForSearch:-1,formatSelection:f,formatResult:f});m(false);E(O.$issueTypeSelect);b=W(ap);az();F(b!==false);au().pipe(aL,l)},createIssues:ar,validateCreateIssueForm:R,removeDisplayMessages:ao,bindHideEventToDialog:P,changeIssuesTypeIconForPreviewPanel:ak}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jiraissue-field-helper.js' */
Confluence.CreateJiraContent.JiraIssue=(function(f,m){var c="com.pyxis.greenhopper.jira:gh-epic-link";var p="/rest/greenhopper/1.0/api/epicproperties";var j="JIRA_EPIC_ISSUE_TYPE_";var l="CREATE_JIRA_ISSUE_FIELD_";var d,b;var i=function(q,r){if(d&&d.readyState!==4&&d.abort){d.abort()}if(!q.serverId||!q.projectId||!q.issueTypeId){AJS.logError(AJS.format("confluence-jira-content:discoverIssueTypeField - Error with parameters: serverId={0}, projectId={1}, issueTypeId={2}",q.serverId,q.projectId,q.issueTypeId));r&&r("Discover fields - error with parameters.");return}d=AJS.$.ajax({type:"GET",url:Confluence.getContextPath()+"/rest/jira-integration/1.0/servers/"+q.serverId+"/projects/"+q.projectId+"/issue-types/"+q.issueTypeId+"/fields-meta"}).pipe(function(s){if(!s||!s.fields){AJS.logError("confluence-jira-content:discoverIssueTypeField - Data discovering error! Unexpected data return.");r&&r("Discover fields - unexpected data return.");return}return s.fields});return d};var h=function(q,t,s){if(!q){AJS.logError(AJS.format("confluence-jira-content:resolveEpicIssueType - Error with parameters: serverId={0}",q));return}var r=j+q;if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(r)){t(Confluence.CreateJiraContent.JiraIssue.Cache.get(r));return}if(b&&b.readyState!==4&&b.abort){b.abort()}b=AppLinks.makeRequest({appId:q,type:"GET",url:p,dataType:"json",success:function(v){if(!v||!v.epicTypeId){AJS.logError("confluence-jira-content:resolveEpicIssueType - Data discovering error! Unexpected data return.");return}var u=v.epicTypeId;t(u);Confluence.CreateJiraContent.JiraIssue.Cache.put(r,u)},error:function(u){s(u.status);AJS.logError("confluence-jira-content:resolveEpicIssueType - Error with status="+u.status)}})};var o=function(r,q,s){var t=e(r);if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(t)){n(t,q,s);return}i(r,s).done(function(u){if(u){var v=AJS.$.extend({},a(u),k(u,r.defaultRequiredFields));Confluence.CreateJiraContent.JiraIssue.Cache.put(t,v);q(v)}}).fail(function(u){AJS.logError("confluence-jira-content:discoverIssueTypeField - Error with status="+u.status);s&&s(AJS.format("Discover fields - response error: {0}.",u.status))})};var n=function(t,r,s){var q=Confluence.CreateJiraContent.JiraIssue.Cache.get(t);if(q){r(q)}else{s&&s("Discover fields - unexpected data return.")}};var a=function(r){var q;m.find(r,function(t,s){if(t.schema.custom===c){q=s;return true}});return{epicField:q}};var k=function(q,s){var r=Confluence.CreateJiraContent.JiraIssue.FieldStatus.HIDDEN;var t={};f.each(q,function(u,v){if(u==="description"){r=(v.required==true?Confluence.CreateJiraContent.JiraIssue.FieldStatus.REQUIRED:Confluence.CreateJiraContent.JiraIssue.FieldStatus.VISIBLE)}else{if(v.required===true&&!v.hasDefaultValue&&!m.contains(s,u)){t[u]=v}}});return{descriptionFieldStatus:r,requiredFields:t}};var g=function(r,s){var t=e(s);if(Confluence.CreateJiraContent.JiraIssue.Cache.containKey(t)){var q=Confluence.CreateJiraContent.JiraIssue.Cache.get(t).requiredFields;return q[r].name}return""};var e=function(q){return l+q.serverId+"_"+q.projectId+"_"+q.issueTypeId};return{resolveEpicIssueType:h,getCreateIssueMeta:o,getFieldName:g}})(AJS.$,window._);Confluence.CreateJiraContent.JiraIssue.Cache=(function(){return{put:function(a,b){sessionStorage.setItem(a,JSON.stringify(b))},get:function(a){var b=sessionStorage.getItem(a);if(b){try{var d=JSON.parse(b)}catch(c){return null}return d}return null},containKey:function(a){return sessionStorage.getItem(a)!=null}}})();Confluence.CreateJiraContent.JiraIssue.FieldStatus={HIDDEN:-1,VISIBLE:0,REQUIRED:1};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/jiraissue-data-helper.js' */
Confluence.CreateJiraContent.DataHelper=(function(e,l){var c;var k={},o=AJS.contextPath()+"/plugins/servlet/jira-integration/icons?serverId={0}&iconType={1}&{2}",h={};function n(){return e.getJSON(AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/get-jira-servers",function(p){if(p.length){e.each(p,function(q,r){k[r.id]=r})}})}function m(p){var q=(k[p])?k[p].projects:undefined;if(q){return e.Deferred().resolve(q)}else{if(c&&c.readyState!==4&&c.abort){c.abort()}c=e.getJSON(AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+p+"/projects",function(r){if(r.length){e.each(r,function(u,w){var v=l.filter(w.issuetypes,function(x){return !x.subtask});w.issueTypes=v;var t={};l.each(v,function(x){t[x.id]=x.iconUrl});var s={iconUrl:AJS.format(o,p,"project",w.avatarUrls["16x16"].split("/secure/projectavatar?")[1]),issueTypeIcons:t};h[a(p,w.id)]=s});k[p].projects=r}});return c}}function g(q,p){var r=l.find(j(q),function(s){return s.id===p});return r?r.issueTypes:[]}function f(p){return k[p]?k[p]:{}}function j(p){return(k[p]&&k[p].projects)?k[p].projects:[]}function d(p){k[p]&&delete k[p].projects}function i(q,p){var r=a(q,p);return h[r]?h[r].iconUrl:""}function b(r,q,s){var t=a(r,q);var p=h[t];return(p&&p.issueTypeIcons[s])?p.issueTypeIcons[s]:""}function a(q,p){return q+"-"+p}return{loadServers:n,loadProjects:m,getProjects:j,getIssueTypes:g,getServerById:f,getProjectIconUrl:i,getIssueTypeIconUrl:b,clearProjects:d}})(AJS.$,window._);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/soy/feature-discovery-templates.soy' */
// This file was automatically generated from feature-discovery-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.CreateJiraContent == 'undefined') { Confluence.CreateJiraContent = {}; }
if (typeof Confluence.CreateJiraContent.Templates == 'undefined') { Confluence.CreateJiraContent.Templates = {}; }
if (typeof Confluence.CreateJiraContent.Templates.FeatureDiscovery == 'undefined') { Confluence.CreateJiraContent.Templates.FeatureDiscovery = {}; }


Confluence.CreateJiraContent.Templates.FeatureDiscovery.createFeatureDiscoveryContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="create-issue-feature-discovery-content"><div class="feature-discovery-header"><h2>', soy.$$escapeHtml("Create JIRA issues from content"), '</h2></div><div class="feature-discovery-body"><p>', soy.$$escapeHtml("Highlight requirements, ideas or tasks discussed in pages and transition them to your teams backlog in JIRA."), '</p><div class="feature-discovery-body-image"></div><div class="description"><p class="feature-discovery-body-left">', soy.$$escapeHtml("Select requirements on the page"), '</p><p class="feature-discovery-body-right">', soy.$$escapeHtml("Turn them into new stories in JIRA"), '</p></div></div><div class="feature-discovery-buttons"><button id="show-create-issue" class="aui-button">', soy.$$escapeHtml("Show me"), '</button><button id="feature-discovery-close" class="aui-button aui-button-link">', soy.$$escapeHtml("Close"), '</button></div><div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-jira-content:confluence-jira-content-resources', location = 'com/atlassian/confluence/plugins/createjiracontent/js/feature-discovery.js' */
Confluence.CreateJiraContent.FeatureDiscovery=(function(g){var f;var d=AJS.Meta.get("create-issue-metadata-show-discovery");var h=function(i){f=i};var e=function(i,l,m){var k=i.find("#feature-discovery-close");k.on("click",function(n){a();f.hide()});var j=i.find("#show-create-issue");j.on("click",function(n){a();f.hide();m(l)})};var c=function(i,j,k){i.html(Confluence.CreateJiraContent.Templates.FeatureDiscovery.createFeatureDiscoveryContent());e(i,j,k)};var b=function(){return d};var a=function(){d=false;g.ajax({url:AJS.Confluence.getContextPath()+"/rest/createjiracontent/1.0/metadata/discovered",type:"PUT"})};return{shouldShowFeatureDiscovery:b,disableFeatureDiscovery:a,addFeatureDiscoveryContent:c,setFeatureDialogObject:h}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner.js' */
AJS.toInit(function(e){d();AJS.bind("system-content-metadata.toggled-restrictions",function(g,h){AJS.setVisible("#content-metadata-page-restrictions",h.hasRestrictions);d()});AJS.bind("breadcrumbs.expanded",f);e("#page-metadata-banner").css("visibility","visible");b();e("#content-metadata-page-restrictions").click(function(g){g.preventDefault();AJS.trigger("system-content-metadata.open-restrictions-dialog")});function d(){if(e("#system-content-items").children(":not(.hidden)").length==0){e("#system-content-items").addClass("hidden")}else{e("#system-content-items").removeClass("hidden")}}function f(){e("#page-metadata-banner").hide()}function b(){var g=e("#system-content-items a:not(.tipsy-disabled), .page-metadata-item a:not(.tipsy-disabled), .page-metadata-modification-info a.last-modified:not(tipsy-disabled)");a(g);g.click(function(h){c(e(h.target).closest("a"))});e(window).on("click scroll resize",c)}function a(g){e(g).tooltip({live:true,gravity:e("#com-atlassian-confluence").hasClass("theme-documentation view-blog-post")?"nw":"n",title:"title",delayIn:500})}function c(g){e(".tipsy").remove();if(g){var h=e(g).data("tipsy");if(h){h.hoverState="out"}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:page-banner-common-resources', location = 'js/page-banner-analytics.js' */
AJS.toInit(function(c){function b(){if(!AJS.Confluence.Analytics||!AJS.Confluence.Analytics.setAnalyticsSource){AJS.log("WARNING: Could not initialise analytics for the page banner: AJS.Confluence.Analytics.setAnalyticsSource is not defined.");return}var e=AJS.Confluence.Analytics.setAnalyticsSource;var f=c("#breadcrumbs > li");e(f.filter(":not(#ellipsis)").find("a"),"breadcrumbs");e(f.filter(".hidden-crumb").find("a"),"breadcrumbs-expanded");e(f.filter(":last").find("a"),"breadcrumbs-parent");var d=c("#com-atlassian-confluence").hasClass("theme-documentation")?"breadcrumbs-homepage":"breadcrumbs-collector";e(f.filter(".first").find("a"),d)}function a(e,d,g){var f=null;e.mouseover(function(){f=setTimeout(g,d)});e.mouseout(function(){clearTimeout(f)})}AJS.bind("breadcrumbs.expanded",function(){AJS.trigger("analyticsEvent",{name:"breadcrumbs-expanded"})});b()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-page-banner:soy-resources', location = 'soy/page-banner.soy' */
// This file was automatically generated from page-banner.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.PageBanner == 'undefined') { Confluence.Templates.PageBanner = {}; }


Confluence.Templates.PageBanner.banner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="page-metadata-banner"><ul class="banner">');
  Confluence.Templates.PageBanner.renderSystemContentItems(opt_data, output);
  var itemList6 = opt_data.pageBannerItems;
  var itemListLen6 = itemList6.length;
  for (var itemIndex6 = 0; itemIndex6 < itemListLen6; itemIndex6++) {
    var itemData6 = itemList6[itemIndex6];
    Confluence.Templates.PageBanner.renderPageBannerItem(itemData6, output);
  }
  output.append('</ul></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.renderSystemContentItems = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li id="system-content-items" class="noprint">');
  var itemList12 = opt_data.systemContentItems;
  var itemListLen12 = itemList12.length;
  for (var itemIndex12 = 0; itemIndex12 < itemListLen12; itemIndex12++) {
    var itemData12 = itemList12[itemIndex12];
    Confluence.Templates.PageBanner.itemAnchor(soy.$$augmentData(itemData12, {isSystemContentItem: true}), output);
  }
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.renderPageBannerItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="page-metadata-item noprint ', (opt_data.isAuiButton) ? 'has-button' : '', '" ', (opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '-wrapper"' : '', '>');
  Confluence.Templates.PageBanner.itemAnchor(opt_data, output);
  output.append('</li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.itemAnchor = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.href), '" title="', soy.$$escapeHtml(opt_data.tooltip), '" ', (opt_data.linkId) ? 'id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '', ' ', (opt_data.styleClasses) ? 'class="' + soy.$$escapeHtml(opt_data.styleClasses) + '"' : '', '>');
  Confluence.Templates.PageBanner.itemIcon(opt_data, output);
  output.append((! opt_data.isSystemContentItem) ? '<span>' + soy.$$escapeHtml(opt_data.label) + '</span>' : '', '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.PageBanner.itemIcon = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.icon) ? '<img class="page-banner-item-icon" src="' + soy.$$escapeHtml(opt_data.icon.url) + '" style="height: ' + soy.$$escapeHtml(opt_data.icon.height) + 'px; width: ' + soy.$$escapeHtml(opt_data.icon.width) + 'px;"/>' : '');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks.js' */
(function(f){function e(m){var h,n;if(m.offsetX===undefined){var l=0,k=0,j=m.target,i;do{if(j.scrollTop!=0||j.scrollLeft!=0){i=j}l+=j.offsetLeft;k+=j.offsetTop;j=j.offsetParent}while(j&&j!=j.offsetParent);h=m.pageX+(i?i.scrollLeft:0)-l;n=m.pageY+(i?i.scrollTop:0)-k}else{h=m.offsetX;n=m.offsetY}return h>=3&&h<=14&&n>=3&&n<=14}function d(h){return h.currentTarget===h.target}function c(i){var h="page";if(i.closest("table.tasks-report").length){h="report"}else{if(i.closest("#task-container").length){h="mytasks"}else{if(i.closest("ul.inline-task-list").length){h="task"}}}return h}function g(k,i){var h=k.attr("data-inline-task-id");var j=k.find(i).first();if(j.closest("li").attr("data-inline-task-id")===h){return j}else{return f()}}var a=false;f(window).bind("beforeunload",function(){a=true});var b=[];f(document).delegate("ul.inline-task-list > li[data-inline-task-id]",{click:function(m){if(d(m)&&e(m)){var k=f(m.target).toggleClass("checked"),h=k.hasClass("checked")?"CHECKED":"UNCHECKED",j=k.data("inline-task-id"),n=k.closest("ul").attr("data-inline-tasks-content-id")||AJS.params.pageId,i=AJS.contextPath()+"/rest/inlinetasks/1/task/"+n+"/"+j+"/";k.prop("disabled",true);var l=k.closest("tr");l.attr("aria-disabled",true);b.push(j);AJS.trigger("inline-tasks.status-update.start",{status:h,taskId:j,taskListQueue:b});f.ajax({type:"POST",url:i,data:{status:h,trigger:"VIEW_PAGE"},dataType:"text",timeout:30000,error:function(p,r,o){if(a||r==="timeout"){return}AJS.logError("Inline Task #"+j+" was not persisted to "+h+" because of "+o+" (status: "+r+")");k.toggleClass("checked");var q;if(p.status===403){q=new Confluence.InlineTasks.Notice({textMessage:"Oops! You can\'t update this task because you are not allowed to edit the page it appears on.",className:"forbidden-notice"})}else{q=new Confluence.InlineTasks.Notice()}q.show()},success:function(){var o={dueDate:g(k,"time").attr("datetime"),completionDate:moment().format("YYYY-MM-DD"),mode:"view",assigneeUsername:g(k,".user-mention").attr("data-username"),context:c(k)};if(h==="CHECKED"){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.completed",data:o})}}}).always(function(){k.prop("disabled",false);var o=k.closest("tr");o.attr("aria-disabled",false);b.splice(AJS.indexOf(b,j),1);AJS.trigger("inline-tasks.status-update.complete",{status:h,taskId:j,taskListQueue:b})})}},mousemove:function(h){if(d(h)){if(e(h)){f(h.target).addClass("hover")}else{f(h.target).removeClass("hover")}}},mouseout:function(h){if(d(h)){f(h.target).removeClass("hover")}},mousedown:function(h){if(d(h)&&e(h)){f(h.target).addClass("task-active")}},mouseup:function(h){if(d(h)&&e(h)){f(h.target).removeClass("task-active")}}});f("ul.inline-task-list li:not(.checked) time.date-upcoming").tooltip({title:function(){return "This task is due in less than a week"},live:true});f("ul.inline-task-list li:not(.checked) time.date-past").tooltip({title:function(){return "This task is overdue"},live:true});f("span.emptycompletedate").tooltip({title:function(){return "A completion date wasn\'t recorded for this task"},live:true});f(document).on("click","time",function(){var i=f(this);var h={date:i.attr("datetime"),mode:"view",context:c(i)};AJS.trigger("analyticsEvent",{name:"confluence-spaces.date.clicked",data:h})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'js/inline-tasks-alert.js' */
Confluence.InlineTasks=Confluence.InlineTasks||{};(function(b){var a=function(c){this.settings=b.extend({},a.DEFAULTS,c);this.template=Confluence.InlineTasks.Templates;b("#inline-tasks-notice").remove();var d=b(this.template.notice(this.settings));d.hide().appendTo("body");d.find(".notice-close").click(function(){d.hide()});this.$notice=d};a.DEFAULTS={textMessage:"Oops! Your task change couldn\'t be saved. \u003cbr/\u003eThere could be a few reasons for this.",className:"general-notice"};a.prototype.show=function(){this.$notice.show();return this};a.prototype.hide=function(){this.$notice.hide();return this};Confluence.InlineTasks.Notice=a}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:inline-tasks-resources', location = 'templates/inline-tasks.soy' */
// This file was automatically generated from inline-tasks.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Templates == 'undefined') { Confluence.InlineTasks.Templates = {}; }


Confluence.InlineTasks.Templates.notice = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message error', (opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '', '" id="inline-tasks-notice">', opt_data.textMessage, '&nbsp;&nbsp;<a href="#" class="notice-close">', soy.$$escapeHtml("Dismiss"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/jquery.tablesorter.serveronly.js' */
(function(a){a.extend({tablesorterServerOnly:new function(){this.defaults={classNameDisableSorting:"aui-table-column-unsortable",classNameHeaderDesc:"tablesorter-headerDesc",classNameHeaderAsc:"tablesorter-headerAsc",reverseSort:false,sortColumn:"",onInit:function(){},onSort:function(){},events:{clickHeader:"click.sortServerOnly",refreshHeader:"refreshHeader.sortServerOnly",simulateClickHeader:"simulateClickHeader.sortServerOnly"}};var b=this;var d={updateCurrentHeaderSort:function(e,f){d.resetHeadersSort(e,f);f.$headers.each(function(){var h=a(this),g=h.attr("data-column-name");var i=f.reverseSort;if(g===f.sortColumn){i?h.addClass(f.classNameHeaderDesc):h.addClass(f.classNameHeaderAsc)}})},resetHeadersSort:function(e,f){f.$headers.removeClass(f.classNameHeaderDesc).removeClass(f.classNameHeaderAsc)},prepareHTMLHeader:function(e,f){f.$headers.not("."+f.classNameDisableSorting).attr("unselectable","on").bind("selectstart",false).addClass("tablesorter-header").wrapInner("<span class='aui-table-header-content'/>")},bindEvents:function(f,g){var e=a(f);e.on(g.events.refreshHeader,function(){d.updateCurrentHeaderSort(f,g)});e.on(g.events.simulateClickHeader,function(i,j,h){g.reverseSort=h;g.sortColumn=j})}};var c=function(f,g){var e=a(f);g.$table=e;g.$headers=e.find("thead th");g.$tbodies=e.find("tbody");d.prepareHTMLHeader(f,g);d.updateCurrentHeaderSort(f,g);if(typeof g.onInit==="function"){g.onInit.apply(f,[g])}g.$headers.on(g.events.clickHeader,function(){var h=a(this);if(h.hasClass(g.classNameDisableSorting)){return false}var i=h.attr("data-column-name");if(i===g.sortColumn){g.reverseSort=!g.reverseSort}else{g.reverseSort=false}g.sortColumn=i;if(typeof g.onSort==="function"){g.onSort.apply(f,[g])}return false});d.bindEvents(f,g)};b.construct=function(e){return this.each(function(){var f=this,g=a.extend(true,{},a.tablesorterServerOnly.defaults,e);if(this.config&&f.hasInitialized&&a.tablesorter){a.tablesorter.destroy(f,false,function(){c(f,g)})}else{c(f,g)}})}}()});a.fn.extend({tablesorterServerOnly:a.tablesorterServerOnly.construct})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:sortable-table-server-side', location = 'js/tasks-table-sortable.js' */
(function(a){var b=function(d){this.ajaxUrl=d.ajaxUrl;this.restUrlPagination=d.restUrlPagination;this.$wrapper=d.$wrapper;this.table=d.table;this.$table=a(this.table);this.analyticEventKey=d.analyticEventKey;this.sortColumnDefault=d.sortColumnDefault||"duedate";this.sortReverseSortDefault=d.sortReverseSortDefault||false;this.reportParametersDefault=d.reportParametersDefault;this.pageIndex=d.pageIndex||0;this.pageSize=d.pageSize||10;this.pageTotal=d.pageTotal||0;this.pageLimit=d.pageLimit||7;this.adaptive=d.adaptive;this.columns=d.columns;this.templates=d.templates;this.onRenderEmptyTable=d.onRenderEmptyTable;this.onBusySorting=d.onBusySorting};b.getColumnNameFromSortBy=function(e){var d={"due date":"duedate","page title":"location",assignee:"assignee"};return d[e]?d[e]:"duedate"};b.getSortByFromColumnName=function(d){var e={duedate:"due date",location:"page title"};return e[d]?e[d]:d};b.prototype.updateOptions=function(d){a.extend(this,d);this.$table=a(this.table)};b.prototype.getCurrentPageIndex=function(){var e=this.$wrapper.find(".macro-auto-pagination").last();var d=parseInt(e.attr("data-initial-page-index"),10);return isNaN(d)?0:d};b.prototype.renderPagination=function(e,g){var d=this;if(!e){e=d.$table}if(!g){g=d.reportParametersDefault}this.$wrapper.find(".macro-auto-pagination").remove();if(!(d.pageTotal>1)){return}c.UI.Components.Pagination.build({scope:e,pageSize:d.pageSize,totalPages:d.pageTotal,pageLimit:d.pageLimit,path:d.restUrlPagination,adaptive:d.adaptive,currentPage:d.pageIndex,data:{reportParameters:JSON.stringify(g)},success:function f(h,j){var k={task:h,columns:d.columns};var i=d.templates.tasksReportLine(k);j.append(i)}})};b.prototype.toggleBusyState=function(d){this.$wrapper.attr("data-loading",d);if(d){this.$wrapper.find(".task-blanket").show()}else{this.$wrapper.find(".task-blanket").hide()}if(typeof this.onBusySorting==="function"){this.onBusySorting.apply(this,[d])}};b.prototype.renderTable=function(e){var d=this;var f=_.map(e,function(g){return d.templates.tasksReportLine({task:g,columns:d.columns})}).join("");d.$table.find("tbody").html(f)};b.prototype._triggerAnalyticsSorting=function(){var d=this.analyticEventKey;var e={column:this.sortColumn,direction:this.reverseSort?"desc":"asc"};AJS.trigger("analyticsEvent",{name:d,data:e})};b.prototype._buildAjaxData=function(e){var d={url:this.ajaxUrl,cache:false,dataType:"json",data:{pageIndex:this.pageIndex,pageSize:this.pageSize,reportParameters:JSON.stringify(e)}};return d};b.prototype.init=function(){var d=this;d.sortColumn=d.sortColumnDefault;d.reverseSort=d.sortReverseSortDefault;this.$table.tablesorterServerOnly({sortColumn:d.sortColumn,reverseSort:d.reverseSort,onInit:function(){var e=a(this);e.addClass("aui-table-sortable")},onSort:function(i){var h=this,f=a(h);d.pageIndex=d.getCurrentPageIndex();d.sortColumn=i.sortColumn;d.reverseSort=i.reverseSort;d.toggleBusyState(true);var g=a.extend({},d.reportParametersDefault,{sortColumn:b.getSortByFromColumnName(d.sortColumn),reverseSort:d.reverseSort});var e=d._buildAjaxData(g);a.ajax(e).done(function(j){d.pageIndex=d.getCurrentPageIndex();d.pageTotal=j.totalPages;if(d.pageIndex===0&&d.pageTotal===0){if(typeof d.onRenderEmptyTable==="function"){d.$wrapper.find(".macro-auto-pagination").remove();f.remove();d.onRenderEmptyTable.apply(d)}return}d.renderTable(j.detailLines);d.renderPagination(null,g);f.trigger("refreshHeader.sortServerOnly");d._triggerAnalyticsSorting()}).fail(function(){var j=new c.InlineTasks.Notice({textMessage:"We can\'t sort your tasks right now. Refresh the page to try again.",className:"forbidden-notice"});j.show()}).always(function(){d.toggleBusyState(false)})}})};var c=window.Confluence||{};c.InlineTasks=c.InlineTasks||{};c.InlineTasks.TasksTableSortable=b})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:common', location = '/js/namespace.js' */
window.Confluence||(window.Confluence={});window.Confluence.UI||(window.Confluence.UI={});window.Confluence.UI.Components||(window.Confluence.UI.Components={});window.Confluence.UI.Components.SpacePicker||(window.Confluence.UI.Components.SpacePicker={});window.Confluence.UI.Components.LabelPicker||(window.Confluence.UI.Components.LabelPicker={});window.Confluence.UI.Components.Pagination||(window.Confluence.UI.Components.Pagination={});window.Confluence.UI.Components.SpacePagePicker||(window.Confluence.UI.Components.SpacePagePicker={});window.Confluence.UI.Components.PagePicker||(window.Confluence.UI.Components.PagePicker={});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/js/pagination.js' */
(function(e,c){var d=function(j,k,i){var h=j.find("a").attr("aria-disabled",i);if(i){h.attr("disabled","disabled")}else{h.removeAttr("disabled");var g=e(".aui-nav-selected",j).data("index")+1;j.find(".aui-nav-next > a").attr("aria-disabled",g==k);j.find(".aui-nav-previous > a").attr("aria-disabled",g==1)}};var b={scope:null,success:null,data:null,path:"",url:"#",pageLimit:7,currentPage:0,adaptive:false,totalPages:0,pageSize:0};var f=function(i,j,k){var g=Math.floor(k/2);var h=j-1;if(!k||j<=k||i-g<0){return 0}if(i+g>h){return j-k}return i-g};var a=function(l){var k=l.totalPages,j=l.currentPage,m=l.pageLimit,h=l.adaptive,g;if(m){if(h){k=j+m}g=m}else{g=k}var i=f(j,k,m);return Confluence.UI.Components.Pagination.Templates.paginationFooter({currentPage:j||0,startPage:i,itemsToRender:g,totalPages:k,pageSize:l.pageSize,url:l.url||"#"})};c.build=function(j){var h=_.extend({},b,j);if(typeof h.success!=="function"){h.success=function(){}}var k=a(h);h.scope.after(k);var i=h.scope.next();var g=i.data("initial-page-index");i.on("click","a",function(p){var o=e(this),r=o.parents("ol").prev(),n=r.is("table")?r:r.find("table");var l=n.data("pageIndex")||g,q=o.parent("li");if(q.hasClass("aui-nav-selected")||q.find("> a[aria-disabled=true]").length){return}if(q.hasClass("aui-nav-next")){l++}else{if(q.hasClass("aui-nav-previous")){l--}else{l=q.data("index")}}d(i,h.totalPages,true);var m=e.extend({},{pageSize:h.pageSize,pageIndex:l},h.data);e.getJSON(Confluence.getContextPath()+h.path,m).done(function(t){l=t.currentPage;var s=n.find("tbody");s.find("tr").remove();n.data("pageIndex",l);_.each(t.detailLines,function(v){h.success(v,s)});AJS.trigger("ui.components.pagination.updated",[t,h]);var u=e.extend({},h,{totalPages:t.totalPages,adaptive:t.adaptive,currentPage:l});i.html(a(u));d(i,u.totalPages,false)}).fail(function(){d(i,h.totalPages,false)});p.preventDefault()})}})(AJS.$,window.Confluence.UI.Components.Pagination);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:pagination', location = '/soy/pagination.soy' */
// This file was automatically generated from pagination.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.Pagination == 'undefined') { Confluence.UI.Components.Pagination = {}; }
if (typeof Confluence.UI.Components.Pagination.Templates == 'undefined') { Confluence.UI.Components.Pagination.Templates = {}; }


Confluence.UI.Components.Pagination.Templates.paginationFooter = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="aui-nav aui-nav-pagination macro-auto-pagination" data-page-size="', soy.$$escapeHtml(opt_data.pageSize), '" data-initial-page-index="', soy.$$escapeHtml(opt_data.currentPage), '"><li class="aui-nav-previous"><a href="#"', (opt_data.currentPage == 0) ? 'aria-disabled="true"' : '', '>', soy.$$escapeHtml("Prev"), '</a></li>');
  var startIdx__soy14 = opt_data.startPage + 1;
  var currentIdx__soy15 = opt_data.currentPage + 1;
  var endIdx__soy16 = startIdx__soy14 + opt_data.itemsToRender;
  var totalRange__soy17 = opt_data.totalPages + 1;
  var indexInit18 = startIdx__soy14;
  var indexLimit18 = endIdx__soy16 < totalRange__soy17 ? endIdx__soy16 : totalRange__soy17;
  for (var index18 = indexInit18; index18 < indexLimit18; index18++) {
    output.append((index18 == currentIdx__soy15) ? '<li class="aui-nav-selected" data-index="' + soy.$$escapeHtml(index18 - 1) + '">' + soy.$$escapeHtml(index18) + '</li>' : '<li data-index="' + soy.$$escapeHtml(index18 - 1) + '"><a href="#">' + soy.$$escapeHtml(index18) + '</a></li>');
  }
  output.append('<li class="aui-nav-next"><a href="', soy.$$escapeHtml(opt_data.url), '"', (currentIdx__soy15 == opt_data.totalPages) ? 'aria-disabled="true"' : '', '>', soy.$$escapeHtml("Next"), '</a></li></ol>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:blank-placeholder-box', location = 'soy/blank-placeholder-box.soy' */
// This file was automatically generated from blank-placeholder-box.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox = {}; }
if (typeof Confluence.UI.Components.BlankPlaceholderBox.Templates == 'undefined') { Confluence.UI.Components.BlankPlaceholderBox.Templates = {}; }


Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="blank-placeholder-box ', (opt_data.customClass) ? soy.$$escapeHtml(opt_data.customClass) : '', '"><div class="content"><h2>', soy.$$escapeHtml(opt_data.blankTitle), '</h2><p>', soy.$$escapeHtml(opt_data.blankDescription), '</p></div>', (opt_data.customHtml) ? opt_data.customHtml : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-table-sortable', location = 'js-vendor/jquery/jquery.tablesorter.js' */
/*
 * TableSorter 2.10.8 - Client-side table sorting with ease!
 * @requires jQuery v1.2.6+
 *
 * Copyright (c) 2007 Christian Bach
 * Examples and docs at: http://tablesorter.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * @type jQuery
 * @name tablesorter
 * @cat Plugins/Tablesorter
 * @author Christian Bach/christian.bach@polyester.se
 * @contributor Rob Garrison/https://github.com/Mottie/tablesorter
 */
!(function(B){B.extend({tablesorter:new function(){var C=this;C.version="2.10.8";C.parsers=[];C.widgets=[];C.defaults={theme:"default",widthFixed:false,showProcessing:false,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:true,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:true,delayInit:false,serverSideSorting:false,headers:{},ignoreCase:true,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:false,sortReset:false,sortRestart:false,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:true,initialized:null,tableClass:"tablesorter",cssAsc:"tablesorter-headerAsc",cssChildRow:"tablesorter-childRow",cssDesc:"tablesorter-headerDesc",cssHeader:"tablesorter-header",cssHeaderRow:"tablesorter-headerRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",cssProcessing:"tablesorter-processing",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:false,headerList:[],empties:{},strings:{},parsers:[]};function O(Y){if(typeof console!=="undefined"&&typeof console.log!=="undefined"){console.log(Y)}else{alert(Y)}}function I(Y,Z){O(Y+" ("+(new Date().getTime()-Z.getTime())+"ms)")}C.log=O;C.benchmark=I;function F(b,a,Y){if(!a){return""}var e=b.config,Z=e.textExtraction,d="";if(Z==="simple"){if(e.supportsTextContent){d=a.textContent}else{d=B(a).text()}}else{if(typeof Z==="function"){d=Z(a,b,Y)}else{if(typeof Z==="object"&&Z.hasOwnProperty(Y)){d=Z[Y](a,b,Y)}else{d=e.supportsTextContent?a.textContent:B(a).text()}}}return B.trim(d)}function J(e,g,c,b){var d,Z=C.parsers.length,Y=false,a="",f=true;while(a===""&&f){c++;if(g[c]){Y=g[c].cells[b];a=F(e,Y,b);if(e.config.debug){O("Checking if value was empty on row "+c+", column: "+b+': "'+a+'"')}}else{f=false}}while(--Z>=0){d=C.parsers[Z];if(d&&d.id!=="text"&&d.is&&d.is(a,e,Y)){return d}}return C.getParserById("text")}function K(k){var j=k.config,d=j.$tbodies=j.$table.children("tbody:not(."+j.cssInfoBlock+")"),m,g,b,e,f,Y,a,Z="";if(d.length===0){return j.debug?O("*Empty table!* Not building a parser cache"):""}m=d[0].rows;if(m[0]){g=[];b=m[0].cells.length;for(e=0;e<b;e++){f=j.$headers.filter(":not([colspan])");f=f.add(j.$headers.filter('[colspan="1"]')).filter('[data-column="'+e+'"]:last');Y=j.headers[e];a=C.getParserById(C.getData(f,Y,"sorter"));j.empties[e]=C.getData(f,Y,"empty")||j.emptyTo||(j.emptyToBottom?"bottom":"top");j.strings[e]=C.getData(f,Y,"string")||j.stringTo||"max";if(!a){a=J(k,m,-1,e)}if(j.debug){Z+="column:"+e+"; parser:"+a.id+"; string:"+j.strings[e]+"; empty: "+j.empties[e]+"\n"}g.push(a)}}if(j.debug){O(Z)}j.parsers=g}function X(q){var l=q.tBodies,d=q.config,n,Y,o=d.parsers,r,p,f,e,a,g,h,m,Z=[];d.cache={};if(!o){return d.debug?O("*Empty table!* Not building a cache"):""}if(d.debug){m=new Date()}if(d.showProcessing){C.isProcessing(q,true)}for(a=0;a<l.length;a++){d.cache[a]={row:[],normalized:[]};if(!B(l[a]).hasClass(d.cssInfoBlock)){n=(l[a]&&l[a].rows.length)||0;Y=(l[a].rows[0]&&l[a].rows[0].cells.length)||0;for(f=0;f<n;++f){g=B(l[a].rows[f]);h=[];if(g.hasClass(d.cssChildRow)){d.cache[a].row[d.cache[a].row.length-1]=d.cache[a].row[d.cache[a].row.length-1].add(g);continue}d.cache[a].row.push(g);for(e=0;e<Y;++e){r=F(q,g[0].cells[e],e);p=o[e].format(r,q,g[0].cells[e],e);h.push(p);if((o[e].type||"").toLowerCase()==="numeric"){Z[e]=Math.max(Math.abs(p)||0,Z[e]||0)}}h.push(d.cache[a].normalized.length);d.cache[a].normalized.push(h)}d.cache[a].colMax=Z}}if(d.showProcessing){C.isProcessing(q)}if(d.debug){I("Building cache for "+n+" rows",m)}}function V(u,s){var v=u.config,w=u.tBodies,d=[],g=v.cache,f,h,a,e,x,Z,t,q,p,o,Y,m;if(!g[0]){return }if(v.debug){m=new Date()}for(p=0;p<w.length;p++){x=B(w[p]);if(x.length&&!x.hasClass(v.cssInfoBlock)){Z=C.processTbody(u,x,true);f=g[p].row;h=g[p].normalized;a=h.length;e=a?(h[0].length-1):0;for(t=0;t<a;t++){Y=h[t][e];d.push(f[Y]);if(!v.appender||!v.removeRows){o=f[Y].length;for(q=0;q<o;q++){Z.append(f[Y][q])}}}C.processTbody(u,Z,false)}}if(v.appender){v.appender(u,d)}if(v.debug){I("Rebuilt table",m)}if(!s){C.applyWidget(u)}B(u).trigger("sortEnd",u)}function Q(u){var r=[],a={},q=0,h=B(u).find("thead:eq(0), tfoot").children("tr"),f,e,d,b,o,s,p,Y,n,g,m,Z;for(f=0;f<h.length;f++){s=h[f].cells;for(e=0;e<s.length;e++){o=s[e];p=o.parentNode.rowIndex;Y=p+"-"+o.cellIndex;n=o.rowSpan||1;g=o.colSpan||1;if(typeof (r[p])==="undefined"){r[p]=[]}for(d=0;d<r[p].length+1;d++){if(typeof (r[p][d])==="undefined"){m=d;break}}a[Y]=m;q=Math.max(m,q);B(o).attr({"data-column":m});for(d=p;d<p+n;d++){if(typeof (r[d])==="undefined"){r[d]=[]}Z=r[d];for(b=m;b<m+g;b++){Z[b]="x"}}}}u.config.columns=q;return a}function H(Y){return(/^d/i.test(Y)||Y===1)}function S(j){var a=Q(j),Y,b,e,d,k,g,Z,f=j.config;f.headerList=[];f.headerContent=[];if(f.debug){Z=new Date()}d=f.cssIcon?'<i class="'+f.cssIcon+'"></i>':"";f.$headers=B(j).find(f.selectorHeaders).each(function(c){b=B(this);Y=f.headers[c];f.headerContent[c]=this.innerHTML;k=f.headerTemplate.replace(/\{content\}/g,this.innerHTML).replace(/\{icon\}/g,d);if(f.onRenderTemplate){e=f.onRenderTemplate.apply(b,[c,k]);if(e&&typeof e==="string"){k=e}}this.innerHTML='<div class="tablesorter-header-inner">'+k+"</div>";if(f.onRenderHeader){f.onRenderHeader.apply(b,[c])}this.column=a[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=H(C.getData(b,Y,"sortInitialOrder")||f.sortInitialOrder)?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=false;g=C.getData(b,Y,"lockedOrder")||false;if(typeof g!=="undefined"&&g!==false){this.order=this.lockedOrder=H(g)?[1,1,1]:[0,0,0]}b.addClass(f.cssHeader);f.headerList[c]=this;b.parent().addClass(f.cssHeaderRow);b.attr("tabindex",0)});L(j);if(f.debug){I("Built headers:",Z);O(f.$headers)}}function P(Z,Y,b){var a=Z.config;a.$table.find(a.selectorRemove).remove();K(Z);X(Z);W(a.$table,Y,b)}function L(Z){var Y,a=Z.config;a.$headers.each(function(b,c){Y=C.getData(c,a.headers[b],"sorter")==="false";c.sortDisabled=Y;B(c)[Y?"addClass":"removeClass"]("sorter-false")})}function D(k){var e,b,Z,Y,h=k.config,g=h.sortList,d=[h.cssAsc,h.cssDesc],a=B(k).find("tfoot tr").children().removeClass(d.join(" "));h.$headers.removeClass(d.join(" "));Y=g.length;for(b=0;b<Y;b++){if(g[b][1]!==2){e=h.$headers.not(".sorter-false").filter('[data-column="'+g[b][0]+'"]'+(Y===1?":last":""));if(e.length){for(Z=0;Z<e.length;Z++){if(!e[Z].sortDisabled){e.eq(Z).addClass(d[g[b][1]]);if(a.length){a.filter('[data-column="'+g[b][0]+'"]').eq(Z).addClass(d[g[b][1]])}}}}}}}function N(a){if(a.config.widthFixed&&B(a).find("colgroup").length===0){var Y=B("<colgroup>"),Z=B(a).width();B(a.tBodies[0]).find("tr:first").children("td").each(function(){Y.append(B("<col>").css("width",parseInt((B(this).width()/Z)*1000,10)/10+"%"))});B(a).prepend(Y)}}function T(b,d){var a,Z,e,f=b.config,Y=d||f.sortList;f.sortList=[];B.each(Y,function(g,c){a=[parseInt(c[0],10),parseInt(c[1],10)];e=f.headerList[a[0]];if(e){f.sortList.push(a);Z=B.inArray(a[1],e.order);e.count=Z>=0?Z:a[1]%(f.sortReset?3:2)}})}function M(Z,Y){return(Z&&Z[Y])?Z[Y].type||"":""}function U(n,m,f){var l,d,b,Y,p,h=n.config,Z=!f[h.sortMultiSortKey],g=B(n);g.trigger("sortStart",n);m.count=f[h.sortResetKey]?2:(m.count+1)%(h.sortReset?3:2);if(h.sortRestart){d=m;h.$headers.each(function(){if(this!==d&&(Z||!B(this).is("."+h.cssDesc+",."+h.cssAsc))){this.count=-1}})}d=m.column;if(Z){h.sortList=[];if(h.sortForce!==null){l=h.sortForce;for(b=0;b<l.length;b++){if(l[b][0]!==d){h.sortList.push(l[b])}}}Y=m.order[m.count];if(Y<2){h.sortList.push([d,Y]);if(m.colSpan>1){for(b=1;b<m.colSpan;b++){h.sortList.push([d+b,Y])}}}}else{if(h.sortAppend&&h.sortList.length>1){if(C.isValueInArray(h.sortAppend[0][0],h.sortList)){h.sortList.pop()}}if(C.isValueInArray(d,h.sortList)){for(b=0;b<h.sortList.length;b++){p=h.sortList[b];Y=h.headerList[p[0]];if(p[0]===d){p[1]=Y.order[Y.count];if(p[1]===2){h.sortList.splice(b,1);Y.count=-1}}}}else{Y=m.order[m.count];if(Y<2){h.sortList.push([d,Y]);if(m.colSpan>1){for(b=1;b<m.colSpan;b++){h.sortList.push([d+b,Y])}}}}}if(h.sortAppend!==null){l=h.sortAppend;for(b=0;b<l.length;b++){if(l[b][0]!==d){h.sortList.push(l[b])}}}g.trigger("sortBegin",n);setTimeout(function(){D(n);R(n);V(n)},1)}function R(p){var d=0,h=p.config,j=h.sortList,e=j.length,a=p.tBodies.length,r,n,g,o,f,Y,Z,q,b,m;if(h.serverSideSorting||!h.cache[0]){return }if(h.debug){r=new Date()}for(g=0;g<a;g++){f=h.cache[g].colMax;Y=h.cache[g].normalized;Z=Y.length;m=(Y&&Y[0])?Y[0].length-1:0;Y.sort(function(i,c){for(n=0;n<e;n++){o=j[n][0];b=j[n][1];q=/n/i.test(M(h.parsers,o))?"Numeric":"Text";q+=b===0?"":"Desc";if(/Numeric/.test(q)&&h.strings[o]){if(typeof (h.string[h.strings[o]])==="boolean"){d=(b===0?1:-1)*(h.string[h.strings[o]]?-1:1)}else{d=(h.strings[o])?h.string[h.strings[o]]||0:0}}var k=B.tablesorter["sort"+q](p,i[o],c[o],o,f[o],d);if(k){return k}}return i[m]-c[m]})}if(h.debug){I("Sorting on "+j.toString()+" and dir "+b+" time",r)}}function G(Y,Z){Y.trigger("updateComplete");if(typeof Z==="function"){Z(Y[0])}}function W(Z,Y,a){if(Y!==false&&!Z[0].isProcessing){Z.trigger("sorton",[Z[0].config.sortList,function(){G(Z,a)}])}else{G(Z,a)}}function E(Z){var d=Z.config,a=d.$table,Y,b;d.$headers.find(d.selectorSort).add(d.$headers.filter(d.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",function(g,h){if(((g.which||g.button)!==1&&!/sort|keypress/.test(g.type))||(g.type==="keypress"&&g.which!==13)){return false}if(g.type==="mouseup"&&h!==true&&(new Date().getTime()-b>250)){return false}if(g.type==="mousedown"){b=new Date().getTime();return g.target.tagName==="INPUT"?"":!d.cancelSelection}if(d.delayInit&&!d.cache){X(Z)}var f=/TH|TD/.test(this.tagName)?B(this):B(this).parents("th, td").filter(":first"),c=f[0];if(!c.sortDisabled){U(Z,c,g)}});if(d.cancelSelection){d.$headers.attr("unselectable","on").bind("selectstart",false).css({"user-select":"none",MozUserSelect:"none"})}a.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(c){c.stopPropagation();d.sortList=[];D(Z);R(Z);V(Z)}).bind("updateAll.tablesorter",function(f,c,g){f.stopPropagation();C.refreshWidgets(Z,true,true);C.restoreHeaders(Z);S(Z);E(Z);P(Z,c,g)}).bind("update.tablesorter updateRows.tablesorter",function(f,c,g){f.stopPropagation();L(Z);P(Z,c,g)}).bind("updateCell.tablesorter",function(h,k,i,m){h.stopPropagation();a.find(d.selectorRemove).remove();var f,o,j,c=a.find("tbody"),n=c.index(B(k).parents("tbody").filter(":first")),g=B(k).parents("tr").filter(":first");k=B(k)[0];if(c.length&&n>=0){o=c.eq(n).find("tr").index(g);j=k.cellIndex;f=d.cache[n].normalized[o].length-1;d.cache[n].row[Z.config.cache[n].normalized[o][f]]=g;d.cache[n].normalized[o][j]=d.parsers[j].format(F(Z,k,j),Z,k,j);W(a,i,m)}}).bind("addRows.tablesorter",function(g,j,h,k){g.stopPropagation();var f,o=j.filter("tr").length,m=[],c=j[0].cells.length,n=a.find("tbody").index(j.parents("tbody").filter(":first"));if(!d.parsers){K(Z)}for(f=0;f<o;f++){for(Y=0;Y<c;Y++){m[Y]=d.parsers[Y].format(F(Z,j[f].cells[Y],Y),Z,j[f].cells[Y],Y)}m.push(d.cache[n].row.length);d.cache[n].row.push([j[f]]);d.cache[n].normalized.push(m);m=[]}W(a,h,k)}).bind("sorton.tablesorter",function(f,c,h,g){f.stopPropagation();a.trigger("sortStart",this);T(Z,c);D(Z);a.trigger("sortBegin",this);R(Z);V(Z,g);if(typeof h==="function"){h(Z)}}).bind("appendCache.tablesorter",function(c,g,f){c.stopPropagation();V(Z,f);if(typeof g==="function"){g(Z)}}).bind("applyWidgetId.tablesorter",function(c,f){c.stopPropagation();C.getWidgetById(f).format(Z,d,d.widgetOptions)}).bind("applyWidgets.tablesorter",function(c,f){c.stopPropagation();C.applyWidget(Z,f)}).bind("refreshWidgets.tablesorter",function(g,f,c){g.stopPropagation();C.refreshWidgets(Z,f,c)}).bind("destroy.tablesorter",function(g,h,f){g.stopPropagation();C.destroy(Z,h,f)})}C.construct=function(Y){return this.each(function(){if(!this.tHead||this.tBodies.length===0||this.hasInitialized===true){return(this.config&&this.config.debug)?O("stopping initialization! No thead, tbody or tablesorter has already been initialized"):""}var d=B(this),b=this,e,a="",Z=B.metadata;b.hasInitialized=false;b.isProcessing=true;b.config={};e=B.extend(true,b.config,C.defaults,Y);B.data(b,"tablesorter",e);if(e.debug){B.data(b,"startoveralltimer",new Date())}e.supportsTextContent=B("<span>x</span>")[0].textContent==="x";e.supportsDataObject=parseFloat(B.fn.jquery)>=1.4;e.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:true,bottom:false};if(!/tablesorter\-/.test(d.attr("class"))){a=(e.theme!==""?" tablesorter-"+e.theme:"")}e.$table=d.addClass(e.tableClass+a);e.$tbodies=d.children("tbody:not(."+e.cssInfoBlock+")");S(b);N(b);K(b);if(!e.delayInit){X(b)}E(b);if(e.supportsDataObject&&typeof d.data().sortlist!=="undefined"){e.sortList=d.data().sortlist}else{if(Z&&(d.metadata()&&d.metadata().sortlist)){e.sortList=d.metadata().sortlist}}C.applyWidget(b,true);if(e.sortList.length>0){d.trigger("sorton",[e.sortList,{},!e.initWidgets])}else{if(e.initWidgets){C.applyWidget(b)}}if(e.showProcessing){d.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(c){C.isProcessing(b,c.type==="sortBegin")})}b.hasInitialized=true;b.isProcessing=false;if(e.debug){C.benchmark("Overall initialization time",B.data(b,"startoveralltimer"))}d.trigger("tablesorter-initialized",b);if(typeof e.initialized==="function"){e.initialized(b)}})};C.isProcessing=function(b,Z,a){b=B(b);var d=b[0].config,Y=a||b.find("."+d.cssHeader);if(Z){if(d.sortList.length>0){Y=Y.filter(function(){return this.sortDisabled?false:C.isValueInArray(parseFloat(B(this).attr("data-column")),d.sortList)})}Y.addClass(d.cssProcessing)}else{Y.removeClass(d.cssProcessing)}};C.processTbody=function(a,Y,Z){var b;if(Z){a.isProcessing=true;Y.before('<span class="tablesorter-savemyplace"/>');b=(B.fn.detach)?Y.detach():Y.remove();return b}b=B(a).find("span.tablesorter-savemyplace");Y.insertAfter(b);b.remove();a.isProcessing=false};C.clearTableBody=function(Y){B(Y)[0].config.$tbodies.empty()};C.restoreHeaders=function(Y){var Z=Y.config;Z.$table.find(Z.selectorHeaders).each(function(a){if(B(this).find(".tablesorter-header-inner").length){B(this).html(Z.headerContent[a])}})};C.destroy=function(d,Z,g){d=B(d)[0];if(!d.hasInitialized){return }C.refreshWidgets(d,true,true);var f=B(d),e=d.config,Y=f.find("thead:first"),a=Y.find("tr."+e.cssHeaderRow).removeClass(e.cssHeaderRow),b=f.find("tfoot:first > tr").children("th, td");Y.find("tr").not(a).remove();f.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter "));e.$headers.add(b).removeClass(e.cssHeader+" "+e.cssAsc+" "+e.cssDesc).removeAttr("data-column");a.find(e.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter");C.restoreHeaders(d);if(Z!==false){f.removeClass(e.tableClass+" tablesorter-"+e.theme)}d.hasInitialized=false;if(typeof g==="function"){g(d)}};C.regex=[/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,/^0x[0-9a-f]+$/i];C.sortText=function(s,m,l,d){if(m===l){return 0}var k=s.config,j=k.string[(k.empties[d]||k.emptyTo)],Y=C.regex,p,f,h,q,Z,o,g,n;if(m===""&&j!==0){return typeof j==="boolean"?(j?-1:1):-j||-1}if(l===""&&j!==0){return typeof j==="boolean"?(j?1:-1):j||1}if(typeof k.textSorter==="function"){return k.textSorter(m,l,s,d)}p=m.replace(Y[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");h=l.replace(Y[0],"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");f=parseInt(m.match(Y[2]),16)||(p.length!==1&&m.match(Y[1])&&Date.parse(m));q=parseInt(l.match(Y[2]),16)||(f&&l.match(Y[1])&&Date.parse(l))||null;if(q){if(f<q){return -1}if(f>q){return 1}}n=Math.max(p.length,h.length);for(g=0;g<n;g++){Z=isNaN(p[g])?p[g]||0:parseFloat(p[g])||0;o=isNaN(h[g])?h[g]||0:parseFloat(h[g])||0;if(isNaN(Z)!==isNaN(o)){return(isNaN(Z))?1:-1}if(typeof Z!==typeof o){Z+="";o+=""}if(Z<o){return -1}if(Z>o){return 1}}return 0};C.sortTextDesc=function(f,Z,Y,d){if(Z===Y){return 0}var h=f.config,g=h.string[(h.empties[d]||h.emptyTo)];if(Z===""&&g!==0){return typeof g==="boolean"?(g?-1:1):g||1}if(Y===""&&g!==0){return typeof g==="boolean"?(g?1:-1):-g||-1}if(typeof h.textSorter==="function"){return h.textSorter(Y,Z,f,d)}return C.sortText(f,Y,Z)};C.getTextValue=function(Z,e,c){if(e){var b,Y=Z?Z.length:0,f=e+c;for(b=0;b<Y;b++){f+=Z.charCodeAt(b)}return c*f}return 0};C.sortNumeric=function(g,Z,Y,f,j,i){if(Z===Y){return 0}var k=g.config,h=k.string[(k.empties[f]||k.emptyTo)];if(Z===""&&h!==0){return typeof h==="boolean"?(h?-1:1):-h||-1}if(Y===""&&h!==0){return typeof h==="boolean"?(h?1:-1):h||1}if(isNaN(Z)){Z=C.getTextValue(Z,j,i)}if(isNaN(Y)){Y=C.getTextValue(Y,j,i)}return Z-Y};C.sortNumericDesc=function(g,Z,Y,f,j,i){if(Z===Y){return 0}var k=g.config,h=k.string[(k.empties[f]||k.emptyTo)];if(Z===""&&h!==0){return typeof h==="boolean"?(h?-1:1):h||1}if(Y===""&&h!==0){return typeof h==="boolean"?(h?1:-1):-h||-1}if(isNaN(Z)){Z=C.getTextValue(Z,j,i)}if(isNaN(Y)){Y=C.getTextValue(Y,j,i)}return Y-Z};C.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d",C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119",E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};C.replaceAccents=function(b){var Z,c="[",Y=C.characterEquivalents;if(!C.characterRegex){C.characterRegexArray={};for(Z in Y){if(typeof Z==="string"){c+=Y[Z];C.characterRegexArray[Z]=new RegExp("["+Y[Z]+"]","g")}}C.characterRegex=new RegExp(c+"]")}if(C.characterRegex.test(b)){for(Z in Y){if(typeof Z==="string"){b=b.replace(C.characterRegexArray[Z],Z)}}}return b};C.isValueInArray=function(b,Z){var c,Y=Z.length;for(c=0;c<Y;c++){if(Z[c][0]===b){return true}}return false};C.addParser=function(c){var b,Z=C.parsers.length,Y=true;for(b=0;b<Z;b++){if(C.parsers[b].id.toLowerCase()===c.id.toLowerCase()){Y=false}}if(Y){C.parsers.push(c)}};C.getParserById=function(Z){var a,Y=C.parsers.length;for(a=0;a<Y;a++){if(C.parsers[a].id.toLowerCase()===(Z.toString()).toLowerCase()){return C.parsers[a]}}return false};C.addWidget=function(Y){C.widgets.push(Y)};C.getWidgetById=function(a){var b,Z,Y=C.widgets.length;for(b=0;b<Y;b++){Z=C.widgets[b];if(Z&&Z.hasOwnProperty("id")&&Z.id.toLowerCase()===a.toLowerCase()){return Z}}};C.applyWidget=function(h,g){h=B(h)[0];var b=h.config,d=b.widgetOptions,e=[],Z,a,f,Y;if(b.debug){Z=new Date()}if(b.widgets.length){b.widgets=B.grep(b.widgets,function(i,c){return B.inArray(i,b.widgets)===c});B.each(b.widgets||[],function(c,j){Y=C.getWidgetById(j);if(Y&&Y.id){if(!Y.priority){Y.priority=10}e[c]=Y}});e.sort(function(i,c){return i.priority<c.priority?-1:i.priority===c.priority?0:1});B.each(e,function(j,c){if(c){if(g){if(c.hasOwnProperty("options")){d=h.config.widgetOptions=B.extend(true,{},c.options,d)}if(c.hasOwnProperty("init")){c.init(h,c,b,d)}}else{if(!g&&c.hasOwnProperty("format")){c.format(h,b,d,false)}}}})}if(b.debug){f=b.widgets.length;I("Completed "+(g===true?"initializing ":"applying ")+f+" widget"+(f!==1?"s":""),Z)}};C.refreshWidgets=function(f,e,Y){f=B(f)[0];var d,g=f.config,b=g.widgets,a=C.widgets,Z=a.length;for(d=0;d<Z;d++){if(a[d]&&a[d].id&&(e||B.inArray(a[d].id,b)<0)){if(g.debug){O("Refeshing widgets: Removing "+a[d].id)}if(a[d].hasOwnProperty("remove")){a[d].remove(f,g,g.widgetOptions)}}}if(Y!==true){C.applyWidget(f,e)}};C.getData=function(d,c,b){var e="",Z=B(d),Y,a;if(!Z.length){return""}Y=B.metadata?Z.metadata():false;a=" "+(Z.attr("class")||"");if(typeof Z.data(b)!=="undefined"||typeof Z.data(b.toLowerCase())!=="undefined"){e+=Z.data(b)||Z.data(b.toLowerCase())}else{if(Y&&typeof Y[b]!=="undefined"){e+=Y[b]}else{if(c&&typeof c[b]!=="undefined"){e+=c[b]}else{if(a!==" "&&a.match(" "+b+"-")){e=a.match(new RegExp("\\s"+b+"-([\\w-]+)"))[1]||""}}}}return B.trim(e)};C.formatFloat=function(a,b){if(typeof a!=="string"||a===""){return a}var Z,Y=b&&b.config?b.config.usNumberFormat!==false:typeof b!=="undefined"?b:true;if(Y){a=a.replace(/,/g,"")}else{a=a.replace(/[\s|\.]/g,"").replace(/,/g,".")}if(/^\s*\([.\d]+\)/.test(a)){a=a.replace(/^\s*\(/,"-").replace(/\)/,"")}Z=parseFloat(a);return isNaN(Z)?B.trim(a):Z};C.isDigit=function(Y){return isNaN(Y)?(/^[\-+(]?\d+[)]?$/).test(Y.toString().replace(/[,.'"\s]/g,"")):true}}()});var A=B.tablesorter;B.fn.extend({tablesorter:A.construct});A.addParser({id:"text",is:function(){return true},format:function(C,D){var E=D.config;if(C){C=B.trim(E.ignoreCase?C.toLocaleLowerCase():C);C=E.sortLocaleCompare?A.replaceAccents(C):C}return C},type:"text"});A.addParser({id:"digit",is:function(C){return A.isDigit(C)},format:function(C,D){var E=A.formatFloat((C||"").replace(/[^\w,. \-()]/g,""),D);return C&&typeof E==="number"?E:C?B.trim(C&&D.config.ignoreCase?C.toLocaleLowerCase():C):C},type:"numeric"});A.addParser({id:"currency",is:function(C){return(/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/).test((C||"").replace(/[,. ]/g,""))},format:function(C,D){var E=A.formatFloat((C||"").replace(/[^\w,. \-()]/g,""),D);return C&&typeof E==="number"?E:C?B.trim(C&&D.config.ignoreCase?C.toLocaleLowerCase():C):C},type:"numeric"});A.addParser({id:"ipAddress",is:function(C){return(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/).test(C)},format:function(F,H){var E,D=F?F.split("."):"",G="",C=D.length;for(E=0;E<C;E++){G+=("00"+D[E]).slice(-3)}return F?A.formatFloat(G,H):F},type:"numeric"});A.addParser({id:"url",is:function(C){return(/^(https?|ftp|file):\/\//).test(C)},format:function(C){return C?B.trim(C.replace(/(https?|ftp|file):\/\//,"")):C},type:"text"});A.addParser({id:"isoDate",is:function(C){return(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/).test(C)},format:function(C,D){return C?A.formatFloat((C!=="")?(new Date(C.replace(/-/g,"/")).getTime()||""):"",D):C},type:"numeric"});A.addParser({id:"percent",is:function(C){return(/(\d\s*?%|%\s*?\d)/).test(C)&&C.length<15},format:function(C,D){return C?A.formatFloat(C.replace(/%/g,""),D):C},type:"numeric"});A.addParser({id:"usLongDate",is:function(C){return(/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i).test(C)||(/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i).test(C)},format:function(C,D){return C?A.formatFloat((new Date(C.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),D):C},type:"numeric"});A.addParser({id:"shortDate",is:function(C){return(/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/).test((C||"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(F,G,C,D){if(F){var I=G.config,E=I.headerList[D],H=E.dateFormat||A.getData(E,I.headers[D],"dateFormat")||I.dateFormat;F=F.replace(/\s+/g," ").replace(/[\-.,]/g,"/");if(H==="mmddyyyy"){F=F.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2")}else{if(H==="ddmmyyyy"){F=F.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1")}else{if(H==="yyyymmdd"){F=F.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3")}}}}return F?A.formatFloat((new Date(F).getTime()||""),G):F},type:"numeric"});A.addParser({id:"time",is:function(C){return(/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i).test(C)},format:function(C,D){return C?A.formatFloat((new Date("2000/01/01 "+C.replace(/(\S)([AP]M)$/i,"$1 $2")).getTime()||""),D):C},type:"numeric"});A.addParser({id:"metadata",is:function(){return false},format:function(D,E,C){var G=E.config,F=(!G.parserMetadataName)?"sortValue":G.parserMetadataName;return B(C).metadata()[F]},type:"numeric"});A.addWidget({id:"zebra",priority:90,format:function(N,K,M){var D,H,J,O,I,E,G,F,C=new RegExp(K.cssChildRow,"i"),L=K.$tbodies;if(K.debug){E=new Date()}for(G=0;G<L.length;G++){D=L.eq(G);F=D.children("tr").length;if(F>1){O=0;H=D.children("tr:visible");H.each(function(){J=B(this);if(!C.test(this.className)){O++}I=(O%2===0);J.removeClass(M.zebra[I?1:0]).addClass(M.zebra[I?0:1])})}}if(K.debug){A.benchmark("Applying Zebra widget",E)}},remove:function(H,I,F){var E,D,C=I.$tbodies,G=(F.zebra||["even","odd"]).join(" ");for(E=0;E<C.length;E++){D=B.tablesorter.processTbody(H,C.eq(E),true);D.children().removeClass(G);B.tablesorter.processTbody(H,D,false)}}})})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-table-sortable', location = 'js/aui-experimental-tables-sortable.js' */
(function(){var B={sortMultiSortKey:"",headers:{},debug:false};function A(D){var C=B;D.find("th").each(function(F,G){var E=AJS.$(G);C.headers[F]={};if(E.hasClass("aui-table-column-unsortable")){C.headers[F].sorter=false}else{E.attr("tabindex","0");E.wrapInner("<span class='aui-table-header-content'/>");if(E.hasClass("aui-table-column-issue-key")){C.headers[F].sorter="issue-key"}}});D.tablesorter(C)}AJS.tablessortable={setup:function(){AJS.$.tablesorter.addParser({id:"issue-key",is:function(){return false},format:function(G){var C=G.split("-");var D=C[0];var F=C[1];var I="..........";var H="000000";var E=(D+I).slice(0,I.length);E+=(H+F).slice(-H.length);return E},type:"text"});AJS.$(".aui-table-sortable").each(function(){A(AJS.$(this))})},setTableSortable:function(C){A(C)}};AJS.$(AJS.tablessortable.setup)})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'templates/tasks-report.soy' */
// This file was automatically generated from tasks-report.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Report == 'undefined') { Confluence.InlineTasks.Report = {}; }
if (typeof Confluence.InlineTasks.Report.Templates == 'undefined') { Confluence.InlineTasks.Report.Templates = {}; }


Confluence.InlineTasks.Report.Templates.tasksReport = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="table-wrapper" data-loading="false"><div class="task-blanket"></div><input type="hidden" name="reportParameters" value="', soy.$$escapeHtml(opt_data.reportParameters), '" /><table class="aui aui-table-interactive tasks-report" data-sortable="false" data-total-pages="', soy.$$escapeHtml(opt_data.totalPages), '" data-page-size="', soy.$$escapeHtml(opt_data.pageSize), '" data-adaptive="', soy.$$escapeHtml(opt_data.adaptive), '" data-page-limit="', soy.$$escapeHtml(opt_data.pageLimit), '"><thead><tr class="tablesorter-headerRow">');
  var headingList14 = opt_data.headings;
  var headingListLen14 = headingList14.length;
  for (var headingIndex14 = 0; headingIndex14 < headingListLen14; headingIndex14++) {
    var headingData14 = headingList14[headingIndex14];
    output.append('<th class="header-', soy.$$escapeHtml(headingData14), (headingData14 == 'description') ? ' aui-table-column-unsortable' : '', '" data-column-name="', soy.$$escapeHtml(headingData14), '">', soy.$$escapeHtml(opt_data.headingTexts[headingData14]), '</th>');
  }
  output.append('</tr></thead><tbody>');
  if (opt_data.tasks.length) {
    var taskList29 = opt_data.tasks;
    var taskListLen29 = taskList29.length;
    for (var taskIndex29 = 0; taskIndex29 < taskListLen29; taskIndex29++) {
      var taskData29 = taskList29[taskIndex29];
      Confluence.InlineTasks.Report.Templates.tasksReportLine({task: taskData29, columns: opt_data.headings}, output);
    }
  } else {
    output.append('<tr><td colspan="', soy.$$escapeHtml(opt_data.headings.length), '">', soy.$$escapeHtml("Create a task list in a Confluence page to keep track of things you need to do."), '</td></tr>');
  }
  output.append('</tbody></table></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Hey! Did you know..."), '</h2><p>', soy.$$escapeHtml("You can view the tasks you created, or assigned to you, in the tasks tabs of your profile."), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.tasksReportLine = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<tr data-task-id="', soy.$$escapeHtml(opt_data.task.taskId), '" aria-disabled="false">');
  var columnList51 = opt_data.columns;
  var columnListLen51 = columnList51.length;
  for (var columnIndex51 = 0; columnIndex51 < columnListLen51; columnIndex51++) {
    var columnData51 = columnList51[columnIndex51];
    if (columnData51 == 'duedate') {
      output.append('<td class=\'tasks-report-date\'>', (opt_data.task.dueDate) ? soy.$$escapeHtml(opt_data.task.dueDate) : '', '</td>');
    } else if (columnData51 == 'description') {
      output.append('<td>', opt_data.task.taskHtml, '</td>');
    } else if (columnData51 == 'assignee') {
      output.append('<td class=\'tasks-report-assignee\'>');
      if (opt_data.task.assigneeUserName) {
        Confluence.Templates.User.usernameLink({username: opt_data.task.assigneeUserName, fullName: opt_data.task.assigneeFullName, canView: false}, output);
      }
      output.append('</td>');
    } else if (columnData51 == 'location') {
      output.append('<td><a href="', soy.$$escapeHtml(opt_data.task.pageUrl), '">', soy.$$escapeHtml(opt_data.task.pageTitle), '</a></td>');
    } else if (columnData51 == 'completedate') {
      output.append('<td class=\'tasks-report-date\'>', (opt_data.task.completeDate) ? soy.$$escapeHtml(opt_data.task.completeDate) : (opt_data.task.taskCompleted) ? '<span class="emptycompletedate">--</span>' : '', '</td>');
    } else if (columnData51 == 'labels') {
      output.append('<td>');
      var labelList89 = opt_data.task.labels;
      var labelListLen89 = labelList89.length;
      for (var labelIndex89 = 0; labelIndex89 < labelListLen89; labelIndex89++) {
        var labelData89 = labelList89[labelIndex89];
        aui.labels.label({text: labelData89}, output);
      }
      output.append('</td>');
    }
  }
  output.append('</tr>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.taskReportBrowserWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param97 = new soy.StringBuilder('<p>', soy.$$escapeHtml("Unable to show this task report."), '</p>');
  var messageList101 = opt_data.messages;
  var messageListLen101 = messageList101.length;
  for (var messageIndex101 = 0; messageIndex101 < messageListLen101; messageIndex101++) {
    var messageData101 = messageList101[messageIndex101];
    param97.append('<p>', soy.$$escapeHtml(messageData101), '</p>');
  }
  aui.message.warning({content: param97.toString()}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.taskReportWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.message.warning({content: '<p>' + soy.$$escapeHtml("Unable to show the task report. Edit this page to resolve the issues.") + '</p>'}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report-blank-exp.js' */
(function(b){Confluence.InlineTasks=Confluence.InlineTasks||{};Confluence.InlineTasks.TasksReport=Confluence.InlineTasks.TasksReport||{};var a={"blank.complete.title":"Task report","blank.complete.desc":"Get going, no tasks completed yet.","blank.incomplete.title":"Task report","blank.incomplete.desc":"Looking good, no incomplete tasks."};Confluence.InlineTasks.TasksReport.renderBlankExperiences=function(g,c){if(!c){c="incomplete"}var f=a["blank."+c+".title"],e=a["blank."+c+".desc"];var d=Confluence.UI.Components.BlankPlaceholderBox.Templates.blankBox({blankTitle:f,blankDescription:e,customClass:c+" tasks-report-blank"});g.html(d)}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-report-resources', location = 'js/tasks-report.js' */
AJS.$(function(c){var b="/rest/inlinetasks/1/task-report/",a=Confluence.InlineTasks.Report.Templates,e=Confluence.InlineTasks.TasksTableSortable;var d=c(".tasks-report").parent();_.each(d,function(i){var l=c(i),n=l.find("table.tasks-report"),m=n.data("page-size"),k=n.data("total-pages"),f=n.data("page-limit"),q=n.data("adaptive"),p=l.find("input[name=reportParameters]").val(),g=JSON.parse(p);var o=function(r,s){c(r).attr("aria-disabled",s)};AJS.bind("inline-tasks.status-update.start",function(t,s){if(s.taskListQueue.length>0){var r=c("li[data-inline-task-id="+s.taskId+"]").closest(".tasks-report").siblings(".macro-auto-pagination");o(r,true);r=r.find("li a");r.on("click.taskreport.pagination",function(u){u.preventDefault();u.stopPropagation()})}});AJS.bind("inline-tasks.status-update.complete",function(s,r){if(r.taskListQueue.length===0){o(".macro-auto-pagination",false);c(".macro-auto-pagination li a").off("click.taskreport.pagination")}});var j=n.closest(".table-wrapper");var h=new e({$wrapper:j,table:n[0],sortReverseSortDefault:g.reverseSort,sortColumnDefault:e.getColumnNameFromSortBy(g.sortColumn),reportParametersDefault:g,pageIndex:0,pageSize:m,pageTotal:k,adaptive:q,pageLimit:f,templates:a,columns:g.columns,onRenderEmptyTable:function(){Confluence.InlineTasks.TasksReport.renderBlankExperiences(j,g.status)},analyticEventKey:"confluence-spaces.tasks.report.sorted",restUrlPagination:b,ajaxUrl:Confluence.getContextPath()+b});h.init();if(q||k>1){h.renderPagination()}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'js/help-tip.js' */
(function(f){function b(){return false}function d(){return true}var l=0,g=new Date().getTime();var k=AJS.contextPath()+"/rest/helptips/1.0/tips";function h(n){n=""+(n||"");return n.replace(/\./g,"-")}function j(o,n){if(AJS.EventQueue&&n&&n.attributes.id){var q={};var p=h(n.attributes.id);q.name="helptips."+p+"."+o;q.properties={};AJS.EventQueue.push(q)}}function c(){return"c"+g+(l++)}var a={dismissedTipIds:[],loaded:f.Deferred(),url:function(){return k},sync:function(o,n){o||(o="get");n||(n=null);return f.ajax(this.url(),{type:o,context:this,dataType:"json",contentType:"application/json",data:n&&JSON.stringify(n),processData:false}).promise()},fetch:function(){var n=this.sync();n.done(function(o){f.merge(this.dismissedTipIds,o);this.loaded.resolve()});return n.promise()},show:function(n){this.loaded.done(n)},dismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=true}else{this.dismissedTipIds.push(o);this.sync("post",{id:o})}},undismiss:function(n){var o=n.attributes.id;if(!o){n._dismissed=false}else{this.dismissedTipIds.splice(f.inArray(o,this.dismissedTipIds),1);this.sync("delete",{id:o})}},isDismissed:function(n){var o=n.attributes.id;return(o)?f.inArray(o,this.dismissedTipIds)>=0:n._dismissed}};var e=AJS.HelpTip=function(n){var o;this.attributes=f.extend({},n);this.attributes.id||(this.attributes.id=false);if(this.attributes.body){this.attributes.bodyHtml=this.attributes.body;delete this.attributes.body}this.cid=c();o=this.attributes.anchor;delete this.attributes.anchor;this.view=o?new i(this,o):new m(this);this.view.$el.addClass("aui-help-tip")};AJS.HelpTip.Manager=a;f.extend(e.prototype,{show:function(){var n=this;AJS.HelpTip.Manager.show(function(){if(!n.isDismissed()){if(AJS.Popups&&AJS.Popups.DisplayController){AJS.Popups.DisplayController.request({name:n.id,weight:1000,show:function(){n.view.show()}})}else{n.view.show()}j("shown",n)}})},dismiss:function(){var n=h(arguments[0]||"programmatically");this.view.dismiss();if(!this.isDismissed()){AJS.HelpTip.Manager.dismiss(this);j("dismissed."+n,this)}},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return AJS.HelpTip.Manager.isDismissed(this)}});var i=function(o,n){this.initialize(o,n)};f.extend(i.prototype,{initialize:function(r,q){var o=this;var s=q.prop("ownerDocument");var p=s!=window.document;if(p){var n=f("iframe").filter(function(){return this.contentDocument==s});n.contents().scroll(function(){var v=f(this).contents().find("body").scrollTop();var w=n.offset().top;var u=o.popup.data("offset-top");var t=o.popup.find(".arrow").height();o.popup.css("top",u-v);o.popup.toggle(v<=u-w-t&&v+n.height()-t+w-o.popup.height()>=u)})}this.model=r;this.beforeHide=b;this.dismissButton=f(AJS.Templates.HelpTip.tipDismiss());this.dismissButton.click(function(t){r.dismiss("close-button");t.preventDefault()});this.popup=AJS.InlineDialog(q,r.cid,function(v,u,t){v.html(AJS.Templates.HelpTip.tipContent(r.attributes));v.find(".helptip-body").after(o.dismissButton);v.unbind("mouseover mouseout");v.find(".helptip-link").click(function(){j("learn-more.clicked",r)});t()},{container:"body",noBind:true,preHideCallback:function(){return o.beforeHide()},calculatePositions:function(t,y,z,x){var w=AJS.InlineDialog.opts.calculatePositions(t,y,z,x);if(p){var v=t.find(".arrow").height();var u=n.contents().find("body").scrollTop();w.popupCss.top=n.offset().top+(q.offset().top-u)+q.height()+v;w.popupCss.left=q.offset().left;n.contents().scroll()}t.data("offset-top",w.popupCss.top);return w}});this.popup.refresh();this._popupHide=this.popup.hide;this.popup.hide=b;this.$el=f(this.popup[0]);AJS.$(document).bind("showLayer",function(v,u,t){if(u==="inlineDialog"&&t.id===r.cid){AJS.InlineDialog.current=null;AJS.$(document.body).unbind("click."+r.cid+".inline-dialog-check");t._validateClickToClose=b;t.hide=b}})},show:function(){var n=this.popup,o=function(p){if(!n.has(p.target).length){n.shadow.remove();n.remove()}};n.show()},dismiss:function(){this.beforeHide=d;this._popupHide()}});var m=function(n){this.initialize(n)};f.extend(m.prototype,{initialize:function(){this.$el=f("<div />")},show:f.noop,dismiss:f.noop});if(AJS.Meta.get("remote-user")){a.fetch()}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-help-tips:common', location = 'templates/help-tip.soy' */
// This file was automatically generated from help-tip.soy.
// Please don't edit this file by hand.

if (typeof AJS == 'undefined') { var AJS = {}; }
if (typeof AJS.Templates == 'undefined') { AJS.Templates = {}; }
if (typeof AJS.Templates.HelpTip == 'undefined') { AJS.Templates.HelpTip = {}; }


AJS.Templates.HelpTip.tipContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.title) ? '<h4 class="helptip-title">' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '', '<div class="helptip-body">', opt_data.bodyHtml, '</div>', (opt_data.url) ? '<a class="helptip-link" href="' + soy.$$escapeHtml(opt_data.url) + '" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>' : '');
  return opt_sb ? '' : output.toString();
};


AJS.Templates.HelpTip.tipDismiss = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<button class="helptip-dismiss aui-button" type="button">', soy.$$escapeHtml("Dismiss"), '</button>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:tasks-feature-discovery-resources', location = 'js/tasks-discovery.js' */
(function(b){function a(){if(!!AJS.HelpTip){var c={id:null,body:Confluence.InlineTasks.Report.Templates.tasksFeatureDiscoveryNotification(),anchor:b("#user-menu-link")};var d=new AJS.HelpTip(c);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.feature.discovery.shown"});d.show()}}b(document).ready(function(){if(b("meta[name=show-task-feature-discovery-flag]").length>0){a()}})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-namespace.js' */
Confluence.Likes=Confluence.Likes||{};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like.js' */
(function(g){var c=0,b=1,d,e={};function f(h){return Confluence.getContextPath()+"/rest/likes/1.0/content/"+h+"/likes"}var a=AJS.PageGadget||(window.parent.AJS&&window.parent.AJS.PageGadget);!a&&AJS.toInit(function(){AJS.I18n.get("com.atlassian.confluence.plugins.confluence-like",function(){var k=AJS.Meta.get("remote-user")||"",j=k.length===0;function h(p,q,o){var n=Confluence.Likes.LikeSummaryFactory.getLikeSummary(p.likes,q,k);if(!n.key){if(k.length>0&&(p.content_type=="page"||p.content_type=="blogpost")){n.key="likes.bethefirst"}}var m=AJS.I18n.getText(n.key,n.args);if(m&&m.length>0){o.html(m)}else{o.empty()}if(!m){return}o.find(".likes").click(function(){var s=g(this).attr("data-content-id");if(d){d.remove();d=undefined}d=new AJS.Dialog(400,365,"likes-dialog");d.addHeader("People who like this");d.addPanel("Panel 1","<div class='spinner-container'></div>");d.addCancel("Close",function(t){t.remove();d=undefined});d.getCurrentPanel().setPadding(0);function r(u,t,v){var x=AJS.dim,w=function(){};AJS.dim=w;try{t.apply(u,v||[])}finally{AJS.dim=x}}r(d,d.show);g.ajax({type:"GET",url:f(s),data:{expand:"user",max:50},dataType:"json"}).done(function(t){if(!d.popup.element.is(":visible")){return}t.remoteUser=k;d.getCurrentPanel().html(Confluence.Templates.Likes.likesDialog(t));g("#likes-dialog").find(".likes-dialog-follow-button").click(function(){var u=g(this);g.ajax({type:"PUT",url:Confluence.getContextPath()+"/rest/likes/1.0/user/"+AJS.Meta.get("remote-user")+"/following?username="+u.attr("data-username"),contentType:"application/json",dataType:"json"}).done(function(){u.replaceWith("Following")})})});return false});Confluence.Binder.userHover();if(p.content_type=="comment"){o.prepend("<span class='comment-action-separator'></span><span class='small-like-icon'></span>")}}function i(m,o,n){if(m===undefined){throw new Error("type is required")}if(o===undefined){throw new Error("contentId is required")}if(n===undefined){throw new Error("contentType is required")}return function(){if(typeof this!=="object"||!this.nodeType||this.nodeType!==1||this.nodeName!="A"){throw new Error("this handler should be bound to a DOM anchor element")}var r=g(this),p=arguments.callee,q=r.next(".like-summary");g.ajax({type:m===c?"POST":"DELETE",url:f(o),data:{"atlassian-token":AJS.Meta.get("atlassian-token")},dataType:"json",timeout:5000}).fail(function(){var t=q.siblings(".like-error"),s="likes."+(m===c?"like":"unlike")+".failed";if(t.length===0){q.after("<span class='like-error' title='"+AJS.I18n.getText(s)+"'></span>")}else{t.attr("title",AJS.I18n.getText(s))}}).success(function(){q.attr("liked",m===c);q.parent().find(".like-error").remove()});r.unbind("click",p).bind("click",m===c?i(b,o,n):i(c,o,n)).html(m===c?"Unlike":"Like");e[o]=e[o]||{content_type:n,likes:[]};if(m===c){e[o].likes.push({user:{name:k}})}else{e[o].likes=g.grep(e[o].likes,function(s){return s.user.name!=k})}h(e[o],o,q);return false}}var l=g(Confluence.Templates.Likes.likeSection({showLikeButton:!j}));g("<div id='likes-and-labels-container' />").insertBefore("#labels-section").append(l).append(g("#labels-section"));if(AJS.Meta.get("page-id")){g.ajax({type:"GET",url:f(AJS.Meta.get("page-id")),dataType:"json"}).done(function(n){if(AJS.Meta.get("remote-user")){var m=g.grep(n.likes,function(q){return q.user.name==AJS.Meta.get("remote-user")}).length>0;var p=n.content_type;l.find(".like-button").click(m?i(b,AJS.Meta.get("page-id"),p):i(c,AJS.Meta.get("page-id"),p)).html(m?"Unlike":"Like")}var o=l.find(".like-summary");h(n,n.content_id,o);if(o.html()==""&&j){l.hide()}e[n.content_id]=n})}Confluence.Likes.appendAction=function(p){var o=p.find(".comment-actions-primary");var n=o.find("li[class~='comment-date']");var m=g(Confluence.Templates.Likes.commentLikeSection({showLikeButton:!j}));if(n.length==0){o.find("li:last-child").after(m)}else{n.before(m)}};Confluence.Likes.reload=function(){if(AJS.Meta.get("page-id")){g.ajax({type:"GET",url:Confluence.getContextPath()+"/rest/likes/1.0/content/"+AJS.Meta.get("page-id")+"/comment-likes",dataType:"json"}).done(function(m){g.each(m,function(q,n){var o=g("#comment-"+q);var p=o.find(".like-summary");h(n,q,p);e[q]=n});j&&g("#page-comments").find(".like-summary:empty").each(function(){g(this).closest(".comment-action-like").hide()});g("#page-comments .comment").each(function(){Confluence.Likes.updateComment(g(this),m)})})}};Confluence.Likes.updateComment=function(p,o){var q=p.attr("id");if(!q){return true}var m=(/^comment-(\d+)$/.exec(q)||[])[1];if(!m){throw new Error('Expecting ID attribute of comment to be in format "comment-XXX", found: '+q)}var n=o[m]&&AJS.Meta.get("remote-user")&&g.grep(o[m].likes,function(r){return r.user.name==AJS.Meta.get("remote-user")}).length>0;p.find(".like-button").click(n?i(b,m,"comment"):i(c,m,"comment")).html(n?"Unlike":"Like")};Confluence.Likes.appendAction(g("#page-comments"));Confluence.Likes.reload()},function(){throw new Error("Error downloading translation files for likes plugin.")})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/com/atlassian/confluence/plugins/like/js/like-summary-factory.js' */
(function(b){var a=3;Confluence.Likes.LikeSummaryFactory={getLikeSummary:function(e,j,h){if(!e||e.length===0){return{key:""}}if(!j){throw new Error("contentId is required.")}var g,i=[],f=[];b.each(e,function(k,l){if(l.user&&l.user.name==h){g=l}else{if(i.length<a&&l.user.followedByRemoteUser){i.push(l)}else{f.push(l)}}});var d=["likes.summary"],c=[];if(g!=null){d.push(".you")}if(i.length>0){d.push(".");d.push(i.length);d.push(".promoted");b.each(i,function(k,l){c.push(Confluence.Templates.Likes.userLink(l))})}if(f.length==1){d.push(".1.non-promoted");c.push(Confluence.Templates.Likes.userLink(f[0]))}else{if(f.length>1){d.push(".x.non-promoted");c.push(f.length);c.push('class="likes" data-content-id="'+j+'"')}}return{key:d.join(""),args:c.length===0?undefined:c}}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-like:content-like-resources', location = '/templates/com/atlassian/confluence/plugins/like/soy/like.soy' */
// This file was automatically generated from like.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Likes == 'undefined') { Confluence.Templates.Likes = {}; }


Confluence.Templates.Likes.likeSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="likes-section">', (opt_data.showLikeButton) ? '<a href="" class="like-button">' + soy.$$escapeHtml("Like") + '</a>' : '', '<span class="like-summary"></span></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.commentLikeSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="comment-action-like">', (opt_data.showLikeButton) ? '<a href="" class="like-button">' + soy.$$escapeHtml("Like") + '</a>' : '', '<span class="like-summary"></span></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.likesDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="likes-dialog-body"><ol>');
  var likeList20 = opt_data.likes;
  var likeListLen20 = likeList20.length;
  for (var likeIndex20 = 0; likeIndex20 < likeListLen20; likeIndex20++) {
    var likeData20 = likeList20[likeIndex20];
    output.append('<li><div class="avatar-container"><a href="', soy.$$escapeHtml(likeData20.user.url), '"><img class="like-user-avatar" src="', soy.$$escapeHtml(likeData20.user.avatarUrl), '"></a></div><div class="like-user"><a class="like-user-link" href="', soy.$$escapeHtml(likeData20.user.url), '">', soy.$$escapeHtml(likeData20.user.fullName), '</a></div><div class="follow-button-container aui-toolbar"><ul class="toolbar-group"><li class="toolbar-item">', (likeData20.user.followedByRemoteUser) ? soy.$$escapeHtml("Following") : (opt_data.remoteUser && opt_data.remoteUser.length > 0) ? '<button data-username="' + soy.$$escapeHtml(likeData20.user.name) + '" class="likes-dialog-follow-button toolbar-trigger">' + soy.$$escapeHtml("Follow") + '</button>' : '', '</li></ul></div></li>');
  }
  output.append('</ol></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Likes.userLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.user.url), '" class="confluence-userlink" data-username="', soy.$$escapeHtml(opt_data.user.name), '">', soy.$$escapeHtml(opt_data.user.fullName), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:editor-view-resources', location = 'jscripts/view-content/pushed-navigation.js' */
/**
 * This resource is included in the editor context, not just quick-edit
 *
 * We need to hook into the popstate event even if the editor is in full mode to be able to handle
 * navigation actions into "pushed" history entries.
 */
(function ($){

    var supportsPushState = !!window.history.pushState; // Everything but IE8 and IE9
    var ignoreNextPushState = false;

    var currentPath = window.location.href;

    function actuallyNavigatePlease() {
        if (!supportsPushState) { // IE9 and below, just navigate away
            window.location.reload();
        } else {
            if (!hasOnlyHashChanged(currentPath, window.location.href)){
                $(window).unbind('popstate', handleNavigationEvent);
                window.location.reload();
            }
        }
    }

    function hasOnlyHashChanged(initialPath, newPath){
        return initialPath.split('#')[0] == newPath.split("#")[0];
    }

    function trackLocation(e){
        currentPath = window.location.href;
    }

    function handleEditorNavigationEvent() {
        function restoreUrl() {
            if (supportsPushState) {
                // ignore the next pushstate that history.forward is going to trigger.
                ignoreNextPushState = true;
                window.history.forward();
            } else {
                window.location.hash = "editor";
            }
        }

        var message = Confluence.Editor.Drafts.unloadMessage();

        // If we have a message it means we should implement our own version of beforeunload.
        if (message) {

            // disable before unload for quick-edit when an unloadMessage is available
            Confluence.Editor.Drafts.unBindUnloadMessage();

            if (confirm(message + "\n\n" + "Press OK to continue, or Cancel to stay on the current page.")) {
                // If the user pressed OK it means they want to leave the page
                AJS.trigger("analytics", { name: "rte.quick-edit.confirmation.leaving" });
                actuallyNavigatePlease();
            } else {
                // If the user pressed cancel they want to keep editing so we need to restore the edit url
                AJS.trigger("analytics", { name: "rte.quick-edit.confirmation.staying" });
                restoreUrl();

                // We also bind the beforeUnload message again
                Confluence.Editor.Drafts.bindUnloadMessage();
            }
        } else {
            actuallyNavigatePlease();
        }
    }

    function handleHashChange() {
        var editorActivated = AJS.Rte && AJS.Rte.getEditor();
        if (window.location.hash === '#editor'){
            // this is pushed by quick edit page
            if (editorActivated){
                // ignored. we are in the editor already
            }
            else {
                actuallyNavigatePlease();
            }
        } else {
            if (editorActivated){
                handleEditorNavigationEvent(); // want to leave an open editor
            } else {
                actuallyNavigatePlease();
            }
        }
    }

    function handleNavigationEvent() {
        if (ignoreNextPushState){
            ignoreNextPushState = false;
            return;
        }

        if (AJS.Rte && AJS.Rte.getEditor()){
            handleEditorNavigationEvent(); // want to leave an open editor
        } else {
            actuallyNavigatePlease();
        }
    }

    var init = function(){
        // the page url could have changed on page load (i.e: by the analytics plugin)
        // so we make sure we save the current href as the initial one.
        trackLocation();

        if (!supportsPushState) {
            // IE9 doesn't support pushState.
            $(window).bind("hashchange", handleHashChange);
        }
        else {
            $(window).bind("popstate", handleNavigationEvent);
            $(window).bind("rte-quick-edit-push-state", trackLocation);
        }
    };

    AJS.toInit(function(){
        // CONFDEV-25365
        // https://code.google.com/p/chromium/issues/detail?id=63040
        // avoid the popstate event that WebKit fires on document load
        setTimeout(init, 0);
    });

    // this needs to be bound before DOM ready because 'rte-quick-edit-enable-handlers' event will be
    // triggered by quick-edit in DOM ready. We need to ensure there is an event handler
    // bound to #editPageLink click event before actually triggering it.
    AJS.bind("rte-quick-edit-enable-handlers", function(){
        // keeping compatibility with urls created by browsers that don't support pushState.
        if (window.location.hash === '#editor'){
            $('#editPageLink').click();
        }
    });

}($));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/soy/sharelinks-urlmacro-templates.soy' */
// This file was automatically generated from sharelinks-urlmacro-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.SharelinksUrlMacro == 'undefined') { Confluence.Blueprints.SharelinksUrlMacro = {}; }


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class="aui-button sharelinks-urlmacro-button" href="');
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript(opt_data, output);
  output.append('"><span>', soy.$$escapeHtml("Share on Confluence"), '</span></a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.SharelinksUrlMacro.bookmarkletScript = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('javascript:(function(){var screenWidth=screen.width,screenHeight=screen.height,popupWidth=640,popupHeight=580,popupLeft=0,popupTop=0; if(screenWidth>popupWidth){popupLeft=Math.round((screenWidth/2)-(popupWidth/2));}if(screenHeight>popupHeight){popupTop=Math.round((screenHeight/2)-(popupHeight/2));}window.open(\'', opt_data.bookmarkletActionURL, '?bookmarkedURL=\'+encodeURIComponent(window.location.href), \'\',\'left=\'+popupLeft+\',top=\'+popupTop+\',width=\'+popupWidth+\',height=\'+popupHeight+\',personalbar=0,toolbar=0,scrollbars=1,resizable=1\');}());');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-urlmacro-resources', location = 'com/atlassian/confluence/plugins/sharelinksurlmacro/js/sharelinks-urlmacro.js' */
AJS.toInit(function(a){a(".sharelinks-urlmacro-button").click(function(){alert("Drag this link to your toolbar");return false})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-item/file-item.soy' */
// This file was automatically generated from file-item.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.fileDialogListItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="attached-file loading"><div class="file-container"  title="', soy.$$escapeHtml(opt_data.file.toolTip), '">', (opt_data.file.isImage) ? '<img class="thumbnail hidden" src="' + soy.$$escapeHtml(opt_data.file.nonceUrl) + '" ><a href="' + soy.$$escapeHtml(opt_data.file.downloadUrl) + '" class="abs-icon zoom"><span class="aui-icon aui-icon-small aui-iconfont-search-small">Zoom</span></a><p class="hidden image-preview-throbber">&nbsp;</p>' : '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.iconClass) + '" ><span class="aui-icon aui-icon-small aui-iconfont-devtools-file">File</span></span>', '<span class="aui-icon aui-icon-small aui-iconfont-success abs-icon select">Select</span></div><span class="caption filename" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', opt_data.highlightedImageNameContent, '</span><span class="caption owner-title ', soy.$$escapeHtml(opt_data.parentTitleClass), '" title="', soy.$$escapeHtml(opt_data.file.parentTitle), '">', opt_data.highlightedParentTitleContent, '</span></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.File.fileDialogListItemPlaceHolder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="attached-file loading"><div class="file-container" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', (opt_data.file.isImage) ? '<img class="thumbnail" src="' + soy.$$escapeHtml(opt_data.file.url) + '">' : '<span class="thumbnail ' + soy.$$escapeHtml(opt_data.file.fileType) + '"><span class="aui-icon aui-icon-small aui-iconfont-devtools-file">File</span></span>', '<div id="docs-progress-bar-', soy.$$escapeHtml(opt_data.file.fileId), '" class="aui-progress-indicator"><span class="aui-progress-indicator-value"></span></div><div class="overlay"></div></div><span class="caption filename" title="', soy.$$escapeHtml(opt_data.file.fileName), '">', soy.$$escapeHtml(opt_data.file.fileName), '</span><span class="caption owner-title hidden" title=""></span></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-item/file-item-model.js' */
(function(a,c){var b=Backbone.Model.extend({defaults:{fileName:"",toolTip:"",nonceUrl:"",isImage:false,isFilePlaceHolder:false,isSelect:false,thumbnailUrl:"",downloadUrl:""},initialize:function(){this._findDownloadUrl();this._findThumbnailUrl();this.set("fileName",this.getFileName());this.set("toolTip",this.getToolTip());this.set("nonceUrl",this.getNonceUrl());this.set("isImage",this.isImage());if(this.get("attachmentId")){this.set("id",this.get("attachmentId"))}},isImage:function(){return !!this.get("thumbnailUrl")},getFileName:function(){return this.get("fileName")||this.get("name")||""},getDestinationUrl:function(){return AJS.REST.wikiLink(this.attributes).destination},getNonceUrl:function(){var e=this.get("thumbnailUrl");if(e){var d=(e.indexOf("?")+1?"&":"?")+"nonce="+(+new Date());e=e+d}return e},getRelativeUrl:function(d){if(!d){return d}if(d.indexOf(c.getBaseUrl())===0){d=d.replace(c.getBaseUrl(),"");d=c.getContextPath()+d}return d},getToolTip:function(){var d="";if(this.get("space")){d=" ("+this.get("space").name+")"}return this.getFileName()+d},getAttachId:function(){return this.get("id")||this.get("attachmentId")||""},getOwnerId:function(){return this.get("ownerId")||""},_findThumbnailUrl:function(){if(!this.get("thumbnailUrl")&&this.get("thumbnailLink")){this.set("thumbnailUrl",this.getRelativeUrl(this.get("thumbnailLink").href))}},_findDownloadUrl:function(){var d=this.get("link");if(!this.get("downloadUrl")&&d){var e=_.findWhere(d,{rel:"download"}).href;this.set("downloadUrl",this.getRelativeUrl(e))}}});c.Editor=c.Editor||{};c.Editor.FileDialog=c.Editor.FileDialog||{};c.Editor.FileDialog.FileItemModel=b})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-item/file-item-view.js' */
(function(b,c){var a=Backbone.View.extend({template:c.Templates.File.fileDialogListItem,model:null,initialize:function(d){var e=this;this.eventListener=d.eventListener;this.model=d.model;this.showParentTitle=d.showParentTitle;this.highlighter=d.highlighter;this.model.on("change:isSelect",function(){e.$el.toggleClass("selected",e.model.get("isSelect"))})},render:function(){var e=this.highlighter||new c.Highlighter(),f=this.model.getFileName();var d={file:this.model.attributes,parentTitleClass:this.showParentTitle?"":"hidden",highlightedImageNameContent:e.highlight(f),highlightedParentTitleContent:e.highlight(this.model.attributes.parentTitle||"")};this.$el=b(this.template(d));this.el=this.$el[0];this.delegateEvents();this.$el.attr("data-attachment-id",this.model.getAttachId());this.$el.attr("data-owner-id",this.model.getOwnerId());this.$el.attr("data-destination",this.model.getDestinationUrl());this.$el.find(".file-container").tooltip({aria:true});if(this.model.get("isImage")){this._renderMoreForImage()}else{this.$el.removeClass("loading")}return this},_renderMoreForImage:function(){var g=this;var f=this.$el.find(".image-preview-throbber").removeClass("hidden"),d=Raphael.spinner(f[0],8,"#666");var e=this.$el.find("img").load(function(){d();f.remove();e.removeClass("hidden");g.$el.removeClass("loading")});b(".zoom",this.$el).fancybox({padding:0,zoomSpeedIn:500,zoomSpeedOut:500,overlayShow:true,overlayOpacity:0.5})}});c.Editor=c.Editor||{};c.Editor.FileDialog=c.Editor.FileDialog||{};c.Editor.FileDialog.FileItemView=a})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-item/file-placeholder-view.js' */
(function(b,c){var a=Backbone.View.extend({model:null,template:c.Templates.File.fileDialogListItemPlaceHolder,initialize:function(d){this.model=d.model;this.eventListener=d.eventListener;this.eventListener.on("file.placeholder.process",_.bind(this._setUploadInProgress,this))},render:function(){this.$el=b(this.template({file:this.model.attributes}));this.el=this.$el[0];return this},_setUploadInProgress:function(g,e,d){var f=this.$el.find("#docs-progress-bar-"+d||"");if(!f.length){return}if(g){f.show();AJS.progressBars.update(f,e)}else{f.hide()}}});c.Editor=c.Editor||{};c.Editor.FileDialog=c.Editor.FileDialog||{};c.Editor.FileDialog.FilePlaceHolderView=a})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-list/file-list-collection.js' */
(function(b,d){var c=d.Editor.FileDialog.FileItemModel;var a=Backbone.Collection.extend({model:c,initialize:function(){var e=this;this.on("add",function(f){if(f.get("isFilePlaceHolder")){e.trigger("add.placeholder",f)}})},clearSelection:function(){this.each(function(e){e.get("isSelect")&&e.set("isSelect",false)});this.trigger("clear.selection")},getAllSelectItems:function(){return this.filter(function(e){return e.get("isSelect")})}});d.Editor=d.Editor||{};d.Editor.FileDialog=d.Editor.FileDialog||{};d.Editor.FileDialog.FileListCollection=a})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-list/file-list-view.js' */
(function(d,e){var b=e.Editor.FileDialog.FileItemView,c=e.Editor.FileDialog.FilePlaceHolderView;var a=Backbone.View.extend({eventListener:null,events:{click:"_clearSelection","click li.attached-file":"_clickItem","dblclick li.attached-file":"_doubleClickItem","mouseenter li.attached-file":"_toggleHoverClass","mouseleave li.attached-file":"_toggleHoverClass"},initialize:function(f){var g=this;this.eventListener=f.eventListener;this.collection=f.collection;this.collection.on("reset",_.bind(this._clearFileList,this));this.collection.on("add.placeholder",_.bind(this._renderItemPlaceHolder,this));this.collection.on("clear.selection",function(){g.context.clearSelection();if(g.$fileList){g.$fileList.find(".selected").removeClass("selected");g.$fileList.find(".current").removeClass("current")}});this.updateDialogContext(f.context);this.updatePanelContext(f.panelContext)},render:function(){var f=this;this.$el.find(".loading-message").addClass("hidden");this.$el.find(".no-files").remove();this.$fileList.hide();this.collection.each(function(g){f._renderItem(g)});if(this.$fileList.find("li").length===0){this.$fileList.before(d("<p></p>").addClass("no-files").text(this.noFileMessage));this.$fileList.hide()}else{this.$fileList.show()}if(!AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){if(this.justAttached.length){this.$fileList.find("li:first").click()}}this.$el.sizeToFit();this._checkError();this._detectLastItemInLine();return this},_detectLastItemInLine:function(){this.$fileList.find("li").removeClass("last").filter(":nth-child(4n)").addClass("last")},_renderItem:function(g){var f=new b({model:g,showParentTitle:this.showParentTitle,highlighter:this.highlighter,eventListener:this.eventListener});var h=f.render().el;var i=g.getFileName().toLowerCase();if(i&&d.inArray(i,this.justAttached)!==-1){this.$fileList.prepend(h);if(AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){f.$el.trigger("click")}}else{this.$fileList.append(h)}},_renderItemPlaceHolder:function(g){var f=new c({model:g,eventListener:this.eventListener});this.$fileList.prepend(f.render().el);this.$fileList.show();this._detectLastItemInLine()},updatePanelContext:function(f){if(!f){return}this.panelContext=f;this.justAttached=d.map(this.panelContext.justAttached||[],function(g){return g&&g.toLowerCase()});this.errors=this.panelContext.errors||[];this.fileContainer=this.panelContext.fileContainer;this.$el=this.fileContainer;this.el=this.$el[0];this.$fileList=this.$el.find(".file-list");this.delegateEvents();this.noFileMessage=this.panelContext.noFileMessage;this.showParentTitle=this.panelContext.showParentTitle;this.highlighter=this.panelContext.highlighter;this.displayErrors=this.panelContext.displayErrors},updateDialogContext:function(f){if(!f){return}this.context=f;this.contextOptions=this.context.options},_checkError:function(){var g=this;var f=this.collection.map(function(h){return h.getFileName().toLowerCase()});d.each(this.justAttached,function(h,i){if(d.inArray(i,f)===-1){g.errors.push(AJS.format("Attached the file \u2018{0}\u2019 but no thumbnail could be displayed. The file may not be an image.",i))}});if(this.errors&&this.errors.length){this.displayErrors(this.errors)}},_clearSelection:function(g){var f=g&&d(g.target);if(f&&f.hasClass("close-tip")){return}this.collection.clearSelection()},_clearFileList:function(){this.$fileList&&this.$fileList.empty()},_clickItem:function(i){i.stopPropagation();i.preventDefault();var f=d(i.target);if(f.closest(".zoom").length){return}if(!i.isTrigger){this.$fileList.find(".current").removeClass("current")}var g=f.closest("li");var j=g.attr("data-attachment-id");var h=this.collection.get(j);if(h&&!h.get("isFilePlaceHolder")){if(AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){h.set("isSelect",!h.get("isSelect"))}else{this.collection.clearSelection();h.set("isSelect",true)}this.context.setSelectItems(this.collection.getAllSelectItems())}},_doubleClickItem:function(h){var f=d(h.target).closest("li");var i=f.attr("data-attachment-id");var g=this.collection.get(i);if(g&&!g.get("isFilePlaceHolder")){f.click();this.context.insert()}},_toggleHoverClass:function(f){d(f.target).closest("li").toggleClass("hover")}});e.Editor=e.Editor||{};e.Editor.FileDialog=e.Editor.FileDialog||{};e.Editor.FileDialog.FileListView=a})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/base-panel/base-panel-view.js' */
(function(a,c){var b=Backbone.View.extend({context:null,cssContainer:"",cssPanel:"",textErrorSearch:"Error searching for attachments from Confluence. The server may be unavailable.",textErrorRetrieving:"Error retrieving attachments from Confluence. The server may be unavailable.",textDefaultErrorMessage:"Could not upload the file to Confluence. The server may be unavailable.",textUploading:"Image uploading...",initialize:function(){},createPanel:function(e){this.context=e;this.render();var f=this;var d=this.context.getPanel(this.panelId);if(d){d.onselect=function(){f.context.clearSelection();f.focus&&f.focus()}}},render:function(){return this},getPanelElement:function(){return a(this.cssPanel,this.context.baseElement)},getContainer:function(){return a(this.cssContainer)},getForm:function(){return a("form",this.getPanelElement())},clearContainer:function(){var d=this.getContainer();d.find(".loading-message").removeClass("hidden");d.find(".warning").addClass("hidden")},clearErrors:function(){this.messenger.clearMessages()},displayErrors:function(d){this.uploader.displayErrors(d);this.getContainer().sizeToFit()},getNoFileContainer:function(){return this.getPanelElement().find(".no-files")},getFileListContainer:function(){return this.getPanelElement().find("ul.file-list")}});b.hasDarkUploadAllFileTypes=AJS.DarkFeatures.isEnabled("allow.upload.all.file.types");c.Editor=c.Editor||{};c.Editor.FileDialog=c.Editor.FileDialog||{};c.Editor.FileDialog.BasePanel=b;c.Editor.FileDialog.eventListener=_.extend({},Backbone.Events)})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/attachments-panel/attachments-panel.soy' */
// This file was automatically generated from attachments-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.uploadFileForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.hasAttachPermission) ? '<div id="upload-attachment">' + ((opt_data.isNonSupportDragDrop) ? '<form action="' + soy.$$escapeHtml("") + '/pages/attachfile.action" method="post" enctype="multipart/form-data">' : '<form>') + '<label id="upload-files-button" class="aui-button upload-files"><span class="file-upload-icon">' + ((opt_data.hasSupportUploadAllFileType) ? soy.$$escapeHtml("Upload files") : soy.$$escapeHtml("Upload images")) + '</span>&nbsp;&nbsp;' + ((opt_data.hasSupportUploadAllFileType) ? soy.$$escapeHtml("Upload files") : soy.$$escapeHtml("Upload images")) + ((opt_data.isNonSupportDragDrop) ? '<input name="file_0" type="file" class="upfile invisible">' : '') + '</label>' + ((opt_data.isNonSupportDragDrop) ? '<input type="hidden" name="minorEdit_0" value="true" /><input type="hidden" name="atl_token" value="' + soy.$$escapeHtml(opt_data.atlToken) + '" />' : '') + '</form>' + ((opt_data.isNonSupportDragDrop) ? '<div class="upload-in-progress hidden">' + soy.$$escapeHtml("Image uploading...") + '</div>' : '') + '</div>' : '', (opt_data.hasAttachPermission) ? '<div class="divider"></div>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.File.attachedFilesPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="attached-files" class="scroll-wrapper">');
  aui.message.warning({title: '', closeable: 'true', content: ''}, output);
  output.append('<div class="loading-message">', soy.$$escapeHtml("Loading\u2026"), '</div><ul class="file-list"></ul></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/attachments-panel/attachments-panel-view.js' */
(function(d,g){var a=g.Editor.FileDialog.FileListView,f=g.Editor.FileDialog.FileItemModel,b=g.Editor.FileDialog.FileListCollection,e=g.Editor.FileDialog.BasePanel;var c=e.extend({id:"attachments",panelId:"",cssPanel:".attachments-panel",cssContainer:"#attached-files",textNoFileMessage:e.hasDarkUploadAllFileTypes?"There are no files attached to this page.":"There are no images attached to this page.",textPanelTitle:e.hasDarkUploadAllFileTypes?"File library":"Attached Images",initialize:function(h){e.prototype.initialize.call(this);this.eventListener=h.eventListener;this.context=null;this.collection=new b();this.fileListView=new a({collection:this.collection,eventListener:this.eventListener});this.xhrCount=0},render:function(){this.eventListener.trigger("AttachmentsPanelView.render",this);this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"attachments-panel");this.el=this.getPanelElement();this.$el=d(this.el);this.delegateEvents();this.uploader=this.getUploaderController(this.context);this.messenger=this.uploader.getMessageHandler();if(this._canAttachFiles()){this.refresh()}else{this.refresh([],["You are not permitted to attach files on this piece of content. You may want to contact space admin for permissions to do this."])}return this},_buildPanelContext:function(j,l,k){var i=this;var h=[];if(j){h=j.attachment?j.attachment:j.images}return{fileContainer:this.getContainer(),files:h||[],noFileMessage:this.textNoFileMessage,justAttached:l,showParentTitle:false,errors:k,displayErrors:function(m){i.uploader.clearErrors();i.uploader.displayErrors(m)}}},getPanel:function(){return g.Templates.File.uploadFileForm({isNonSupportDragDrop:!this._hasXhrSupport(),atlToken:AJS.Meta.get("atl-token"),hasAttachPermission:this._canAttachFiles(),hasSupportUploadAllFileType:e.hasDarkUploadAllFileTypes})+g.Templates.File.attachedFilesPanel()},_overideUploaderClientForNonDragDropSupport:function(h){var i=this;return{onUploadSuccess:function(j){i.refresh(d.map(j||[],function(k){return k.name.toLowerCase()}))},pack:function(){i.getContainer().sizeToFit()},getDefaultErrorMessage:function(){return i.textDefaultErrorMessage},getDefaultUploadingMessage:function(){return i.textUploading},displayErrors:function(j){this.getMessageHandler().displayMessages(j);i._showErrorIconInMessageBox();this.pack()}}},getUploaderController:function(){var h=this;return g.AttachmentUploader({baseElement:d("#attached-files",h.context.baseElement)},_.bind(this._overideUploaderClientForNonDragDropSupport,this))},refresh:function(k,j){var h=this;k=k?d.map(k,function(l){return l&&l.toLowerCase()}):[];this.clearContainer();this.collection.reset();this.xhrCount+=1;var i=this.xhrCount;AJS.getJSONWrap({url:this._getUrlREST(),data:{contentId:AJS.Meta.get("attachment-source-content-id")},messageHandler:this.messenger,loadingElement:this.getContainer().find(".loading-message"),errorMessage:this.textErrorRetrieving,successCallback:function(l){if(i===h.xhrCount){h._onSuccessLoadFiles(l,k,j)}},errorCallback:_.bind(this._onErrorLoadFiles,this)})},_onSuccessLoadFiles:function(j,l,k){var h=this;var i=this._buildPanelContext(j,l,k);this.fileListView.updatePanelContext(i);this.collection.reset();d.each(i.files,function(m,n){h.collection.add(new f(n))});this.fileListView.render();AJS.Meta.set("num-attachments",this.collection.length);d("#rte-button-attachments").trigger("updateLabel")},_onErrorLoadFiles:function(){var h=this._buildPanelContext();this.fileListView.updatePanelContext(h);this._showErrorIconInMessageBox()},_showErrorIconInMessageBox:function(){var h=this.messenger.getMessageContainer().find("ul");h.toggleClass("one-message",h.find("li").length===1);h.closest(".aui-message").append("<span class='aui-icon icon-warning'></span>")},setUploadInProgress:function(j,i,h){if(this.uploader.setUploadInProgress){this.uploader.setUploadInProgress(j,i,h)}else{this.eventListener.trigger("file.placeholder.process",j,i,h)}},_hasXhrSupport:function(){var j,h;try{j=new XMLHttpRequest();h=!!(j.sendAsBinary||j.upload)&&!(jQuery.browser.mozilla&&jQuery.browser.version.indexOf("1.9.1")>-1)}catch(i){h=false}j=null;return h},addPreviewImage:function(i,j){if(!(window.File&&window.FileReader&&window.FileList&&window.Blob)){return}if(j&&j.nativeFile&&j.nativeFile.type&&this._isImageType(j.nativeFile.type)){var k=this;var h=new FileReader();h.onload=function(m){var l=new Image();l.onload=function(){k._addFilePlaceHolderToCollection(j,m,true)};l.src=h.result};h.readAsDataURL(j.nativeFile)}else{this._addFilePlaceHolderToCollection(j,null,false)}},_addFilePlaceHolderToCollection:function(h,i,j){this.collection.add(new f({isFilePlaceHolder:true,fileName:h.name,fileId:h.id,fileNative:h.nativeFile,url:i?i.target.result:"",isImage:j,niceType:j?"Image":"",fileType:h.nativeFile.type,thumbnailUrl:i?i.target.result:""}))},_isImageType:function(h){return h.indexOf("image/")===0},_canAttachFiles:function(){return AJS.Meta.getBoolean("can-attach-files")},_getUrlREST:function(){var h=parseInt(AJS.Meta.get("page-id"),10);var i=parseInt(AJS.Meta.get("draft-id"),10);h=h||i;var j=e.hasDarkUploadAllFileTypes?AJS.REST.makeUrl("content/"+h+"/attachments.json"):g.getContextPath()+"/pages/attachedimages.action";return j},focus:function(){this.collection.clearSelection()}});g.Editor=g.Editor||{};g.Editor.FileDialog=g.Editor.FileDialog||{};g.Editor.FileDialog.AttachmentsPanelView=c})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/external-panel/external-panel.soy' */
// This file was automatically generated from external-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.webPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="insert-web-image"><form id="insert-web-image-form" action="#" class="aui"><fieldset class="inline"><div class="web-image-input"><label for="insert-web-image-image-url" id="insert-web-image-image-url-label">', soy.$$escapeHtml("Image URL:"), '</label><input type="text" class="text image-url" value="http://" id="insert-web-image-image-url" name="insert-web-image-image-url"></div><input type="submit" class="image-preview aui-button" value="', soy.$$escapeHtml("Preview"), '"></fieldset></form><p class="faraway image-preview-area"></p><p class="hidden image-preview-error">', soy.$$escapeHtml("This image couldn\x27t be loaded for preview. Please check the URL."), '</p><p class="hidden image-preview-throbber">&nbsp;</p></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/external-panel/external-panel-view.js' */
(function(b,d){var c=d.Editor.FileDialog.BasePanel;var a=d.Editor.FileDialog.BasePanel.extend({id:"external",panelId:"",cssPanel:".web-image-panel",cssContainer:".insert-web-image",textPanelTitle:c.hasDarkUploadAllFileTypes?"Image from the web":"From the Web",template:d.Templates.File.searchPanel,events:{"submit form":"_submit","keyup input.image-url":"_checkAllowInsert","click input.image-url":"_checkAllowInsert","blur input.image-url":"_checkAllowInsert"},initialize:function(e){c.prototype.initialize.call(this);this.eventListener=e.eventListener;this.context=null;this.token=0},render:function(){this.panelId=this.context.addPanel(this.textPanelTitle,this.getPanel(),"web-image-panel");this.container=this.getContainer();this.preview=this.container.find(".image-preview-area");this.throbber=this.container.find(".image-preview-throbber");this.killSpinner=null;this.error=this.container.find(".image-preview-error")},focus:function(){this._getImageInput().focus();this._checkAllowInsert()},getPanel:function(){this.$el=b(d.Templates.File.webPanel());this.el=this.$el[0];this.delegateEvents();return this.el},_getImageInput:function(){return b("input.image-url",this.context.baseElement)},_submit:function(g){g.preventDefault();g.stopPropagation();var f=this;var h=this._getImageInput().val();if(h==="http://"){return false}this.token++;var i=this.token;this.preview.addClass("faraway").html("");this.throbber.removeClass("hidden");if(!this.killSpinner){this.killSpinner=Raphael.spinner(this.throbber[0],60,"#666")}this.error.addClass("hidden");b("<img>").load(function(){if(i===f.token){f.killSpinner();f.killSpinner=null;f.throbber.addClass("hidden");f.preview.removeClass("faraway");f._checkAllowInsert()}}).error(function(){if(i===f.token){f.killSpinner();f.killSpinner=null;f.throbber.addClass("hidden");f.error.removeClass("hidden");f._checkAllowInsert()}}).appendTo(this.preview).attr("src",h)},_checkAllowInsert:function(){var f=this.$el.find("input.image-url").val();var e=(f!==""&&f!=="http://")?f:[];this.context.setSelectItems(e)}});d.Editor=d.Editor||{};d.Editor.FileDialog=d.Editor.FileDialog||{};d.Editor.FileDialog.ExternalPanelView=a})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/search-panel/search-panel.soy' */
// This file was automatically generated from search-panel.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.searchPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="search-panel-wrapper"><div id="search-image"><form class="aui search-form" id="search-image-form" action="#"><fieldset class="inline"><div class="search-input"><label for="search-image" class="assistive">', soy.$$escapeHtml("Search"), '</label><input autofocus type="text" class="text search-image-text" size="50" autocomplete="off"></div><select class="search-space select" id="search-image-space-select"><option value="">', soy.$$escapeHtml("All Spaces"), '</option><option value="', soy.$$escapeHtml(opt_data.spaceKey), '">', soy.$$escapeHtml(opt_data.spaceName), '</option></select><button type="submit" class="aui-button search-button">', soy.$$escapeHtml("Search"), '</button></fieldset></form></div><div id="searched-images" class="scroll-wrapper"><div class="loading-message hidden">', soy.$$escapeHtml("Searching\u2026"), '</div><ul class="file-list"></ul></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/search-panel/search-panel-view.js' */
(function(c,g){var f=g.Editor.FileDialog.FileItemModel,a=g.Editor.FileDialog.FileListView,b=g.Editor.FileDialog.FileListCollection,e=g.Editor.FileDialog.BasePanel;var d=g.Editor.FileDialog.BasePanel.extend({id:"search",panelId:"",cssPanel:".search-panel",cssContainer:"#searched-images",template:g.Templates.File.searchPanel,events:{"submit form":"_submit"},initialize:function(h){e.prototype.initialize.call(this);this.eventListener=h.eventListener;this.context=null;this.collection=new b();this.fileListView=new a({collection:this.collection,eventListener:this.eventListener})},getPanel:function(){this.$el=c(this.template({spaceKey:AJS.Meta.get("space-key"),spaceName:AJS.Meta.get("space-name")}));this.el=this.$el[0];this.delegateEvents();return this.el},_buildPanelContext:function(h){return{fileContainer:this.$el,files:h.result,noFileMessage:"No search results found.",justAttached:false,showParentTitle:true,highlighter:new g.Highlighter(this._getQuery().split(" "))}},render:function(){this.fileListView.updateDialogContext(this.context);this.panelId=this.context.addPanel("Search",this.getPanel(),"search-panel")},_submit:function(h){h.preventDefault();h.stopPropagation();if(this._getQuery()){this.clearContainer();this.collection.reset();this._loadImages().then(_.bind(this._onSuccessLoadFiles,this),_.bind(this._onErrorLoadFiles,this))}},_loadImages:function(){return c.ajax({type:"GET",dataType:"json",url:g.getContextPath()+AJS.REST.getBaseUrl()+"search.json",data:{spaceKey:this.getForm().find(".search-space").val(),query:this._getQuery(),search:"name",type:"attachment",attachmentType:e.hasDarkUploadAllFileTypes?[]:["image"],groupResults:e.hasDarkUploadAllFileTypes?true:false,maxResultsPerGroup:50,searchParentName:true,pageSize:g.Defaults.maxResults}})},_onSuccessLoadFiles:function(i){var k=this,h={result:[]};if(i.result&&i.result.length>0){h=i}else{if(i.group&&i.group[0]){h=i.group[0]}}var l=this._buildPanelContext(h);var j=l.files;this.collection.reset();c.each(j,function(m,n){k.collection.add(new f(n))});this.fileListView.updatePanelContext(l);this.fileListView.render();this.getContainer().sizeToFit()},_onErrorLoadFiles:function(){var h=this.getContainer();h.find(".loading-message").addClass("hidden");h.append(c("<p class='warning'>"+c(this.textErrorSearch).text()+"</p>"))},_getSearchText:function(){return c("input.search-image-text",this.getForm())},_getQuery:function(){return this._getSearchText().val()},focus:function(){this.collection.clearSelection();this._getSearchText().focus()}});g.Editor=g.Editor||{};g.Editor.FileDialog=g.Editor.FileDialog||{};g.Editor.FileDialog.SearchPanelView=d})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-dialog/file-dialog.soy' */
// This file was automatically generated from file-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.File == 'undefined') { Confluence.Templates.File = {}; }


Confluence.Templates.File.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="dialog-help-link"><a href="', soy.$$escapeHtml("https://docs.atlassian.com/confluence/docs-56/Displaying+Images"), '" target="_blank">', soy.$$escapeHtml("Help"), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:panel-components', location = 'js/file-dialog/file-dialog-view.js' */
(function(c,d){var a=d.Editor.FileDialog.FileListCollection;var b=Backbone.View.extend({dialogId:"insert-image-dialog",ESC_KEY_CODE:27,width:840,height:530,initialize:function(e){this.hasDarkUploadAllFileTypes=e.hasDarkUploadAllFileTypes;this.urlExternalImg="";this.selectItems=[];this.submitCallback=e.submitCallback;this.cancelCallback=e.cancelCallback;this.beforeShowListeners=e.beforeShowListeners;this.panelComponents=e.panelComponents},render:function(){this._createDialog();this._handleEscKey();this.clearSelection();c(document).on("keydown.insert-image",_.bind(this._handleNavigationByKey,this));return this},_createDialog:function(){var f=new AJS.Dialog(this.width,this.height,this.dialogId),e=this.hasDarkUploadAllFileTypes?"Insert file":"Insert Image",g="Insert";this.dialog=f;f.addHeader(e);f.addButton(g,_.bind(this._submitDialog,this),"insert");f.addCancel("Cancel",_.bind(this._killDialog,this));this.el=f.popup.element;this.$el=c(this.el);this.baseElement=this.el;this.$el.attr("data-tab-default","0");this.$insertButton=this.$el.find(".dialog-button-panel .insert");c("#"+this.dialogId+" .dialog-components .dialog-title").prepend(d.Templates.File.helpLink());this.$el.find(".dialog-button-panel").append(c("<div></div>").addClass("dialog-tip").html("Hint: type \"\u003cstrong\u003e!\u003c/strong\u003e\" in the Editor to insert attached images on the page."));this._createPanels();f.show();return f},_createPanels:function(){var e=this;c.each(this.panelComponents,function(){if(this&&typeof this.createPanel==="function"){this.createPanel(e)}});AJS.debug(this.beforeShowListeners.length+" beforeShow listeners registered.");c.each(this.beforeShowListeners,function(){if(typeof this==="function"){this()}})},_handleEscKey:function(){var e=this;c(document).bind("keydown.insert-image",function(f){if(f.which===e.ESC_KEY_CODE){e._killDialog();return AJS.stopEvent(f)}})},_cleanUp:function(){this.dialog.hide().remove();c(document).unbind(".insert-image");this.undelegateEvents()},_killDialog:function(){this._cleanUp();this.clearSelection();if(typeof this.cancelCallback==="function"){this.cancelCallback()}},_submitDialog:function(){var e={url:this.urlExternalImg,contentId:AJS.Meta.get("attachment-source-content-id"),selectItems:this.selectItems};this._cleanUp();if(typeof this.submitCallback==="function"){this.submitCallback(e)}},setSelectItems:function(e){if(typeof e==="string"){this.urlExternalImg=e;this.selectItems=[]}else{this.urlExternalImg="";this.selectItems=e}var f=this.selectItems.length>0||this.urlExternalImg;if(this.$insertButton){this.$insertButton.prop("disabled",!f);this.$insertButton.attr("aria-disabled",!f)}},clearSelection:function(){this.setSelectItems([])},insert:function(){if(this.$insertButton&&(!this.$insertButton.is(":disabled")||!this.$insertButton.attr("aria-disabled"))){this.$insertButton.click()}},addPanel:function(i,e,g,f){var h=this.dialog.getPage(0).panel.length;this.dialog.addPanel(i,e,g,f);return h},getPanel:function(e){return this.dialog.getPanel(e)},_handleNavigationByKey:function(j){var g=this.dialog.getCurrentPanel().body,i=tinymce.VK;if(!g||!g.length){return}if(c("#fancybox-overlay").is(":visible")){if(j.which===i.SPACEBAR){c("#fancybox-close").click();j.preventDefault();j.stopPropagation();return false}}else{var f=g.find(".attached-file");if(f.length===0||c(document.activeElement).is("input, select")){return}var h=function(m){var l;if(AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){l=g.find(".attached-file.current");if(!l.length){l=g.find(".attached-file.selected").first()}}else{l=g.find(".attached-file.selected")}var k=f.index(l)+m;if(k<0){k=f.length-1}if(k>=f.length){k=0}var e=f.eq(k);if(AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){e.parent().find("li.attached-file").removeClass("current");e.addClass("current")}else{e.click().focus()}e.length>0&&g.find(".scroll-wrapper").simpleScrollTo(e);return AJS.stopEvent(j)};switch(j.which){case i.LEFT:return h(-1);case i.UP:return h(-4);case i.RIGHT:return h(1);case i.DOWN:return h(4);case i.SPACEBAR:if(AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")){g.find("li.attached-file.current").click()}else{g.find("li.attached-file.selected .zoom").click()}return AJS.stopEvent(j);case i.ENTER:this.insert();return AJS.stopEvent(j)}}}});d.Editor=d.Editor||{};d.Editor.FileDialog=d.Editor.FileDialog||{};d.Editor.FileDialog.FileDialogView=b})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-parameter-serializer.js' */
(function ($) {

    /**
     * Singleton instance that is able to serialize/deserialize macro parameters according to the format defined in
     * the server-side java class DefaultMacroParameterSerializer.
     */
    Confluence.MacroParameterSerializer = (function ()
    {
        function escape(str) {
            return str.replace(/\\/g, "\\\\")   /* \ -> \\ */
                    .replace(/=/g, "\\=")       /* = -> \= */
                    .replace(/[|]/g, "\\|");    /* | -> \| */
        }

        function unescape(str) {
            return str.replace(/\\(.)/g, "$1");
        }

        return {
            /**
             * Serialize map of macro parameters.
             *
             * @param parameters a map of macro parameters (the key being the parameter name, and the value the parameter value)
             */
            serialize: function (parameters) {
                var result = [];

                for (paramName in parameters) {
                    result.push(escape(paramName) + "=" + escape(parameters[paramName]));
                }

                return result.join("|");
            },
            /**
             * Deserializes a string representing macro parameters into a map.
             *
             * @param parameters a string containing macro parameters (e.g. "a=b|c=d")
             */
            deserialize: function (parameters) {
                function split(str, splitChar) {
                    var buffer = [], result = [], c;
                    str = str || "";

                    for (var i = 0, l = str.length; i < l; i++) {
                        c = str[i];
                        if (c == "\\") {
                            buffer.push(c + (i + 1 != str.length ? str[++i] : ""));
                        } else if (c == splitChar) {
                            result.push(buffer.join(""));
                            buffer = [];
                        } else {
                            buffer.push(c);
                        }
                    }

                    result.push(buffer.join(""));

                    return result;
                }

                var result = {};

                $.each(split(parameters || "", "|"), function (index, macroParam) {
                    var macroParamSplit = split(macroParam, "=");

                    if (macroParamSplit.length == 2 && macroParamSplit[0]) {
                        result[unescape(macroParamSplit[0])] = unescape(macroParamSplit[1]);
                    }
                });

                return result;
            }
        };
    })();

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-rest.js' */
/**
 * Encapsulates service rest calls
 */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.Rest = (function ($) {

    var MACRO_META_DATA_ENDPOINT = "/plugins/macrobrowser/browse-macros.action";
    var MACRO_META_DATA_DETAILS_ENDPOINT = "/plugins/macrobrowser/browse-macros-details.action";
    var MACRO_PREVIEW_ENDPOINT = "/rest/tinymce/1/macro/preview";

    var TIMEOUT = 30000; // mitigate CONF-29810

    function defaultErrorCallback (e){
        AJS.logError (e);
    }

    function loadMacroMetadata (options) {
        return $.ajax({
            type: "GET",
            timeout: options.timeout || TIMEOUT,
            dataType: "json",
            url: (options.context || AJS.params.contextPath) + MACRO_META_DATA_ENDPOINT,
            data: options.data,
            success: options.successCallback,
            error: options.errorCallback || defaultErrorCallback
        }).promise();
    };

    function fetchMacroMetadataDetails (options){
        var data = { id: options.id };
        if (options.alternateId){
            data.alternateId = options.alternateId;
        }

        $.ajax({
            type: "GET",
            dataType: "json",
            url:  (options.context || AJS.params.contextPath) + MACRO_META_DATA_DETAILS_ENDPOINT,
            data: data,
            success: options.successCallback,
            error: options.errorCallback || defaultErrorCallback
        });
    };

    function fetchMacroPreviewData (options) {

        function createDataParameters(options){
            var data = {
                contentId: options.contentId,
                macro: {
                    name: options.macroName,
                    body : options.body,
                    params: options.params,
                    defaultParameterValue: options.defaultParameterValue
                }
            };

            return $.toJSON(data);
        }

        if (!options.contentId || !options.macroName){
            return (options.errorCallback || defaultErrorCallback)('invalid parameters');
        }

        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: (options.context || AJS.params.contextPath) + MACRO_PREVIEW_ENDPOINT,
            data: createDataParameters(options),
            dataType: "html",
            success: options.successCallback,
            error: options.errorCallback || defaultErrorCallback
        });
    }

    return {
        /**
         * Fetches metadata for registered macros/widgets
         *
         * @param {Object} options.data
         * @param {Object} options.timeout [XHR timeout = TIMEOUT]
         * @param {Object} options.context [Confluence base url = AJS.params.contextPath]
         * @param {Function} options.successCallback
         * @param {Function} [options.errorCallback = AJS.logError] - error callback or logging to console.
         */

        loadMacroMetadata: loadMacroMetadata,

        /**
         * Fetches more details for a particular widget on the server endpoint.
         *
         * @param {Object} options.id - widget id
         * @param {Object} options.context [Confluence base url = AJS.params.contextPath]
         * @param {Function} options.successCallback
         * @param {Function} [options.errorCallback = AJS.logError] - error callback or logging to console.
         */

        fetchMacroMetadataDetails: fetchMacroMetadataDetails,

        /**
         * Fetch macro preview
         * @param {Object} options.macroName Macro name
         * @param {Object} options.body Macro body
         * @param {Object} options.params Macro body
         * @param {Object} options.defaultParameterValue defaultParameterValue
         * @param {Object} options.contentId contentId
         * @param {Object} options.context [Confluence base url = AJS.params.contextPath]
         * @param {Function} options.successCallback
         * @param {Function} [options.errorCallback = AJS.logError] - error callback or logging to console.
         */

        fetchMacroPreviewData: fetchMacroPreviewData
    };

}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-editor.js' */
/**
 * Namespace to organize common methods related to the macro editor
 */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.Editor = (function ($) {

    function loadMacroInBrowser (metadata, mode) {
        if (!metadata || !metadata.formDetails) {
            AJS.trigger("analytics", {name: "macro-browser.unknown-macro-error"});
            alert("Could not load unknown macro in the macro browser.");
            return;
        }

        var t = AJS.MacroBrowser,
                detail = metadata.formDetails,
                macroName = detail.macroName,
                jsOverride = t.jsOverrides[macroName],
                selectedMacro = t.settings.selectedMacro,
                selectedMacroElement = tinymce.confluence.macrobrowser.editedMacroDiv;

        if (macroName){
            var jsOverride = t.getMacroJsOverride(macroName);
            if (jsOverride && typeof jsOverride.opener == "function"){
                t.close();
                jsOverride.opener({ name: macroName });
                return;
            }
        }

        $("#save-warning-span").addClass("hidden"); // gadgets may have put it in this state

        // Macro description and documentation link
        $("#macro-insert-container .macro-name").val(macroName);
        var macroDescription = metadata.extendedDescription ? metadata.extendedDescription : metadata.description;
        var macroDesc = $(Confluence.Templates.MacroBrowser.macroDescription({ description: macroDescription })),
            macroParametersForm = $("#macro-insert-container .macro-input-fields form").html(macroDesc);
        if (detail.documentationLink) {
            var doco = $(Confluence.Templates.MacroBrowser.macroDocLink({ href: detail.documentationLink}));
            macroDesc.append(doco);
        } else if (!macroDesc.text()) { // remove the div and its padding style
            macroDesc.remove();
        }

        if (detail.body && detail.body.bodyType != "NONE" && (selectedMacroElement && $(selectedMacroElement).hasClass("editor-inline-macro"))) { // only enable editing of the body in the macro browser for inline body macros
            var pluginKey = metadata.pluginKey;
            if (detail.body.label == AJS.MacroBrowser.Utils.makeDefaultKey(pluginKey, macroName, "body", "label")) {
                detail.body.label = "";
            }
            if (detail.body.description == AJS.MacroBrowser.Utils.makeDefaultKey(pluginKey, macroName, "body", "desc")) {
                detail.body.description = "";
            }
            var body = makeBodyDiv(detail.body, t.selectedMacroDefinition);
            if (body) {
                macroParametersForm.append(body);
            }
        }

        // Parameters may have dependencies so all fields need to be created before values are set.
        $(detail.parameters).each(function() {
            macroParametersForm.append(makeParameterDiv(metadata, this, jsOverride));
        });

        var selectedParams = selectedMacro ? $.extend({}, selectedMacro.params) : {}; // make a copy

        // Fully-implemented macros may have JS overrides defined in a Macro object.
        if (jsOverride && typeof jsOverride.beforeParamsSet == "function") {
            selectedParams = jsOverride.beforeParamsSet(selectedParams, !selectedMacro);
        }

        $(detail.parameters).each(function() {
            var param = this,
                    value;

            if (param.name == "") {
                value = t.selectedMacroDefinition ? t.selectedMacroDefinition.defaultParameterValue : param.defaultValue;
            } else {
                value = selectedParams[param.name];
            }

            if (value != null) {
                delete selectedParams[param.name];
            } else {
                // try looking for aliased parameters
                $(param.aliases).each(function() {
                    if (selectedParams[this]) {
                        value = selectedParams[this];
                        delete selectedParams[this];
                    }
                });
            }
            if (value == null) {
                value = param.defaultValue;
            }
            if (value != null) {
                t.fields[param.name].setValue(value);
            }
        });

        // Any remaining "selectedParameters" are unknown for the current Macro details.
        t.unknownParams = selectedParams;

        // open all links in a new window
        $("a", macroParametersForm).click(function() {
            window.open(this.href, '_blank').focus();
            return false;
        });

        if (!$("#macro-browser-dialog:visible").length) {
            t.showBrowserDialog();
        }

        var macroData = {};
        $.extend(true, macroData, metadata); // clone the metadata to a new object

        // for safety ensure that we have a 'formDetails', containing a body.
        if (!macroData.formDetails) macroData.formDetails = {};
        if (!macroData.formDetails.body) macroData.formDetails.body = {};

        t.dialog.activeMetadata = macroData; // This is important to getMacroBody.

        // do we have have selected text for the macro body or are we editing an existing macro (in which case any selected text is ignored)
        if (t.settings.selectedMacro) {
            macroData.formDetails.body.content = t.settings.selectedMacro.body;
        } else if (macroData.formDetails.body.bodyType && macroData.formDetails.body.bodyType.toLowerCase() == "plain_text") {
            macroData.formDetails.body.content = t.settings.selectedText;
        } else {
            macroData.formDetails.body.content = t.settings.selectedHtml;
        }
    }

    function getMacroParametersFromForm (metadata) {
        return getMacroDefinitionFromForm(metadata).params;
    }

    function getMacroDefinitionFromForm (metadata) {
        var macroName = $("#macro-insert-container").find(".macro-name").val(); // todo: why don't we get this from the metadata?
        var defaultParameterValue,
                t = AJS.MacroBrowser,
                sharedParameters = {};

        var parameters = getMacroParametersFromFormFields(metadata, sharedParameters);

        if (parameters[""])
            defaultParameterValue = parameters[""];

        $.extend(parameters, t.unknownParams); // apply unknown parameters

        parameters = applyjsOverrides(macroName, parameters, metadata, sharedParameters);

        return {
            name : macroName,
            bodyHtml : t.getMacroBody(),
            params : parameters,
            defaultParameterValue: defaultParameterValue
        };
    }

    function processRequiredParameters() {
        var blankRequiredInputs = $("#macro-insert-container .macro-param-div.required .macro-param-input")
            .filter(function() {
                var val = $(this).val();
                return (val == null || val == "");
            });
        var hasAllRequiredData = (blankRequiredInputs.length == 0);
        var disabled = hasAllRequiredData ? "" : "disabled";
        var classFn = disabled ? "addClass" : "removeClass";

        $("#macro-browser-dialog button.ok").prop("disabled", disabled);
        $("#macro-browser-dialog .macro-preview-header .refresh-link").prop("disabled", disabled)[classFn]("disabled");

        return hasAllRequiredData;
    }


    // private functions

    /**
     * Apply jsOverrides for a macroName
     *
     * @param macroName
     * @param parameters
     * @param macro
     * @param sharedParameters
     * @returns {*} parameters
     */
    function applyjsOverrides(macroName, parameters, macro, sharedParameters) {
        var jsOverride = AJS.MacroBrowser.getMacroJsOverride(macroName);
        if (jsOverride && typeof jsOverride.beforeParamsRetrieved == "function") {
            parameters = jsOverride.beforeParamsRetrieved(parameters, macro, sharedParameters);
        }
        return parameters;
    }

    /**
     * Get value from the input element according to input type (input text, checkbox, etc)
     * @param $element jQuery input element
     * @returns {*}
     */
    function extractValueFromInputElement($element) {
        var paramVal = $element.val();

        if ($element.attr("type") == "checkbox") {
            paramVal = "" + $element.prop("checked"); //will return 'true' if checked property is not empty
        }
        return paramVal;
    }

    /**
     * Fill parameters and shared parameters according to form values
     * @param metadata
     * @param sharedParameters
     * @returns {{}}
     */
    function getMacroParametersFromFormFields(metadata, sharedParameters) {
        var parameters = {};
        for (var i = 0, l = metadata.formDetails.parameters.length; i < l; i++) {
            var parameter = metadata.formDetails.parameters[i];
            var paramVal = extractValueFromInputElement($("#macro-param-" + parameter.name));
            if (paramVal) {
                // the shared property is used by gadgets in jsOverrides
                if (parameter.shared) {
                    sharedParameters[parameter.name] = paramVal;
                }

                if (parameter.hidden ||
                        (!parameter.defaultValue || parameter.defaultValue != paramVal)) {
                    // only add the parameter value if its not the default
                    parameters[parameter.name] = paramVal;
                }
            }
        }
        return parameters;
    }

    /**
     * Creates a div for a macro body.
     *
     * @param macroBodyFormComponent
     * @param macroDefinition
     * @returns {*|jQuery|HTMLElement}
     */
    function makeBodyDiv (macroBodyFormComponent, macroDefinition) {
        var t = AJS.MacroBrowser,
            bodyDiv = $(Confluence.Templates.MacroBrowser.macroBody()),
            bodyTextareaValue;

        if (macroDefinition) { // we are editing an existing macro
            bodyTextareaValue = macroDefinition.body;
        } else { // check if there is selected text in the editor
            bodyTextareaValue = t.settings.selectedText;
        }

        $("textarea", bodyDiv).val(bodyTextareaValue || "");

        if (macroBodyFormComponent.label) {
            $("label", bodyDiv).text(macroBodyFormComponent.label);
        }
        if (macroBodyFormComponent.description) {
            bodyDiv.append(Confluence.Templates.MacroBrowser.macroParameterDesc({ description: macroBodyFormComponent.description }));
        }
        if(macroBodyFormComponent.hidden) {
            bodyDiv.hide();
        }
        return bodyDiv;
    }

    /**
     * Creates a div for a single macro parameter.
     *
     * @param metadata
     * @param param
     * @param jsOverride
     * @returns {*}
     */
    function makeParameterDiv (metadata, param, jsOverride) {
        var t = AJS.MacroBrowser, field;
        var type = param.type.name;

        // Plugin point - other JS files can define more specific field-builders based on macro name, param name and
        // type.
        if (jsOverride) {
            var builder = jsOverride.fields && jsOverride.fields[type];
            if (builder && typeof builder != "function") {
                // Types can be overridden for specific parameters - so the "type" object contains a "name" function.
                builder = builder[param.name];
            }
            if (typeof builder == "function") {
                field = builder.call(jsOverride, param);
            }
        }
        // If no override specific to the macro, look for general overrides specific to the parameter type.
        if (!field) {
            if (!(type in t.ParameterFields && typeof t.ParameterFields[type] == "function")) {
                type = "string";
            }
            field = t.ParameterFields[type](param);
        }

        t.fields[param.name] = field;
        var paramDiv = field.paramDiv;
        var input = field.input;

        var paramId = "macro-param-" + param.name;
        paramDiv.attr("id", "macro-param-div-" + param.name);
        input.addClass("macro-param-input").attr("id", paramId);
        if (param.hidden) {
            paramDiv.hide();
        }

        // Use param label and desc or correct fallback.
        var pluginKey = metadata.pluginKey;
        if (param.displayName == AJS.MacroBrowser.Utils.makeDefaultKey(pluginKey, metadata.macroName, "param", param.name, "label")) {
            param.displayName = param.name;
        }
        if (param.description == AJS.MacroBrowser.Utils.makeDefaultKey(pluginKey, metadata.macroName, "param", param.name, "desc")) {
            param.description = "";
        }

        var labelText = param.displayName;
        if (param.required) {
            labelText += " *";
            paramDiv.addClass("required");  // set class against div, not input, to allow styling of label if nec
        }
        $("label", paramDiv).attr("for", paramId).text(labelText);

        if (param.description) {
            paramDiv.append(Confluence.Templates.MacroBrowser.macroParameterDesc({ description: param.description }));
        }
        return paramDiv;
    }

    return {
        /**
         * Loads the given macro json in the browser's insert macro page.
         *
         * @param metadata
         * @param mode "insert" or "edit"
         */

        loadMacroInBrowser: loadMacroInBrowser,

        /**
         * Returns a Map of all parameter values from the form, including the default parameter value which has a zero
         * length string as a key.
         * @param metadata meta data about each parameter in the macro
         */

        getMacroParametersFromForm: getMacroParametersFromForm,

        /**
         * Constructs the macro markup from the insert macro page
         *
         * @param {Object} metadata detailed metadata about the macro.  Includes form details etc.
         * @returns {{name: (*|jQuery), bodyHtml: *, params: {}, defaultParameterValue: *}}
         */

        getMacroDefinitionFromForm: getMacroDefinitionFromForm,

        /**
         * Checks and returns true if all the required macro parameters have values.
         * It disables the insert/preview buttons if false.
         *
         * @returns {boolean}
         */

        processRequiredParameters: processRequiredParameters
    };

}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-model.js' */
/**
 * Metadata model operations
 *
 */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.Model = (function ($) {

    function transformMetaDataDefault (metadata){
        // if we get an internationalization key back for the title, then pull the macro name out.
        if (metadata.title == AJS.MacroBrowser.Utils.makeDefaultKey(metadata.pluginKey, metadata.macroName, "label")) {
            metadata.title = metadata.macroName.charAt(0).toUpperCase() + metadata.macroName.substring(1).replace(/-/g, ' ');
        }

        if (metadata.description == AJS.MacroBrowser.Utils.makeDefaultKey(metadata.pluginKey, metadata.macroName, "desc")) {
            metadata.description = "";
        }
        metadata.id = "macro-" + (metadata.alternateId || metadata.macroName);

        // Store two copies of keywords - for Macro Browser and Macro Autocomplete searching
        var keywordsArr = [metadata.macroName, metadata.title].concat(metadata.aliases || []);
        metadata.keywordsNoDesc = keywordsArr.join(',');

        var desc = (metadata.description && metadata.description.replace(/,/g, ' ')) || "";
        keywordsArr.push(desc);
        metadata.keywords = keywordsArr.join(',');
        return metadata;
    }

     function loadMacros (macros) {

        if (!macros) {
            AJS.log("AJS.MacroBrowser.loadModel - no macro data, aborting");
            return;
        }

        var t = AJS.MacroBrowser;
        t.metadataList = [];
        t.aliasMap = {};

        // Clean up unset titles and descriptions before sorting
        for (var i = 0, ii = macros.length; i < ii; i++) {
            var metadata = macros[i];

            metadata = transformMetaDataDefault(metadata);

            if (metadata.aliases) {
                for (var j = 0, jl = metadata.aliases.length; j < jl; j++) {
                    metadata.aliases[j] = metadata.aliases[j].toLowerCase();
                    t.aliasMap[metadata.aliases[j]] = metadata.macroName.toLowerCase();
                }
            }

            t.metadataList.push(metadata);
        }
        t.metadataList.sort(function(one, two) { return (one.title.toLowerCase() > two.title.toLowerCase() ? 1 : -1); });
    }

    return {
        /**
         * Called when the macro data is returned from the back-end, loads the macro metadata into a JS model for the
         * browser (and autocomplete) to use.
         *
         * @param macros the macros array from the browse-macros.action JSON response
         */

        loadMacros: loadMacros,

        /**
         * Applies the necessary transformations when macro metadata is retrieved form the server
         * @param metadata
         * @returns transformed metadata
         */
        transformMetaDataDefault: transformMetaDataDefault
    };

}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preview.js' */
/**
 * Macro preview rendering
 * @type {Function}
 */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.Preview = (function ($) {

    var refreshButton = {
        disable : function() {
            $("#macro-browser-preview-link").attr("disabled", true).addClass("disabled");
        },
        enable : function () {
            $("#macro-browser-preview-link").removeAttr("disabled").removeClass("disabled");
        }
    };

    function createPreviewContainer() {
        // Set the iframe source to an empty JS statement to avoid
        // secure/nonsecure warnings on https, without needing a back-end call.
        var src = AJS.params.staticResourceUrlPrefix + "/blank.html";
        var previewDiv = $("#macro-insert-container .macro-preview");
        previewDiv.html('<iframe src="' + src + '" frameborder="0" name="macro-browser-preview-frame" id="macro-preview-iframe"></iframe>');
    }

    function renderPreview(html) {
        var iframe = $("#macro-insert-container .macro-preview iframe")[0];
        var doc = iframe.contentDocument || iframe.contentWindow.document;
        doc.write(html);
        doc.close(); // for firefox

        var errorSpan = $("div.error span.error", doc);
        if (errorSpan.length) {
            AJS.logError("Error rendering macro definition : ");
        }
    }

    function loadingInProgressUI (loading) {
        if (loading) {
            AJS.MacroBrowser.UI.showPreviewSpinner(true);
            refreshButton.disable();
        } else {
            AJS.MacroBrowser.UI.showPreviewSpinner(false);
            refreshButton.enable();
        }
    }

    function previewMacro (macro) {
        var t = AJS.MacroBrowser;
        $("#macro-insert-container .macro-preview").html("");

        if (!AJS.MacroBrowser.Editor.processRequiredParameters()) {
            AJS.trigger("analytics", {name: "macro-browser.missing-params-error"});
            AJS.log("previewMacro: missing required params");
            return false;
        }

        var macroDefinition = AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(macro);
        var params = macroDefinition.params;

        var jsOverrides = t.getMacroJsOverride(macro.macroName);
        if (jsOverrides && typeof jsOverrides.updateMacroParametersForPreview == "function") {
            params = jsOverrides.updateMacroParametersForPreview(params);
        }

        if (params[""]) {
            delete params[""]; // this is sent separately as the defaultParameterValue
        }

        var options = {
            contentId: Confluence.getContentId(),
            macroName: macro.macroName,
            params: params,
            body: t.getMacroBody(),
            defaultParameterValue: macroDefinition.defaultParameterValue,

            successCallback : function(html) {
                renderPreview(html);
                // todo: the spinner is being hidden when the iframe gets loaded
                // so this timeout won't affect it anyway. It will disable the preview button though
                setTimeout(function(){
                    loadingInProgressUI(false);
                }, 1000);
            },

            errorCallback : function(e) {
                // todo: better err handling?
                AJS.logError(e);
                loadingInProgressUI(false);
            }
        };

        createPreviewContainer();
        loadingInProgressUI(true);

        AJS.MacroBrowser.Rest.fetchMacroPreviewData(options);
    }

    return {

        /**
         * Makes an ajax request to render the macro markup and updates the preview
         *
         * @param macro
         */

        previewMacro : previewMacro
    };

}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-UI.js' */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.UI = (function ($) {

    var BUTTON_SAVE_SELECTOR = "#macro-browser-dialog .dialog-button-panel .ok";

    function toggleSpinner($elm, show) {
        if (show) {
            $elm.spin('large');
        } else {
            $elm.spinStop();
        }
    }

    function showBrowserSpinner (show) {
        toggleSpinner($("#macro-browser-dialog"), show);
    }

    function showPreviewSpinner(show) {
        toggleSpinner($("#macro-browser-preview"), show);
    }

    function enableSaveButton (enable) {
        var okButton = $(BUTTON_SAVE_SELECTOR);
        okButton.prop("disabled", !enable);
    }

    function updateButtonText(mode) {
        var okButton = $(BUTTON_SAVE_SELECTOR);
        if (mode == "edit") {
            okButton.text("Save");
        }
        else {
            okButton.text("Insert");
        }
    }

    // private functions
    /**
     * Returns the template for macro summary list
     * @param {int} id Category
     * @returns {*|jQuery|HTMLElement}
     */
    function makeCategoryList (id) {
        return $(Confluence.Templates.MacroBrowser.macroSummaryList({ category: id }));
    };


    /**
     * Creates the DOM element for the macro summary panel and returns it.
     * @param metadata
     * @returns {*|jQuery|HTMLElement}
     */
    function makeMacroSummary(metadata, onclick) {
        var macroDiv = $(Confluence.Templates.MacroBrowser.macroSummaryItem());

        // setting icon
        if (metadata.icon) {
            var iconLocation = (metadata.icon.relative ? AJS.params.staticResourceUrlPrefix : "") + metadata.icon.location;
            if(!metadata.icon.relative && AJS.$.browser.msie && !window.location.href.indexOf("https") && iconLocation.indexOf("https")) {
                macroDiv.prepend("<span class='macro-icon-holder icon-" + metadata.macroName + "'></span>");
            }
            else {
                macroDiv.prepend("<img src='" +  iconLocation + "' alt='icon' " +
                        "width='" + metadata.icon.width + "' height='" + metadata.icon.height + "' title='" + metadata.title + "'/>");
            }
        } else {
            macroDiv.prepend("<span class='macro-icon-holder icon-" + metadata.macroName + "'></span>");
        }

        $(".macro-title", macroDiv).text(metadata.title);
        $(".macro-desc", macroDiv).prepend(metadata.description);
        if (metadata.macroName == "gadget") {
            var url = metadata.gadgetUrl;
            if (url) {
                if (!url.match("^https?://.*")) {
                    url = AJS.params.contextPath + "/" + url;
                }
                $(".macro-title", macroDiv).after(Confluence.Templates.MacroBrowser.gadgetLink({url: url}));
            }
        }

        macroDiv.click(function(e){
            onclick(e, metadata);
        });

        return macroDiv;
    };

    /**
     *
     * @returns {{all: (*|jQuery|HTMLElement)}}
     */
    function getMacroSummaryHTMLElements(macros, onclick) {

        var cats = { all: makeCategoryList("all") };

        // Content on the right, setup macro list items
        for (var i = 0, ii = macros.length; i < ii; i++) {
            var macro = macros[i];
            if (macro.hidden) {
                if (AJS.MacroBrowser.isHiddenMacroShown(macro)) {
                    macro.categories.push("hidden-macros");
                } else {
                    continue;
                }
            }
            // fill the ALL category
            cats.all.append(makeMacroSummary(macro, onclick).attr("id",
                macro.id));

            // for each category, we create a different macroDiv.
            // be AWARE: we are duplicating macroDivs for the same macro in different categories!!
            // TODO: event delegation for onclick
            // TODO: unique macro summary DOM instances
            for (var j = 0, jj = macro.categories.length; j < jj; j++) {
                var catKey = macro.categories[j];
                cats[catKey] = cats[catKey] || makeCategoryList(catKey);
                cats[catKey].append(makeMacroSummary(macro, onclick).attr("id", catKey + "-" + macro.id));
            }
        }
        return cats;
    }

    function createDialog (options) {

        var categorySummaryHTMLElements = getMacroSummaryHTMLElements(options.macros,
                options.onClickMacroSummary);

        var dialog = AJS.ConfluenceDialog({
            width: options.width || 865,
            height: options.height || 530,
            id: "macro-browser-dialog",
            onSubmit: options.onSubmit,
            onCancel: options.onCancel
        });

        // Set an id on the "Select Macro Page"
        dialog.getPage(0).element.attr('id', 'select-macro-page');

        dialog.addHeader(options.title);

        // menu on the left, setup category panels
        dialog.addPanel("All", categorySummaryHTMLElements.all,
            "all", "category-button-all");

        for (i = 0, ii = options.categories.length; i < ii; i++) {
            var category = options.categories[i];
            dialog.addPanel(category.displayName,
                    categorySummaryHTMLElements[category.name] || makeCategoryList(category.name),
                    category.name, "category-button-" + category.name)
                .getPanel(i).setPadding(0); // remove the default dialog padding
        }

        dialog.addCancel("Cancel", options.onCancel);

        // CONFDEV-12853: Add help link via prepend() instead of append() to prevent FF display issue
        dialog.popup.element.find(".dialog-title").prepend(Confluence.Templates.MacroBrowser.helpLink());

        // todo: make sure this is needed.
        // if it is, add proper comments an tests. Otherwise, delete it.
        if (AJS.Meta.get('confluence-flavour') == 'VANILLA') {
            dialog.addHelpText("<a href='{0}' id='marketplace-link'><span class='icon icon-marketplace'/>{1}</a>", [
                AJS.params.contextPath + "/plugins/servlet/upm/marketplace/featured?category=Macros&source=macro_browser",
                "Find more macros..."
            ]);
        } else {
            dialog.addHelpText("Hint: type \"\u003cstrong\u003e{\u003c/strong\u003e\" in the Editor to insert macros on the page.");
        }


        // prepare insert macro page
        var insertMacroBody = AJS.$(Confluence.Templates.MacroBrowser.insertMacroPanel());
        insertMacroBody.find("form").submit(function(e){
            AJS.MacroBrowser.complete();
            return AJS.stopEvent(e);
        });

        $("#macro-browser-preview-link", insertMacroBody).click(function (e) {
            var $link = $(this);
            if (!$link.prop("disabled")){
                AJS.MacroBrowser.previewMacro(dialog.activeMetadata);
            }
            return AJS.stopEvent(e);
        });

        dialog.addPage()
            .addPanel("X", insertMacroBody, "macro-input-panel")
            .addLink("Select macro", function (dialog) {
                dialog.prevPage();
                dialog.searcher.focus();
            }, "dialog-back-link")
            .addButton("insert.name", function () {
                AJS.MacroBrowser.complete();
            }, "ok")
            .addCancel("Cancel", function () {
                return options.onCancel();
            })
            .getPanel(0).setPadding(0); // remove the default dialog padding

        // Set an id on the "Insert/Update Macro Page"
        dialog.getPage(1).element.attr('id', 'macro-details-page');

        $("#macro-browser-dialog .dialog-button-panel .ok").before("<span id='save-warning-span' class='hidden'/>");

        // todo: move search component to AJS.MacroBrowser.Search?? is it worthy?
        // add search box
        dialog.searcher = Confluence.DomFilterField({
            items: '#macro-browser-dialog .dialog-panel-body #category-all .macro-list-item',
            formId: 'macro-browser-search-form',
            inputId: 'macro-browser-search',
            searcher: function ($items, text) {
                var ids = null;
                if (text != '') {
                    if (dialog.getCurrentPanel() != dialog.getPanel(0)) {
                        dialog.gotoPanel(0);
                    }
                    var filteredSummaries = AJS.MacroBrowser.searchSummaries(text);
                    ids = {};
                    $.each(filteredSummaries, function () {
                        ids[this.id] = this;
                    });
                }
                $items.each(function () {
                    (!ids || this.id in ids) ? $(this).show() : $(this).hide();
                });
            },
            submitCallback: function ($visibleItems, searchText) {
                if (searchText != '' && $visibleItems.length == 1) {
                    // Only one macro found with search - select it.
                    $visibleItems.click();
                }
            }
        });

        dialog.page[0].header.append(dialog.searcher.form);
        dialog.page[0].ontabchange = function (newPanel, oldPanel) {
            if (newPanel != dialog.getPanel(0, 0)) {
                // Moving away from the "All" macro panel; reset the search value if present
                dialog.searcher.reset();
            }
        };

        // Create the missing meta-data page
        var missingMetadataBody = AJS.$(Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel({
            showAdminMessage: AJS.Meta.getBoolean("is-admin") }));

        dialog.addPage()
            .addPanel("No macro metadata", missingMetadataBody, "missing-metadata-panel")
            .addLink("Back", function (dialog) {
                dialog.gotoPage(0);
                dialog.searcher.focus();
            }, "dialog-back-link")
            .addCancel("Cancel", function () {
                // todo: does it need return value? can we just pass the reference to onCancel?
                return options.onCancel();
            });

        dialog.gotoPage(2);
        dialog.addHeader("No macro metadata");

        dialog.gotoPanel(0, 0);

        dialog.ready = true; // todo: necessary?

        return dialog;
    }

    function focusOnMacroDetailsFirstInput() {
        var $firstInput = $(":input:visible:first", $("#macro-insert-container .macro-input-fields form"));
        if ($firstInput.length) {
            $firstInput.focus();
            if (!AJS.MacroBrowser.selectedMacroDefinition && $firstInput.val() != "") {
                // prefilled data in new macro form - select first field for easy overwrite.
                $firstInput.select();
            }
        }
    }

    return {

        /**
         * Creates the macro browser dialog using AUI components
         * @param {Object} options.macroBrowser MacroBrowser instance
         * @returns {*}
         */

        createDialog: createDialog,

        /**
         * Show/hide macro browser spinner
         * @param show
         */

        showBrowserSpinner: showBrowserSpinner,

        /**
         * Show/hide macro browser spinner
         * @param show
         */

        showPreviewSpinner: showPreviewSpinner,

        /**
         * Update button text according to operation mode (save/insert)
         * @param mode - Defaults to "edit"
         */
        updateButtonText: updateButtonText,

        /**
         * Enable/Disable save/edit button
         * @param {Boolean} enable
         */
        enableSaveButton: enableSaveButton,

        /**
         * Focus on the first input of the details form
         */

        focusOnMacroDetailsFirstInput: focusOnMacroDetailsFirstInput
    };

}(AJS.$));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-utils.js' */
/**
 * Macro browser util methods
 */
AJS.MacroBrowser = AJS.MacroBrowser || {};
AJS.MacroBrowser.Utils = (function ($) {

    function makeDefaultKey () {
        return $.makeArray(arguments).join(".");
    }

    return {
        makeDefaultKey: makeDefaultKey
    };

}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser.js' */
AJS.MacroBrowser = AJS.MacroBrowser || {};
(function($) {

    var jsOverrides = {}; // todo pending remove this private member. instance approach?
    var loadMacroMetadataPromise;

    function onGoingPreloadRequest() {
        return loadMacroMetadataPromise && loadMacroMetadataPromise.state() === "pending";
    }

    /**
     *
     * @param metadata
     * @param mode
     */
     var fetchMetaDataAndLoadMacro = function(metadata, mode) {
        var options = {
                id: metadata.macroName,
                successCallback: function (data) {
                    if(data && data.details) {
                        data.details = AJS.MacroBrowser.Model.transformMetaDataDefault(data.details);
                    }
                    AJS.MacroBrowser.Editor.loadMacroInBrowser(data.details, mode);

                    fetchMetaDataAndLoadMacro.displayDetails();
                    AJS.MacroBrowser.Preview.previewMacro(data.details);
                },
                errorCallback: function (err) {
                    AJS.trigger("analytics", {name: "macro-browser.fetch-metadata-error"});
                    alert("There has been an error loading the macro browser. Please try again or see your system administrator.");
                    fetchMetaDataAndLoadMacro.displayDetails();
                }
        };

        if (metadata.alternateId){
            options.alternateId = metadata.alternateId;
        }

        fetchMetaDataAndLoadMacro.setUI(mode, metadata.title);

        AJS.MacroBrowser.Rest.fetchMacroMetadataDetails(options);
    };

    fetchMetaDataAndLoadMacro.setUI = function(mode, title) {
        var placeHolderTitle = mode=="edit" ? t.editTitle : t.insertTitle;

        $("#macro-insert-container").hide();
        AJS.MacroBrowser.UI.updateButtonText(mode);
        AJS.MacroBrowser.UI.enableSaveButton(false);
        AJS.MacroBrowser.dialog.gotoPage(1).addHeader(placeHolderTitle.replace(/\{0\}/, title));
        AJS.MacroBrowser.dialog.show();
        AJS.MacroBrowser.UI.showBrowserSpinner(true);
    };

    fetchMetaDataAndLoadMacro.displayDetails = function() {
        AJS.MacroBrowser.UI.showBrowserSpinner(false);
        AJS.MacroBrowser.UI.enableSaveButton(false);
        $("#macro-insert-container").show();
        AJS.MacroBrowser.UI.focusOnMacroDetailsFirstInput();
    };

    var t = AJS.MacroBrowser;

        // this is absolutely horrible.
        // we should go with instance objects instead of singleton
    t.reset = function () {
        loadMacroMetadataPromise && loadMacroMetadataPromise.resolve && loadMacroMetadataPromise.resolve();
        loadMacroMetadataPromise = null;
        this.initMacroBrowserAfterRequest = null;
        this.initData = null;
        this.hasInit = false;
        this.metadataList = [];
        this.aliasMap = {};
        this.fields = {};
        jsOverrides = {};
        //this.jsOverrides = jsOverrides;
        this.Macros = jsOverrides;
    };

    t.jsOverrides = jsOverrides;

    /**
     * @deprecated Since 3.3. Macros is an ambiguous name, use getMacroJsOverride and setMacroJsOverride.
     */
    t.Macros= jsOverrides;

    t.getMacroJsOverride = function (macroName) {
            return jsOverrides[macroName];
    };

    t.setMacroJsOverride = function (macroName, override) {
            return jsOverrides[macroName] = override;
    };

    t.hasInit = false;
    t.metadataList = [];
    t.aliasMap= {}; // maps each alias to the corresponding macro name
    t.fields= {}; // stores fields for a given macro form.

    /**
     * Checks and returns true if all the required macro parameters have values.
     * It disables the insert/preview buttons if false.
     *
     * @returns {*}
     */
    t.processRequiredParameters = function() {
        return AJS.MacroBrowser.Editor.processRequiredParameters();
    };

    /**
     * Called when a parameter field value changes.
     */
    t.paramChanged = function () {
        // TODO - Could be used to preview?
        AJS.MacroBrowser.Editor.processRequiredParameters();
    };

    // Loads the given macro json in the browser's insert macro page.
    // Exposed to plugins (don't remove)
    t.loadMacroInBrowser = function(metadata, mode) {
        AJS.MacroBrowser.Editor.loadMacroInBrowser (metadata, mode);
    };

    // Constructs the macro markup from the insert macro page
    t.getMacroDefinitionFromForm = function(metadata) {
        AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(metadata);
    };

    /**
     * Returns a Map of all parameter values from the form, including the default parameter value which has a zero
     * length string as a key.
     * @param macroParamDetails meta data about each parameter in the macro
     */
    t.getMacroParametersFromForm = function(macro) {
        AJS.MacroBrowser.Editor.getMacroParametersFromForm(macro);
    };

    // Makes an ajax request to render the macro markup and updates the preview
    // Moved to different namespace. This is just a facade.
    t.previewMacro = function(macro) {
        AJS.MacroBrowser.Preview.previewMacro(macro);
    };

    // This gets called on the preview window's onload to re-adjust the height of the frame
    t.previewOnload = function(body) {
        var selectedMacroName = AJS.MacroBrowser.dialog.activeMetadata.macroName;
        var jsOverride = jsOverrides[selectedMacroName];
        if (jsOverride && jsOverride.postPreview) {
            jsOverride.postPreview(AJS.$("#macro-preview-iframe")[0], AJS.MacroBrowser.dialog.activeMetadata);
        }
        AJS.Editor.disableFrame(body);

        // open all links in a new window
        $(body).click(function(e) {
            if (e.target.tagName.toLowerCase() === "a") {
                var a = e.target;
                var link = $(e.target).attr("href");
                if (link && link.indexOf("#") != 0 && link.indexOf(window.location) == -1) {
                    window.open(link, '_blank').focus();
                }
                return false;
            }
        });
    };

    /**
     * Returns the macro metadata object for a given macro name.
     *
     * Call jsOverride.getMacroDetailsFromSelectedMacro instead of this method for macros such as "gadget" that map
     * multiple macros to a single name.
     *
     * @param macroName macro name to search metadata for
     */
    t.getMacroMetadata = function (macroName) {
        for (var i = 0, len = this.metadataList.length; i < len; i++) {
            var metadata = this.metadataList[i];
            if (metadata.macroName == macroName) {
                return metadata;
            }
        }
        return null;
    };

    /**
     * @since 5.6
     */
    t.getMetadataPromise = function() {
        return loadMacroMetadataPromise;
    };

    /**
     * Called when the user either clicks the Macro Browser button or clicks Edit in a
     * macro placeholder in the RTE.
     *
     * Note that the macro browser is not initialsed/loaded until opened for the first time.
     *
     * @param settings macro browser settings include:
     *      presetMacroMetadata : the metadata for a preset macro to load into the macro browser
     *      selectedHtml : string of selected HTML from RTE when no macro selected
     *      selectedText: the text contents of the selected HTML from the RTE when no macro selected
     *      onComplete : function to call when Macro Browser's "Insert" button is pressed
     *      onCancel : function to call when Macro Browser is closed when incomplete
     *      searchText : text to filter on if opening to the "Select Macro" page, if omitted no filter is done
     *      selectedCategory: the category name that should be selected by default
     */
    t.open = function(settings) {
        if (!settings) {
            settings = {};
            AJS.log("No settings to open the macro browser.");
        }
        var t = AJS.MacroBrowser;

        // if there is a custom editor for this macro, launch that instead
        var macro = settings.selectedMacro;

        if (!macro && settings.presetMacroMetadata) {
            macro = {
                name: settings.presetMacroMetadata.macroName
            };
        }
        if (macro && macro.name){
            var jsOverride = t.getMacroJsOverride(macro.name);
            if (jsOverride && typeof jsOverride.opener == "function"){
                jsOverride.opener(macro);
                return;
            }
        }

        if (!t.hasInit) { // init the macro browser for the first time
            AJS.debug("init macro browser");
            AJS.MacroBrowser.UI.showBrowserSpinner(true);

            if ((t.initData !== null) && $.isEmptyObject(t.initData)) {
                // the only case where we set initData={} is when we got an error on preloading from the rest endpoint
                // try preloading again..
                AJS.trigger("analytics", {name: "macro-browser.init-reattempt"});
                AJS.logError('Macro browser preload failed. Trying again...');
                t.initMacroBrowserAfterRequest = settings;
                t.preLoadMacro();
                return;
            }
            else if (t.initData) { // preloading completed
                t.initBrowser();
            }
            else { // ajax request not returned yet; set a flag to init the browser later
                AJS.trigger("analytics", {name: "macro-browser.init-overlap"});
                AJS.debug('Waiting for macro browser preloading...');
                t.initMacroBrowserAfterRequest = settings;
                return;
            }
        }
        t.openMacroBrowser(settings);
    };

    /**
     * Open the Macro Browser Dialog, either to a specific macro or the selection page depending on
     * the settings parameter.
     * This method must be called after the dialog has been initialised
     *
     * @param {Object} settings.presetMacroName
     * @param {Object} settings.selectedCategory
     */
    t.openMacroBrowser = function(settings) {
        var t = AJS.MacroBrowser;
        t.settings = settings;
        t.selectedMacroDefinition = settings.selectedMacro;

        var selectedMacroName = (t.selectedMacroDefinition && t.selectedMacroDefinition.name) ||
                settings.presetMacroName;

        // Preset macro overrides everything, just use it if present
        if (settings.presetMacroName)
            settings.presetMacroMetadata = t.getMacroMetadata(settings.presetMacroName);

        var metadata = settings.presetMacroMetadata;
        if (!metadata) {
            var selectedMacro = settings.selectedMacro;
            if (selectedMacro) {
                // Editing an existing macro - find metadata for it
                selectedMacroName = selectedMacro.name.toLowerCase();
                selectedMacroName = t.aliasMap[selectedMacroName] || selectedMacroName;

                var jsOverride = jsOverrides[selectedMacroName];
                if (jsOverride) {

                    if (typeof jsOverride.updateSelectedMacro == "function") {
                        jsOverride.updateSelectedMacro(selectedMacro);
                    }
                    // Could be a gadget (or other) macro that has a custom metadata lookup function
                    if (typeof jsOverride.getMacroDetailsFromSelectedMacro == "function") {
                        metadata = jsOverride.getMacroDetailsFromSelectedMacro(t.metadataList, selectedMacro);
                    }

                }
                if (!metadata) {
                    metadata = t.getMacroMetadata(selectedMacroName);
                }
            }
        }

        // todo: get a reference to the back button, or create functions to show/hide the button
        // those functions should go on UI?
        var backButton = $("#macro-browser-dialog").find("button.back");

        if (metadata) {
            AJS.debug("Open macro browser to edit macro: "+ metadata.macroName);

            backButton.hide();

            //todo: should we remove this replicateSelectMacro method and use fetchMetaDataAndLoadMacro?
            t.replicateSelectMacro(metadata, settings.mode || "edit");
        }
        // todo: using selectedMacroName var, which is declared above inside an if??
        else if (selectedMacroName) {
            // the user chose to edit a macro but no metadata was available
            backButton.show();

            // todo:  move to UI namespace??

            t.dialog.overrideLastTab();
            t.dialog.gotoPage(2);
            t.showBrowserDialog();
        } else {
            backButton.show();
            if(settings.selectedCategory) {
                // todo: extract category selection to function
                var categoryIndex = $('#select-macro-page .dialog-page-menu button').index($('#category-button-' + settings.selectedCategory));
                if(categoryIndex < 0) {
                    categoryIndex = 0;
                }
                t.dialog.overrideLastTab();
                t.dialog.gotoPanel(0, categoryIndex);
            }
            else {
                t.dialog.gotoPage(0);
            }
            t.showBrowserDialog();

            // If non-blank searchText has been passed in, filter on it
            t.dialog.searcher.focusAndSearch(settings.searchText);
        }
    };

    t.showBrowserDialog = function() {
        AJS.MacroBrowser.dialog.show();
        AJS.MacroBrowser.UI.showBrowserSpinner(false);
    };

    // Called when dialog is closed by Inserting/Saving.
    t.complete = function (dialog) {
        if (!$("#macro-browser-dialog .dialog-button-panel .ok").is(":visible:not(:disabled)")) {
            // If triggered by enter key but not ready to complete, ignore.
            return;
        }
        var t = AJS.MacroBrowser;
        var metadata = t.dialog.activeMetadata;
        var jsOverride = jsOverrides[metadata.macroName];
        if (jsOverride && jsOverride.manipulateMarkup) {
            jsOverride.manipulateMarkup(metadata);
        }

        var macroDefinition = AJS.MacroBrowser.Editor.getMacroDefinitionFromForm(metadata);

        t.close();
        if (t.settings.onComplete) {
            t.settings.onComplete(macroDefinition);
        }
    };

    /**
     * Called when dialog is closed by various cancel buttons or via Esc key.
     * @returns {boolean}
     */
    t.cancel = function() {
        var t = AJS.MacroBrowser;
        t.close();
        if (typeof t.settings.onCancel == "function") {
            t.settings.onCancel();
        }
        return false;
    };

    t.close = function() {
        var t = this;
        t.unknownParams = {};
        t.fields = {};
        t.dialog.hide();
    };

    /**
     * Replicates the user behaviour of selecting a macro and displaying the insert macro page
     * @param metadata
     * @param mode
     */
    t.replicateSelectMacro = function (metadata, mode) {
        fetchMetaDataAndLoadMacro(metadata, mode);
    };

    /**
     * Loads the categories and macros into the dialog
     * @returns {boolean}
     */
    t.initBrowser = function() {

        var t = AJS.MacroBrowser,
            data = t.initData;

        // 1 . validation
        if (!data.categories || !AJS.MacroBrowser.metadataList.length) {
            AJS.trigger("analytics", {name: "macro-browser.init-browser-error"});
            alert("There has been an error loading the macro browser. Please try again or see your system administrator.");
            AJS.MacroBrowser.UI.showBrowserSpinner(false);
            return false;
        }

        // 2. Save state
        t.editTitle = data.editTitle;
        t.insertTitle = data.insertTitle;


        // 3. Prepare data
        //--
        // sort the categories and macros
        // Skip the hidden category unless option is set, in which case append it to end of array.
        var hiddenCat;
        data.categories = $.map(data.categories, function (cat) {
            if (cat.name == "hidden-macros") {
                hiddenCat = cat;
                return null;
            }
            return cat;
        });
        data.categories.sort(function(one, two) {
            return (one.displayName.toLowerCase() > two.displayName.toLowerCase() ? 1 : -1);
        });
        if (hiddenCat && AJS.params.showHiddenUserMacros) {
            data.categories.push(hiddenCat);
        }
        //--


        // 4. Build UI
        t.dialog = AJS.MacroBrowser.UI.createDialog ({

            title: data.title,
            categories: data.categories,
            macros : t.metadataList,
            onClickMacroSummary: function(e, metadata) {
                e.preventDefault();
                fetchMetaDataAndLoadMacro(metadata, "insert");
            },
            onSubmit : t.complete,
            onCancel : t.cancel

        });

        t.hasInit = true;

        return true;
    };

    /**
     * Search macro name, title and description for the given text.
     * @param text (required) text to search on
     * @param options options to pass to the AJS.filterBySearch method
     * @return array of macro summaries matching the search text.
     */
    t.searchSummaries = function (text, options) {
        options = $.extend({
            splitRegex: /[\s\-]+/
        }, options);
        return AJS.filterBySearch(this.metadataList, text, options);
    };

    /**
     * Convenience method to return the macro body. This will be one of -
     * - the text in the body textarea on the macro browser dialog
     * - currently selected text in the editor
     * - the current body if editing an existing macro (disregarding any editor selection)
     * - empty String if neither previous case applies.
     */
    t.getMacroBody = function () {
        var t = AJS.MacroBrowser;
        var body = "";
        if ($("#macro-insert-container .macro-body-div textarea").length) {
            body = $("#macro-insert-container .macro-body-div textarea").val();
        } else if (t.selectedMacroDefinition) {
            if (t.selectedMacroDefinition.body) {
                body = t.selectedMacroDefinition.body;
            }
        } else if (t.dialog.activeMetadata) {
            body = t.dialog.activeMetadata.formDetails.body.content; // this is encoded as appropriate for the current macro
        }
        return body;
    };

    /**
     * Checks if a normally-hidden macro should be displayed in the UI or not.
     * @param macro - a macro summary
     */
    t.isHiddenMacroShown = function (macro) {
        return AJS.params.showHiddenUserMacros && macro.pluginKey == "_-user-macro-_";
    };

    /**
     * Returns true if the metadata indicates that there are required parameters for this macro
     */
    t.hasRequiredParameters = function (macroMetadata) {
        return macroMetadata.anyParameterRequired;
    };

    /**
     * Provide a CSV of macroNames to include only these macros. Has to be called before preLoadMacro() runs.
     *
     * E.g. "code, cheese"
     *
     * @param whitelist
     */
    t.setWhitelist = function (whitelist) {
        AJS.MacroBrowser.whitelist = whitelist;
    };

    /**
     * Preloads macro metadata
     * @return promise
     */
    t.preLoadMacro = function () {
        var t = AJS.MacroBrowser;

        t.initData = null; // flag async request started

        if (onGoingPreloadRequest()) {
            return loadMacroMetadataPromise;
        }

        loadMacroMetadataPromise = AJS.MacroBrowser.Rest.loadMacroMetadata({

            // todo: currently you can either have a whitelist or drop the details.  Both is to-be-implemented
            data: t.whitelist ? { whitelist: t.whitelist } : { detailed: false },

            successCallback: function(data) {
                t.initData = data;
                AJS.MacroBrowser.Model.loadMacros(data.macros);
                if (t.initMacroBrowserAfterRequest) { // we have an existing "open browser" command in the queue waiting for the preloading operation to complete
                    t.initBrowser();
                    t.openMacroBrowser(t.initMacroBrowserAfterRequest);
                }
            },
            errorCallback: function(e) {
                AJS.trigger("analytics", {name: "macro-browser.preload-error"});
                AJS.logError("Error requesting macro browser metadata:");
                AJS.logError(e);
                t.initData = {}; // empty initData is used as an error flag in the "open" method
            }
        });
    };

})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-fields.js' */
/**
 * Returns an object wrapper for a parameter-div jQuery object and the input in
 * that div that stores the internal parameter value (as opposed to the display
 * field, although they may be the same).
 */
AJS.MacroBrowser.Field = function (paramDiv, input, options) {
    options = options || {};

    var setValue = options.setValue || function (value) {
        input.val(value);
    };

    var getValue = options.getValue || function () {
        return input.val();
    };
    
    input.change(options.onchange || AJS.MacroBrowser.paramChanged);

    return {
        paramDiv : paramDiv,
        input : input,
        setValue : setValue,
        getValue : getValue
    };
};

/**
 * ParameterFields defines default "type" logic for fields in the Macro
 * Browser's Insert/Edit Macro form.
 * 
 * Each method in this object corresponds to a parameter type as defined in the
 * MacroParameterType enum.
 */
AJS.MacroBrowser.ParameterFields = (function ($) { 

   /**
     * Update the dependencies of the identified parameter with the supplied value.
     */
    var updateDependencies = function (paramName, dependencies, value) {
        if (dependencies && dependencies.length) {
            for ( var i = 0, length = dependencies.length; i < length; i++) {
                AJS.MacroBrowser.fields[dependencies[i]] && AJS.MacroBrowser.fields[dependencies[i]].dependencyUpdated(paramName, value);
            }
        }
    };

    return {
        "updateDependencies" : updateDependencies,
    	
        "username" : function(param, options) {

            options = options || {};

            var className = param.multiple ? "autocomplete-multiuser" : "autocomplete-user";
            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameter());
            var input = AJS.$("input[type='text']", paramDiv);
            input.addClass(className).attr("data-none-message", "Not found");

            // CONF-16859 - check if mandatory params are now filled
            if (param.required) {
                input.keyup(AJS.MacroBrowser.processRequiredParameters);
            }

            if (param.multiple) {
                Confluence.Binder.autocompleteMultiUser(paramDiv);
                options.setValue = function (value) {
                    input.val(value);

                    var values = value.split(','),
                        requests = [],
                        users = [];

                    // unfortunately there is no rest api to get me a list of users, however since its not a common case
                    // to edit macros with multiple users, going to call the existing api for each user
                    for (var i=0,l=values.length; i<l; i++) {
                        var request = function(username) {
                            return $.getJSON(Confluence.getContextPath() + "/rest/prototype/1/user/non-system/" + username)
                                .done(function(user){
                                    if (user && user.name) {
                                        users.push({id: user.name, text: user.displayName, imgSrc: user.avatarUrl});
                                    }
                                }).fail(function(response) {
                                    AJS.logError("Cannot parse user data for macro browser field with: " + response);
                                    users.push({id: username, text: AJS.format("Unknown User ({0})",username), imgSrc: Confluence.getContextPath() + "/images/icons/profilepics/default.png"})
                                });
                        };

                        requests.push(request(values[i]));
                    }

                    // wait for all requests to finish, whether they passed/failed and then populate the field value
                    $.when.apply($, _.map(requests, function (aRequest) {
                        var monitor = $.Deferred();
                        aRequest.always(function () {
                            monitor.resolve();
                        });
                        return monitor.promise();
                    })).done(function () {
                        if (users.length) {
                            input.auiSelect2('data', users);
                        }
                    });
                };
            }
            else {
                input.bind("selected.autocomplete-content", function(e, data) {
                    if (options.onselect) {
                        options.onselect(data.selection);
                    }
                    else if(options.setValue) {
                        options.setValue(data.content.username);
                    }
                    else {
                        updateDependencies(param.name, options.dependencies, input.val());
                        (typeof options.onchange == "function") && options.onchange.apply(input);
                    }
                });
                AJS.Confluence.Binder.autocompleteUserOrGroup(paramDiv);
            }
            return AJS.MacroBrowser.Field(paramDiv, input, options);
        },

        "spacekey" : function(param, options) {
            // for multple space keys just use a String field at the moment
            if (param.multiple) {
                return AJS.MacroBrowser.ParameterFields["string"](param, options);
            }

            options = options || {};

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameter());
            var input = AJS.$("input[type='text']", paramDiv);
            input.addClass("autocomplete-space")
                 .attr("data-template", "{key}")
                 .attr("data-none-message", "Not found");

            // CONF-16859 - check if mandatory params are now filled
            if (param.required) {
                input.keyup(AJS.MacroBrowser.processRequiredParameters);
            }

            input.bind("selected.autocomplete-content", function(e, data) {
              if (options.onselect) {
                  options.onselect(data.selection);
              }
              else if(options.setValue) {
                  options.setValue(data.content.key);
              }
              else {
                  updateDependencies(param.name, options.dependencies, input.val());
                  (typeof options.onchange == "function") && options.onchange.apply(input);
              }
            });
            AJS.Confluence.Binder.autocompleteSpace(paramDiv);

            return AJS.MacroBrowser.Field(paramDiv, input);
        },

        "attachment" : function (param, options) {
            if (param.multiple) {
                return AJS.MacroBrowser.ParameterFields["string"](param,
                        options);
            }

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameterSelect());
            var input = AJS.$("select", paramDiv);

            options = options || {};
            options.setValue = options.setValue || function(value) {
                // check if the value being set is in the list of options
                // if not then add it as a new option - with an indication that
                // it is not a valid choice for this select box
                var foundOption = false;
                //Don't use a JQuery filter of "[value=" +value+"]" since value is un-escaped user-data
                input.find("option").each(function() {
                    if (this.value == value) {
                        foundOption = true;
                        return false;
                    }
                });

                if (!foundOption) {
                    input.append(AJS.$("<option/>").attr("value", value).text(value + " (" + "Not found" + ")"));
                    input.tempValue = value;
                } else {
                    delete input.tempValue;
                }
                
                // CONF-15415 : Spurious error thrown in IE6
                try {
                    input.val(value);
                } catch (err) {
                    AJS.logError(err);
                }

                input.change();
            };

            var field = AJS.MacroBrowser.Field(paramDiv, input, options);
            field.updateDependencies = updateDependencies;
            field.getData = function(req) {
            	if (!((req.title && req.spaceKey) || req.pageId || req.draftId)) {
            		AJS.log("Not enough parameters to send attachmentsearch request");
                    return;	// not enough content info to get attachments
            	}

                var currentValue = input.tempValue || input.val();

                if (options.fileTypes) {
                    req.fileTypes = options.fileTypes;
                }
                
                var url = AJS.params.contextPath + (req.draftId ? "/json/draftattachmentsearch.action" : "/json/attachmentsearch.action");
                $.getJSON(url, req, function(data) {
                    if (data.error) {
                        return;
                    }

                    $("option", input).remove();
                    var attachments = data.attachments;

                    // if there are no attachments on the page then populate the options with
                    // a message stating this
                    if (!attachments || !attachments.length) {
                        // AJS.log("attachment - No attachments so creating message. tempValue = " + input.tempValue);
                        input.append(AJS.$("<option/>").attr("value", "").html("No appropriate attachments"));

                        if (input.tempValue) {
                            options.setValue(input.tempValue);
                        }
                    } else {
                        for (var i = 0, length = attachments.length; i < length; i++) {
                            input.append(AJS.$("<option/>").attr("value", attachments[i].name).text(attachments[i].name));
                        }

                        currentValue = currentValue || input.tempValue;
                        options.setValue(currentValue || attachments[0].name);
                    }
                    //in IE9 only the first character of the selected option is shown, force a redraw
                    input.attr("style", "");
                });
            };

            return field;
        },

        "confluence-content" : function (param, options) {
    
            // If multiple confluence-content field then only return a String at the moment
            if (param.multiple) {
                return AJS.MacroBrowser.ParameterFields["string"](param, options);
            }

            options = options || {};
            param.options = param.options || {};

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameter()),
                input = AJS.$("input[type='text']", paramDiv)
                        .attr("data-none-message", "Not found")
                        .attr("data-template", ""); // no template as some logic is required to build the value

            // CONF-16859 - check if mandatory params are filled on keypresses in this field.
            if (param.required) {
                input.keyup(AJS.MacroBrowser.processRequiredParameters);
            }

            // CONF-15438 - update any dependencies of the field when it is changed
            options.onchange = options.onchange || function (e) {
                var val = input.val();
                updateDependencies(param.name, options.dependencies, val);
            };
            options.setValue = options.setValue || function (value) {
                input.val(value);
                (typeof options.onchange == "function") && options.onchange.apply(input);
            };
            
            input.bind("selected.autocomplete-content", function(e, data) {
                var datePathPrefix = "";
                if (param.options.includeDatePath == "true" && data.content.type == "blogpost") {
                    var splitDate = data.content.createdDate.date.split("-");
                    datePathPrefix = "/" + splitDate[0] + "/" + splitDate[1]  + "/" + splitDate[2].substring(0, 2) + "/";
                }
                var spaceKey = data.content.space && data.content.space.key;
                var isSpaceKeyNeeded = (spaceKey && spaceKey != AJS.Meta.get('space-key'));
                if (data.content.title.indexOf(":") != -1) {
                    isSpaceKeyNeeded = true;
                }
                var markup = (isSpaceKeyNeeded ? (spaceKey + ":") : "") + datePathPrefix + data.content.title;

                input.val(markup);

                if (options.onselect) {
                  options.onselect(data.selection);
                }
                else {
                  options.setValue(markup, input);
                }
            });

            if (param.options.spaceKey) {
                if (param.options.spaceKey.toLowerCase() == "@self") {
                    param.options.spaceKey = AJS.Meta.get('space-key');
                }
                input.attr("data-spacekey", param.options.spaceKey);
            }

            var type = param.options.type;
            if (typeof type == "string") {
                if(type == "page") {
                    input.addClass("autocomplete-page");
                    AJS.Confluence.Binder.autocompletePage(paramDiv);
                }
                else if (type == "blogpost") {
                    input.addClass("autocomplete-blogpost");
                    AJS.Confluence.Binder.autocompleteBlogpost(paramDiv);
                }
                else if (type == "attachment") {
                    input.addClass("autocomplete-attachment");
                    AJS.Confluence.Binder.autocompleteAttachment(paramDiv);
                }
            }
            else { // default to pages and blogs
                input.addClass("autocomplete-confluence-content");
                AJS.Confluence.Binder.autocompleteConfluenceContent(paramDiv);
            }

            return AJS.MacroBrowser.Field(paramDiv, input, options);
        },
    
        /**
         * Default field for all unknown types.
         */
        "string" : function (param, options) {

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameter());
            var input = $("input", paramDiv);

            if (param.required) {
                input.keyup(AJS.MacroBrowser.processRequiredParameters);
            }

            return AJS.MacroBrowser.Field(paramDiv, input, options);
        },

        /**
         * A checkbox - assumes not true means false, not null.
         */
        "boolean" : function (param, options) {

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameterBoolean());
            var input = $("input", paramDiv);

            options = options || {};
            options.setValue = options.setValue || function (value) {
                if (/true/i.test(value) ||
                    (/true/i.test(param.defaultValue) && !(/false/i).test(value))) {
                    input.prop("checked", true);
                }
            };

            return AJS.MacroBrowser.Field(paramDiv, input, options);
        },

        "enum" : function (param, options) {
            if (param.multiple) {
                return AJS.MacroBrowser.ParameterFields["string"](param, options);
            }

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameterSelect());
            var input = $("select", paramDiv);
            if (!(param.required || param.defaultValue)) {
                input.append(AJS.$("<option/>").attr("value", ""));
            }
            $(param.enumValues).each(function() {
                input.append(AJS.$("<option/>").attr("value", this).html("" + this));
            });

            return AJS.MacroBrowser.Field(paramDiv, input, options);
        },

        /**
         * Like a "string" field but hidden.
         */
        "_hidden" : function (param, options) {

            var paramDiv = $(Confluence.Templates.MacroBrowser.macroParameterHidden()).hide();
            var input = $("input", paramDiv);

            return AJS.MacroBrowser.Field(paramDiv, input, options);
        }
    
    };
})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-smartfields.js' */
/**
 * Activates smart fields support for a pair of Page / Attachment fields in a macro.
 * 
 * Expects the following macro parameters for the "macroName" to be defined:
 * 
 *   <parameter name="page" type="confluence-content"/>
 *   <parameter name="name" type="attachment" required="true">
 *     <alias name=""/>
 *   </parameter>
 * 
 * Usage in macro specific js file:
 *   AJS.MacroBrowser.activateAttachmentsFromPageSmartFields("multimedia", ["swf","avi"]);
 *
 * Note this function uses AJS.MacroBrowser.setMacroJsOverride for the specified macro, so
 * this will replace any existing override previous set, or this functionality will stop working
 * if an override is set after calling activateSmartFieldsAttachmentsOnPage. 
 *
 * @param macroName the name of the macro to add page/attachment smart field support to
 * @param fileTypes an array containing the file extensions to be shown
 */
(function($) {

    var MacroJsOverrideForSmartFields = function(fileTypes) {
        this.fileTypes = fileTypes;
    };

    MacroJsOverrideForSmartFields.prototype.beforeParamsSet = function(params, inserting) {
        // If the macro has no parameters set for the page, date or space set the page to the one
        // currently being edited. See beforeParamsRetrieved for the reverse.
        if (!params.page && !(params.date || params.space)) {
            if (AJS.params.contentType == "page" || AJS.params.contentType == "blogpost") {
                params.page = AJS.Editor.getCurrentTitle();
            } else if (AJS.params.contentType == "comment") {
                params.page = AJS.params.pageTitle;
            }
        }
        if (params.date) {
            // will be in format mm/dd/yyyy, should be yyyy/mm/dd
            var parts = params.date.split("/");
            params.page = ["", parts[2], parts[0], parts[1], params.page].join("/");
        }
        if (params.space) {
            params.page = params.space + ":" + params.page;
        }
        return params;
    };

    MacroJsOverrideForSmartFields.prototype.beforeParamsRetrieved = function(params) {
        if (params.page) {
            var spacePageArr = params.page.split(":");
            if (spacePageArr.length > 1) {
                params.space = spacePageArr[0];
                params.page = spacePageArr[1];
            }
            var parts = params.page.split("/");
            if (parts.length > 1) {
                // will be in format yyyy/mm/dd/Page, should be mm/dd/yyyy
                params.date = [parts[2], parts[3], parts[1]].join("/");
                params.page = parts[4];
            }
            // If the page specified is the current page being edited, remove the page title parameter.
            // Even if a user entered it manually it is good to get rid of it as the macro parameters don't handle page renames
            // See beforeParamsSet for the reverse.
            if (((AJS.params.contentType == "page" || AJS.params.contentType == "blogpost") && params.page == AJS.Editor.getCurrentTitle()) ||
                 (AJS.params.contentType == "comment" && params.page == AJS.params.pageTitle)) {
                delete params.page;
            }
        }
        return params;
    };

    MacroJsOverrideForSmartFields.prototype.fields = {
        "attachment" : function(param) {

            /**
             *  Assumes value in form SPACEKEY:(/yyyy/mm/dd/)Title
             */
            var parsePageLink = function(pageLink) {
                var o = {};

                var bits = pageLink.split(":", 2);
                o.spaceKey = ((bits.length == 2) && bits[0]) || AJS.Meta.get('space-key');
                o.title = bits[bits.length - 1];

                if (o.title.indexOf("/") == 0) {
                    // blogpost
                    o.postingDay = o.title.substr(1, 10);
                    o.title = o.title.substr(12);
                }

                // If the page title is the same as the page being edited, leave it blank and use the content Id.
                if (o.title == AJS.Editor.getCurrentTitle()) {
                    o.title = "";
                }
                if (!o.title) {
                    if (AJS.params.newPage) {
                        o.draftId = AJS.Meta.get('content-id');
                    } else {
                        o.pageId = AJS.params.pageId;
                    }
                }
                return o;
            };

            var attachmentOptions = {
                fileTypes : this.fileTypes
            }

            var field = AJS.MacroBrowser.ParameterFields["attachment"](param, attachmentOptions);

            field.dependencyUpdated = function(dependencyName, dependencyValue) {
                AJS.debug("attachment:dependencyUpdated called: " + dependencyName + ", " + dependencyValue);

                var req = parsePageLink(dependencyValue);
                this.getData(req);
            };
            return field;
        },

        "confluence-content" : function(param) {
            var options = {
                dependencies : ["name"]
            };

            return AJS.MacroBrowser.ParameterFields["confluence-content"](param, options);
        }
    };

    AJS.MacroBrowser.activateSmartFieldsAttachmentsOnPage = function(macroName, fileTypes) {
        AJS.MacroBrowser.setMacroJsOverride(macroName, new MacroJsOverrideForSmartFields(fileTypes));
    }

})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'soy/macro-browser.soy' */
// This file was automatically generated from macro-browser.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.MacroBrowser == 'undefined') { Confluence.Templates.MacroBrowser = {}; }


Confluence.Templates.MacroBrowser.macroSummaryList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol id="category-', soy.$$escapeHtml(opt_data.category), '" class="macro-list"></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroSummaryItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="macro-list-item"><h4 class="macro-title"></h4><div class="macro-desc"> </div></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroDescription = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-desc">', opt_data.description, ' </div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.insertMacroPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="macro-insert-container"><input class="macro-name" type="hidden"/><div class="macro-input-fields dialog-panel"><form action="#" class="aui"></form></div><div class="macro-preview-container dialog-panel"><div class="macro-preview-header"><ul class="macro-preview-links"><li><a id="macro-browser-preview-link" class="refresh-link icon icon-refresh" href="#">', soy.$$escapeHtml("Refresh"), '</a></li></ul><span>', soy.$$escapeHtml("Preview"), '</span></div><div id="macro-browser-preview" class="macro-preview"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.missingUserMacroMetadataPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="macro-missing-metadata-container"><p>', "There is no metadata configured for this macro which means no configuration screen can be presented here.", '</p>', (opt_data.showAdminMessage) ? '<p>' + AJS.format("If this is a user macro then you can add metadata to the template using the \x3ca href\x3d\x22{0}\x22 target\x3d\x22_blank\x22\x3eUser Macro Administration\x3c/a\x3e console.","" + '/admin/usermacros.action') + '</p>' : '<p>' + "You must contact an administrator to configure metadata for this macro." + '</p>', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroDocLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span><a href="', soy.$$escapeHtml(opt_data.href), '" class="macro-doco-link">', soy.$$escapeHtml("Documentation"), '</a></span>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameter = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><label></label><input type="text" class="text"/></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterBoolean = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="checkbox macro-param-div boolean-param"><input class="checkbox" type="checkbox" value="true"/><label></label></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterSelect = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><label></label><select class="select"></select></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterHidden = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-div"><input type="hidden"/></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroParameterDesc = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-param-desc">', opt_data.description, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.macroBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="macro-body-div"><label>', soy.$$escapeHtml("Body text"), '</label><textarea class="monospaceInput textarea" type="text" rows="10"></textarea></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Dialog.helpLink({href: "https://docs.atlassian.com/confluence/docs-56/Working+with+Macros"}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.MacroBrowser.gadgetLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a class=\'macro-uri\' href="', soy.$$escapeHtml(opt_data.url), '" title="', soy.$$escapeHtml(opt_data.url), '" target=\'_blank\'>', soy.$$escapeHtml("Gadget URL"), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-macro-browser:macro-browser-js', location = 'js/macro-browser-preload.js' */
AJS.toInit(function($) {

    // bind the function to be run when the macro browser preview frame is loaded
    $(window).bind("render-content-loaded", function(e, body) {
        var iframe = $("#macro-preview-iframe");
        if (iframe.contents().find("body")[0] == body) {
            AJS.MacroBrowser.previewOnload(body);
        }
    });

    AJS.MacroBrowser.preLoadMacro();
});

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:moment', location = '/includes/js/moment/moment.js' */
(function(B){var O,aw="2.5.0",x=this,T=Math.round,Y,t=0,e=1,aK=2,s=3,ap=4,q=5,Q=6,ar={},ag=(typeof module!=="undefined"&&module.exports&&typeof require!=="undefined"),b=/^\/?Date\((\-?\d+)/i,aT=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ay=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,aj=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,X=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,f=/\d\d?/,Z=/\d{1,3}/,C=/\d{1,4}/,aZ=/[+\-]?\d{1,6}/,aP=/\d+/,G=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,n=/Z|[\+\-]\d\d:?\d\d/gi,j=/T/i,aH=/[\+\-]?\d+(\.\d{1,3})?/,W=/\d/,o=/\d\d/,aS=/\d{3}/,aG=/\d{4}/,ac=/[+\-]?\d{6}/,aD=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,R="YYYY-MM-DDTHH:mm:ssZ",aR=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],E=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],V=/([\+\-]|\d\d)/gi,aA="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),A={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},c={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},aO={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},af={},aJ="DDD w W M D d".split(" "),ah="M D H h m s w W".split(" "),aL={M:function(){return this.month()+1},MMM:function(i){return this.lang().monthsShort(this,i)},MMMM:function(i){return this.lang().months(this,i)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(i){return this.lang().weekdaysMin(this,i)},ddd:function(i){return this.lang().weekdaysShort(this,i)},dddd:function(i){return this.lang().weekdays(this,i)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return H(this.year()%100,2)},YYYY:function(){return H(this.year(),4)},YYYYY:function(){return H(this.year(),5)},YYYYYY:function(){var a1=this.year(),i=a1>=0?"+":"-";return i+H(Math.abs(a1),6)},gg:function(){return H(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return H(this.weekYear(),5)},GG:function(){return H(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return H(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return J(this.milliseconds()/100)},SS:function(){return H(J(this.milliseconds()/10),2)},SSS:function(){return H(this.milliseconds(),3)},SSSS:function(){return H(this.milliseconds(),3)},Z:function(){var a1=-this.zone(),i="+";if(a1<0){a1=-a1;i="-"}return i+H(J(a1/60),2)+":"+H(J(a1)%60,2)},ZZ:function(){var a1=-this.zone(),i="+";if(a1<0){a1=-a1;i="-"}return i+H(J(a1/60),2)+H(J(a1)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},S=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function L(a1,i){return function(a2){return H(a1.call(this,a2),i)}}function g(i,a1){return function(a2){return this.lang().ordinal(i.call(this,a2),a1)}}while(aJ.length){Y=aJ.pop();aL[Y+"o"]=g(aL[Y],Y)}while(ah.length){Y=ah.pop();aL[Y+Y]=L(aL[Y],2)}aL.DDDD=L(aL.DDD,3);function aB(){}function I(i){aX(i);au(this,i)}function aa(a3){var a6=l(a3),a5=a6.year||0,a1=a6.month||0,i=a6.week||0,a9=a6.day||0,a7=a6.hour||0,a4=a6.minute||0,a8=a6.second||0,a2=a6.millisecond||0;this._milliseconds=+a2+a8*1000+a4*60000+a7*3600000;this._days=+a9+i*7;this._months=+a1+a5*12;this._data={};this._bubble()}function au(a2,a1){for(var a3 in a1){if(a1.hasOwnProperty(a3)){a2[a3]=a1[a3]}}if(a1.hasOwnProperty("toString")){a2.toString=a1.toString}if(a1.hasOwnProperty("valueOf")){a2.valueOf=a1.valueOf}return a2}function k(i){if(i<0){return Math.ceil(i)}else{return Math.floor(i)}}function H(a4,a3,a2){var a1=Math.abs(a4)+"",i=a4>=0;while(a1.length<a3){a1="0"+a1}return(i?(a2?"+":""):"-")+a1}function D(a3,a2,a6,a5){var a1=a2._milliseconds,a8=a2._days,i=a2._months,a4,a7;if(a1){a3._d.setTime(+a3._d+a1*a6)}if(a8||i){a4=a3.minute();a7=a3.hour()}if(a8){a3.date(a3.date()+a8*a6)}if(i){a3.month(a3.month()+i*a6)}if(a1&&!a5){O.updateOffset(a3)}if(a8||i){a3.minute(a4);a3.hour(a7)}}function a(i){return Object.prototype.toString.call(i)==="[object Array]"}function d(i){return Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date}function aI(a6,a5,a2){var a1=Math.min(a6.length,a5.length),a3=Math.abs(a6.length-a5.length),a7=0,a4;for(a4=0;a4<a1;a4++){if((a2&&a6[a4]!==a5[a4])||(!a2&&J(a6[a4])!==J(a5[a4]))){a7++}}return a7+a3}function aN(a1){if(a1){var i=a1.toLowerCase().replace(/(.)s$/,"$1");a1=c[a1]||aO[i]||i}return a1}function l(a2){var a1={},i,a3;for(a3 in a2){if(a2.hasOwnProperty(a3)){i=aN(a3);if(i){a1[i]=a2[a3]}}}return a1}function am(a1){var i,a2;if(a1.indexOf("week")===0){i=7;a2="day"}else{if(a1.indexOf("month")===0){i=12;a2="month"}else{return}}O[a1]=function(a7,a4){var a6,a3,a8=O.fn._lang[a1],a5=[];if(typeof a7==="number"){a4=a7;a7=B}a3=function(ba){var a9=O().utc().set(a2,ba);return a8.call(O.fn._lang,a9,a7||"")};if(a4!=null){return a3(a4)}else{for(a6=0;a6<i;a6++){a5.push(a3(a6))}return a5}}}function J(i){var a2=+i,a1=0;if(a2!==0&&isFinite(a2)){if(a2>=0){a1=Math.floor(a2)}else{a1=Math.ceil(a2)}}return a1}function aV(i,a1){return new Date(Date.UTC(i,a1+1,0)).getUTCDate()}function aQ(i){return aE(i)?366:365}function aE(i){return(i%4===0&&i%100!==0)||i%400===0}function aX(i){var a1;if(i._a&&i._pf.overflow===-2){a1=i._a[e]<0||i._a[e]>11?e:i._a[aK]<1||i._a[aK]>aV(i._a[t],i._a[e])?aK:i._a[s]<0||i._a[s]>23?s:i._a[ap]<0||i._a[ap]>59?ap:i._a[q]<0||i._a[q]>59?q:i._a[Q]<0||i._a[Q]>999?Q:-1;if(i._pf._overflowDayOfYear&&(a1<t||a1>aK)){a1=aK}i._pf.overflow=a1}}function az(i){i._pf={empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function av(i){if(i._isValid==null){i._isValid=!isNaN(i._d.getTime())&&i._pf.overflow<0&&!i._pf.empty&&!i._pf.invalidMonth&&!i._pf.nullInput&&!i._pf.invalidFormat&&!i._pf.userInvalidated;if(i._strict){i._isValid=i._isValid&&i._pf.charsLeftOver===0&&i._pf.unusedTokens.length===0}}return i._isValid}function z(i){return i?i.toLowerCase().replace("_","-"):i}function u(i,a1){return a1._isUTC?O(i).zone(a1._offset||0):O(i).local()}au(aB.prototype,{set:function(a1){var a3,a2;for(a2 in a1){a3=a1[a2];if(typeof a3==="function"){this[a2]=a3}else{this["_"+a2]=a3}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(i){return this._months[i.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(i){return this._monthsShort[i.month()]},monthsParse:function(a1){var a2,a4,a3;if(!this._monthsParse){this._monthsParse=[]}for(a2=0;a2<12;a2++){if(!this._monthsParse[a2]){a4=O.utc([2000,a2]);a3="^"+this.months(a4,"")+"|^"+this.monthsShort(a4,"");this._monthsParse[a2]=new RegExp(a3.replace(".",""),"i")}if(this._monthsParse[a2].test(a1)){return a2}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(i){return this._weekdays[i.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(i){return this._weekdaysShort[i.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(i){return this._weekdaysMin[i.day()]},weekdaysParse:function(a4){var a1,a3,a2;if(!this._weekdaysParse){this._weekdaysParse=[]}for(a1=0;a1<7;a1++){if(!this._weekdaysParse[a1]){a3=O([2000,1]).day(a1);a2="^"+this.weekdays(a3,"")+"|^"+this.weekdaysShort(a3,"")+"|^"+this.weekdaysMin(a3,"");this._weekdaysParse[a1]=new RegExp(a2.replace(".",""),"i")}if(this._weekdaysParse[a1].test(a4)){return a1}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a1){var i=this._longDateFormat[a1];if(!i&&this._longDateFormat[a1.toUpperCase()]){i=this._longDateFormat[a1.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a2){return a2.slice(1)});this._longDateFormat[a1]=i}return i},isPM:function(i){return((i+"").toLowerCase().charAt(0)==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(i,a1,a2){if(i>11){return a2?"pm":"PM"}else{return a2?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a1,a2){var i=this._calendar[a1];return typeof i==="function"?i.apply(a2):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a3,a2,a1,a4){var i=this._relativeTime[a1];return(typeof i==="function")?i(a3,a2,a1,a4):i.replace(/%d/i,a3)},pastFuture:function(a2,i){var a1=this._relativeTime[a2>0?"future":"past"];return typeof a1==="function"?a1(i):a1.replace(/%s/i,i)},ordinal:function(i){return this._ordinal.replace("%d",i)},_ordinal:"%d",preparse:function(i){return i},postformat:function(i){return i},week:function(i){return y(i,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function ae(a1,i){i.abbr=a1;if(!ar[a1]){ar[a1]=new aB()}ar[a1].set(i);return ar[a1]}function aU(i){delete ar[i]}function at(a5){var a4=0,a2,a7,a6,a3,a1=function(i){if(!ar[i]&&ag){try{require("./lang/"+i)}catch(a8){}}return ar[i]};if(!a5){return O.fn._lang}if(!a(a5)){a7=a1(a5);if(a7){return a7}a5=[a5]}while(a4<a5.length){a3=z(a5[a4]).split("-");a2=a3.length;a6=z(a5[a4+1]);a6=a6?a6.split("-"):null;while(a2>0){a7=a1(a3.slice(0,a2).join("-"));if(a7){return a7}if(a6&&a6.length>=a2&&aI(a3,a6,true)>=a2-1){break}a2--}a4++}return O.fn._lang}function ad(i){if(i.match(/\[[\s\S]/)){return i.replace(/^\[|\]$/g,"")}return i.replace(/\\/g,"")}function p(a3){var a4=a3.match(aj),a1,a2;for(a1=0,a2=a4.length;a1<a2;a1++){if(aL[a4[a1]]){a4[a1]=aL[a4[a1]]}else{a4[a1]=ad(a4[a1])}}return function(a5){var i="";for(a1=0;a1<a2;a1++){i+=a4[a1] instanceof Function?a4[a1].call(a5,a3):a4[a1]}return i}}function ai(i,a1){if(!i.isValid()){return i.lang().invalidDate()}a1=a0(a1,i.lang());if(!af[a1]){af[a1]=p(a1)}return af[a1](i)}function a0(a3,a4){var a1=5;function a2(i){return a4.longDateFormat(i)||i}X.lastIndex=0;while(a1>=0&&X.test(a3)){a3=a3.replace(X,a2);X.lastIndex=0;a1-=1}return a3}function al(a3,a2){var a1,i=a2._strict;switch(a3){case"DDDD":return aS;case"YYYY":case"GGGG":case"gggg":return i?aG:C;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?ac:aZ;case"S":if(i){return W}case"SS":if(i){return o}case"SSS":case"DDD":return i?aS:Z;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return G;case"a":case"A":return at(a2._l)._meridiemParse;case"X":return aH;case"Z":case"ZZ":return n;case"T":return j;case"SSSS":return aP;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?o:f;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return i?W:f;default:a1=new RegExp(aY(ao(a3.replace("\\","")),"i"));return a1}}function v(a1){a1=a1||"";var i=(a1.match(n)||[]),a4=i[i.length-1]||[],a3=(a4+"").match(V)||["-",0,0],a2=+(a3[1]*60)+J(a3[2]);return a3[0]==="+"?-a2:a2}function an(a4,a2,a3){var a1,i=a3._a;switch(a4){case"M":case"MM":if(a2!=null){i[e]=J(a2)-1}break;case"MMM":case"MMMM":a1=at(a3._l).monthsParse(a2);if(a1!=null){i[e]=a1}else{a3._pf.invalidMonth=a2}break;case"D":case"DD":if(a2!=null){i[aK]=J(a2)}break;case"DDD":case"DDDD":if(a2!=null){a3._dayOfYear=J(a2)}break;case"YY":i[t]=J(a2)+(J(a2)>68?1900:2000);break;case"YYYY":case"YYYYY":case"YYYYYY":i[t]=J(a2);break;case"a":case"A":a3._isPm=at(a3._l).isPM(a2);break;case"H":case"HH":case"h":case"hh":i[s]=J(a2);break;case"m":case"mm":i[ap]=J(a2);break;case"s":case"ss":i[q]=J(a2);break;case"S":case"SS":case"SSS":case"SSSS":i[Q]=J(("0."+a2)*1000);break;case"X":a3._d=new Date(parseFloat(a2)*1000);break;case"Z":case"ZZ":a3._useUTC=true;a3._tzm=v(a2);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a4=a4.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a4=a4.substr(0,2);if(a2){a3._w=a3._w||{};a3._w[a4]=a2}break}}function ab(a5){var a7,a6,ba=[],a3,a9,a2,bb,bc,a4,a8,a1;if(a5._d){return}a3=m(a5);if(a5._w&&a5._a[aK]==null&&a5._a[e]==null){a2=function(bd){var i=parseInt(bd,10);return bd?(bd.length<3?(i>68?1900+i:2000+i):i):(a5._a[t]==null?O().weekYear():a5._a[t])};bb=a5._w;if(bb.GG!=null||bb.W!=null||bb.E!=null){bc=r(a2(bb.GG),bb.W||1,bb.E,4,1)}else{a4=at(a5._l);a8=bb.d!=null?aW(bb.d,a4):(bb.e!=null?parseInt(bb.e,10)+a4._week.dow:0);a1=parseInt(bb.w,10)||1;if(bb.d!=null&&a8<a4._week.dow){a1++}bc=r(a2(bb.gg),a1,a8,a4._week.doy,a4._week.dow)}a5._a[t]=bc.year;a5._dayOfYear=bc.dayOfYear}if(a5._dayOfYear){a9=a5._a[t]==null?a3[t]:a5._a[t];if(a5._dayOfYear>aQ(a9)){a5._pf._overflowDayOfYear=true}a6=F(a9,0,a5._dayOfYear);a5._a[e]=a6.getUTCMonth();a5._a[aK]=a6.getUTCDate()}for(a7=0;a7<3&&a5._a[a7]==null;++a7){a5._a[a7]=ba[a7]=a3[a7]}for(;a7<7;a7++){a5._a[a7]=ba[a7]=(a5._a[a7]==null)?(a7===2?1:0):a5._a[a7]}ba[s]+=J((a5._tzm||0)/60);ba[ap]+=J((a5._tzm||0)%60);a5._d=(a5._useUTC?F:ak).apply(null,ba)}function ax(a1){var i;if(a1._d){return}i=l(a1._i);a1._a=[i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond];ab(a1)}function m(a1){var i=new Date();if(a1._useUTC){return[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]}else{return[i.getFullYear(),i.getMonth(),i.getDate()]}}function N(a4){a4._a=[];a4._pf.empty=true;var a3=at(a4._l),a7=""+a4._i,a6,a2,ba,a5,a9,a1=a7.length,a8=0;ba=a0(a4._f,a3).match(aj)||[];for(a6=0;a6<ba.length;a6++){a5=ba[a6];a2=(a7.match(al(a5,a4))||[])[0];if(a2){a9=a7.substr(0,a7.indexOf(a2));if(a9.length>0){a4._pf.unusedInput.push(a9)}a7=a7.slice(a7.indexOf(a2)+a2.length);a8+=a2.length}if(aL[a5]){if(a2){a4._pf.empty=false}else{a4._pf.unusedTokens.push(a5)}an(a5,a2,a4)}else{if(a4._strict&&!a2){a4._pf.unusedTokens.push(a5)}}}a4._pf.charsLeftOver=a1-a8;if(a7.length>0){a4._pf.unusedInput.push(a7)}if(a4._isPm&&a4._a[s]<12){a4._a[s]+=12}if(a4._isPm===false&&a4._a[s]===12){a4._a[s]=0}ab(a4);aX(a4)}function ao(i){return i.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a1,a5,a4,a3,a2){return a5||a4||a3||a2})}function aY(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aM(a1){var a5,a3,a4,a2,a6;if(a1._f.length===0){a1._pf.invalidFormat=true;a1._d=new Date(NaN);return}for(a2=0;a2<a1._f.length;a2++){a6=0;a5=au({},a1);az(a5);a5._f=a1._f[a2];N(a5);if(!av(a5)){continue}a6+=a5._pf.charsLeftOver;a6+=a5._pf.unusedTokens.length*10;a5._pf.score=a6;if(a4==null||a6<a4){a4=a6;a3=a5}}au(a1,a3||a5)}function h(a3){var a4,a2=a3._i,a1=aD.exec(a2);if(a1){a3._pf.iso=true;for(a4=4;a4>0;a4--){if(a1[a4]){a3._f=aR[a4-1]+(a1[6]||" ");break}}for(a4=0;a4<4;a4++){if(E[a4][1].exec(a2)){a3._f+=E[a4][0];break}}if(a2.match(n)){a3._f+="Z"}N(a3)}else{a3._d=new Date(a2)}}function M(a2){var a1=a2._i,i=b.exec(a1);if(a1===B){a2._d=new Date()}else{if(i){a2._d=new Date(+i[1])}else{if(typeof a1==="string"){h(a2)}else{if(a(a1)){a2._a=a1.slice(0);ab(a2)}else{if(d(a1)){a2._d=new Date(+a1)}else{if(typeof(a1)==="object"){ax(a2)}else{a2._d=new Date(a1)}}}}}}}function ak(a7,i,a5,a4,a6,a3,a2){var a1=new Date(a7,i,a5,a4,a6,a3,a2);if(a7<1970){a1.setFullYear(a7)}return a1}function F(a1){var i=new Date(Date.UTC.apply(null,arguments));if(a1<1970){i.setUTCFullYear(a1)}return i}function aW(i,a1){if(typeof i==="string"){if(!isNaN(i)){i=parseInt(i,10)}else{i=a1.weekdaysParse(i);if(typeof i!=="number"){return null}}}return i}function aC(i,a2,a1,a3,a4){return a4.relativeTime(a2||1,!!a1,i,a3)}function w(a2,i,a1){var a7=T(Math.abs(a2)/1000),a3=T(a7/60),a6=T(a3/60),a8=T(a6/24),a4=T(a8/365),a5=a7<45&&["s",a7]||a3===1&&["m"]||a3<45&&["mm",a3]||a6===1&&["h"]||a6<22&&["hh",a6]||a8===1&&["d"]||a8<=25&&["dd",a8]||a8<=45&&["M"]||a8<345&&["MM",T(a8/30)]||a4===1&&["y"]||["yy",a4];a5[2]=i;a5[3]=a2>0;a5[4]=a1;return aC.apply({},a5)}function y(a4,a2,a5){var a1=a5-a2,i=a5-a4.day(),a3;if(i>a1){i-=7}if(i<a1-7){i+=7}a3=O(a4).add("d",i);return{week:Math.ceil(a3.dayOfYear()/7),year:a3.year()}}function r(a4,a3,a5,a7,i){var a6=new Date(H(a4,6,true)+"-01-01").getUTCDay(),a2,a1;a5=a5!=null?a5:i;a2=i-a6+(a6>a7?7:0);a1=7*(a3-1)+(a5-i)+a2+1;return{year:a1>0?a4:a4-1,dayOfYear:a1>0?a1:aQ(a4-1)+a1}}function K(a1){var i=a1._i,a2=a1._f;if(typeof a1._pf==="undefined"){az(a1)}if(i===null){return O.invalid({nullInput:true})}if(typeof i==="string"){a1._i=i=at().preparse(i)}if(O.isMoment(i)){a1=au({},i);a1._d=new Date(+i._d)}else{if(a2){if(a(a2)){aM(a1)}else{N(a1)}}else{M(a1)}}return new I(a1)}O=function(a1,a2,a3,i){if(typeof(a3)==="boolean"){i=a3;a3=B}return K({_i:a1,_f:a2,_l:a3,_strict:i,_isUTC:false})};O.utc=function(a2,a3,a4,a1){var i;if(typeof(a4)==="boolean"){a1=a4;a4=B}i=K({_useUTC:true,_isUTC:true,_l:a4,_i:a2,_f:a3,_strict:a1}).utc();return i};O.unix=function(i){return O(i*1000)};O.duration=function(a1,a5){var a6=a1,a4=null,i,a3,a2;if(O.isDuration(a1)){a6={ms:a1._milliseconds,d:a1._days,M:a1._months}}else{if(typeof a1==="number"){a6={};if(a5){a6[a5]=a1}else{a6.milliseconds=a1}}else{if(!!(a4=aT.exec(a1))){i=(a4[1]==="-")?-1:1;a6={y:0,d:J(a4[aK])*i,h:J(a4[s])*i,m:J(a4[ap])*i,s:J(a4[q])*i,ms:J(a4[Q])*i}}else{if(!!(a4=ay.exec(a1))){i=(a4[1]==="-")?-1:1;a2=function(a8){var a7=a8&&parseFloat(a8.replace(",","."));return(isNaN(a7)?0:a7)*i};a6={y:a2(a4[2]),M:a2(a4[3]),d:a2(a4[4]),h:a2(a4[5]),m:a2(a4[6]),s:a2(a4[7]),w:a2(a4[8])}}}}}a3=new aa(a6);if(O.isDuration(a1)&&a1.hasOwnProperty("_lang")){a3._lang=a1._lang}return a3};O.version=aw;O.defaultFormat=R;O.updateOffset=function(){};O.lang=function(a1,i){var a2;if(!a1){return O.fn._lang._abbr}if(i){ae(z(a1),i)}else{if(i===null){aU(a1);a1="en"}else{if(!ar[a1]){at(a1)}}}a2=O.duration.fn._lang=O.fn._lang=at(a1);return a2._abbr};O.langData=function(i){if(i&&i._lang&&i._lang._abbr){i=i._lang._abbr}return at(i)};O.isMoment=function(i){return i instanceof I};O.isDuration=function(i){return i instanceof aa};for(Y=S.length-1;Y>=0;--Y){am(S[Y])}O.normalizeUnits=function(i){return aN(i)};O.invalid=function(a1){var i=O.utc(NaN);if(a1!=null){au(i._pf,a1)}else{i._pf.userInvalidated=true}return i};O.parseZone=function(i){return O(i).parseZone()};au(O.fn=I.prototype,{clone:function(){return O(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var i=O(this).utc();if(0<i.year()&&i.year()<=9999){return ai(i,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}else{return ai(i,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var i=this;return[i.year(),i.month(),i.date(),i.hours(),i.minutes(),i.seconds(),i.milliseconds()]},isValid:function(){return av(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&aI(this._a,(this._isUTC?O.utc(this._a):O(this._a)).toArray())>0}return false},parsingFlags:function(){return au({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(a1){var i=ai(this,a1||O.defaultFormat);return this.lang().postformat(i)},add:function(i,a2){var a1;if(typeof i==="string"){a1=O.duration(+a2,i)}else{a1=O.duration(i,a2)}D(this,a1,1);return this},subtract:function(i,a2){var a1;if(typeof i==="string"){a1=O.duration(+a2,i)}else{a1=O.duration(i,a2)}D(this,a1,-1);return this},diff:function(a4,a3,i){var a5=u(a4,this),a1=(this.zone()-a5.zone())*60000,a6,a2;a3=aN(a3);if(a3==="year"||a3==="month"){a6=(this.daysInMonth()+a5.daysInMonth())*43200000;a2=((this.year()-a5.year())*12)+(this.month()-a5.month());a2+=((this-O(this).startOf("month"))-(a5-O(a5).startOf("month")))/a6;a2-=((this.zone()-O(this).startOf("month").zone())-(a5.zone()-O(a5).startOf("month").zone()))*60000/a6;if(a3==="year"){a2=a2/12}}else{a6=(this-a5);a2=a3==="second"?a6/1000:a3==="minute"?a6/60000:a3==="hour"?a6/3600000:a3==="day"?(a6-a1)/86400000:a3==="week"?(a6-a1)/604800000:a6}return i?a2:k(a2)},from:function(a1,i){return O.duration(this.diff(a1)).lang(this.lang()._abbr).humanize(!i)},fromNow:function(i){return this.from(O(),i)},calendar:function(){var i=u(O(),this).startOf("day"),a2=this.diff(i,"days",true),a1=a2<-6?"sameElse":a2<-1?"lastWeek":a2<0?"lastDay":a2<1?"sameDay":a2<2?"nextDay":a2<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(a1,this))},isLeapYear:function(){return aE(this.year())},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(a1){var i=this._isUTC?this._d.getUTCDay():this._d.getDay();if(a1!=null){a1=aW(a1,this.lang());return this.add({d:a1-i})}else{return i}},month:function(i){var a1=this._isUTC?"UTC":"",a2;if(i!=null){if(typeof i==="string"){i=this.lang().monthsParse(i);if(typeof i!=="number"){return this}}a2=this.date();this.date(1);this._d["set"+a1+"Month"](i);this.date(Math.min(a2,this.daysInMonth()));O.updateOffset(this);return this}else{return this._d["get"+a1+"Month"]()}},startOf:function(i){i=aN(i);switch(i){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(i==="week"){this.weekday(0)}else{if(i==="isoWeek"){this.isoWeekday(1)}}return this},endOf:function(i){i=aN(i);return this.startOf(i).add((i==="isoWeek"?"week":i),1).subtract("ms",1)},isAfter:function(a1,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)>+O(a1).startOf(i)},isBefore:function(a1,i){i=typeof i!=="undefined"?i:"millisecond";return +this.clone().startOf(i)<+O(a1).startOf(i)},isSame:function(a1,i){i=i||"ms";return +this.clone().startOf(i)===+u(a1,this).startOf(i)},min:function(i){i=O.apply(null,arguments);return i<this?this:i},max:function(i){i=O.apply(null,arguments);return i>this?this:i},zone:function(i){var a1=this._offset||0;if(i!=null){if(typeof i==="string"){i=v(i)}if(Math.abs(i)<16){i=i*60}this._offset=i;this._isUTC=true;if(a1!==i){D(this,O.duration(a1-i,"m"),1,true)}}else{return this._isUTC?a1:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else{if(typeof this._i==="string"){this.zone(this._i)}}return this},hasAlignedHourOffset:function(i){if(!i){i=0}else{i=O(i).zone()}return(this.zone()-i)%60===0},daysInMonth:function(){return aV(this.year(),this.month())},dayOfYear:function(i){var a1=T((O(this).startOf("day")-O(this).startOf("year"))/86400000)+1;return i==null?a1:this.add("d",(i-a1))},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(i){var a1=y(this,this.lang()._week.dow,this.lang()._week.doy).year;return i==null?a1:this.add("y",(i-a1))},isoWeekYear:function(i){var a1=y(this,1,4).year;return i==null?a1:this.add("y",(i-a1))},week:function(i){var a1=this.lang().week(this);return i==null?a1:this.add("d",(i-a1)*7)},isoWeek:function(i){var a1=y(this,1,4).week;return i==null?a1:this.add("d",(i-a1)*7)},weekday:function(i){var a1=(this.day()+7-this.lang()._week.dow)%7;return i==null?a1:this.add("d",i-a1)},isoWeekday:function(i){return i==null?this.day()||7:this.day(this.day()%7?i:i-7)},get:function(i){i=aN(i);return this[i]()},set:function(i,a1){i=aN(i);if(typeof this[i]==="function"){this[i](a1)}return this},lang:function(i){if(i===B){return this._lang}else{this._lang=at(i);return this}}});function aF(i,a1){O.fn[i]=O.fn[i+"s"]=function(a2){var a3=this._isUTC?"UTC":"";if(a2!=null){this._d["set"+a3+a1](a2);O.updateOffset(this);return this}else{return this._d["get"+a3+a1]()}}}for(Y=0;Y<aA.length;Y++){aF(aA[Y].toLowerCase().replace(/s$/,""),aA[Y])}aF("year","FullYear");O.fn.days=O.fn.day;O.fn.months=O.fn.month;O.fn.weeks=O.fn.week;O.fn.isoWeeks=O.fn.isoWeek;O.fn.toJSON=O.fn.toISOString;au(O.duration.fn=aa.prototype,{_bubble:function(){var a2=this._milliseconds,a7=this._days,i=this._months,a5=this._data,a6,a4,a1,a3;a5.milliseconds=a2%1000;a6=k(a2/1000);a5.seconds=a6%60;a4=k(a6/60);a5.minutes=a4%60;a1=k(a4/60);a5.hours=a1%24;a7+=k(a1/24);a5.days=a7%30;i+=k(a7/30);a5.months=i%12;a3=k(i/12);a5.years=a3},weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+J(this._months/12)*31536000000},humanize:function(a1){var a2=+this,i=w(a2,!a1,this.lang());if(a1){i=this.lang().pastFuture(a2,i)}return this.lang().postformat(i)},add:function(i,a2){var a1=O.duration(i,a2);this._milliseconds+=a1._milliseconds;this._days+=a1._days;this._months+=a1._months;this._bubble();return this},subtract:function(i,a2){var a1=O.duration(i,a2);this._milliseconds-=a1._milliseconds;this._days-=a1._days;this._months-=a1._months;this._bubble();return this},get:function(i){i=aN(i);return this[i.toLowerCase()+"s"]()},as:function(i){i=aN(i);return this["as"+i.charAt(0).toUpperCase()+i.slice(1)+"s"]()},lang:O.fn.lang,toIsoString:function(){var a3=Math.abs(this.years()),i=Math.abs(this.months()),a5=Math.abs(this.days()),a1=Math.abs(this.hours()),a2=Math.abs(this.minutes()),a4=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(a3?a3+"Y":"")+(i?i+"M":"")+(a5?a5+"D":"")+((a1||a2||a4)?"T":"")+(a1?a1+"H":"")+(a2?a2+"M":"")+(a4?a4+"S":"")}});function U(i){O.duration.fn[i]=function(){return this._data[i]}}function aq(i,a1){O.duration.fn["as"+i]=function(){return +this/a1}}for(Y in A){if(A.hasOwnProperty(Y)){aq(Y,A[Y]);U(Y.toLowerCase())}}aq("Weeks",604800000);O.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};O.lang("en",{ordinal:function(a2){var i=a2%10,a1=(J(a2%100/10)===1)?"th":(i===1)?"st":(i===2)?"nd":(i===3)?"rd":"th";return a2+a1}});function P(a1){var i=false,a2=O;if(typeof ender!=="undefined"){return}if(a1){x.moment=function(){if(!i&&console&&console.warn){i=true;console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")}return a2.apply(null,arguments)};au(x.moment,a2)}else{x.moment=O}}if(ag){module.exports=O;P(true)}else{if(typeof define==="function"&&define.amd){define("moment",function(a1,i,a2){if(a2.config&&a2.config()&&a2.config().noGlobal!==true){P(a2.config().noGlobal===B)}return O})}else{P()}}}).call(this);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:almond', location = '/includes/js/amd/almond-noconflict-pre.js' */
window.__require=window.require;window.__requirejs=window.requirejs;window.__define=window.define;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:almond', location = '/includes/js/amd/almond/almond.js' */
var requirejs,require,define;(function(e){var h,a,k,l,d={},c={},r={},o={},j=Object.prototype.hasOwnProperty,i=[].slice;function s(t,u){return j.call(t,u)}function m(w,u){var E,A,y,B,x,G,H,D,C,z,F=u&&u.split("/"),v=r.map,t=(v&&v["*"])||{};if(w&&w.charAt(0)==="."){if(u){F=F.slice(0,F.length-1);w=F.concat(w.split("/"));for(D=0;D<w.length;D+=1){z=w[D];if(z==="."){w.splice(D,1);D-=1}else{if(z===".."){if(D===1&&(w[2]===".."||w[0]==="..")){break}else{if(D>0){w.splice(D-1,2);D-=2}}}}}w=w.join("/")}else{if(w.indexOf("./")===0){w=w.substring(2)}}}if((F||t)&&v){E=w.split("/");for(D=E.length;D>0;D-=1){A=E.slice(0,D).join("/");if(F){for(C=F.length;C>0;C-=1){y=v[F.slice(0,C).join("/")];if(y){y=y[A];if(y){B=y;x=D;break}}}}if(B){break}if(!G&&t&&t[A]){G=t[A];H=D}}if(!B&&G){B=G;x=H}if(B){E.splice(0,x,B);w=E.join("/")}}return w}function q(t,u){return function(){return a.apply(e,i.call(arguments,0).concat([t,u]))}}function n(t){return function(u){return m(u,t)}}function f(t){return function(u){d[t]=u}}function g(u){if(s(c,u)){var t=c[u];delete c[u];o[u]=true;h.apply(e,t)}if(!s(d,u)&&!s(o,u)){throw new Error("No "+u)}return d[u]}function p(u){var v,t=u?u.indexOf("!"):-1;if(t>-1){v=u.substring(0,t);u=u.substring(t+1,u.length)}return[v,u]}k=function(u,t){var v,x=p(u),w=x[0];u=x[1];if(w){w=m(w,t);v=g(w)}if(w){if(v&&v.normalize){u=v.normalize(u,n(t))}else{u=m(u,t)}}else{u=m(u,t);x=p(u);w=x[0];u=x[1];if(w){v=g(w)}}return{f:w?w+"!"+u:u,n:u,pr:w,p:v}};function b(t){return function(){return(r&&r.config&&r.config[t])||{}}}l={require:function(t){return q(t)},exports:function(t){var u=d[t];if(typeof u!=="undefined"){return u}else{return(d[t]={})}},module:function(t){return{id:t,uri:"",exports:d[t],config:b(t)}}};h=function(u,D,C,B){var w,A,x,t,v,y=[],z;B=B||u;if(typeof C==="function"){D=!D.length&&C.length?["require","exports","module"]:D;for(v=0;v<D.length;v+=1){t=k(D[v],B);A=t.f;if(A==="require"){y[v]=l.require(u)}else{if(A==="exports"){y[v]=l.exports(u);z=true}else{if(A==="module"){w=y[v]=l.module(u)}else{if(s(d,A)||s(c,A)||s(o,A)){y[v]=g(A)}else{if(t.p){t.p.load(t.n,q(B,true),f(A),{});y[v]=d[A]}else{throw new Error(u+" missing "+A)}}}}}}x=C.apply(d[u],y);if(u){if(w&&w.exports!==e&&w.exports!==d[u]){d[u]=w.exports}else{if(x!==e||!z){d[u]=x}}}}else{if(u){d[u]=C}}};requirejs=require=a=function(w,x,t,u,v){if(typeof w==="string"){if(l[w]){return l[w](x)}return g(k(w,x).f)}else{if(!w.splice){r=w;if(x.splice){w=x;x=t;t=null}else{w=e}}}x=x||function(){};if(typeof t==="function"){t=u;u=v}if(u){h(e,w,x,t)}else{setTimeout(function(){h(e,w,x,t)},4)}return a};a.config=function(t){r=t;if(r.deps){a(r.deps,r.callback)}return a};define=function(t,u,v){if(!u.splice){v=u;u=[]}if(!s(d,t)&&!s(c,t)){c[t]=[t,u,v]}};define.amd={jQuery:true}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:almond', location = '/includes/js/amd/almond-noconflict-post.js' */
if(window.__require){window.require=window.__require;window.requirejs=window.__requirejs;window.define=window.__define}else{delete window.define.amd}try{delete window.__require}catch(e){window.__require=undefined}try{delete window.__requirejs}catch(e){window.__requirejs=undefined}try{delete window.__define}catch(e){window.__define=undefined};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:amd', location = '/includes/js/amd/shim/ajs-amd.js' */
define("ajs",function(){return AJS});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:amd', location = '/includes/js/amd/shim/jquery-amd.js' */
define("jquery",function(){return AJS.$});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:amd', location = '/includes/js/amd/shim/underscore-amd.js' */
define("underscore",function(){return _});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:amd', location = '/includes/js/amd/shim/backbone-amd.js' */
define("backbone",["underscore","jquery"],function(){return Backbone});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:analytics-support', location = '/includes/js/analytics-support/analytics-support.js' */
define("confluence-analytics-support",["jquery"],function(e){AJS.Confluence.Analytics=AJS.Confluence.Analytics||{};var f=/([^\?]+)[\?]?([^#]*)[#]?(.*)/;var b=["source","urlPath","queryParams","anchor"];var h;function i(m){var l={};var o=f.exec(m);if(o){for(var n=0;n<b.length;n++){l[b[n]]=o[n]}l.queryParams=c(l.queryParams)}return l}function j(l){if(e.isEmptyObject(l)){return""}else{return(!l.urlPath?"":l.urlPath)+(e.isEmptyObject(l.queryParams)?"":"?"+k(l.queryParams))+(!l.anchor?"":"#"+l.anchor)}}function c(p){var o={};if(p){var n=p.split("&");for(var m=0;m<n.length;m++){var l=n[m].split("=");if(!o[l[0]]){o[l[0]]=[]}o[l[0]].push(n[m].substring(l[0].length+1))}}return o}function k(m){var o="";for(var n in m){for(var l=0;l<m[n].length;l++){o+="&"+n;if(m[n][l]){o+="="+m[n][l]}}}return o.substring(1)}function a(m,n){var l=i(m);if(!e.isEmptyObject(l)){l.queryParams.src=[n]}return j(l)}function g(){if("undefined"===typeof h){var l=e._data(window,"events");h=l&&l.analytics&&l.analytics.length>0}return h}function d(){var l=AJS.Confluence.Analytics.srcRemovedUrl(document.URL);if(document.URL!==l){window.history.replaceState(null,"",l)}}AJS.Confluence.Analytics.setAnalyticsSource=function(l,m){if(g()){l.attr("href",function(o,n){return a(n,encodeURIComponent(m))})}};AJS.Confluence.Analytics.srcRemovedUrl=function(m){var l=i(m);delete l.queryParams.src;return j(l)};AJS.Confluence.Analytics.srcParamValues=function(l){var m=i(l).queryParams;return m&&m.src?m.src:[]};AJS.Confluence.Analytics.publish=function(l,m){AJS.trigger("analytics",{name:l,data:m||{}})};AJS.toInit(function(n){var l=AJS.Confluence.Analytics.srcParamValues(document.URL);for(var m=0;m<l.length;m++){AJS.Confluence.Analytics.publish("confluence.viewpage.src."+l[m])}if(window.history&&window.history.replaceState){d()}});return AJS.Confluence.Analytics});require("confluence-analytics-support");
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'js/page-editor.js' */
Confluence.Editor=$.extend(Confluence.Editor||{},(function(f){var i=[];var d=[];var c=[];var b=false;var h=1;var a=function(){for(var k=0;k<i.length;k++){Confluence.Editor.UI.cancelButton.click(i[k])}for(var k=0;k<d.length;k++){Confluence.Editor.UI.saveButton.click(d[k])}var j=AJS.$(Confluence.Editor.getCurrentForm());for(var k=0;k<c.length;k++){j.submit(c[k])}AJS.$.unbind("init.rte",this)};var g=function(j,l,k,m){m.push(k);if(AJS.Rte&&AJS.Rte.BootstrapManager&&AJS.Rte.BootstrapManager.isInitComplete()){j.bind(l,k)}else{if(!b){b=true;AJS.$.bind("init.rte",a)}}};var e=function(j,l,m){var n=null;if(AJS.Rte&&AJS.Rte.BootstrapManager&&AJS.Rte.BootstrapManager.isInitComplete()){n=function(p,q,o){p.unbind(q,o)}}var k=m.pop();while(k){n&&n(j,l,k);k=m.pop()}};return{bookmark:"",MODE_RICHTEXT:"richtext",MODE_SOURCE:"source",MODE_PREVIEW:"preview",PREVIEW_OUTPUT_TYPE:"PREVIEW",currentEditMode:null,contentHasChangedSinceLastSave:false,sourceInitialValue:false,isSubmitting:false,isCancelling:false,getNumConcurrentEditors:function(){return h},addCancelHandler:function(j){g(Confluence.Editor.UI.cancelButton,"click",j,i)},addSaveHandler:function(j){g(Confluence.Editor.UI.saveButton,"click",j,d)},addSubmitHandler:function(j){g(AJS.$(Confluence.Editor.getCurrentForm()),"submit",j,c)},removeAllCancelHandlers:function(){e(Confluence.Editor.UI.cancelButton,"click",i)},removeAllSaveHandlers:function(){e(Confluence.Editor.UI.saveButton,"click",d)},removeAllSubmitHandlers:function(){e(AJS.$(Confluence.Editor.getCurrentForm()),"submit",c)},hasContentChanged:function(){if(!this.inRichTextMode()&&!this.contentHasChangedSinceLastSave){return false}return this.editorHasContentChanged()},editorHasContentChanged:function(){if(AJS.Rte.getEditor()==null){AJS.debug("Confluence.Editor: editorHasContentChanged - No active editor present. Returning false.");return false}return AJS.Rte.Content.editorHasContentChanged()},getResumeDraftUrl:function(){var j=[];j.push(Confluence.getContextPath());j.push("/pages/"+(AJS.params.newPage?"create":"edit")+AJS.params.draftType+".action");j.push("?useDraft=true");j.push("&pageId="+AJS.params.pageId);j.push("&contentChanged="+this.hasContentChanged());this.getCurrentForm().spaceKey&&j.push("&spaceKey="+AJS.Meta.get("space-key"));return j.join("")},getCurrentTitle:function(){return f("#content-title")&&f("#content-title").val()},contentFormSubmit:function(j){Confluence.Editor.Drafts.unBindUnloadMessage();AJS.$(".editable-title #content-title").prop("disabled",true);return true},getPagePermissions:function(){return{viewPermissionsUsers:f("#viewPermissionsUsers").val(),editPermissionsUsers:f("#editPermissionsUsers").val(),viewPermissionsGroups:f("#viewPermissionsGroups").val(),editPermissionsGroups:f("#editPermissionsGroups").val()}},heartbeat:function(){var j={dataType:"json",contentId:AJS.params.pageId,draftType:AJS.params.draftType,spaceKey:AJS.params.spaceKey};if(AJS.params.pageId=="0"||AJS.Meta.get("content-type")=="comment"){AJS.safe.post(AJS.params.contextPath+"/json/heartbeat.action",{})}else{AJS.safe.post(AJS.params.contextPath+"/json/startheartbeatactivity.action",j,function(k){Confluence.Editor.heartbeatType.normal();AJS.trigger("rte.heartbeat",k);h=(k.length||0)+1;if(h>1){var n=f("#other-users-span");n.empty();for(var m=0;m<h-1;++m){if(m>0){n.append(", ")}var l=k[m];n.append(AJS("a").attr("href",AJS.params.contextPath+"/display/~"+encodeURIComponent(l.userName)).text(l.fullName));if(l.lastEditMessage!=null){n.append(" ").append(AJS("span").addClass("smalltext").text(l.lastEditMessage))}}if(!AJS.isVisible("#heartbeat-div")){AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing",{numEditors:h,pageId:AJS.params.pageId,draftType:AJS.params.draftType})}}AJS.setVisible("#heartbeat-div",h>1);f(document).trigger("resize.resizeplugin")},"json").fail(function(k){if(k.status===503||k.status===0){Confluence.Editor.heartbeatType.recovery()}AJS.trigger("rte.heartbeat-error",k)})}},heartbeatType:(function(){var j=false;var m;var l=+AJS.Meta.get("heartbeat-interval")||30000;var o=Math.max(l/5,5000);function n(p,q){if(j!==p||!m){AJS.debug("Changing heartbeat period to "+q+" (recoveryMode = "+p+")");clearInterval(m);j=p;m=setInterval(Confluence.Editor.heartbeat,q)}}var k={normal:function(){n(false,l)},recovery:function(){n(true,o)},isNormal:function(){return !j},reset:function(){j=true;k.normal()}};return k}()),disableFrame:function(j){AJS.$("form",j).each(function(){AJS.$(this).unbind();this.onsubmit=function(){return false}});AJS.$("a",j).each(function(){AJS.$(this).attr("target","_top").unbind()});AJS.$("input, img",j).each(function(){AJS.$(this).unbind()})},previewFrameOnload:function(s,p){Confluence.Editor.setMode(Confluence.Editor.MODE_PREVIEW);tinyMCE.activeEditor.setProgressState(false);Confluence.Editor.disableFrame(s);var t=AJS.$("#main",s)[0];if(AJS.Meta.get("content-type")!="comment"&&AJS.$(t).find("#main-header").length==0){var v=AJS.$("#title-heading");var o=v.attr("class");AJS.$(t).prepend('<div id="preview-header"><div id="title-heading" class="'+o+'">'+v.html()+"</div></div>")}AJS.$("a",s).attr("target","_parent");if(f("#all-messages").children().length<1){f("#editor-precursor").css({display:"none"})}if(AJS.Rte.getEditorContainer().hasClass("resize")){var w=f(p||"#previewArea iframe"),n=0,k=0,l,r=w.height();t&&(function(){var x=f(t).outerHeight(true);if(n!=x){if(x!=w.height()){w.height(0).height(Math.max(x,r))}n=x;k=0}else{k++}if(k<500){l=setTimeout(arguments.callee,500)}})();f(document).one("mode-changed.resize-editor",function(x,y){if(y!=Confluence.Editor.MODE_PREVIEW){l&&clearTimeout(l)}})}else{if(tinymce.isIE||tinymce.isOpera){var j=f(window).height(),q=f("#header-precursor").height()+f("#header").height()+f("#editor-precursor").height(),u=f("#savebar-container").height(),m=4;f("#preview iframe").height(j-q-u-m);f("#content.edit").height("auto")}}},showRichText:function(j){AJS.setVisible("#wysiwyg",j);f("#editor-precursor").css({display:"table-row"});f(".toolbar-group-preview").toggleClass("assistive",!j);f(".toolbar-group-edit").toggleClass("assistive",j);f("#main").toggleClass("active-richtext",j);if(tinymce.isGecko&&j){AJS.Rte.fixEditorFocus(Confluence.Editor.bookmark)}},showPreview:function(j){if(AJS.Meta.get("content-type")!=="comment"){var k=f("#content-title");if(k.hasClass("placeholded")){f("#preview-title-text").text("");f("#title-text").text("")}else{f("#preview-title-text").text(k.val());f("#title-text").text(k.val())}}AJS.setVisible("#preview",j);f(".toolbar-group-preview").toggleClass("assistive",j);f(".toolbar-group-edit").toggleClass("assistive",!j);f("#main").toggleClass("active-preview",j);!!f("#full-height-container").length&&f("#full-height-container").toggleClass("active-preview",j)},showSource:function(j){if(j){this.showSourceArea()}else{this.hideSourceArea()}f("#main")[j?"addClass":"removeClass"]("active-source")},setMode:function(j){AJS.debug("Set mode: "+j);if(j==Confluence.Editor.MODE_RICHTEXT){this.showRichText(true);this.showPreview(false);this.showSource(false)}else{if(j==Confluence.Editor.MODE_SOURCE){this.showSource(true);this.showRichText(false);this.showPreview(false)}else{if(j==Confluence.Editor.MODE_PREVIEW){this.showPreview(true);this.showRichText(false);this.showSource(false);Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")}}}setTimeout(function(){var k=f(".toolbar-group-preview");k.height(0);k.height();k.height("auto")},1);this.currentEditMode=j;f(document).trigger("mode-changed",[j])},getContentId:function(){return Confluence.getContentId()},addErrorMessage:function(n,l,m){var k=f("#"+n);var j=(m?"#all-messages":"#editor-messages");if(k.length){k.empty()}else{k=f("<div></div>").attr("id",n).appendTo(j)}AJS.messages.error(k,{closeable:true,body:l})},changeMode:function(n,j){AJS.debug("Change mode: "+n);j=j||{};if(this.inRichTextMode()&&!AJS.Rte.BootstrapManager.isInitComplete()){return false}if(this.currentEditMode==n){return false}var k=this.currentEditMode;Confluence.Editor.Drafts.save();if(n==Confluence.Editor.MODE_PREVIEW){var m=AJS.Rte.getEditor();if(k==Confluence.Editor.MODE_SOURCE){Confluence.Editor.transferSourceToEditor()}if(tinyMCE.isGecko&&(k==Confluence.Editor.MODE_RICHTEXT)&&!Confluence.Editor.bookmark){Confluence.Editor.bookmark=tinymce.activeEditor.selection.getBookmark()}this.currentEditMode=n;var l={contentId:Confluence.getContentId(),contentType:AJS.Meta.get("content-type"),spaceKey:AJS.Meta.get("space-key"),xHtml:m.getContent(),outputType:Confluence.Editor.PREVIEW_OUTPUT_TYPE};AJS.safe.ajax({type:"POST",url:AJS.params.contextPath+"/pages/rendercontent.action",data:l,success:Confluence.Editor.replysetPreviewArea,timeout:20000,error:function(){Confluence.Editor.addErrorMessage("preview-error","There was an error loading preview. Please try again later.");Confluence.Editor.currentEditMode=k;j.errorCallback&&j.errorCallback()}})}else{this.setMode(n)}if(n==Confluence.Editor.MODE_RICHTEXT){f(document).trigger("resize.resizeplugin")}return false},replysetPreviewArea:function(j){f("#preview-error").remove();var m=AJS.params.staticResourceUrlPrefix+"/blank.html";tinyMCE.activeEditor.setProgressState(true);AJS.$("#previewArea").html('<iframe id="editor-preview-iframe" src="'+m+'" scrolling="yes" frameborder="0"></iframe>');var k=AJS.$("#previewArea iframe")[0];var l=k.contentDocument||k.contentWindow.document;l.write(j);l.close()},inRichTextMode:function(){return this.currentEditMode==Confluence.Editor.MODE_RICHTEXT},isNewPage:function(){return AJS.$("#createpageform, #createpagetemplate").length>0},onInit:function(){Confluence.Editor.setMode(Confluence.Editor.MODE_RICHTEXT);tinyMCE.activeEditor.onClick.add(function(j,l){var k=Confluence.Editor.UI.postingDatePicker;k&&k.hide()})},contentChangeHandler:function(){this.contentHasChangedSinceLastSave=true},getCurrentForm:function(){return tinyMCE.activeEditor.formElement},transferSourceToEditor:function(){var k=Confluence.Editor;if(k.sourceInitialValue){var j=k.getSourceAreaVal();if(j!=k.sourceInitialValue){var l=tinyMCE.activeEditor;l.setContent(j);l.setDirty(j)}}k.sourceInitialValue=false},hideSourceArea:function(){AJS.$("#editor-html-source-container").addClass("hidden");this.setToolBarInactive(false);this.transferSourceToEditor();f("#rte-button-source-mode").removeClass("active");f("#rte-button-publish").unbind("click.source-save")},showSourceArea:function(){AJS.$("#editor-html-source-container").removeClass("hidden");this.setSourceAreaHeight();this.setToolBarInactive(true);this.sourceInitialValue=tinyMCE.activeEditor.getContent();this.setSourceAreaVal(this.sourceInitialValue);f("#rte-button-source-mode").addClass("active");f("#rte-button-publish").bind("click.source-save",Confluence.Editor.transferSourceToEditor)},getSourceAreaVal:function(){return AJS.$("#editor-html-source").val()},setSourceAreaVal:function(j){AJS.$("#editor-html-source").val(j)},setSourceAreaHeight:function(){var j=AJS.Rte.getTinyMceEditorMinHeight();AJS.debug("HTML source height= "+j);var k=f("#editor-html-source")[0].scrollHeight;if(k>j){j=k;AJS.debug("ACTUAL HEIGHT "+k)}f("#editor-html-source-container").height(j+"px")},setToolBarInactive:function(j){f("#rte-toolbar").toggleClass("disabled",j)},isVisible:function(){return(f("#wysiwyg:visible").length>0)||(f("#editor-html-source-container:visible").length>0)||(f("#preview:visible").length>0)}}})($));AJS.toInit(function(a){AJS.bind("init.rte",Confluence.Editor.onInit)});AJS.Editor=Confluence.Editor;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'js/page-editor-ui.js' */
AJS.bind("init.rte",function(){var a=function(g){for(var h=0;h<Confluence.Editor.UI.buttons.length;h++){d(g,$(Confluence.Editor.UI.buttons[h]))}};var d=function(g,h){if(!h){return}if(g){h.removeAttr("aria-disabled")}else{h.attr("aria-disabled","true")}};var b=function(g,h){$(g).replaceWith(h);return $(g)};var f=function(){return b("#rte-button-publish",Confluence.Templates.Editor.Page.saveButton({contentType:AJS.Meta.get("content-type")}))};Confluence.Editor.UI={spinner:$("#rte-spinner"),saveButton:f(),overwriteButton:$("#rte-button-overwrite"),editButton:$("#rte-button-edit"),previewButton:$("#rte-button-preview"),cancelButton:$("#rte-button-cancel"),saveDraftButton:$("#rte-button-save-draft"),watchPageCheckbox:$("#watchPage"),watchPageToolbarGroup:$(".toolbar-group-watch-page"),setButtonsState:a,setButtonState:d,postingDatePicker:null,isFormEnabled:function(){return c.UI.saveButton.attr("aria-disabled")!=="true"},toggleSavebarBusy:function(g,h){if(g&&!Confluence.Editor.UI.isFormEnabled()){if(h){Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")}return false}if(g){if(!Confluence.Editor.isCancelling){if(AJS.Meta.get("content-type")==="comment"&&AJS.Rte.Content.isEmpty()){AJS.Confluence.EditorNotification.clear();AJS.Confluence.EditorNotification.notify("warning","Comment text is empty. Cannot create empty comments.",8);return false}if(h!==true){Confluence.Editor.UI.spinner.addClass("aui-icon-wait")}}a(false)}else{Confluence.Editor.UI.spinner.removeClass("aui-icon-wait");a(true)}return true},toggleWatchPage:function(g){if(g&&AJS.Meta.get("content-type")==="comment"){Confluence.Editor.UI.watchPageToolbarGroup.show();if(Confluence.Editor.UI.watchPageCheckbox.length){Confluence.Editor.UI.watchPageCheckbox[0].checked=false}}else{Confluence.Editor.UI.watchPageToolbarGroup.hide()}}};AJS.trigger("rte.init.ui");Confluence.Editor.UI.buttons=[Confluence.Editor.UI.saveButton,Confluence.Editor.UI.overwriteButton,Confluence.Editor.UI.editButton,Confluence.Editor.UI.previewButton,Confluence.Editor.UI.cancelButton,Confluence.Editor.UI.saveDraftButton];var c=Confluence.Editor;if(c.isNewPage()){$("#content-title").focus().select()}c.addCancelHandler(function(){Confluence.Editor.isCancelling=true;if(c.getNumConcurrentEditors()>1){AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.cancel",{numEditors:c.getNumConcurrentEditors(),pageId:AJS.params.pageId,draftType:AJS.params.draftType})}});c.addSaveHandler(function(){if(c.getNumConcurrentEditors()>1){AJS.Confluence.Analytics.publish("rte.notification.concurrent-editing.save",{numEditors:c.getNumConcurrentEditors(),pageId:AJS.params.pageId,draftType:AJS.params.draftType})}});c.addSubmitHandler(function(g){if(Confluence.Editor.UI.toggleSavebarBusy(true)){Confluence.Editor.isCancelling=false;a(false);return c.contentFormSubmit(g)}else{return false}});this.currentEditMode=this.MODE_RICHTEXT;if(AJS.DarkFeatures.isEnabled("move.page.on.save")){c.UI.saveButton.click(function(h){h.preventDefault();if($("#move-page-dialog").length>0){$("#move-page-dialog, body > .shadow, body > .aui-blanket").remove()}var g;if(AJS.Meta.getBoolean("new-page")&&AJS.Meta.get("content-type")!=="blogpost"){new Confluence.MovePageDialog({spaceName:g,spaceKey:$("#newSpaceKey").val(),pageTitle:$("#content-title").val(),parentPageTitle:$("#parentPageString").val(),buttonName:"Save",title:"Set Page Location",hint:{text:"Hint: you can move this page later, from the Tools menu."},moveHandler:function(m,j,n,o,l,k,i){$("#newSpaceKey").val(j);$("#parentPageString").val(o);if(o!=""){$("#position").val("append")}else{$("#position").val("topLevel")}if(l){$("#targetId").val(l);$("#position").val(k)}$(c.getCurrentForm()).submit()}})}else{$(c.getCurrentForm()).submit()}})}c.UI.editButton.click(function(g){if(Confluence.Editor.UI.isFormEnabled()){Confluence.Editor.changeMode(c.MODE_RICHTEXT);setTimeout(function(){AJS.Rte.getEditor().focus();if(tinymce.isGecko&&Confluence.Editor.bookmark){AJS.Rte.getEditor().selection.moveToBookmark(Confluence.Editor.bookmark)}},0)}g.preventDefault()});c.UI.previewButton.click(function(g){if(Confluence.Editor.UI.isFormEnabled()&&c.currentEditMode!==c.MODE_PREVIEW){a(false);Confluence.Editor.UI.spinner.addClass("aui-icon-wait");if(tinymce.isGecko&&!Confluence.Editor.bookmark){Confluence.Editor.bookmark=tinymce.activeEditor.selection.getBookmark()}c.changeMode(c.MODE_PREVIEW,{errorCallback:function(){a(true);Confluence.Editor.UI.spinner.removeClass("aui-icon-wait")}})}g.preventDefault()});$("#editor-html-source").change(c.setSourceAreaHeight).keyup(c.setSourceAreaHeight);$("#rte-button-attachments").bind("updateLabel",function(){var h=+AJS.Meta.get("num-attachments");var g=(h>1)?AJS.format("{0} Attachments",h):(h===0)?AJS.format("Attachments",h):AJS.format("{0} Attachment",h);$("#rte-button-attachments > .trigger-text").text(g)});$("#rte-button-labels").bind("updateLabel",function(){var h=+AJS.Meta.get("num-labels")||0;var g="Labels";if(h===1){g=AJS.format("{0} Label",h)}else{if(h>1){g=AJS.format("{0} Labels",h)}}$("#rte-button-labels  > .trigger-text").text(g)});var e=$("#PostingDate");if(e.length){e.attr("max",moment().format("YYYY-MM-DD"));c.UI.postingDatePicker=e.datePicker({overrideBrowserDefault:true});c.UI.postingDatePicker.hide()}$(".mceProgress, .mceBlocker",$("#wysiwygTextarea_parent")[0]).live("click",function(){AJS.Rte.getEditor().focus()});$(window).bind("render-content-loaded",function(i,g){var h=$("#previewArea iframe");if(h.contents().find("body")[0]==g){c.previewFrameOnload(g,h);c.UI.setButtonsState(true);c.UI.setButtonState(false,c.UI.saveDraftButton);h.focus();window.focus();$(document).trigger("iframeAppended",h)}});if(AJS.Meta.get("heartbeat")){c.heartbeat();Confluence.Editor.heartbeatType.normal()}AJS.bind("watchpage.pageoperation",function(){Confluence.Editor.UI.toggleWatchPage(false)});AJS.bind("unwatchpage.pageoperation",function(){Confluence.Editor.UI.toggleWatchPage(true)});AJS.trigger("init.rte-control")});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'soy/insert-wiki-markup.soy' */
// This file was automatically generated from insert-wiki-markup.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.InsertWiki == 'undefined') { Confluence.Templates.InsertWiki = {}; }


Confluence.Templates.InsertWiki.originalDefaultTempWikiMarkupDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><textarea class=\'monospaceInput textarea originalDefault\' id=\'insert-wiki-textarea\' name=\'wikitext\'/></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.previewWikiIframeContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<!DOCTYPE html><html class="insert-wiki-markup-dialog"><head></head><body class="wiki-content previewWiki"></body></html>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiMarkupDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p id="insert-wiki-info-title">', soy.$$escapeHtml("Enter wiki markup or markdown below. Confluence will convert your content to editor format and insert it into your page."), '</p><form action=\'#\' method=\'post\' id="insert-wiki-markup-form" class="aui"><h3 class="wiki-title"><span id="insert-wiki-insert-title">', soy.$$escapeHtml("Insert"), '</span><span id="insert-wiki-preview-title">', soy.$$escapeHtml("Preview"), '</span></h3><textarea class=\'monospaceInput textarea\' id=\'insert-wiki-textarea\' name=\'wikitext\'/><!-- --><div class=\'example-container\' id=\'insert-wiki-textarea-preview\'></div></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiErrorSubDialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class=\'warning\'>', soy.$$escapeHtml(opt_data.warningMessage), '</p><p class=\'exception-report\'><span class=\'exceptionMessage\'>', soy.$$escapeHtml(opt_data.exceptionMessage), '</span></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.InsertWiki.wikiParserSelector = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="wiki-parser-selector"><form action="#" method="post" id="d" class="aui"><select class="select medium-field" id="wiki-parser-selection-tool" name="wiki-parser-selection-tool" title="wiki parser selector"><option value="', soy.$$escapeHtml(opt_data.DEFAULT.val), '">', soy.$$escapeHtml(opt_data.DEFAULT.label), '</option>');
  var wikiLangList26 = soy.$$getMapKeys(opt_data.WIKI);
  var wikiLangListLen26 = wikiLangList26.length;
  for (var wikiLangIndex26 = 0; wikiLangIndex26 < wikiLangListLen26; wikiLangIndex26++) {
    var wikiLangData26 = wikiLangList26[wikiLangIndex26];
    output.append((opt_data.WIKI[wikiLangData26].val != opt_data.DEFAULT.val) ? '<option value="' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].val) + '">' + soy.$$escapeHtml(opt_data.WIKI[wikiLangData26].label) + '</option>' : '');
  }
  output.append('</select></form></span>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'soy/page-editor.soy' */
// This file was automatically generated from page-editor.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Editor == 'undefined') { Confluence.Templates.Editor = {}; }
if (typeof Confluence.Templates.Editor.Page == 'undefined') { Confluence.Templates.Editor.Page = {}; }


Confluence.Templates.Editor.Page.saveButton = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<button id="rte-button-publish" class="aui-button aui-button-primary" type="submit" name="confirm" value="Save"', (opt_data.contentType == 'blogpost') ? 'title="' + soy.$$escapeHtml("Publish your blog post") + '"' : (opt_data.contentType == 'page') ? 'title="' + soy.$$escapeHtml("Save your page") + '"' : 'title="' + soy.$$escapeHtml("Save") + '"', 'tabindex="101">', (opt_data.contentType == 'blogpost') ? '<span class="trigger-text">' + soy.$$escapeHtml("Publish") + '</span>' : '<span class="trigger-text">' + soy.$$escapeHtml("Save") + '</span>', '</button>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'js/insert-image-dialog.js' */
(function(a){a.fn.sizeToFit=function(){var b=jQuery;this.each(function(){var e=this;var c=b(this).parent();var f=c.height();c.children().each(function(){if(this!==e&&b(this).is(":visible")){f-=b(this).outerHeight()}});var d=b(this).outerHeight()-b(this).height();b(this).css("height",Math.max(0,f-d)+"px")});return this};Confluence.Editor.ImageDialog={beforeShowListeners:[],panelComponent:[],hasDarkUploadAllFileTypes:AJS.DarkFeatures.isEnabled("allow.upload.all.file.types")};Confluence.Editor.defaultInsertImageDialog=function(){var c=function(e){AJS.Rte.BookmarkManager.restoreBookmark();var d={};if(e.url){d={url:e.url,filename:e.url,contentId:e.contentId};tinymce.confluence.ImageUtils.insertFromProperties(d)}else{_.each(e.selectItems,function(f){if(f.isImage()){d={filename:f.getFileName(),contentId:f.getOwnerId()};tinymce.confluence.ImageUtils.insertFromProperties(d)}else{Confluence.Editor.ImageDialog._insertLinkToEditor(f)}})}if(!!a("#comments-section").length){AJS.Rte.fixEditorFocus()}},b=function(){AJS.Rte.BookmarkManager.restoreBookmark()};AJS.Rte.BookmarkManager.storeBookmark();Confluence.Editor.insertImageDialog(c,b)};Confluence.Editor.ImageDialog.findPanelComponentById=function(e){var b=Confluence.Editor.ImageDialog.panelComponent;for(var c=0,d=b.length;c<d;c++){if(b[c].id==e){return b[c]}}return undefined};Confluence.Editor.insertImageDialog=function(d,b){var c=new Confluence.Editor.FileDialog.FileDialogView({submitCallback:d,cancelCallback:b,beforeShowListeners:Confluence.Editor.ImageDialog.beforeShowListeners,panelComponents:Confluence.Editor.ImageDialog.panelComponent,hasDarkUploadAllFileTypes:Confluence.Editor.ImageDialog.hasDarkUploadAllFileTypes});c.render();return c};Confluence.Editor.ImageDialog._insertLinkToEditor=function(c){var b=Confluence.Link.fromREST(c.attributes);b.attrs["data-linked-resource-container-id"]=c.getOwnerId();b.attrs.href=c.get("downloadUrl");b.insert()}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'js/panel-components-init.js' */
(function(a,b){AJS.toInit(function(){if(!b.Editor||!b.Editor.ImageDialog||!b.Editor.ImageDialog.panelComponent){return}var d=b.Editor.FileDialog.eventListener,g=b.Editor.FileDialog.ExternalPanelView,h=b.Editor.FileDialog.SearchPanelView,f=b.Editor.FileDialog.AttachmentsPanelView,e=b.Editor.ImageDialog.panelComponent;if(AJS.Meta.get("content-type")!=="template"){var c=new f({eventListener:d});e.push(c)}e.push(new g({eventListener:d}));e.push(new h({eventListener:d}))})})(AJS.$,Confluence||{});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.editor:page-editor-js', location = 'js/page-editor-drafts.js' */
Confluence.Editor.Drafts=(function(d){var a=false,c=false,b=function(h,i,g){d("<input>").attr({type:"hidden",name:h,value:i}).appendTo(g)};var e=function(j){var k=j.getHours();var g=j.getMinutes();var i=k>11?"PM":"AM";k=k%12;return(k==0?"12":k)+":"+(g<10?"0":"")+g+" "+i},f=function(h,g){Confluence.Editor.Drafts.unBindUnloadMessage();var i=Confluence.Editor.getCurrentForm();b(h,"true",i);b("contentChanged",""+Confluence.Editor.hasContentChanged(),i);b("pageId",AJS.params.pageId,i);d("#draftId",Confluence.Editor.getCurrentForm()).val(g);if(!i.spaceKey){b("spaceKey",AJS.Meta.get("space-key"),i)}i.action=AJS.Confluence.getContextPath()+"/pages/"+(AJS.params.newPage?"create":"edit")+AJS.params.draftType+".action";i.submit()};return{isDraftSaved:function(){return a},isDraftManuallySaved:function(){return c},isDraftBlank:function(){return AJS.Rte.Content.isEmpty()&&!d.trim(Confluence.Editor.getCurrentTitle())},unloadMessage:function(){var g=function(){if(Confluence.Editor.Drafts.isDraftBlank()){Confluence.Editor.Drafts.discardDraft(AJS.Meta.get("draft-id"));return false}else{Confluence.Editor.Drafts.save({skipErrorHandler:true});return true}};if(typeof seleniumAlert!=="undefined"){g();return}if(Confluence.Editor.hasContentChanged()||(Confluence.Editor.Drafts.isDraftSaved()&&!Confluence.Editor.Drafts.isDraftManuallySaved())){g();return "A draft will be saved. You can resume editing this draft the next time you open the editor or view all your drafts in your profile."}},bindUnloadMessage:function(){d(window).bind("beforeunload.editor",Confluence.Editor.Drafts.unloadMessage)},unBindUnloadMessage:function(){d(window).unbind("beforeunload.editor")},useDraft:function(){f("useDraft",AJS.Meta.get("existing-draft-id"))},discardDraft:function(g){AJS.safeAjax({url:Confluence.getContextPath()+"/json/deletedraft.action",type:"GET",dataType:"json",data:{draftId:g},success:function(k){if(k.actionErrors){var j=["<ul>"],l=k.actionErrors;for(var h=0;h<l.length;h++){AJS.log("error: "+(l[h]));j.push("<li>"+l[h]+"</li>")}j.push("</ul>");AJS.messages.error("#editor-messages",{title:"Error",body:"There were errors discarding your draft: "+j.join("\n")})}else{d("#draft-messages").remove();AJS.messages.success("#editor-messages",{body:"Your draft has been discarded."})}},error:function(h){AJS.messages.error({title:"Error",body:h.errors||"An unknown error has occurred. Please check your logs."})}})},save:function(j){j=j||{};if(!AJS.params.saveDrafts||Confluence.Editor.isSubmitting||(!Confluence.Editor.hasContentChanged()&&!j.forceSave)){AJS.debug("skipping draft save");return}AJS.debug("preparing to save editor draft");var h=d("#content-title"),g=d("#newSpaceKey"),k=d("#originalVersion"),l=Confluence.Editor.inRichTextMode();var i={draftId:AJS.Meta.get("draft-id"),pageId:AJS.params.pageId,type:AJS.params.draftType,title:h.hasClass("placeholded")?"":h.val(),spaceKey:g.length?g.val():encodeURIComponent(AJS.Meta.get("space-key")),content:AJS.Rte.getEditor().getContent(),permissions:Confluence.Editor.getPagePermissions()};if(k.length){i.pageVersion=parseInt(k.val(),10)}var n=function(t){if(t==null){return}Confluence.Editor.contentHasChangedSinceLastSave=false;if(l){AJS.Rte.Content.editorResetContentChanged()}a=true;c=!!j.manualSave;AJS.Meta.set("draft-id",t.draftId);d("#draftId",Confluence.Editor.getCurrentForm()).val(t.draftId);d("#draft-error").remove();var o=d("#draft-status"),u=t.time||e(new Date()),q=AJS.DarkFeatures.isEnabled("lighter-editor-v1"),p,r,s;if(AJS.params.newPage){if(j.manualSave){r=AJS.format("Draft saved at {0}",u)}else{r=AJS.format("Draft autosaved at {0}",u)}}else{p=q;if(j.manualSave){r=q?AJS.format("Draft saved at {0}",u):AJS.format("Draft saved at {0} ({1}view change{2})",u,"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>","</a>")}else{r=q?AJS.format("Draft autosaved at {0}",u):AJS.format("Draft autosaved at {0} ({1}view change{2})",u,"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>","</a>")}}s=p?"<a id='view-diff-link-heartbeat' class='view-diff-link' href='#'>"+r+"</a>":r;q&&o.attr("data-tooltip",r);o.html(s);if(!+AJS.Meta.get("content-id")){AJS.Meta.set("content-id",t.pageId)}if(d.isFunction(j.onSuccessHandler)){j.onSuccessHandler(t)}Confluence.Editor.Drafts.lastSaveTime=u;if(c){Confluence.Editor.UI.saveDraftButton.addClass("disabled");Confluence.Editor.UI.cancelButton.attr("value","close");Confluence.Editor.UI.cancelButton.text(AJS.Meta.get("cancel-button-close-text"))}};var m=function(o,p){if(j.skipErrorHandler){return}Confluence.Editor.addErrorMessage("draft-error",Confluence.Editor.Drafts.lastSaveTime?AJS.format("Error saving draft. Last draft saved at {0}",Confluence.Editor.Drafts.lastSaveTime):"Error saving draft. No draft has been saved.",true);if(d.isFunction(j.onErrorHandler)){j.onErrorHandler(p)}};d.ajax({type:"POST",url:AJS.params.contextPath+"/rest/tinymce/1/drafts",data:d.toJSON(i),contentType:"application/json",dataType:"text json",success:n,error:m,timeout:30000})}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-progress-indicator', location = 'js/aui-experimental-progress-indicator.js' */
(function(){function A(C,D,B){window.setTimeout(function(){C.css("width",B*100+"%");D.attr("data-value",B)},0)}AJS.progressBars={update:function(G,M){var C=AJS.$(G).first();var F=C.children(".aui-progress-indicator-value");var L=F.attr("data-value")||0;var K="aui-progress-indicator-after-update";var I="aui-progress-indicator-before-update";var D="transitionend webkitTransitionEnd";var E=!C.attr("data-value");if(E){F.detach().css("width",0).appendTo(C)}if(typeof M==="number"&&M<=1&&M>=0){C.trigger(I,[L,M]);var H=document.body||document.documentElement;var B=H.style;var J="transition";if(typeof B.transition==="string"||typeof B.WebkitTransition==="string"){F.one(D,function(){C.trigger(K,[L,M])});A(F,C,M)}else{A(F,C,M);C.trigger(K,[L,M])}}return C},setIndeterminate:function(D){var C=AJS.$(D).first();var B=C.children(".aui-progress-indicator-value");C.removeAttr("data-value");B.css("width","100%")}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:draft-changes-js', location = '/includes/js/draft-changes.js' */
AJS.toInit(function(e){var a,f;var h=function(j){a=new AJS.Dialog(860,530,"view-diff-draft-dialog");var k="Unpublished Changes for \'{0}\'";a.addHeader(k.replace(/\{0\}/,""));var i=e(Confluence.Templates.DraftChanges.dialogContent());a.addPanel("Diff",i);if(j){a.addButton("Edit",function(l){a.hide();if(Confluence.Editor&&Confluence.Editor.Drafts){Confluence.Editor.Drafts.useDraft()}else{window.location=e(this).attr("data-href")}},"resume-diff-link");a.addButton("Discard",function(m){if(Confluence.Editor&&Confluence.Editor.Drafts){a.hide();Confluence.Editor.Drafts.discardDraft(AJS.Meta.get("existing-draft-id"));AJS.Confluence.Analytics.publish("rte.notification.draft.discard")}else{var l=e(this).data("draftid");if(c(l)){a.hide()}}},"discard-diff-link")}a.addCancel("Close",function(){a.hide();return false});i.removeClass("hidden")};var d=function(l,j){e("#diff-view").html(l.htmlDiff);var m=AJS.format("Unpublished Changes for \'\'{0}\'\'",AJS.escapeHtml(l.title));a.addHeader(m);a.popup.element.find(".dialog-title").prepend(Confluence.Templates.DraftChanges.helpLink());var k=e("#atlassian-token").attr("content");var i=Confluence.getContextPath();e(".resume-diff-link").attr("data-href",i+"/pages/resumedraft.action?draftId="+j);e(".discard-diff-link").data("draftid",j);AJS.setVisible("#merge-warning",l.isMergeRequired)};var g=function(k){var i,m,j;var l=function(o){var n=/draftPageId:([^ ]*)/.exec(o);i=n?n[1]:AJS.Meta.get("page-id");n=/username:([^ ]*)/.exec(o);m=n?n[1]:AJS.Meta.get("remote-user");n=/draftId:([^ ]*)/.exec(o);j=n?n[1]:null};l(k.attr("class"));AJS.safeAjax({url:Confluence.getContextPath()+"/draftchanges/viewdraftchanges.action",type:"GET",dataType:"json",data:{pageId:i,username:m},success:function(p){if(p.actionErrors){var o="";var q=p.actionErrors;for(var n=0;n<q.length;n++){AJS.log("error: "+(q[n]));o=o+"<div>"+q[n]+"</div>"}e("#diff-view").html(o)}else{d(p,j)}},error:function(n){var o=n.errors||"An unknown error has occurred. Please check your logs";e("#diff-view").html(o)}})};var b=function(j,i){if(!a){h(i)}a.addHeader("Loading");e("#diff-view").html("<tr><td id='draft-changes-waiting-icon'>Loading...</td></tr>");g(j);a.show()};var c=function(i){var j="Are you sure you want to discard this draft?";if(confirm(j)){AJS.safeAjax({url:Confluence.getContextPath()+"/json/deletedraft.action",type:"GET",dataType:"json",data:{draftId:i},success:function(o){if(o.actionErrors){var n=["<ul>"],q=o.actionErrors;for(var m=0;m<q.length;m++){AJS.log("error: "+(q[m]));n.push("<li>"+q[m]+"</li>")}n.push("</ul>");AJS.messages.error("#errors",{title:"Error",body:"There were errors discarding your draft."+" "+n.join("\n")})}else{var k=e("#draft-"+i);var l=k.closest("table");var p=l.closest(".drafts-container");k.remove();if(l.find("tbody tr").length==0){p.append('<span id="no-drafts-message">'+"No drafts found."+"</span>")}}},error:function(k){AJS.messages.error({title:"Error",body:k.errors||"An unknown error has occurred. Please check your logs."})}});return true}return false};e("body").on("click","#draft-status .view-diff-link",function(i){b(e(this),false);return AJS.stopEvent(i)}).on("click","#draft-messages .view-diff-link",function(i){b(e(this),true);return AJS.stopEvent(i)});e("#draft-space-list").on("click",".view-diff-link",function(i){b(e(this),true);return AJS.stopEvent(i)}).on("click",".discard-draft-link",function(j){j.preventDefault();AJS.Confluence.Analytics.publish("confluence.draft-list.discard");var i=e(this).data("draftid");c(i)}).on("click",".resume-draft-link",function(){AJS.Confluence.Analytics.publish("confluence.draft-list.resume")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:draft-changes-js', location = '/includes/soy/draft-changes-dialog.soy' */
// This file was automatically generated from draft-changes-dialog.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.DraftChanges == 'undefined') { Confluence.Templates.DraftChanges = {}; }


Confluence.Templates.DraftChanges.dialogContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="draft-changes-dialog" class="hidden"><div id="diff-view" class="wiki-content"></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.DraftChanges.helpLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  Confluence.Templates.Dialog.helpLink({href: "https://docs.atlassian.com/confluence/docs-56/Working+with+Drafts#viewchange"}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'net.customware.confluence.plugin.pageapproval:total-acknowledgers-name-limit', location = 'js/limit-acknowledgers.js' */
(function(a){var b={};function c(e){if(b[e]){return b[e].exports}var d=b[e]={exports:{},id:e,loaded:false};a[e].call(d.exports,d,d.exports,c);d.loaded=true;return d.exports}c.m=a;c.c=b;c.p="";return c(0)})([function(b,a){AJS.toInit(function(){function e(h,f){var g=AJS.MacroBrowser.ParameterFields.string(h,f);g.input.attr("maxlength",255);g.input.attr("placeholder","Limit to 255 Characters");return g}var c={fields:{string:{acknowledgers:function d(g,f){return e(g,f)}}}};AJS.MacroBrowser.setMacroJsOverride("pageapproval",c)})}]);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mobile:mobile-switch-resources', location = 'js/mobile-switch.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-mobile:mobile-switch-resources', location = 'com/atlassian/confluence/plugins/mobile/soy/mobile-switch.soy' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-resources', location = 'js/SortableTables.js' */
(function($){

$(function(){
    /**
     * We work hard here to keep the cheap and expensive parts separated.
     * We call enable on a delay but keep both methods exposed globally so that we can re-init/enable
     * sortable tables on a page should we modify the dom dramatically.
     */
    var tables;
    Confluence.SortableTables = {
        init: function(){
            tables = $('table').filter(function(){
                var thisTable = $(this),
                    cells = thisTable.find('td, th'),
                    firstRowCells = this.rows.length && $(this.rows[0].cells),
                    cell, eventData;

                if(thisTable.attr("data-sortable") === "false")
                    return false;

                // this exists for legacy reasons, we use a data attribute to opt out now
                eventData = jQuery.Event("makeSortable.SortableTables");
                thisTable.trigger(eventData);
                if (eventData.isDefaultPrevented()) {
                    return false;
                }

                if (!firstRowCells || firstRowCells.length === 0) { //there are no rows or no cells
                    return false;
                }
                //no colspan or rowspans > 1
                for (var i = 0, len = cells.length; i < len; i++) {
                    cell = cells[i];
                    if(cell.rowSpan != 1 || cell.colSpan != 1) {
                        return false;
                    }
                }

                //Header contains an inner table, not sortable
                if($(this.rows[0]).find('table').length){
                    return false;
                }

                // at least one cell in first row is not a th or have a class of nohighlight, not sortable
                if (firstRowCells.filter('th').length != firstRowCells.length || firstRowCells.hasClass('nohighlight'))
                    return false;

                // single row tables are not sortable
                return this.rows[1];
            });
        },
        enable: function(){
            tables.each(function(){
                // Changing this to use live dom nodes or something other than a document fragment has a
                // significant performance penalty. Modify with care.
                var body = this.removeChild(this.children[0]),
                    rows = $(body.children),
                    firstRow = Array.prototype.shift.call(rows),
                    fragment = document.createDocumentFragment(),
                    head = document.createElement("thead");

                fragment.appendChild(head);
                head.appendChild(firstRow);
                fragment.appendChild(body);

                this.appendChild(fragment);
            });

            tables.tablesorter({
                "cssHeader" : 'sortableHeader',
                "delayInit" : true,
                "textExtraction" : function(node){
                    //Do the text trim manually since our version of jQuery fails at this.
                    return AJS.trim($(node).text());
                },
                "dateFormat": getDateFormat()
            });
        }
    };
    Confluence.SortableTables.init();
    setTimeout(Confluence.SortableTables.enable, 100);
});

//Sortable tables friendly date format
function getDateFormat(){
    var dateFormat = AJS.Meta.get('date.format'),
        firstCharacter, retVal;

    if (dateFormat && dateFormat.length !== 0) {
        //we can assume enough from the first character
        firstCharacter = dateFormat.toLowerCase()[0];
        if (firstCharacter === 'm') {
            retVal = 'mmddyyyy';
        } else if (firstCharacter === 'd') {
            retVal = 'ddmmyyyy';
        } else if (firstCharacter === 'y') {
            retVal = 'yyyymmdd';
        }
    }
    return retVal;
}
})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-sortable-tables:sortable-table-resources', location = 'tablesorter/js/jquery.tablesorter.js' */
/*!
* TableSorter 2.3.10 - Client-side table sorting with ease!
* @requires jQuery v1.2.6+
*
* Copyright (c) 2007 Christian Bach
* Examples and docs at: http://tablesorter.com
* Dual licensed under the MIT and GPL licenses:
* http://www.opensource.org/licenses/mit-license.php
* http://www.gnu.org/licenses/gpl.html
*
* @type jQuery
* @name tablesorter
* @cat Plugins/Tablesorter
* @author Christian Bach/christian.bach@polyester.se
* @contributor Rob Garrison/https://github.com/Mottie/tablesorter
*/
!(function($) {
	$.extend({
		tablesorter: new function() {

			this.version = "2.3.10";

			var parsers = [], widgets = [];
			this.defaults = {

				// appearance
				widthFixed       : false,      // adds colgroup to fix widths of columns

				// functionality
				cancelSelection  : true,       // prevent text selection in the header
				dateFormat       : "mmddyyyy", // other options: "ddmmyyy" or "yyyymmdd"
				sortMultiSortKey : "shiftKey", // key used to select additional columns
				usNumberFormat   : true,       // false for German "1.234.567,89" or French "1 234 567,89"
				delayInit        : false,      // if false, the parsed table contents will not update until the first sort.

				// sort options
				headers          : {},         // set sorter, string, empty, locked order, sortInitialOrder, filter, etc.
				ignoreCase       : true,       // ignore case while sorting
				sortForce        : null,       // column(s) first sorted; always applied
				sortList         : [],         // Initial sort order; applied initially; updated when manually sorted
				sortAppend       : null,       // column(s) sorted last; always applied

				sortInitialOrder : "asc",      // sort direction on first click
				sortLocaleCompare: false,      // replace equivalent character (accented characters)
				sortReset        : false,      // third click on the header will reset column to default - unsorted
				sortRestart      : false,      // restart sort to "sortInitialOrder" when clicking on previously unsorted columns

				emptyTo          : "bottom",   // sort empty cell to bottom, top, none, zero
				stringTo         : "max",      // sort strings in numerical column as max, min, top, bottom, zero
				textExtraction   : "simple",   // text extraction method/function - function(node, table, cellIndex){}
				textSorter       : null,       // use custom text sorter - function(a,b){ return a.sort(b); } // basic sort

				// widget options
				widgets: [],                   // method to add widgets, e.g. widgets: ['zebra']
				widgetOptions    : {
					zebra : [ "even", "odd" ]    // zebra widget alternating row class names
				},
				initWidgets      : true,       // apply widgets on tablesorter initialization

				// callbacks
				initialized      : null,       // function(table){},
				onRenderHeader   : null,       // function(index){},

				// css class names
				tableClass       : 'tablesorter',
				cssAsc           : "tablesorter-headerSortUp",
				cssChildRow      : "expand-child",
				cssDesc          : "tablesorter-headerSortDown",
				cssHeader        : "tablesorter-header",
				cssInfoBlock     : "tablesorter-infoOnly", // don't sort tbody with this class name

				// selectors
				selectorHeaders  : '> thead th',
				selectorRemove   : "tr.remove-me",

				// advanced
				debug            : false,

				// Internal variables
				headerList: [],
				empties: {},
				strings: {},
				parsers: []

				// deprecated; but retained for backwards compatibility
				// widgetZebra: { css: ["even", "odd"] }

			};

			/* debuging utils */
			function log(s) {
				if (typeof console !== "undefined" && typeof console.log !== "undefined") {
					console.log(s);
				} else {
					alert(s);
				}
			}

			function benchmark(s, d) {
				log(s + " (" + (new Date().getTime() - d.getTime()) + "ms)");
			}

			this.benchmark = benchmark;
			this.hasInitialized = false;

			function getElementText(table, node, cellIndex) {
				if (!node) { return ""; }
				var c = table.config,
					t = c.textExtraction, text = "";
				if (t === "simple") {
					if (c.supportsTextContent) {
						text = node.textContent; // newer browsers support this
					} else {
						if (node.childNodes[0] && node.childNodes[0].hasChildNodes()) {
							text = node.childNodes[0].innerHTML;
						} else {
							text = node.innerHTML;
						}
					}
				} else {
					if (typeof(t) === "function") {
						text = t(node, table, cellIndex);
					} else if (typeof(t) === "object" && t.hasOwnProperty(cellIndex)) {
						text = t[cellIndex](node, table, cellIndex);
					} else {
						text = c.supportsTextContent ? node.textContent : $(node).text();
					}
				}
				return $.trim(text);
			}

			/* parsers utils */
			function getParserById(name) {
				var i, l = parsers.length;
				for (i = 0; i < l; i++) {
					if (parsers[i].id.toLowerCase() === (name.toString()).toLowerCase()) {
						return parsers[i];
					}
				}
				return false;
			}

			function detectParserForColumn(table, rows, rowIndex, cellIndex) {
				var i, l = parsers.length,
				node = false,
				nodeValue = '',
				keepLooking = true;
				while (nodeValue === '' && keepLooking) {
					rowIndex++;
					if (rows[rowIndex]) {
						node = rows[rowIndex].cells[cellIndex];
						nodeValue = getElementText(table, node, cellIndex);
						if (table.config.debug) {
							log('Checking if value was empty on row ' + rowIndex + ', column: ' + cellIndex + ': ' + nodeValue);
						}
					} else {
						keepLooking = false;
					}
				}
				for (i = 1; i < l; i++) {
					if (parsers[i].is(nodeValue, table, node)) {
						return parsers[i];
					}
				}
				// 0 is always the generic parser (text)
				return parsers[0];
			}

			function buildParserCache(table, $headers) {
				var c = table.config,
					tb = $(table.tBodies).filter(':not(.' + c.cssInfoBlock + ')'),
					ts = $.tablesorter, rows, list, l, i, h, m, ch, cl, p, parsersDebug = "";
				if ( tb.length === 0) { return; } // In the case of empty tables
				rows = tb[0].rows;
				if (rows[0]) {
					list = [];
					l = rows[0].cells.length;
					for (i = 0; i < l; i++) {
						// tons of thanks to AnthonyM1229 for working out the following selector (issue #74) to make this work in IE8!
						h = $headers.filter(':not([colspan])[data-column="'+i+'"]:last,[colspan="1"][data-column="'+i+'"]:last');
						ch = c.headers[i];
						// get column parser
						p = getParserById( ts.getData(h, ch, 'sorter') );
						// empty cells behaviour - keeping emptyToBottom for backwards compatibility.
						c.empties[i] = ts.getData(h, ch, 'empty') || c.emptyTo || (c.emptyToBottom ? 'bottom' : 'top' );
						// text strings behaviour in numerical sorts
						c.strings[i] = ts.getData(h, ch, 'string') || c.stringTo || 'max';
						if (!p) {
							p = detectParserForColumn(table, rows, -1, i);
						}
						if (c.debug) {
							parsersDebug += "column:" + i + "; parser:" + p.id + "; string:" + c.strings[i] + '; empty: ' + c.empties[i] + "\n";
						}
						list.push(p);
					}
				}
				if (c.debug) {
					log(parsersDebug);
				}
				return list;
			}

			/* utils */
			function buildCache(table) {
				var b = table.tBodies,
				tc = table.config,
				totalRows,
				totalCells,
				parsers = tc.parsers,
				t, i, j, k, c, cols, cacheTime;
				tc.cache = {};
				if (tc.debug) {
					cacheTime = new Date();
				}
				for (k = 0; k < b.length; k++) {
					tc.cache[k] = { row: [], normalized: [] };
					// ignore tbodies with class name from css.cssInfoBlock
					if (!$(b[k]).hasClass(tc.cssInfoBlock)) {
						$(b[k]).addClass('tablesorter-hidden');
						totalRows = (b[k] && b[k].rows.length) || 0;
						totalCells = (b[k].rows[0] && b[k].rows[0].cells.length) || 0;
						for (i = 0; i < totalRows; ++i) {
							/** Add the table data to main data array */
							c = $(b[k].rows[i]);
							cols = [];
							// if this is a child row, add it to the last row's children and continue to the next row
							if (c.hasClass(tc.cssChildRow)) {
								tc.cache[k].row[tc.cache[k].row.length - 1] = tc.cache[k].row[tc.cache[k].row.length - 1].add(c);
								// go to the next for loop
								continue;
							}
							tc.cache[k].row.push(c);
							for (j = 0; j < totalCells; ++j) {
								t = getElementText(table, c[0].cells[j], j);
								// allow parsing if the string is empty, previously parsing would change it to zero,
								// in case the parser needs to extract data from the table cell attributes
								cols.push( parsers[j].format(t, table, c[0].cells[j], j) );
							}
							cols.push(tc.cache[k].normalized.length); // add position for rowCache
							tc.cache[k].normalized.push(cols);
						}
						$(b[k]).removeClass('tablesorter-hidden');
					}
				}
				if (tc.debug) {
					benchmark("Building cache for " + totalRows + " rows", cacheTime);
				}
			}

			function getWidgetById(name) {
				var i, w, l = widgets.length;
				for (i = 0; i < l; i++) {
					w = widgets[i];
					if (w && w.hasOwnProperty('id') && w.id.toLowerCase() === name.toLowerCase()) {
						return w;
					}
				}
			}

			function applyWidget(table, init) {
				var tc = table.config, c = tc.widgets,
				time, i, w, l = c.length;
				if (tc.debug) {
					time = new Date();
				}
				for (i = 0; i < l; i++) {
					w = getWidgetById(c[i]);
					if ( w ) {
						if (init === true && w.hasOwnProperty('init')) {
							w.init(table, widgets, w);
						} else if (!init && w.hasOwnProperty('format')) {
							w.format(table);
						}
					}
				}
				if (tc.debug) {
					benchmark("Completed " + (init === true ? "initializing" : "applying") + " widgets", time);
				}
			}

			// init flag (true) used by pager plugin to prevent widget application
			function appendToTable(table, init) {
				var c = table.config,
				b = table.tBodies,
				rows = [],
				r, n, totalRows, checkCell, c2 = c.cache,
				f, i, j, k, l, pos, appendTime;
				if (c.debug) {
					appendTime = new Date();
				}
				for (k = 0; k < b.length; k++) {
					if (!$(b[k]).hasClass(c.cssInfoBlock)){
						$(b[k]).addClass('tablesorter-hidden');
						f = document.createDocumentFragment();
						r = c2[k].row;
						n = c2[k].normalized;
						totalRows = n.length;
						checkCell = totalRows ? (n[0].length - 1) : 0;
						for (i = 0; i < totalRows; i++) {
							pos = n[i][checkCell];
							rows.push(r[pos]);
							// removeRows used by the pager plugin
							if (!c.appender || !c.removeRows) {
								l = r[pos].length;
								for (j = 0; j < l; j++) {
									f.appendChild(r[pos][j]);
								}
							}
						}
						table.tBodies[k].appendChild(f);
						$(b[k]).removeClass('tablesorter-hidden');
					}
				}
				if (c.appender) {
					c.appender(table, rows);
				}
				if (c.debug) {
					benchmark("Rebuilt table", appendTime);
				}
				// apply table widgets
				if (!init) { applyWidget(table); }
				// trigger sortend
				$(table).trigger("sortEnd", table);
			}

			// computeTableHeaderCellIndexes from:
			// http://www.javascripttoolbox.com/lib/table/examples.php
			// http://www.javascripttoolbox.com/temp/table_cellindex.html
			function computeThIndexes(t) {
				var matrix = [],
				lookup = {},
				trs = $(t).find('thead:eq(0) tr'),
				i, j, k, l, c, cells, rowIndex, cellId, rowSpan, colSpan, firstAvailCol, matrixrow;
				for (i = 0; i < trs.length; i++) {
					cells = trs[i].cells;
					for (j = 0; j < cells.length; j++) {
						c = cells[j];
						rowIndex = c.parentNode.rowIndex;
						cellId = rowIndex + "-" + c.cellIndex;
						rowSpan = c.rowSpan || 1;
						colSpan = c.colSpan || 1;
						if (typeof(matrix[rowIndex]) === "undefined") {
							matrix[rowIndex] = [];
						}
						// Find first available column in the first row
						for (k = 0; k < matrix[rowIndex].length + 1; k++) {
							if (typeof(matrix[rowIndex][k]) === "undefined") {
								firstAvailCol = k;
								break;
							}
						}
						lookup[cellId] = firstAvailCol;
						// add data-column
						$(c).attr({ 'data-column' : firstAvailCol }); // 'data-row' : rowIndex
						for (k = rowIndex; k < rowIndex + rowSpan; k++) {
							if (typeof(matrix[k]) === "undefined") {
								matrix[k] = [];
							}
							matrixrow = matrix[k];
							for (l = firstAvailCol; l < firstAvailCol + colSpan; l++) {
								matrixrow[l] = "x";
							}
						}
					}
				}
				return lookup;
			}

			function formatSortingOrder(v) {
				// look for "d" in "desc" order; return true
				return (/^d/i.test(v) || v === 1);
			}


			function buildHeaders(table) {
				var header_index = computeThIndexes(table), ch, $t,
					$th, lock, time, $tableHeaders, c = table.config, ts = $.tablesorter;
					c.headerList = [];
				if (c.debug) {
					time = new Date();
				}
				$tableHeaders = $(table).find(c.selectorHeaders)
				.each(function(index) {
					$t = $(this);
					ch = c.headers[index];
					this.innerHTML = '<div class="tablesorter-header-inner">' + this.innerHTML + '</div>'; // faster than wrapInner
					if (c.onRenderHeader) { c.onRenderHeader.apply($t, [index]); }
					this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex];
					this.order = formatSortingOrder( ts.getData($t, ch, 'sortInitialOrder') || c.sortInitialOrder ) ? [1,0,2] : [0,1,2];
					this.count = -1; // set to -1 because clicking on the header automatically adds one
					if (ts.getData($t, ch, 'sorter') === 'false') { this.sortDisabled = true; }
					this.lockedOrder = false;
					lock = ts.getData($t, ch, 'lockedOrder') || false;
					if (typeof(lock) !== 'undefined' && lock !== false) {
						this.order = this.lockedOrder = formatSortingOrder(lock) ? [1,1,1] : [0,0,0];
					}
					if (!this.sortDisabled) {
						$th = $t.addClass(c.cssHeader);
					}
					// add cell to headerList
					c.headerList[index] = this;
					// add to parent in case there are multiple rows
					$t.parent().addClass(c.cssHeader);
				});
				if (table.config.debug) {
					benchmark("Built headers:", time);
					log($tableHeaders);
				}
				return $tableHeaders;
			}

			function isValueInArray(v, a) {
				var i, l = a.length;
				for (i = 0; i < l; i++) {
					if (a[i][0] === v) {
						return true;
					}
				}
				return false;
			}

			function setHeadersCss(table, $headers, list) {
				var f, h = [], i, j, l, css = [table.config.cssDesc, table.config.cssAsc];
				// remove all header information
				$headers
					.removeClass(css.join(' '))
					.each(function() {
						if (!this.sortDisabled) {
							h[this.column] = $(this);
						}
					});
				l = list.length;
				for (i = 0; i < l; i++) {
					if (list[i][1] === 2) { continue; } // direction = 2 means reset!
					if (h[list[i][0]]) {
						// add class if cell exists - fix for issue #78
						h[list[i][0]].addClass(css[list[i][1]]);
					}
					// multicolumn sorting updating
					f = $headers.filter('[data-column="' + list[i][0] + '"]');
					if (l > 1 && f.length) {
						for (j = 0; j < f.length; j++) {
							if (!f[j].sortDisabled) {
								$(f[j]).addClass(css[list[i][1]]);
							}
						}
					}
				}
			}

			function fixColumnWidth(table) {
				if (table.config.widthFixed) {
					var colgroup = $('<colgroup>');
					$("tr:first td", table.tBodies[0]).each(function() {
						colgroup.append($('<col>').css('width', $(this).width()));
					});
					$(table).prepend(colgroup);
				}
			}

			function updateHeaderSortCount(table, sortList) {
				var i, s, o, c = table.config,
				l = sortList.length;
				for (i = 0; i < l; i++) {
					s = sortList[i];
					o = c.headerList[s[0]];
					if (o) { // prevents error if sorton array is wrong
						o.count = s[1] % (c.sortReset ? 3 : 2);
					}
				}
			}

			function getCachedSortType(parsers, i) {
				return (parsers && parsers[i]) ? parsers[i].type || '' : '';
			}

			/* sorting methods - reverted sorting method back to version 2.0.3 */
			function multisort(table, sortList) {
				var dynamicExp, col, mx = 0, dir = 0, tc = table.config,
				l = sortList.length, bl = table.tBodies.length,
				sortTime, i, j, k, c, cache, lc, s, e, order, orgOrderCol;
				if (tc.debug) { sortTime = new Date(); }
				for (k = 0; k < bl; k++) {
					dynamicExp = "var sortWrapper = function(a,b) {";
					cache = tc.cache[k];
					lc = cache.normalized.length;
					for (i = 0; i < l; i++) {
						c = sortList[i][0];
						order = sortList[i][1];
						// fallback to natural sort since it is more robust
						s = /n/i.test(getCachedSortType(tc.parsers, c)) ? "Numeric" : "Text";
						s += order === 0 ? "" : "Desc";
						e = "e" + i;
						// get max column value (ignore sign)
						if (/Numeric/.test(s) && tc.strings[c]) {
							for (j = 0; j < lc; j++) {
								col = Math.abs(parseFloat(cache.normalized[j][c]));
								mx = Math.max( mx, isNaN(col) ? 0 : col );
							}
							// sort strings in numerical columns
							if (typeof(tc.string[tc.strings[c]]) === 'boolean') {
								dir = (order === 0 ? 1 : -1) * (tc.string[tc.strings[c]] ? -1 : 1);
							} else {
								dir = (tc.strings[c]) ? tc.string[tc.strings[c]] || 0 : 0;
							}
						}
						dynamicExp += "var " + e + " = sort" + s + "(table,a[" + c + "],b[" + c + "]," + c + "," + mx +  "," + dir + "); ";
						dynamicExp += "if (" + e + ") { return " + e + "; } ";
						dynamicExp += "else { ";
					}
					// if value is the same keep orignal order
					orgOrderCol = (cache.normalized && cache.normalized[0]) ? cache.normalized[0].length - 1 : 0;
					dynamicExp += "return a[" + orgOrderCol + "]-b[" + orgOrderCol + "];";
					for (i=0; i < l; i++) {
						dynamicExp += "}; ";
					}
					dynamicExp += "return 0; ";
					dynamicExp += "}; ";
					eval(dynamicExp);
					cache.normalized.sort(sortWrapper); // sort using eval expression
				}
				if (tc.debug) { benchmark("Sorting on " + sortList.toString() + " and dir " + order+ " time", sortTime); }
			}

			// Natural sort - https://github.com/overset/javascript-natural-sort
			function sortText(table, a, b, col) {
				if (a === b) { return 0; }
				var c = table.config, e = c.string[ (c.empties[col] || c.emptyTo ) ],
					r = $.tablesorter.regex, xN, xD, yN, yD, xF, yF, i, mx;
				if (a === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? -1 : 1) : -e || -1; }
				if (b === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? 1 : -1) : e || 1; }
				if (typeof c.textSorter === 'function') { return c.textSorter(a, b, table, col); }
				// chunk/tokenize
				xN = a.replace(r[0], '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0');
				yN = b.replace(r[0], '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0');
				// numeric, hex or date detection
				xD = parseInt(a.match(r[2])) || (xN.length !== 1 && a.match(r[1]) && Date.parse(a));
				yD = parseInt(b.match(r[2])) || (xD && b.match(r[1]) && Date.parse(b)) || null;
				// first try and sort Hex codes or Dates
				if (yD) {
					if ( xD < yD ) { return -1; }
					if ( xD > yD ) { return 1; }
				}
				mx = Math.max(xN.length, yN.length);
				// natural sorting through split numeric strings and default strings
				for (i = 0; i < mx; i++) {
					// find floats not starting with '0', string or 0 if not defined (Clint Priest)
					xF = (!(xN[i] || '').match(r[3]) && parseFloat(xN[i])) || xN[i] || 0;
					yF = (!(yN[i] || '').match(r[3]) && parseFloat(yN[i])) || yN[i] || 0;
					// handle numeric vs string comparison - number < string - (Kyle Adams)
					if (isNaN(xF) !== isNaN(yF)) { return (isNaN(xF)) ? 1 : -1; }
					// rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'
					if (typeof xF !== typeof yF) {
						xF += '';
						yF += '';
					}
					if (xF < yF) { return -1; }
					if (xF > yF) { return 1; }
				}
				return 0;
			}

			function sortTextDesc(table, a, b, col) {
				if (a === b) { return 0; }
				var c = table.config, e = c.string[ (c.empties[col] || c.emptyTo ) ];
				if (a === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? -1 : 1) : e || 1; }
				if (b === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? 1 : -1) : -e || -1; }
				if (typeof c.textSorter === 'function') { return c.textSorter(b, a, table, col); }
				return sortText(table, b, a);
			}

			// return text string value by adding up ascii value
			// so the text is somewhat sorted when using a digital sort
			// this is NOT an alphanumeric sort
			function getTextValue(a, mx, d) {
				if (mx) {
					// make sure the text value is greater than the max numerical value (mx)
					var i, l = a.length, n = mx + d;
					for (i = 0; i < l; i++) {
						n += a.charCodeAt(i);
					}
					return d * n;
				}
				return 0;
			}

			function sortNumeric(table, a, b, col, mx, d) {
				if (a === b) { return 0; }
				var c = table.config, e = c.string[ (c.empties[col] || c.emptyTo ) ];
				if (a === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? -1 : 1) : -e || -1; }
				if (b === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? 1 : -1) : e || 1; }
				if (isNaN(a)) { a = getTextValue(a, mx, d); }
				if (isNaN(b)) { b = getTextValue(b, mx, d); }
				return a - b;
			}

			function sortNumericDesc(table, a, b, col, mx, d) {
				if (a === b) { return 0; }
				var c = table.config, e = c.string[ (c.empties[col] || c.emptyTo ) ];
				if (a === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? -1 : 1) : e || 1; }
				if (b === '' && e !== 0) { return (typeof(e) === 'boolean') ? (e ? 1 : -1) : -e || -1; }
				if (isNaN(a)) { a = getTextValue(a, mx, d); }
				if (isNaN(b)) { b = getTextValue(b, mx, d); }
				return b - a;
			}

			function checkResort($table, flag, callback) {
				var t = $table[0];
				if (flag !== false) {
					$table.trigger("sorton", [t.config.sortList, function(){
						$table.trigger('updateComplete');
						if (typeof callback === "function") {
							callback(t);
						}
					}]);
				} else {
					$table.trigger('updateComplete');
					if (typeof callback === "function") {
						callback(t);
					}
				}
			}

			/* public methods */
			this.construct = function(settings) {
				return this.each(function() {
					// if no thead or tbody quit.
					if (!this.tHead || this.tBodies.length === 0) { return; }
					// declare
					var $headers, $cell, $this,
						c, i, j, k, a, s, o, downTime,
						m = $.metadata;
					// new blank config object
					this.config = {};
					// merge and extend.
					c = $.extend(true, this.config, $.tablesorter.defaults, settings);

					if (c.debug) { $.data( this, 'startoveralltimer', new Date()); }
					// store common expression for speed
					$this = $(this).addClass(c.tableClass);
					// save the settings where they read
					$.data(this, "tablesorter", c);
					c.supportsTextContent = $('<span>x</span>')[0].textContent === 'x';
					// digit sort text location; keeping max+/- for backwards compatibility
					c.string = { 'max': 1, 'min': -1, 'max+': 1, 'max-': -1, 'zero': 0, 'none': 0, 'null': 0, 'top': true, 'bottom': false };
					// build headers
					$headers = buildHeaders(this);
					// try to auto detect column type, and store in tables config
					c.parsers = buildParserCache(this, $headers);
					// build the cache for the tbody cells
					// delayInit will delay building the cache until the user starts a sort
					if (!c.delayInit) { buildCache(this); }
					// fixate columns if the users supplies the fixedWidth option
					fixColumnWidth(this);
					// apply event handling to headers
					// this is to big, perhaps break it out?
					$headers.bind('mousedown.tablesorter mouseup.tablesorter', function(e, external) {
						if (e.type === 'mousedown') {
							downTime = new Date().getTime();
							return !c.cancelSelection;
						}
						// prevent resizable widget from initializing a sort (long clicks are ignored)
						if (external !== true && (new Date().getTime() - downTime > 500)) { return false; }
						if (c.delayInit && !c.cache) { buildCache($this[0]); }
						if (!this.sortDisabled) {
							// Only call sortStart if sorting is enabled.
							$this.trigger("sortStart", $this[0]);
							// store exp, for speed
							$cell = $(this);
							k = !e[c.sortMultiSortKey];
							// get current column sort order
							this.count = (this.count + 1) % (c.sortReset ? 3 : 2);
							// reset all sorts on non-current column - issue #30
							if (c.sortRestart) {
								i = this;
								$headers.each(function() {
									// only reset counts on columns that weren't just clicked on and if not included in a multisort
									if (this !== i && (k || !$(this).is('.' + c.cssDesc + ',.' + c.cssAsc))) {
										this.count = -1;
									}
								});
							}
							// get current column index
							i = this.column;
							// user only wants to sort on one column
							if (k) {
								// flush the sort list
								c.sortList = [];
								if (c.sortForce !== null) {
									a = c.sortForce;
									for (j = 0; j < a.length; j++) {
										if (a[j][0] !== i) {
											c.sortList.push(a[j]);
										}
									}
								}
								// add column to sort list
								o = this.order[this.count];
								if (o < 2) {
									c.sortList.push([i, o]);
									// add other columns if header spans across multiple
									if (this.colSpan > 1) {
										for (j = 1; j < this.colSpan; j++) {
											c.sortList.push([i+j, o]);
										}
									}
								}
								// multi column sorting
							} else {
								// the user has clicked on an already sorted column.
								if (isValueInArray(i, c.sortList)) {
									// reverse the sorting direction for all tables.
									for (j = 0; j < c.sortList.length; j++) {
										s = c.sortList[j];
										o = c.headerList[s[0]];
										if (s[0] === i) {
											s[1] = o.order[o.count];
											if (s[1] === 2) {
												c.sortList.splice(j,1);
												o.count = -1;
											}
										}
									}
								} else {
									// add column to sort list array
									o = this.order[this.count];
									if (o < 2) {
										c.sortList.push([i, o]);
										// add other columns if header spans across multiple
										if (this.colSpan > 1) {
											for (j = 1; j < this.colSpan; j++) {
												c.sortList.push([i+j, o]);
											}
										}
									}
								}
							}
							if (c.sortAppend !== null) {
								a = c.sortAppend;
								for (j = 0; j < a.length; j++) {
									if (a[j][0] !== i) {
										c.sortList.push(a[j]);
									}
								}
							}
							// sortBegin event triggered immediately before the sort
							$this.trigger("sortBegin", $this[0]);
							// set css for headers
							setHeadersCss($this[0], $headers, c.sortList);
							multisort($this[0], c.sortList);
							appendToTable($this[0]);
							// stop normal event by returning false
							return false;
						}
					});
					if (c.cancelSelection) {
						// cancel selection
						$headers.each(function() {
							this.onselectstart = function() {
								return false;
							};
						});
					}
					// apply easy methods that trigger binded events
					$this
					.bind("update", function(e, resort, callback) {
						// remove rows/elements before update
						$(c.selectorRemove, this).remove();
						// rebuild parsers.
						c.parsers = buildParserCache(this, $headers);
						// rebuild the cache map
						buildCache(this);
						checkResort($this, resort, callback);
					})
					.bind("updateCell", function(e, cell, resort, callback) {
						// get position from the dom.
						var t = this, $tb = $(this).find('tbody'), row, pos,
						// update cache - format: function(s, table, cell, cellIndex)
						tbdy = $tb.index( $(cell).closest('tbody') );
						row = $tb.eq(tbdy).find('tr').index( $(cell).closest('tr') );
						pos = [ row, cell.cellIndex];
						t.config.cache[tbdy].normalized[pos[0]][pos[1]] = c.parsers[pos[1]].format( getElementText(t, cell, pos[1]), t, cell, pos[1] );
						checkResort($this, resort, callback);
					})
					.bind("addRows", function(e, $row, resort, callback) {
						var i, rows = $row.filter('tr').length,
						dat = [], l = $row[0].cells.length, t = this,
						tbdy = $(this).find('tbody').index( $row.closest('tbody') );
						// add each row
						for (i = 0; i < rows; i++) {
							// add each cell
							for (j = 0; j < l; j++) {
								dat[j] = c.parsers[j].format( getElementText(t, $row[i].cells[j], j), t, $row[i].cells[j], j );
							}
							// add the row index to the end
							dat.push(c.cache[tbdy].row.length);
							// update cache
							c.cache[tbdy].row.push([$row[i]]);
							c.cache[tbdy].normalized.push(dat);
							dat = [];
						}
						// resort using current settings
						checkResort($this, resort, callback);
					})
					.bind("sorton", function(e, list, callback, init) {
						$(this).trigger("sortStart", this);
						var l = c.headerList.length;
						c.sortList = [];
						$.each(list, function(i,v){
							// make sure column exists
							if (v[0] < l) { c.sortList.push(list[i]); }
						});
						// update header count index
						updateHeaderSortCount(this, c.sortList);
						// set css for headers
						setHeadersCss(this, $headers, c.sortList);
						// sort the table and append it to the dom
						multisort(this, c.sortList);
						appendToTable(this, init);
						if (typeof callback === "function") {
							callback(this);
						}
					})
					.bind("appendCache", function(e, init) {
						appendToTable(this, init);
					})
					.bind("applyWidgetId", function(e, id) {
						getWidgetById(id).format(this);
					})
					.bind("applyWidgets", function(e, init) {
						// apply widgets
						applyWidget(this, init);
					})
					.bind("destroy", function(e,c){
						$.tablesorter.destroy(this, c);
					});

					// get sort list from jQuery data or metadata
					if ($this.data() && typeof $this.data().sortlist !== 'undefined') {
						c.sortList = $this.data().sortlist;
					} else if (m && ($this.metadata() && $this.metadata().sortlist)) {
						c.sortList = $this.metadata().sortlist;
					}
					// apply widget init code
					applyWidget(this, true);
					// if user has supplied a sort list to constructor.
					if (c.sortList.length > 0) {
						$this.trigger("sorton", [c.sortList, {}, !c.initWidgets]);
					} else if (c.initWidgets) {
						// apply widget format
						applyWidget(this);
					}

					// initialized
					this.hasInitialized = true;
					if (c.debug) {
						$.tablesorter.benchmark("Overall initialization time", $.data( this, 'startoveralltimer'));
					}
					$this.trigger('tablesorter-initialized', this);
					if (typeof c.initialized === 'function') { c.initialized(this); }
				});
			};

			this.destroy = function(table, removeClasses){
				var $t = $(table), c = table.config;
				// remove widget added rows
				$t.find('thead:first tr:not(.' + c.cssHeader + ')').remove();
				// remove resizer widget stuff
				$t.find('thead:first .tablesorter-resizer').remove();
				// disable tablesorter
				$t
					.unbind('update updateCell addRows sorton appendCache applyWidgetId applyWidgets destroy mouseup mouseleave')
					.find(c.selectorHeaders)
					.unbind('click mousedown mousemove mouseup')
					.removeClass(c.cssHeader + ' ' + c.cssAsc + ' ' + c.cssDesc);
				if (removeClasses !== false) {
					$t.removeClass(c.tableClass);
				}
			};

			this.addParser = function(parser) {
				var i, l = parsers.length, a = true;
				for (i = 0; i < l; i++) {
					if (parsers[i].id.toLowerCase() === parser.id.toLowerCase()) {
						a = false;
					}
				}
				if (a) {
					parsers.push(parser);
				}
			};
			this.addWidget = function(widget) {
				widgets.push(widget);
			};

			this.formatFloat = function(s, table) {
				if (typeof(s) !== 'string' || s === '') { return s; }
				if (table.config.usNumberFormat !== false) {
					// US Format - 1,234,567.89 -> 1234567.89
					s = s.replace(/,/g,'');
				} else {
					// German Format = 1.234.567,89 -> 1234567.89
					// French Format = 1 234 567,89 -> 1234567.89
					s = s.replace(/[\s|\.]/g,'').replace(/,/g,'.');
				}
				if(/^\s*\([.\d]+\)/.test(s)) {
					s = s.replace(/^\s*\(/,'-').replace(/\)/,'');
				}
				var i = parseFloat(s);
				// return the text instead of zero
				return isNaN(i) ? $.trim(s) : i;
			};
			this.isDigit = function(s) {
				// replace all unwanted chars and match.
				return (/^[\-+(]?\d+[)]?$/).test(s.replace(/[,.'\s]/g, ''));
			};

			// regex used in natural sort
			this.regex = [
				/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi, // chunk/tokenize numbers & letters
				/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/, //date
				/^0x[0-9a-f]+$/i, // hex
				/^0/ // leading zeros
			];
			// used when replacing accented characters during sorting
			this.characterEquivalents = {
				"a" : "\u00e1\u00e0\u00e2\u00e3\u00e4", // 
				"A" : "\u00c1\u00c0\u00c2\u00c3\u00c4", // 
				"c" : "\u00e7", // 
				"C" : "\u00c7", // 
				"e" : "\u00e9\u00e8\u00ea\u00eb", // 
				"E" : "\u00c9\u00c8\u00ca\u00cb", // 
				"i" : "\u00ed\u00ec\u0130\u00ee\u00ef", // 
				"I" : "\u00cd\u00cc\u0130\u00ce\u00cf", // 
				"o" : "\u00f3\u00f2\u00f4\u00f5\u00f6", // 
				"O" : "\u00d3\u00d2\u00d4\u00d5\u00d6", // 
				"S" : "\u00df", // 
				"u" : "\u00fa\u00f9\u00fb\u00fc", // 
				"U" : "\u00da\u00d9\u00db\u00dc" // 
			};
			this.replaceAccents = function(s) {
				var a, acc = '[', eq = this.characterEquivalents;
				if (!this.characterRegex) {
					this.characterRegexArray = {};
					for (a in eq) {
						if (typeof a === 'string') {
							acc += eq[a];
							this.characterRegexArray[a] = new RegExp('[' + eq[a] + ']', 'g');
						}
					}
					this.characterRegex = new RegExp(acc + ']');
				}
				if (this.characterRegex.test(s)) {
					for (a in eq) {
						if (typeof a === 'string') {
							s = s.replace( this.characterRegexArray[a], a );
						}
					}
				}
				return s;
			};

			// get sorter, string, empty, etc options for each column from
			// jQuery data, metadata, header option or header class name ("sorter-false")
			// priority = jQuery data > meta > headers option > header class name
			this.getData = function(h, ch, key) {
				var val = '', $h = $(h), m, cl;
				if (!$h.length) { return ''; }
				m = $.metadata ? $h.metadata() : false;
				cl = ' ' + ($h.attr('class') || '');
				if ($h.data() && ( typeof $h.data(key) !== 'undefined' || typeof $h.data(key.toLowerCase()) !== 'undefined') ){
					// "data-lockedOrder" is assigned to "lockedorder"; but "data-locked-order" is assigned to "lockedOrder"
					// "data-sort-initial-order" is assigned to "sortInitialOrder"
					val += $h.data(key) || $h.data(key.toLowerCase());
				} else if (m && typeof m[key] !== 'undefined') {
					val += m[key];
				} else if (ch && typeof ch[key] !== 'undefined') {
					val += ch[key];
				} else if (cl && cl.match(' ' + key + '-')) {
					// include sorter class name "sorter-text", etc
					val = cl.match( new RegExp(' ' + key + '-(\\w+)') )[1] || '';
				}
				return $.trim(val);
			};

			this.clearTableBody = function(table) {
				$(table.tBodies).filter(':not(.' + table.config.cssInfoBlock + ')').empty();
			};

		}
	})();

	// make shortcut
	var ts = $.tablesorter;

	// extend plugin scope
	$.fn.extend({
		tablesorter: ts.construct
	});

	// add default parsers
	ts.addParser({
		id: "text",
		is: function(s, table, node) {
			return true;
		},
		format: function(s, table, cell, cellIndex) {
			var c = table.config;
			s = $.trim( c.ignoreCase ? s.toLocaleLowerCase() : s );
			return c.sortLocaleCompare ? ts.replaceAccents(s) : s;
		},
		type: "text"
	});

	ts.addParser({
		id: "currency",
		is: function(s) {
			return (/^\(?[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+/).test(s); // $
		},
		format: function(s, table) {
			return ts.formatFloat(s.replace(/[^\w,. \-()]/g, ""), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "ipAddress",
		is: function(s) {
			return (/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/).test(s);
		},
		format: function(s, table) {
			var i, item, a = s.split("."),
			r = "",
			l = a.length;
			for (i = 0; i < l; i++) {
				item = a[i];
				if (item.length === 2) {
					r += "0" + item;
				} else {
					r += item;
				}
			}
			return ts.formatFloat(r, table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "url",
		is: function(s) {
			return (/^(https?|ftp|file):\/\//).test(s);
		},
		format: function(s) {
			return $.trim(s.replace(/(https?|ftp|file):\/\//, ''));
		},
		type: "text"
	});

	ts.addParser({
		id: "isoDate",
		is: function(s) {
			return (/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/).test(s);
		},
		format: function(s, table) {
			return ts.formatFloat((s !== "") ? (new Date(s.replace(/-/g, "/")).getTime() || "") : "", table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "percent",
		is: function(s) {
			return (/\d%\)?$/).test(s);
		},
		format: function(s, table) {
			return ts.formatFloat(s.replace(/%/g, ""), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "usLongDate",
		is: function(s) {
			return s.match(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/);
		},
		format: function(s, table) {
			return ts.formatFloat( (new Date(s).getTime() || ''), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "shortDate", // "mmddyyyy", "ddmmyyyy" or "yyyymmdd"
		is: function(s) {
			// testing for ####-##-#### - so it's not perfect
			return (/^(\d{2}|\d{4})[\/\-\,\.\s+]\d{2}[\/\-\.\,\s+](\d{2}|\d{4})$/).test(s);
		},
		format: function(s, table, cell, cellIndex) {
			var c = table.config, ci = c.headerList[cellIndex],
			format = ci.shortDateFormat;
			if (typeof format === 'undefined') {
				// cache header formatting so it doesn't getData for every cell in the column
				format = ci.shortDateFormat = ts.getData( ci, c.headers[cellIndex], 'dateFormat') || c.dateFormat;
			}
			s = s.replace(/\s+/g," ").replace(/[\-|\.|\,]/g, "/");
			if (format === "mmddyyyy") {
				s = s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/, "$3/$1/$2");
			} else if (format === "ddmmyyyy") {
				s = s.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/, "$3/$2/$1");
			} else if (format === "yyyymmdd") {
				s = s.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/, "$1/$2/$3");
			}
			return ts.formatFloat( (new Date(s).getTime() || ''), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "time",
		is: function(s) {
			return (/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/).test(s);
		},
		format: function(s, table) {
			return ts.formatFloat( (new Date("2000/01/01 " + s).getTime() || ''), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "digit",
		is: function(s) {
			return ts.isDigit(s);
		},
		format: function(s, table) {
			return ts.formatFloat(s.replace(/[^\w,. \-()]/g, ""), table);
		},
		type: "numeric"
	});

	ts.addParser({
		id: "metadata",
		is: function(s) {
			return false;
		},
		format: function(s, table, cell) {
			var c = table.config,
			p = (!c.parserMetadataName) ? 'sortValue' : c.parserMetadataName;
			return $(cell).metadata()[p];
		},
		type: "numeric"
	});

	// add default widgets
	ts.addWidget({
		id: "zebra",
		format: function(table) {
			var $tb, $tv, $tr, row, even, time, k, l,
			c = table.config,
			child = new RegExp(c.cssChildRow, 'i'),
			b = $(table).children('tbody:not(.' + c.cssInfoBlock + ')'),
			css = [ "even", "odd" ];
			// maintain backwards compatibility
			css = c.widgetZebra && c.hasOwnProperty('css') ? c.widgetZebra.css :
				(c.widgetOptions && c.widgetOptions.hasOwnProperty('zebra')) ? c.widgetOptions.zebra : css;
			if (c.debug) {
				time = new Date();
			}
			for (k = 0; k < b.length; k++ ) {
				// loop through the visible rows
				$tb = $(b[k]);
				l = $tb.children('tr').length;
				if (l > 1) {
					row = 0;
					$tv = $tb.find('tr:visible');
					$tb.addClass('tablesorter-hidden');
					// revered back to using jQuery each - strangely it's the fastest method
					$tv.each(function(){
						$tr = $(this);
						// style children rows the same way the parent row was styled
						if (!child.test(this.className)) { row++; }
						even = (row % 2 === 0);
						$tr.removeClass(css[even ? 1 : 0]).addClass(css[even ? 0 : 1]);
					});
					$tb.removeClass('tablesorter-hidden');
				}
			}
			if (c.debug) {
				ts.benchmark("Applying Zebra widget", time);
			}
		}
	});

})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:common-resources', location = 'templates/extra/jira/common.js' */
AJS.JiraIssues={Remote:{}};var appLinksI18n={entries:{}};jQuery(document).ready(function(){AJS.JiraIssues=jQuery.extend(AJS.JiraIssues||{},{bindOAuthLink:function(c,f){var e={onSuccess:function(){f()},onFailure:function(){}};var d=c.attr("href");c.click(function(g){AppLinks.authenticateRemoteCredentials(d,e.onSuccess,e.onFailure);g.preventDefault()})},getOAuthRealm:function(f){var d=f.getResponseHeader("WWW-Authenticate")||"";var c=/OAuth realm\=\"([^\"]+)\"/;var e=c.exec(d);if(e){return e[1]}else{return null}}});jQuery("a.static-oauth-init").each(function(){AJS.JiraIssues.bindOAuthLink(jQuery(this),function(){window.location.reload()})});jQuery("a.anonymous-init").each(function(f,e){var c=encodeURIComponent(window.location.pathname.replace(Confluence.getContextPath(),""));var d=Confluence.getContextPath()+"/login.action?os_destination="+c;AJS.$(e).attr("href",d)});var a=function(j){var e=AJS.JiraIssues.Remote[j];var h="";for(var g=0;g<e.length;g++){h=h+(e[g].key+(g<e.length-1?",":""))}var d=function(l){var i="issuekey in ("+l+")";var m="/sr/jira.issueviews:searchrequest-xml/temp/SearchRequest.xml?jqlQuery="+encodeURIComponent(i)+"&returnMax=true";var k=contextPath+"/plugins/servlet/issue-retriever?appId="+j+"&url="+encodeURIComponent(m)+"&columns=summary&columns=type&columns=resolution&columns=status";return k};var f=function(k){var i=AJS.$("item",k);i.each(function(){var u=AJS.$("link",this).text();var v=AJS.$("key",this).text();var r=AJS.$("summary",this).text();var s=AJS.$("type",this);var m=AJS.$("resolution",this);var w=m.attr("id")!="-1";var o=AJS.$("status",this);var n=AJS.$(".unknown-jira-issue."+v);for(var p=0;p<n.length;p++){var t=AJS.$("<a style=\"background-image: url('"+s.attr("iconUrl")+'\')" href="'+u+'"></a>');t.text(v);var l=AJS.$('<span class="jira-status"></span>');l.text(o.text().toUpperCase());var q=AJS.$('<span class="jira-issue'+(w?" resolved":"")+'" ></span>');q.append(t);q.append(document.createTextNode(" - "+r+" - "));q.append(l);AJS.$(n[p]).replaceWith(q)}})};var c=d(h);AJS.$.ajax({url:c,success:f,error:function(l){if(l.status==401){var k=AJS.JiraIssues.getOAuthRealm(l);if(k){var i={};AJS.$(e).each(function(){if(!i[this.key]){i[this.key]=true;var m=AJS.$('<span class="oauth-msg"> - <a class="oauth-init" href="'+k+'">'+"Authenticate"+"</a> "+"to see issue details"+"</span>");AJS.$(".unknown-jira-issue."+this.key).addClass("single-issue-oauth").append(m)}});AJS.JiraIssues.bindOAuthLink(AJS.$(".single-issue-oauth a.oauth-init"),function(){window.location.reload()})}}else{if(l.status==400&&e.length>1){AJS.$(e).each(function(){var m=this.key;var n=d(m);AJS.$.ajax({url:n,success:f,error:function(p){var o=AJS.$(".unknown-jira-issue."+m);o.removeClass("single-issue-oauth");AJS.$(".oauth-msg",o).remove();o.addClass("jira-error")}})})}}}})};AJS.$(".unknown-jira-issue").each(function(e,f){var d=AJS.$(f);var g=d.attr("data-app-link");var c=d.attr("data-key");AJS.JiraIssues.Remote[g]=AJS.JiraIssues.Remote[g]||[];AJS.JiraIssues.Remote[g].push({key:c})});for(var b in AJS.JiraIssues.Remote){a(b)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:refresh-resources', location = '/jira/refresh.js' */
(function(b){var c={REFRESH_STATE_STARTED:1,REFRESH_STATE_DONE:2,REFRESH_STATE_FAILED:3,refreshs:[],sortables:[],init:function(){a.getAll().each(function(){c.registerRefresh(this.getRefresh())});b.each(this.refreshs,function(e,f){var g=a.get(f.id);g.getRefreshButton().bind("click",f,c.handleRefreshClick);g.getRefreshLink().bind("click",f,c.handleRefreshClick)});d.getAll().each(function(){c.registerSort(this.getSortable())});b.each(this.sortables,function(f,e){var g=d.get(e.id);g.getHeadersTable().bind("click",e,c.onHeaderClick)})},onHeaderClick:function(m){refeshId=m.data.id;var f="ASC";if(b(this).hasClass("tablesorter-headerAsc")){f="DESC"}var h=b(this).find(".jim-table-header-content").text();var l=b("#refresh-wiki-"+refeshId).val();var g=b("#refresh-page-id-"+refeshId).val();var k=b("#refresh-"+refeshId);var i=new c.Refresh(refeshId,l,g,k.html());var j=a.get(refeshId);j.updateRefreshVisibility(c.REFRESH_STATE_STARTED);c.processRefresh(i,h,f)},replaceRefresh:function(g,e){var f=a.get(g);f.updateRefreshVisibility(c.REFRESH_STATE_DONE);b.each(this.refreshs,function(l,m){if(m.id===g){c.refreshs.splice(l,1);var n=a.get(e);var j=n.getRefresh();c.registerRefresh(j);c.sortables.splice(l,1);var h=d.get(e);var k=h.getSortable();c.registerSort(k);n.getRefreshButton().bind("click",j,c.handleRefreshClick);n.getRefreshLink().bind("click",j,c.handleRefreshClick);h.getHeadersTable().bind("click",k,c.onHeaderClick)}})},registerRefresh:function(e){if(!(e instanceof c.Refresh)){throw "Refresh object must be an instance of RefreshMacro.Refresh"}c.refreshs.push(e)},registerSort:function(e){if(!(e instanceof c.Sortable)){throw "Refresh object must be an instance of RefreshMacro.Refresh"}c.sortables.push(e)},handleRefreshClick:function(h){var f=h.data;var g=a.get(f.id);g.getMacroPanel().html(f.loadingMsg);g.updateRefreshVisibility(c.REFRESH_STATE_STARTED);c.processRefresh(f)},processRefresh:function(g,f,e){var h={};if(arguments.length==1){h={pageId:g.pageId,wikiMarkup:g.wiki}}else{if(arguments.length==3){h={pageId:g.pageId,wikiMarkup:g.wiki,columnName:f,order:e}}}AJS.$.ajax({type:"POST",dataType:"html",url:Confluence.getContextPath()+"/plugins/servlet/jiraRefreshRenderer",data:h,success:function(j){var i=b(j).attr("id");if(i){i=i.replace("refresh-module-","");a.get(g.id).getContentModule().replaceWith(j);new c.CallbackSupport(g).callback(i)}else{new c.CallbackSupport(g).errorHandler(j)}},error:function(j,k,i){new c.CallbackSupport(g).errorHandler(i)}})}};c.Refresh=function(f,e){this.id=f;this.wiki=e;this.pageId=arguments.length>2?arguments[2]:null;this.loadingMsg=arguments.length>3?arguments[3]:null};c.CallbackSupport=function(e){this.refresh=e;this.module=b("#refresh-module-"+e.id)};c.CallbackSupport.prototype={errorHandler:function(f){var g=a.get(this.refresh.id);var e=AJS.format("There was a problem rendering this section: {0}",f);g.getErrorMessagePanel().html(e);g.updateRefreshVisibility(c.REFRESH_STATE_FAILED)},callback:function(e){c.replaceRefresh(this.refresh.id,e)}};var a=function(){if(arguments.length==1){this.id=arguments[0]}};var d=function(){if(arguments.length==1){this.id=arguments[0]}};a.prototype.getRefresh=function(){return new c.Refresh(this.id,this.getWikiMarkup(),this.getPageId(),this.getMacroPanel().html())};d.prototype.getSortable=function(){return new c.Sortable(this.id,b("#refresh-page-id-"+this.id).val(),b("#refresh-"+this.id).html())};a.get=function(f){var e=b("#refresh-"+f);if(!e){return null}return new a(f)};d.get=function(f){var e=b("#refresh-"+f);if(!e){return null}return new d(f)};c.Sortable=function(g,e,f){this.id=g;this.pageId=e;this.loadingMsg=f};d.getAll=function(){return b("div.refresh-macro").map(function(){var e=this.id.replace("refresh-","");return d.get(e)})};a.getAll=function(){return b("div.refresh-macro").map(function(){var e=this.id.replace("refresh-","");return a.get(e)})};a.prototype.getErrorMessagePanel=function(){return b("#error-message-"+this.id)};a.prototype.removeDarkLayer=function(){b("#jim-dark-layout-"+this.id).remove()};a.prototype.displayDarkLayer=function(){var f=b("#refresh-module-"+this.id);var e=f.position();b("<div />",{id:"jim-dark-layout-"+this.id,"class":"jim-sortable-dark-layout",css:{top:e.top+"px",left:e.left+"px",width:f.width()+"px",height:f.height()+"px"}}).appendTo(f.parent())};a.prototype.getMacroPanel=function(){return b("#refresh-"+this.id)};d.prototype.getMacroPanel=function(){return b("#refresh-"+this.id).val()};a.prototype.getContentModule=function(){return b("#refresh-module-"+this.id)};a.prototype.getPageId=function(){return b("#refresh-page-id-"+this.id).val()};d.prototype.getPageId=function(){return b("#refresh-page-id-"+this.id).val()};a.prototype.getWikiMarkup=function(){return b("#refresh-wiki-"+this.id).val()};a.prototype.getRefreshButton=function(){return b("#refresh-issues-button-"+this.id)};d.prototype.getHeadersTable=function(){return b("#jira-issues-"+this.id+" .jira-tablesorter-header")};a.prototype.getRefreshLink=function(){return b("#refresh-issues-link-"+this.id)};a.prototype.getJiraIssuesArea=function(){return b("#jira-issues-"+this.id)};a.prototype.getIssuesCountArea=function(){return b("#total-issues-count-"+this.id)};a.prototype.updateRefreshVisibility=function(e){if(e===c.REFRESH_STATE_STARTED){this.displayDarkLayer()}else{if(e===c.REFRESH_STATE_FAILED){this.getRefreshButton().show();this.getRefreshLink().show();this.removeDarkLayer()}else{if(e===c.REFRESH_STATE_DONE){this.removeDarkLayer()}}}};b(function(){c.init()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:web-resources', location = 'resources/flexigrid/flexigrid.js' */
(function($){$.addFlex=function(t,p){if(t.grid){return false}p=$.extend({height:200,width:"auto",striped:true,novstripe:false,minwidth:30,minheight:80,resizable:true,url:false,method:"POST",dataType:"xml",errormsg:"Connection Error",usepager:false,nowrap:true,page:1,total:1,useRp:true,rp:15,rpOptions:[10,15,20,25,40],title:false,pagestat:"Displaying {from} to {to} of {total} items",procmsg:"Processing, please wait ...",query:"",qtype:"",nomsg:"No items",minColToggle:1,showToggleBtn:true,hideOnSubmit:true,autoload:true,blockOpacity:0.5,onToggleCol:false,onChangeSort:false,onSuccess:false,onSubmit:false,onReload:false},p);$(t).show().attr({cellPadding:0,cellSpacing:0,border:0}).removeAttr("width");var g={hset:{},rePosDrag:function(){var cdleft=0-this.hDiv.scrollLeft;if(this.hDiv.scrollLeft>0){cdleft-=Math.floor(p.cgwidth/2)}$(g.cDrag).css({top:g.hDiv.offsetTop+1});var cdpad=this.cdpad;$("div",g.cDrag).hide();$("thead tr:first th:visible",this.hDiv).each(function(){var n=$("thead tr:first th:visible",g.hDiv).index(this);var cdpos=parseInt($("div",this).width());var ppos=cdpos;if(cdleft==0){cdleft-=Math.floor(p.cgwidth/2)}cdpos=cdpos+cdleft+cdpad;$("div:eq("+n+")",g.cDrag).css({left:cdpos+"px"}).show();cdleft=cdpos})},fixHeight:function(newH){newH=false;if(!newH){newH=$(g.bDiv).height()}var hdHeight=$(this.hDiv).height();$("div",this.cDrag).each(function(){$(this).height(newH+hdHeight)});var nd=parseInt($(g.nDiv).height());if(nd>newH){$(g.nDiv).height(newH).width(200)}else{$(g.nDiv).height("auto").width("auto")}$(g.block).css({height:newH,marginBottom:(newH*-1)});var hrH=g.bDiv.offsetTop+newH;if(p.height!="auto"&&p.resizable){hrH=g.vDiv.offsetTop}$(g.rDiv).css({height:hrH})},dragStart:function(dragtype,e,obj){if(dragtype=="colresize"){$(g.nDiv).hide();$(g.nBtn).hide();var n=$("div",this.cDrag).index(obj);var ow=$("th:visible div:eq("+n+")",this.hDiv).width();$(obj).addClass("dragging").siblings().hide();$(obj).prev().addClass("dragging").show();this.colresize={startX:e.pageX,ol:parseInt(obj.style.left),ow:ow,n:n};$("body").css("cursor","col-resize")}else{if(dragtype=="vresize"){var hgo=false;$("body").css("cursor","row-resize");if(obj){hgo=true;$("body").css("cursor","col-resize")}this.vresize={h:p.height,sy:e.pageY,w:p.width,sx:e.pageX,hgo:hgo}}else{if(dragtype=="colMove"){$(g.nDiv).hide();$(g.nBtn).hide();this.hset=$(this.hDiv).offset();this.hset.right=this.hset.left+$("table",this.hDiv).width();this.hset.bottom=this.hset.top+$("table",this.hDiv).height();this.dcol=obj;this.dcoln=$("th",this.hDiv).index(obj);this.colCopy=document.createElement("div");this.colCopy.className="colCopy";this.colCopy.innerHTML=obj.innerHTML;if($.browser.msie){this.colCopy.className="colCopy ie"}$(this.colCopy).css({position:"absolute","float":"left",display:"none",textAlign:obj.align});$("body").append(this.colCopy);$(this.cDrag).hide()}}}$("body").noSelect()},dragMove:function(e){if(this.colresize){var n=this.colresize.n;var diff=e.pageX-this.colresize.startX;var nleft=this.colresize.ol+diff;var nw=this.colresize.ow+diff;if(nw>p.minwidth){$("div:eq("+n+")",this.cDrag).css("left",nleft);this.colresize.nw=nw}}else{if(this.vresize){var v=this.vresize;var y=e.pageY;var diff=y-v.sy;if(!p.defwidth){p.defwidth=p.width}if(p.width!="auto"&&!p.nohresize&&v.hgo){var x=e.pageX;var xdiff=x-v.sx;var newW=v.w+xdiff;if(newW>p.defwidth){this.gDiv.style.width=newW+"px";p.width=newW}}var newH=v.h+diff;if((newH>p.minheight||p.height<p.minheight)&&!v.hgo){this.bDiv.style.height=newH+"px";p.height=newH;this.fixHeight(newH)}v=null}else{if(this.colCopy){$(this.dcol).addClass("thMove").removeClass("thOver");if(e.pageX>this.hset.right||e.pageX<this.hset.left||e.pageY>this.hset.bottom||e.pageY<this.hset.top){$("body").css("cursor","move")}else{$("body").css("cursor","pointer")}$(this.colCopy).css({top:e.pageY+10,left:e.pageX+20,display:"block"})}}}},dragEnd:function(){if(this.colresize){var n=this.colresize.n;var nw=this.colresize.nw;$("th:visible div:eq("+n+")",this.hDiv).css("width",nw);$("tr",this.bDiv).each(function(){$("td:visible div:eq("+n+")",this).css("width",nw)});this.hDiv.scrollLeft=this.bDiv.scrollLeft;$("div:eq("+n+")",this.cDrag).siblings().show();$(".dragging",this.cDrag).removeClass("dragging");this.rePosDrag();this.fixHeight();this.colresize=false}else{if(this.vresize){this.vresize=false}else{if(this.colCopy){$(this.colCopy).remove();if(this.dcolt!=null){if(this.dcoln>this.dcolt){$("th:eq("+this.dcolt+")",this.hDiv).before(this.dcol)}else{$("th:eq("+this.dcolt+")",this.hDiv).after(this.dcol)}this.switchCol(this.dcoln,this.dcolt);$(this.cdropleft).remove();$(this.cdropright).remove();this.rePosDrag()}this.dcol=null;this.hset=null;this.dcoln=null;this.dcolt=null;this.colCopy=null;$(".thMove",this.hDiv).removeClass("thMove");$(this.cDrag).show()}}}$("body").css("cursor","default");$("body").noSelect(false)},toggleCol:function(cid,visible){var ncol=$("th[axis='col"+cid+"']",this.hDiv)[0];var n=$("thead th",g.hDiv).index(ncol);var cb=$("input[value="+cid+"]",g.nDiv)[0];if(visible==null){visible=ncol.hide}if($("input:checked",g.nDiv).length<p.minColToggle&&!visible){return false}if(visible){ncol.hide=false;$(ncol).show();cb.checked=true}else{ncol.hide=true;$(ncol).hide();cb.checked=false}$("tbody tr",t).each(function(){if(visible){$("td:eq("+n+")",this).show()}else{$("td:eq("+n+")",this).hide()}});this.rePosDrag();if(p.onToggleCol){p.onToggleCol(cid,visible)}return visible},switchCol:function(cdrag,cdrop){$("tbody tr",t).each(function(){if(cdrag>cdrop){$("td:eq("+cdrop+")",this).before($("td:eq("+cdrag+")",this))}else{$("td:eq("+cdrop+")",this).after($("td:eq("+cdrag+")",this))}});if(cdrag>cdrop){$("tr:eq("+cdrop+")",this.nDiv).before($("tr:eq("+cdrag+")",this.nDiv))}else{$("tr:eq("+cdrop+")",this.nDiv).after($("tr:eq("+cdrag+")",this.nDiv))}if($.browser.msie&&$.browser.version<7){$("tr:eq("+cdrop+") input",this.nDiv)[0].checked=true}this.hDiv.scrollLeft=this.bDiv.scrollLeft},scroll:function(){this.hDiv.scrollLeft=this.bDiv.scrollLeft;this.rePosDrag()},addData:function(data){if(p.preProcess){data=p.preProcess(data)}$(".pReload",this.pDiv).removeClass("loading");this.loading=false;if(!data){$(".pPageStat",this.pDiv).html(p.errormsg);return false}if(p.dataType=="xml"){p.total=+$("rows total",data).text()}else{p.total=data.total}if(p.total==0){$("tr, a, td, div",t).unbind();$(t).empty();p.pages=1;p.page=1;this.buildpager();$(".pPageStat",this.pDiv).html(p.nomsg);return false}p.pages=Math.ceil(p.total/p.rp);if(p.dataType=="xml"){p.page=+$("rows page",data).text()}else{p.page=data.page}this.buildpager();var tbody=document.createElement("tbody");if(p.dataType=="json"){$.each(data.rows,function(i,row){var tr=document.createElement("tr");if(i%2&&p.striped){tr.className="erow"}if(row.id){tr.id="row"+row.id}$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;td.innerHTML=row.cell[idx];td.nowrap=this.nowrap;$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){for(idx=0;idx<cell.length;idx++){var td=document.createElement("td");td.innerHTML=row.cell[idx];$(tr).append(td);td=null}}$(tbody).append(tr);tr=null})}else{if(p.dataType=="xml"){i=1;$("rows row",data).each(function(){i++;var tr=document.createElement("tr");if(i%2&&p.striped){tr.className="erow"}var nid=$(this).attr("id");if(nid){tr.id="row"+nid}nid=null;var robj=this;$("thead tr:first th",g.hDiv).each(function(){var td=document.createElement("td");var idx=$(this).attr("axis").substr(3);td.align=this.align;td.innerHTML=$("cell:eq("+idx+")",robj).text();$(tr).append(td);td=null});if($("thead",this.gDiv).length<1){$("cell",this).each(function(){var td=document.createElement("td");td.innerHTML=$(this).text();$(tr).append(td);td=null})}$(tbody).append(tr);tr=null;robj=null})}}$("tr",t).unbind();$(t).empty();$(t).append(tbody);this.addCellProp();this.addRowProp();this.rePosDrag();if(p.onSuccess){p.onSuccess(data)}if(p.hideOnSubmit){$(g.block).remove()}this.hDiv.scrollLeft=this.bDiv.scrollLeft;if($.browser.opera){$(t).css("visibility","visible")}tbody=null;data=null;i=null},changeSort:function(th){if(this.loading){return true}$(g.nDiv).hide();$(g.nBtn).hide();if(p.sortname==$(th).attr("abbr")){if(p.sortorder=="asc"){p.sortorder="desc"}else{p.sortorder="asc"}}$(th).addClass("sorted").siblings().removeClass("sorted");$(".sdesc",this.hDiv).removeClass("sdesc");$(".sasc",this.hDiv).removeClass("sasc");$("div",th).addClass("s"+p.sortorder);p.sortname=$(th).attr("abbr");if(p.onChangeSort){p.onChangeSort(p.sortname,p.sortorder)}else{this.populate()}},buildpager:function(){$(".pcontrol input",this.pDiv).val(p.page);$(".pcontrol span",this.pDiv).html(p.pages);var r1=(p.page-1)*p.rp+1;var r2=r1+p.rp-1;if(p.total<r2){r2=p.total}var stat=p.pagestat;stat=stat.replace(/{from}/,r1);stat=stat.replace(/{to}/,r2);stat=stat.replace(/{total}/,p.total);$(".pPageStat",this.pDiv).html(stat);if(p.pages==1){var groupIndex=0;if(p.useRp){groupIndex--}if(p.searchitems){groupIndex--}$(".pGroup",g.pDiv).each(function(){if(groupIndex>=0&&groupIndex<3){$(this).css("opacity","0.3");$(".pButton",this).each(function(){$(this).css("cursor","default");$(this).hover(function(){$(this).css({border:"0px",width:"22px",height:"22px",cursor:"default"});$("span",this).each(function(){$(this).css({border:"0px",width:"22px",height:"22px",cursor:"default"})})},function(){})});$("input",this).each(function(){$(this).attr("readonly","true")})}groupIndex++})}else{$(g.gDiv).find(".pFirst, .pPrev").each(function(){if(p.page==1){$(this).removeClass("pBtnOver");$(this).css({cursor:"default",opacity:"0.3"})}else{$(this).css({cursor:"pointer",opacity:"1.0"})}});$(g.gDiv).find(".pLast, .pNext").each(function(){if(p.page==p.pages){$(this).removeClass("pBtnOver");$(this).css({cursor:"default",opacity:"0.3"})}else{$(this).css({cursor:"pointer",opacity:"1.0"})}})}},populate:function(){if(this.loading){return true}if(p.onSubmit){var gh=p.onSubmit();if(!gh){return false}}this.loading=true;if(!p.url){return false}$(".pPageStat",this.pDiv).html(p.procmsg);$(".pReload",this.pDiv).addClass("loading");$(g.block).css({top:g.bDiv.offsetTop});if(p.hideOnSubmit){$(this.gDiv).prepend(g.block)}if($.browser.opera){$(t).css("visibility","hidden")}if(!p.newp){p.newp=1}if(p.page>p.pages){p.page=p.pages}var param=[{name:"page",value:p.newp},{name:"rp",value:p.rp},{name:"sortname",value:p.sortname},{name:"sortorder",value:p.sortorder},{name:"query",value:p.query},{name:"qtype",value:p.qtype}];if(p.params){for(var pi=0;pi<p.params.length;pi++){param[param.length]=p.params[pi]}}$.ajax({type:p.method,url:p.url,data:param,dataType:"text",success:function(data){var obj=data;if(p.dataType=="json"&&$.isPlainObject&&!$.isPlainObject(data)){obj=eval("("+data+")")}g.addData(obj)},error:function(xmlhttprequest,textmsg,error){try{if(p.onError){p.onError(xmlhttprequest,textmsg,error)}}catch(e){}}})},doSearch:function(){p.query=$("input[name=q]",g.sDiv).val();p.qtype=$("select[name=qtype]",g.sDiv).val();p.newp=1;this.populate()},changePage:function(ctype){if(this.loading){return true}switch(ctype){case"first":p.newp=1;break;case"prev":if(p.page>1){p.newp=parseInt(p.page)-1}break;case"next":if(p.page<p.pages){p.newp=parseInt(p.page)+1}break;case"last":p.newp=p.pages;break;case"input":var nv=parseInt($(".pcontrol input",this.pDiv).val());if(isNaN(nv)){nv=1}if(nv<1){nv=1}else{if(nv>p.pages){nv=p.pages}}$(".pcontrol input",this.pDiv).val(nv);p.newp=nv;break}if(p.newp==p.page){return false}if(p.onChangePage){p.onChangePage(p.newp)}else{this.populate()}},addCellProp:function(){$("tbody tr td",g.bDiv).each(function(){var tdDiv=document.createElement("div");var n=$("td",$(this).parent()).index(this);var pth=$("th:eq("+n+")",g.hDiv).get(0);if(pth!=null){if(p.sortname==$(pth).attr("abbr")&&p.sortname){this.className="sorted"}$(tdDiv).css({textAlign:pth.align,width:$("div:first",pth)[0].style.width});if(pth.hide){$(this).css("display","none")}}if(this.nowrap==false){$(tdDiv).css("white-space","normal")}if(this.innerHTML==""){this.innerHTML="&nbsp;"}tdDiv.innerHTML=this.innerHTML;var prnt=$(this).parent()[0];var pid=false;if(prnt.id){pid=prnt.id.substr(3)}if(pth!=null){if(pth.process){pth.process(tdDiv,pid)}}$(this).empty().append(tdDiv).removeAttr("width")})},getCellDim:function(obj){var ht=parseInt($(obj).height());var pht=parseInt($(obj).parent().height());var wt=parseInt(obj.style.width);var pwt=parseInt($(obj).parent().width());var top=obj.offsetParent.offsetTop;var left=obj.offsetParent.offsetLeft;var pdl=parseInt($(obj).css("paddingLeft"));var pdt=parseInt($(obj).css("paddingTop"));return{ht:ht,wt:wt,top:top,left:left,pdl:pdl,pdt:pdt,pht:pht,pwt:pwt}},addRowProp:function(){$("tbody tr",g.bDiv).each(function(){$(this).click(function(e){var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}$(this).toggleClass("trSelected");if(p.singleSelect){$(this).siblings().removeClass("trSelected")}}).mousedown(function(e){if(e.shiftKey){$(this).toggleClass("trSelected");g.multisel=true;this.focus();$(g.gDiv).noSelect()}}).mouseup(function(){if(g.multisel){g.multisel=false;$(g.gDiv).noSelect(false)}}).hover(function(e){if(g.multisel){$(this).toggleClass("trSelected")}},function(){});if($.browser.msie&&$.browser.version<7){$(this).hover(function(){$(this).addClass("trOver")},function(){$(this).removeClass("trOver")})}})},pager:0};if(p.colModel){thead=document.createElement("thead");tr=document.createElement("tr");for(i=0;i<p.colModel.length;i++){var cm=p.colModel[i];var th=document.createElement("th");th.innerHTML=cm.display;if(cm.name&&cm.sortable){$(th).attr("abbr",cm.name)}$(th).attr("axis","col"+i);if(cm.align){th.align=cm.align}if(cm.width){$(th).attr("width",cm.width)}if(cm.hide){th.hide=true}if(cm.process){th.process=cm.process}if(cm.nowrap!=undefined){th.nowrap=cm.nowrap}else{th.nowrap=p.nowrap}$(tr).append(th)}$(thead).append(tr);$(t).prepend(thead)}g.options=p;g.gDiv=document.createElement("div");g.mDiv=document.createElement("div");g.hDiv=document.createElement("div");g.bDiv=document.createElement("div");g.vDiv=document.createElement("div");g.rDiv=document.createElement("div");g.cDrag=document.createElement("div");g.block=document.createElement("div");g.nDiv=document.createElement("div");g.nBtn=document.createElement("div");g.iDiv=document.createElement("div");g.tDiv=document.createElement("div");g.sDiv=document.createElement("div");if(p.usepager){g.pDiv=document.createElement("div")}g.hTable=document.createElement("table");g.gDiv.className="flexigrid";if(p.width!="auto"){g.gDiv.style.width=p.width+"px"}if($.browser.msie){$(g.gDiv).addClass("ie")}if(p.novstripe){$(g.gDiv).addClass("novstripe")}$(t).before(g.gDiv);$(g.gDiv).append(t);if(p.buttons){g.tDiv.className="tDiv";var tDiv2=document.createElement("div");tDiv2.className="tDiv2";for(i=0;i<p.buttons.length;i++){var btn=p.buttons[i];if(!btn.separator){var btnDiv=document.createElement("div");btnDiv.className="fbutton";btnDiv.innerHTML="<div><span>"+btn.name+"</span></div>";if(btn.bclass){$("span",btnDiv).addClass(btn.bclass).css({paddingLeft:20})}btnDiv.onpress=btn.onpress;btnDiv.name=btn.name;if(btn.onpress){$(btnDiv).click(function(){this.onpress(this.name,g.gDiv)})}$(tDiv2).append(btnDiv);if($.browser.msie&&$.browser.version<7){$(btnDiv).hover(function(){$(this).addClass("fbOver")},function(){$(this).removeClass("fbOver")})}}else{$(tDiv2).append("<div class='btnseparator'></div>")}}$(g.tDiv).append(tDiv2);$(g.tDiv).append("<div style='clear:both'></div>");$(g.gDiv).prepend(g.tDiv)}g.hDiv.className="hDiv";$(t).before(g.hDiv);g.hTable.cellPadding=0;g.hTable.cellSpacing=0;$(g.hDiv).append('<div class="hDivBox"></div>');$("div",g.hDiv).append(g.hTable);var thead=$("thead:first",t).get(0);if(thead){$(g.hTable).append(thead)}thead=null;if(!p.colmodel){var ci=0}$("thead tr:first th",g.hDiv).each(function(){var thdiv=document.createElement("div");if($(this).attr("abbr")){$(this).click(function(e){if(!$(this).hasClass("thOver")){return false}var obj=(e.target||e.srcElement);if(obj.href||obj.type){return true}g.changeSort(this)});if($(this).attr("abbr")==p.sortname){this.className="sorted";thdiv.className="s"+p.sortorder}}if(this.hide){$(this).hide()}if(!p.colmodel){$(this).attr("axis","col"+ci++)}$(thdiv).css({textAlign:this.align,width:this.width+"px"});thdiv.innerHTML=this.innerHTML;$(this).empty().append(thdiv).removeAttr("width").mousedown(function(e){g.dragStart("colMove",e,this)}).hover(function(){if(!g.colresize&&!$(this).hasClass("thMove")&&!g.colCopy){$(this).addClass("thOver")}if($(this).attr("abbr")!=p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){$("div",this).addClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname&&!g.colCopy&&!g.colresize&&$(this).attr("abbr")){var no="";if(p.sortorder=="asc"){no="desc"}else{no="asc"}$("div",this).removeClass("s"+p.sortorder).addClass("s"+no)}}if(g.colCopy){var n=$("th",g.hDiv).index(this);if(n==g.dcoln){return false}if(n<g.dcoln){$(this).append(g.cdropleft)}else{$(this).append(g.cdropright)}g.dcolt=n}else{if(!g.colresize){var nv=$("th:visible",g.hDiv).index(this);var onl=parseInt($("div:eq("+nv+")",g.cDrag).css("left"));var nw=parseInt($(g.nBtn).width())+parseInt($(g.nBtn).css("borderLeftWidth"));nl=onl-nw+Math.floor(p.cgwidth/2);$(g.nDiv).hide();$(g.nBtn).hide();$(g.nBtn).css({left:nl,top:g.hDiv.offsetTop}).show();var ndw=parseInt($(g.nDiv).width());$(g.nDiv).css({top:g.bDiv.offsetTop});if((nl+ndw)>$(g.gDiv).width()){$(g.nDiv).css("left",onl-ndw+1)}else{$(g.nDiv).css("left",nl)}if($(this).hasClass("sorted")){$(g.nBtn).addClass("srtd")}else{$(g.nBtn).removeClass("srtd")}}}},function(){$(this).removeClass("thOver");if($(this).attr("abbr")!=p.sortname){$("div",this).removeClass("s"+p.sortorder)}else{if($(this).attr("abbr")==p.sortname){var no="";if(p.sortorder=="asc"){no="desc"}else{no="asc"}$("div",this).addClass("s"+p.sortorder).removeClass("s"+no)}}if(g.colCopy){$(g.cdropleft).remove();$(g.cdropright).remove();g.dcolt=null}})});g.bDiv.className="bDiv";$(t).before(g.bDiv);$(g.bDiv).css({height:(p.height=="auto")?"auto":p.height+"px"}).scroll(function(e){g.scroll()}).append(t);if(p.height=="auto"){$("table",g.bDiv).addClass("autoht")}g.addCellProp();g.addRowProp();var cdcol=$("thead tr:first th:first",g.hDiv).get(0);if(cdcol!=null){g.cDrag.className="cDrag";g.cdpad=0;g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderLeftWidth")))?0:parseInt($("div",cdcol).css("borderLeftWidth")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("borderRightWidth")))?0:parseInt($("div",cdcol).css("borderRightWidth")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingLeft")))?0:parseInt($("div",cdcol).css("paddingLeft")));g.cdpad+=(isNaN(parseInt($("div",cdcol).css("paddingRight")))?0:parseInt($("div",cdcol).css("paddingRight")));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderLeftWidth")))?0:parseInt($(cdcol).css("borderLeftWidth")));g.cdpad+=(isNaN(parseInt($(cdcol).css("borderRightWidth")))?0:parseInt($(cdcol).css("borderRightWidth")));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingLeft")))?0:parseInt($(cdcol).css("paddingLeft")));g.cdpad+=(isNaN(parseInt($(cdcol).css("paddingRight")))?0:parseInt($(cdcol).css("paddingRight")));$(g.bDiv).before(g.cDrag);var cdheight=$(g.bDiv).height();var hdheight=$(g.hDiv).height();$(g.cDrag).css({top:-hdheight+"px"});$("thead tr:first th",g.hDiv).each(function(){var cgDiv=document.createElement("div");$(g.cDrag).append(cgDiv);if(!p.cgwidth){p.cgwidth=$(cgDiv).width()}$(cgDiv).css({height:cdheight+hdheight}).mousedown(function(e){g.dragStart("colresize",e,this)});if($.browser.msie&&$.browser.version<7){g.fixHeight($(g.gDiv).height());$(cgDiv).hover(function(){g.fixHeight();$(this).addClass("dragging")},function(){if(!g.colresize){$(this).removeClass("dragging")}})}})}if(p.striped){$("tbody tr:odd",g.bDiv).addClass("erow")}if(p.resizable&&p.height!="auto"){g.vDiv.className="vGrip";$(g.vDiv).mousedown(function(e){g.dragStart("vresize",e)}).html("<span></span>");$(g.bDiv).after(g.vDiv)}if(p.resizable&&p.width!="auto"&&!p.nohresize){g.rDiv.className="hGrip";$(g.rDiv).mousedown(function(e){g.dragStart("vresize",e,true)}).html("<span></span>").css("height",$(g.gDiv).height());if($.browser.msie&&$.browser.version<7){$(g.rDiv).hover(function(){$(this).addClass("hgOver")},function(){$(this).removeClass("hgOver")})}$(g.gDiv).append(g.rDiv)}if(p.usepager){g.pDiv.className="pDiv";g.pDiv.innerHTML='<div class="pDiv2"></div>';$(g.bDiv).after(g.pDiv);var html=' <div class="pGroup"> <div class="pFirst pButton"><span></span></div><div class="pPrev pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pcontrol">Page <input type="text" size="4" value="1" /> of <span> 1 </span></span></div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pNext pButton"><span></span></div><div class="pLast pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"> <div class="pReload pButton"><span></span></div> </div> <div class="btnseparator"></div> <div class="pGroup"><span class="pPageStat"></span></div>';$("div",g.pDiv).html(html);$(".pReload",g.pDiv).click(function(){if(p.onReload){var gh=p.onReload();if(!gh){return false}}g.populate()});$(".pFirst",g.pDiv).click(function(){g.changePage("first")});$(".pPrev",g.pDiv).click(function(){g.changePage("prev")});$(".pNext",g.pDiv).click(function(){g.changePage("next")});$(".pLast",g.pDiv).click(function(){g.changePage("last")});$(".pcontrol input",g.pDiv).keydown(function(e){if(e.keyCode==13){g.changePage("input")}});$(".pReload",g.pDiv).hover(function(){$(this).addClass("pBtnOver")},function(){$(this).removeClass("pBtnOver")});$(".pFirst, .pPrev").hover(function(){if(!(p.page&&p.page==1)){$(this).addClass("pBtnOver")}},function(){$(this).removeClass("pBtnOver")});$(".pLast, .pNext").hover(function(){if(!(p.page&&p.pages&&p.page==p.pages)){$(this).addClass("pBtnOver")}},function(){$(this).removeClass("pBtnOver")});if(p.useRp){var opt="";for(var nx=0;nx<p.rpOptions.length;nx++){if(p.rp==p.rpOptions[nx]){sel='selected="selected"'}else{sel=""}opt+="<option value='"+p.rpOptions[nx]+"' "+sel+" >"+p.rpOptions[nx]+"&nbsp;&nbsp;</option>"}$(".pDiv2",g.pDiv).prepend("<div class='pGroup'><select name='rp'>"+opt+"</select></div> <div class='btnseparator'></div>");$("select",g.pDiv).change(function(){if(p.onRpChange){p.onRpChange(+this.value)}else{p.newp=1;p.rp=+this.value;g.populate()}})}if(p.searchitems){$(".pDiv2",g.pDiv).prepend("<div class='pGroup'> <div class='pSearch pButton'><span></span></div> </div>  <div class='btnseparator'></div>");$(".pSearch",g.pDiv).click(function(){$(g.sDiv).slideToggle("fast",function(){$(".sDiv:visible input:first",g.gDiv).trigger("focus")})});g.sDiv.className="sDiv";sitems=p.searchitems;var sopt="";for(var s=0;s<sitems.length;s++){if(p.qtype==""&&sitems[s].isdefault==true){p.qtype=sitems[s].name;sel='selected="selected"'}else{sel=""}sopt+="<option value='"+sitems[s].name+"' "+sel+" >"+sitems[s].display+"&nbsp;&nbsp;</option>"}if(p.qtype==""){p.qtype=sitems[0].name}$(g.sDiv).append("<div class='sDiv2'>Quick Search <input type='text' size='30' name='q' class='qsbox' /> <select name='qtype'>"+sopt+"</select> <input type='button' value='Clear' /></div>");$("input[name=q],select[name=qtype]",g.sDiv).keydown(function(e){if(e.keyCode==13){g.doSearch()}});$("input[value=Clear]",g.sDiv).click(function(){$("input[name=q]",g.sDiv).val("");p.query="";g.doSearch()});$(g.bDiv).after(g.sDiv)}}$(g.pDiv,g.sDiv).append("<div style='clear:both'></div>");if(p.title){g.mDiv.className="mDiv";g.mDiv.innerHTML='<div class="ftitle">'+p.title+"</div>";$(g.gDiv).prepend(g.mDiv);if(p.showTableToggleBtn){$(g.mDiv).append('<div class="ptogtitle" title="Minimize/Maximize Table"><span></span></div>');$("div.ptogtitle",g.mDiv).click(function(){$(g.gDiv).toggleClass("hideBody");$(this).toggleClass("vsble")})}}g.cdropleft=document.createElement("span");g.cdropleft.className="cdropleft";g.cdropright=document.createElement("span");g.cdropright.className="cdropright";g.block.className="gBlock";var gh=$(g.bDiv).height();var gtop=g.bDiv.offsetTop;$(g.block).css({width:g.bDiv.style.width,height:gh,background:"white",position:"relative",marginBottom:(gh*-1),zIndex:1,top:gtop,left:"0px"});$(g.block).fadeTo(0,p.blockOpacity);if($("th",g.hDiv).length){g.nDiv.className="nDiv";g.nDiv.innerHTML="<table cellpadding='0' cellspacing='0'><tbody></tbody></table>";$(g.nDiv).css({marginBottom:(gh*-1),display:"none",top:gtop}).noSelect();var cn=0;$("th div",g.hDiv).each(function(){var kcol=$("th[axis='col"+cn+"']",g.hDiv)[0];var chk='checked="checked"';if(kcol.style.display=="none"){chk=""}$("tbody",g.nDiv).append('<tr><td class="ndcol1"><input type="checkbox" '+chk+' class="togCol" value="'+cn+'" /></td><td class="ndcol2">'+this.innerHTML+"</td></tr>");cn++});if($.browser.msie&&$.browser.version<7){$("tr",g.nDiv).hover(function(){$(this).addClass("ndcolover")},function(){$(this).removeClass("ndcolover")})}$("td.ndcol2",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<=p.minColToggle&&$(this).prev().find("input")[0].checked){return false}return g.toggleCol($(this).prev().find("input").val())});$("input.togCol",g.nDiv).click(function(){if($("input:checked",g.nDiv).length<p.minColToggle&&this.checked==false){return false}$(this).parent().next().trigger("click")});$(g.gDiv).prepend(g.nDiv);$(g.nBtn).addClass("nBtn").html("<div></div>").attr("title","Hide/Show Columns").click(function(){$(g.nDiv).toggle();return true});if(p.showToggleBtn){$(g.gDiv).prepend(g.nBtn)}}$(g.iDiv).addClass("iDiv").css({display:"none"});$(g.bDiv).append(g.iDiv);$(g.bDiv).hover(function(){$(g.nDiv).hide();$(g.nBtn).hide()},function(){if(g.multisel){g.multisel=false}});$(g.gDiv).hover(function(){},function(){$(g.nDiv).hide();$(g.nBtn).hide()});$(document).mousemove(function(e){g.dragMove(e)}).mouseup(function(e){g.dragEnd()}).hover(function(){},function(){g.dragEnd()});if($.browser.msie&&$.browser.version<7){$(".hDiv,.bDiv,.mDiv,.pDiv,.vGrip,.tDiv, .sDiv",g.gDiv).css({width:"100%"});$(g.gDiv).addClass("ie6");if(p.width!="auto"){$(g.gDiv).addClass("ie6fullwidthbug")}}g.rePosDrag();g.fixHeight();t.p=p;t.grid=g;if(p.url&&p.autoload){g.populate()}return t};var docloaded=false;$(document).ready(function(){docloaded=true});$.fn.flexigrid=function(p){return this.each(function(){if(!docloaded){$(this).hide();var t=this;$(document).ready(function(){$.addFlex(t,p)})}else{$.addFlex(this,p)}})};$.fn.flexReload=function(p){return this.each(function(){if(this.grid&&this.p.url){this.grid.populate()}})};$.fn.flexOptions=function(p){return this.each(function(){if(this.grid){$.extend(this.p,p)}})};$.fn.flexToggleCol=function(cid,visible){return this.each(function(){if(this.grid){this.grid.toggleCol(cid,visible)}})};$.fn.flexAddData=function(data){return this.each(function(){if(this.grid){this.grid.addData(data)}})};$.fn.noSelect=function(p){if(p==null){prevent=true}else{prevent=p}if(prevent){return this.each(function(){if($.browser.msie||$.browser.safari){$(this).bind("selectstart",function(){return false})}else{if($.browser.mozilla){$(this).css("MozUserSelect","none");$("body").trigger("focus")}else{if($.browser.opera){$(this).bind("mousedown",function(){return false})}else{$(this).attr("unselectable","on")}}}})}else{return this.each(function(){if($.browser.msie||$.browser.safari){$(this).unbind("selectstart")}else{if($.browser.mozilla){$(this).css("MozUserSelect","inherit")}else{if($.browser.opera){$(this).unbind("mousedown")}else{$(this).removeAttr("unselectable","on")}}}})}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:web-resources', location = 'templates/extra/jira/jiraIssues.js' */
jQuery(document).ready(function(){var a=jQuery.extend(window.JiraIssues||{},{ADG_ENABLED:AJS.Meta.getNumber("build-number")>=4000,ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO:14/11,fixMenusShowingUnderWidgetInIE:function(){if(jQuery.browser.msie){jQuery("ul.ajs-menu-bar li.ajs-menu-item").each(function(){jQuery(this).hover(function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().each(function(){var c=jQuery(this);var b=c.css("position");if(b&&b!="auto"){c.addClass("ajs-menu-bar-z-index-fix-for-ie")}})},function(){jQuery("div.ajs-drop-down",jQuery(this)).parents().removeClass("ajs-menu-bar-z-index-fix-for-ie")})})}},onSuccessFunction:function(d){if(!jQuery("fieldset input[name='height']",d).length){var b=jQuery(".bDiv table[id^='jiraissues_table']",d)[0];var e=b.grid;var c=b.clientHeight+jQuery(".hDiv",d)[0].clientHeight;jQuery(".bDiv",d).css("height",c+"px");e.options.height=c;e.fixHeight(c)}},onErrorFunction:function(h,c,b,n,f){var o=jQuery("#"+c);var g=b+": ";if(n.status=="200"){g+=f}else{g+=n.responseText}var i=n.getResponseHeader("WWW-Authenticate")||"";if(n.status=="401"&&i.indexOf("OAuth")!=-1){var m=/OAuth realm\=\"([^\"]+)\"/;var e=m.exec(i);if(e){o.empty();a.bigMessageFunction(c,'<a class="oauth-init" href="'+e[1]+'">'+"Authenticate"+"</a> "+"to retrieve your issues"+"</span>");jQuery(".bmDiv",h).css({"z-index":2});var j={onSuccess:function(){window.location.reload()},onFailure:function(){}};var l=jQuery(".oauth-init",o.parent());var d=l.attr("href");l.click(function(p){AppLinks.authenticateRemoteCredentials(d,j.onSuccess,j.onFailure);p.preventDefault()});AJS.$(".gBlock").remove()}}else{if(n.status=="400"){a.bigMessageFunction(c,"The JIRA server was not able to process the search. This may indicate a problem with the syntax of this macro. Alternatively, if this table is requesting specific issue keys, you may not have permission to view one of these issues. ")}else{var k=jQuery("iframe.jiraissues_errorMsgSandbox",h);k.load(function(){var r=this.contentWindow||this.contentDocument;var q=jQuery((r.document?r.document:r).body);jQuery("a",q).each(function(){this.target="_top"});jQuery(".pPageStat",h).empty().text(q.text());var p=jQuery("div.bmDiv",h)[0];k.removeClass("hidden");k.css({height:p.clientHeight+"px",width:p.clientWidth+"px"})});k[0].src=jQuery("fieldset input[name='retrieverUrlHtml']",h).val();a.bigMessageFunction(c,k)}}jQuery(h).find(".pReload").removeClass("loading");o[0].grid.loading=false;jQuery(h).find(".pButton").each(function(){jQuery(this).removeClass("pBtnOver");jQuery(this).css({cursor:"default",opacity:"0.3"})});jQuery(h).find("span.pcontrol input").attr("readonly","true")},onReloadFunction:function(b,d,c){jQuery(".bmDiv",d).remove();jQuery(".bmDistance",d).remove();c.onSubmit=function(){a.reloadOnSubmitFunction(b,c);return true}},reloadOnSubmitFunction:function(b,c){c.params=[{name:"useCache",value:false}];c.onSubmit=function(){a.onSubmitFunction(b,c);return true}},onSubmitFunction:function(b,c){c.params=[{name:"useCache",value:b}]},showTrustWarningsFunction:function(d,c){var b=jQuery(d).children(".trusted_warnings");if(c.trustedMessage){b.find("td:last").html(c.trustedMessage);b.css("display","block")}else{b.css("display","none")}},preProcessFunction:function(e,b,d,c,f){if(d){a.showTrustWarningsFunction(e,c)}if(c.total==0){jQuery(".pPageStat",e).html(f);a.bigMessageFunction(b,f);jQuery(".pReload",e).removeClass("loading");return}},bigMessageFunction:function(e,f){var d=jQuery("<div></div>");var b=jQuery("<div></div>");d.addClass("bmDistance");b.addClass("bmDiv");if(typeof f=="string"){b.html("<p><strong>"+f+"</strong></p>")}else{f.appendTo(b)}var c=jQuery("#"+e);c.after(b).after(d)},getParamsFrom:function(c){var b={};c.children("input").each(function(){b[jQuery(this).attr("name")]=jQuery(this).attr("value")});return b},initializeColumnWidth:function(f,p){var d={},m=function(i){return a.ADG_ENABLED?Math.round(i*a.ADG_FONT_SIZE_OVER_FLEXIGRID_FONT_SIZE_RATIO):i};if(!(p&&p.length)){return d}var h=37,n=11,k=f.width()-(h+(p.length*n)),j=false,q=false,o=0,c=m(140);for(var l=0,e=p.length;l<e;l++){var g=p[l].name;switch(g){case"summary":j=true;o++;break;case"description":q=true;o++;break;case"type":o++;d[g]=30;k-=30;break;case"priority":o++;d[g]=50;k-=50;break;case"status":o++;d[g]=m(100);k-=m(100);break;case"key":o++;d[g]=m(90);k-=m(90);break;case"comments":case"attachments":case"version":case"component":case"resolution":o++;d[g]=m(80);k-=m(80);break;default:d[g]=c}}if(j||q){k-=(c*(p.length-o));var b=250;if(j&&q){d.summary=Math.max(k/2,b);d.description=Math.max(k/2,b)}else{if(j){d.summary=Math.max(k,b)}else{d.description=Math.max(k,b)}}}else{if(!j&&!q&&(p.length>o)){c=k/(p.length-o);for(l=0;l<e;l++){if(!{resolution:true,key:true,type:true,priority:true,status:true}[p[l]]){d[p[l]]=c}}}}return d}});a.fixMenusShowingUnderWidgetInIE();jQuery(".jiraissues_table").each(function(f,j){var k=jQuery(j),h=k.children("fieldset"),e=a.getParamsFrom(h),c="jiraissues_table_"+f;k.append('<table id="'+c+'" style="display:none"></table>');k.css("width",e.width);var d=[];h.children(".columns").each(function(l){var m=jQuery(this).hasClass("nowrap");d[l]={display:this.name,name:this.value,nowrap:m,sortable:true,align:"left"}});var b=a.initializeColumnWidth(k,d);jQuery.each(d,function(l,m){m.width=b[m.name]});var g=jQuery("<div></div>");jQuery("<a></a>").attr({rel:"nofollow",href:e.clickableUrl}).text(e.title).appendTo(g);jQuery("#"+c).flexigrid({url:e.retrieverUrlHtml,method:"GET",dataType:"json",colModel:d,sortname:e.sortField,sortorder:e.sortOrder,usepager:true,title:g.html(),page:parseInt(e.requestedPage,10),useRp:false,rp:parseInt(e.resultsPerPage,10),showTableToggleBtn:true,height:(function(){return e.height?parseInt(e.height,10):480})(),onSuccess:function(){a.onSuccessFunction(j)},onSubmit:function(){a.onSubmitFunction(e.useCache,this);return true},preProcess:function(i){a.preProcessFunction(j,c,e.showTrustWarnings,i,e.nomsg);return i},onError:function(m,l,i){a.onErrorFunction(j,c,e.jiraissuesError,m,l,i)},onReload:function(){a.onReloadFunction(e.useCache,j,this);return true},errormsg:e.errormsg,pagestat:e.pagestat,procmsg:e.procmsg,nomsg:e.nomsg})});jQuery(".jiraissues_count").each(function(b,d){var c=jQuery(d);jQuery.ajax({cache:false,type:"GET",url:c.find(".url").text(),data:{useCache:c.find(".use-cache").text(),rp:c.find(".rp").text(),showCount:"true"},success:function(f){var e=c.find(".result");if(f>1){e.text(AJS.format("{0} issues",f))}else{e.text(AJS.format("{0} issue",f))}e.removeClass("hidden");jQuery(".calculating, .error, .data",c).remove()},error:function(h){var f=jQuery(".error",c).removeClass("hidden"),g=h.getResponseHeader("WWW-Authenticate")||"",j=false;if(h.status===401&&g.indexOf("OAuth")!=-1){var e=/OAuth realm\=\"([^\"]+)\"/,i=e.exec(g);if(i){f.empty().append(AJS.$("<a/>",{href:i[1],"class":"oauth-init"}).text("Authenticate").click(function(){AppLinks.authenticateRemoteCredentials(i[1],function(){window.location.reload()},function(){});return false})).append(AJS.$("<span/>",{text:" "+"to retrieve your issues"}));j=true}}if(!j){f.text(AJS.format(f.text(),h.status))}jQuery(".calculating, .result, .data",c).remove()}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:about', location = '/includes/js/about/about-page.js' */
AJS.toInit(function(d){var a=d("#confluence-about-link"),b;var c=function(){var f=AJS.Meta.get("version-number").match(/^\d+\.\d+/),h="Atlassian Confluence and Confluence Plugins",g=AJS.Meta.get("context-path")+"/aboutconfluence.action",e=new AJS.ConfluenceDialog({id:"about-confluence-dialog",closeOnOutsideClick:true});e.addHeader(h);e.addCancel("Close",function(){e.hide()});d.get(g,function(i){e.addPanel("default",i,"about-page-content")});return e};a.click(function(f){f.preventDefault();d(this).removeClass("interactive");if(b==null){b=c()}b.show()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:general-analytics-bindings', location = '/includes/js/analytics-support/analytics-bindings.js' */
require(["jquery","confluence-analytics-support"],function(b,a){b(function(){function c(e,f){b(e).on("click",".view-historical-version-trigger",function(){a.publish("confluence.page.view-historical.from-"+(f||"unknown"))})}function d(e,f){b(e).on("click",".restore-historical-version-trigger",function(){a.publish("confluence.page.restore-historical.from-"+(f||"unknown"))})}c("#page-history-warning","navigation");c("#page-history-container","history");c(".diff-menu","diff");d("#page-history-warning","navigation");d("#page-history-container","history")})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = '/js/confluence-license-banner.js' */
AJS.toInit(function(){var b=WRM.data.claim("com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details");if(!b){AJS.warn("Unable to claim my required data");return}var a={destroyBanner:function(){AJS.$("#license-banner").slideUp(function(){AJS.$("#license-banner").remove()})},remindMeLater:function(){AJS.$.ajax({type:"POST",dataType:"json",url:AJS.contextPath()+"/rest/licensebanner/1.0/reminder/later"});a.destroyBanner()},remindMeNever:function(){AJS.$.ajax({type:"POST",dataType:"json",url:AJS.contextPath()+"/rest/licensebanner/1.0/reminder/never"});a.destroyBanner()},createBanner:function(e){var c;if(e.showLicenseExpiryBanner){c=Confluence.Templates.LicenseBanner.expiryBanner({days:e.daysBeforeLicenseExpiry,mac:e.renewUrl,sales:e.salesEmail})}else{if(e.showMaintenanceExpiryBanner){c=Confluence.Templates.LicenseBanner.maintenanceBanner({days:e.daysBeforeMaintenanceExpiry,mac:e.renewUrl,sales:e.salesEmail})}}if(c){var d=$("body").prepend(c);$("#license-banner-later").click(function(f){f.preventDefault();a.remindMeLater()});$("#license-banner-never").click(function(f){f.preventDefault();a.remindMeNever()});d.find(".icon-close").click(function(f){f.preventDefault();a.remindMeLater()})}}};a.createBanner(b)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources', location = 'soy/confluence-license-banner.soy' */
// This file was automatically generated from confluence-license-banner.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.LicenseBanner == 'undefined') { Confluence.Templates.LicenseBanner = {}; }


Confluence.Templates.LicenseBanner.expiryBanner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var renewTag__soy3 = new soy.StringBuilder('<a id="license-banner-my-link" target="_blank" href="', soy.$$escapeHtml(opt_data.mac), '">');
  renewTag__soy3 = renewTag__soy3.toString();
  var end__soy7 = new soy.StringBuilder('</a>');
  end__soy7 = end__soy7.toString();
  var mailTag__soy9 = new soy.StringBuilder('<a id="license-banner-sales-link" href="mailto:', soy.$$escapeHtml(opt_data.sales), '">');
  mailTag__soy9 = mailTag__soy9.toString();
  aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="true">' + ((opt_data.days < 0) ? AJS.format("Your license subscription has expired. This instance is now read-only. Please renew {0}online{1} or contact {2}sales{3}.",renewTag__soy3,end__soy7,mailTag__soy9,end__soy7) : (opt_data.days == 0) ? AJS.format("Your license subscription will expire today and Confluence will become read-only. Please renew {0}online{1} or contact {2}sales{3}.",renewTag__soy3,end__soy7,mailTag__soy9,end__soy7) : AJS.format("Your license subscription will expire in {0,choice,1#{0} day|1\x3c{0} days}. Confluence will become read-only after the expiry. Please renew {1}online{2} or contact {3}sales{4}.",opt_data.days,renewTag__soy3,end__soy7,mailTag__soy9,end__soy7)) + '</div>', isCloseable: opt_data.days > 7, id: 'license-banner'}, output);
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.LicenseBanner.maintenanceBanner = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var renewTag__soy32 = new soy.StringBuilder('<a id="license-banner-my-link" target="_blank" href="', soy.$$escapeHtml(opt_data.mac), '">');
  renewTag__soy32 = renewTag__soy32.toString();
  var end__soy36 = new soy.StringBuilder('</a>');
  end__soy36 = end__soy36.toString();
  var later__soy38 = new soy.StringBuilder('<a href="#" id="license-banner-later">');
  later__soy38 = later__soy38.toString();
  var never__soy40 = new soy.StringBuilder('<a href="#" id="license-banner-never">');
  never__soy40 = never__soy40.toString();
  aui.message.warning({content: '<div id="license-banner-content" data-days="' + soy.$$escapeHtml(opt_data.days) + '" data-subscription="false">' + ((opt_data.days < 0) ? AJS.format("You no longer have access Support and Updates. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.",renewTag__soy32,end__soy36,later__soy38,end__soy36,never__soy40,end__soy36) : (opt_data.days == 0) ? AJS.format("You will lose access to Support and Updates today. {0}Renew online{1}, {2}remind me later{3} or {4}never remind me again{5}.",renewTag__soy32,end__soy36,later__soy38,end__soy36,never__soy40,end__soy36) : AJS.format("You will lose access to Support and Updates in {0,choice,1#{0} day|1\x3c{0} days}. {1}Renew online{2}, {3}remind me later{4} or {5}never remind me again{6}.",opt_data.days,renewTag__soy32,end__soy36,later__soy38,end__soy36,never__soy40,end__soy36)) + '</div>', id: 'license-banner'}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:requirements-resources', location = 'com/atlassian/confluence/plugins/requirements/soy/how-to.soy' */
// This file was automatically generated from how-to.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Requirements == 'undefined') { Confluence.Blueprints.Requirements = {}; }


Confluence.Blueprints.Requirements.howTo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="howto-content-wrapper"><h2>', soy.$$escapeHtml("With product requirements you can\u2026"), '</h2><ol class="howto-steps horizontal"><li class="howto-step"><div><h3>', soy.$$escapeHtml("Define document properties"), '</h3><p class="howto-description">', soy.$$escapeHtml("Add properties like status and owner to your document to make it easy to organise and sort your product requirements."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Create requirements"), '</h3><p class="howto-description">', soy.$$escapeHtml("The customisable template brings structure and consistency to your product requirements. If you use JIRA you can create stories right from the requirements page."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Track progress"), '</h3><p class="howto-description">', soy.$$escapeHtml("See the status of all your requirements at a glance. Sort by properties like status and release, or access linked JIRA issues from your requirements pages."), '</p></div></li></ol></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:requirements-resources', location = 'com/atlassian/confluence/plugins/requirements/soy/user-mention.soy' */
// This file was automatically generated from user-mention.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Requirements == 'undefined') { Confluence.Templates.Requirements = {}; }


Confluence.Templates.Requirements.userMention = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.username) ? '<p><ac:link><ri:user ri:username="' + soy.$$escapeHtml(opt_data.username) + '" /></ac:link></p>' : '<p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml("Person responsible") + '</ac:placeholder></p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.extra.jira:jqlHelper', location = '/jira/jqlhelper.js' */
AJS.JQLHelper=(function(){var a=/^\s*((key|issuekey)\s*=\s*)?([A-Z]+)([0-9]+)?([A-Z]+)?-([0-9]+)\s*$/i;var e=/\s*([A-Z][A-Z]+)-[0-9]+\s*/;var j=/(issue|searchrequest)-xml/i;var g=/\/(i#)?browse\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+$)/i;var i=/\/jira\.issueviews:issue-xml\/([\x00-\x19\x21-\x22\x24\x27-\x3E\x40-\x7F]+-[0-9]+)\//;var c=/(jqlQuery|jql)\s*\=([^&]+)/i;var h=/(\?|&)(requestId|filter)\=([^&]+)/i;var b=/(searchrequest-xml\/)([0-9]+)\/SearchRequest/i;var k=/(requestId|filter)\=([^&]+)/i;var d=/=|!=|~|>|<|!~| is | in | was | changed /i;var f=function(p){var m="";var q=g.exec(p);if(q){m="key="+q[2]}else{var n=c.exec(p);if(n){m=n[2]}else{var o=e.exec(p);if(o){m="key="+o[0]}}}m=m.replace(/\+/g," ");return m};var l=function(n,p){var m;var o=decodeURIComponent(n);var q=function(r){if(r.jql){m=r.jql}};AJS.JQLHelper.getJqlQueryFromJiraFilter(o,p,q);return m};return{isSingleKeyJQLExp:function(m){return a.exec(m)},isMultipleSingleKeyJQLExp:function(p){var o=p.split(",");for(var n in o){var m=AJS.$.trim(o[n]);if(!AJS.JQLHelper.isSingleKeyJQLExp(m)){return false}}return true},isIssueUrlOrXmlUrl:function(m){if(g.test(m)||j.test(m)||c.test(m)||i.test(m)){return true}return false},isFilterUrl:function(m){return h.test(m)||b.test(m)},getFilterFromFilterUrl:function(m){if(h.test(m)){var n=h.exec(m);return n[2]+"="+n[3]}else{if(b.test(m)){return"filter="+b.exec(m)[2]}}},getJqlQueryFromJiraFilter:function(p,q,r,o){var m=(h.exec(p)||b.exec(p))[2];var n="/rest/jiraanywhere/1.0/jira/appLink/"+q+"/filter/"+m;AJS.$.ajax({async:false,dataType:"json",url:Confluence.getContextPath()+n,success:r,error:o})},findServerIndexFromUrl:function(m,p){if(typeof(p)!=="undefined"||p.length>0){var o=m.toLowerCase();for(var n=0;n<p.length;n++){if(o.indexOf(p[n].url.toLowerCase())==0){if(m.charAt(p[n].url.length)=="/"){return n}}}}return -1},getJqlQueryFromUrl:f,getJqlAndServerIndexFromUrl:function(n,o){var m={};m.serverIndex=this.findServerIndexFromUrl(n,o);m.jqlQuery=f(n);return m},checkQueryType:function(m){if(!AJS.Editor.JiraAnalytics){return undefined}if(!m||AJS.$.trim(m).length==0){return}if(m.indexOf("http")!=0){return AJS.Editor.JiraAnalytics.linkTypes.jqlDirect}else{if(m.indexOf("jira.issueviews:searchrequest-xml")!=-1||m.indexOf("jira.issueviews:issue-xml")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.xml}else{if(m.indexOf("jira.issueviews:searchrequest-rss")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.rss}else{if(m.indexOf("filter=")!=-1||m.indexOf("filter\\=")!=-1){return AJS.Editor.JiraAnalytics.linkTypes.filter}else{return AJS.Editor.JiraAnalytics.linkTypes.jql}}}}},convertToJQL:function(n,p){var o;if(AJS.$.trim(n)!==""){if(n.indexOf("http")===0&&this.isFilterUrl(n)){o=l(n,p)}else{if(n.indexOf("http")===0&&this.isIssueUrlOrXmlUrl(n)){var m=f(decodeURIComponent(n));if(m.length>0){o=m}}else{if(n.indexOf("http")!==0&&n.match(d)){o=n}else{if(n.match(e)){o="key="+n}else{o='summary ~ "'+n+'" OR description ~ "'+n+'"'}}}}}return o}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources', location = 'com/atlassian/confluence/plugins/jirareports/js/jirareports.js' */
Confluence.Blueprints.JiraReport=(function(f){var r;var u;var n="jirareports-changelog-static";var b="jirareports-changelog-dynamic";var k="-1";var g=-1;var s=6109;var d=6155;var m="Status report is not available for your version of JIRA. Upgrade to JIRA 6.1.1 or later to use this report.";var p;var a=function(v){var x=Confluence.Blueprints.JiraReport.servers;for(var w=0;w<x.length;w++){if(x[w].id===v){return x[w]}}return null};var i=function(v,y){var x;for(var w=0;w<u.length;w++){x=u[w];if(typeof x[v]==="function"){if(y){x[v].apply(null,Array.prototype.slice.call(y))}else{x[v]()}}}};var h=function(v){v.authUrl=null;r.oauthForm.addClass("hidden");i("onAuthenticatedSuccess")};var j=function(A,x){var y=[];if((A.val()!==k)&&A.is(":enabled")){y.push("project = '",q(A.val()),"'");if(x.is(":enabled")){var w=x.find('option[value!="'+k+'"]:selected');var B=w.length;if(B>0){var v="";for(var z=0;z<w.length;z++){v=v+c(w[z])+", "}y.push(" AND fixVersion in (",v.substring(0,v.length-2),")")}}}return y.join("")};var c=function(w){var v="";var x=q(w.text);if(x==="No Version"&&w.value==="EMPTY"){v=w.value}else{v="'"+x+"'"}return v};var q=function(v){return v.replace(/'/g,"\\'")};var o=function(w){var v=w.buildNumber;return v==g||(v>=s&&v<d)};var e=function(w){if(r.selectedReportType!==Confluence.Blueprints.JiraReport.REPORT_TYPE_STATUS){return false}var v=o(w);if(v){r.errorForm.html(Confluence.Blueprints.JiraReports.Dialog.warning({infor:m}));i("disableForm");l()}else{i("enableForm");t()}return v};var l=function(){p&&p.attr("disabled","disabled")};var t=function(){p&&p.removeAttr("disabled","disabled")};return{REPORT_TYPE_CHANGE_LOG:1,REPORT_TYPE_STATUS:2,prepareData:function(){AJS.$.ajax({dataType:"json",url:Confluence.getContextPath()+"/rest/jiraanywhere/1.0/servers",async:false}).done(function(v){Confluence.Blueprints.JiraReport.servers=v;AJS.$.each(v,function(w,x){if(x.selected){Confluence.Blueprints.JiraReport.primaryServer=x}})})},init:function(w,v){u=v;r={server:w.$container.find("#jira-reports-servers"),project:w.$container.find("#jira-reports-project"),version:w.$container.find("#jira-reports-fix-version"),title:w.$container.find("#jira-reports-page-title"),spaceKey:w.wizardData.spaceKey,textSearch:w.$container.find("#jira-query"),oauthForm:w.$container.find("#oauth-form"),errorForm:w.$container.find("#error-form"),switchSearchType:w.$container.find("#switch-search-type")};p=AJS.$("#create-dialog .create-dialog-create-button:visible");r.switchSearchType.click(function(y){var x=r.switchSearchType.hasClass("simple");if(x){r.textSearch.val(j(r.project,r.version));r.textSearch.removeClass("placeholded");r.switchSearchType.removeClass("simple").addClass("advanced").text("Switch to simple")}else{r.switchSearchType.removeClass("advanced").addClass("simple").text("Switch to advanced")}w.$container.find("#advanced-jira-search").toggleClass("hidden",!x);w.$container.find("#simple-jira-search").toggleClass("hidden",x);w.$container.find("#inforWarning").empty()});i("init",[r,w.$container]);r.server.change(function(){var x=a(r.server.val());if(e(x)){return}Confluence.Blueprints.JiraReport.checkOauthForm(x);i("onServerChange")})},loadServers:function(){var v=Confluence.Blueprints.JiraReport.servers;if(v.length===1){r.server.parent().addClass("hidden")}r.server.append(Confluence.Blueprints.JiraReports.Dialog.serverOptions({servers:v}));if(e(Confluence.Blueprints.JiraReport.primaryServer)){return}Confluence.Blueprints.JiraReport.checkOauthForm(Confluence.Blueprints.JiraReport.primaryServer);r.project.trigger("servers-load-completed")},validateForm:function(v){if(p&&p.is(":disabled")){return false}if(v.$container.find("#simple-jira-search").hasClass("hidden")){return Confluence.Blueprints.JiraReport.DynamicDialog.validateForm(v)}return Confluence.Blueprints.JiraReport.StaticDialog.validateForm(v)},checkOauthForm:function(v){if(v&&v.authUrl){r.oauthForm.removeClass("hidden");r.oauthForm.click(function(w){AppLinks.authenticateRemoteCredentials(v.authUrl,function(){h(v)});w.preventDefault()})}else{r.oauthForm.addClass("hidden")}},setupChangeLogSubmitData:function(v){if(r.switchSearchType.hasClass("simple")){v.pageData.contentTemplateKey=n;v.pageData.multiVersion=Confluence.Blueprints.JiraReport.StaticDialog.getMultiVersion()}else{v.pageData.contentTemplateKey=b}},setupStatusReportSubmitData:function(v){if(r.switchSearchType.hasClass("simple")){v.pageData.dialogMode="simple";v.pageData["jira-query"]=Confluence.Blueprints.JiraReport.StaticDialog.getStaticJiraQuery(v)}},setSelectedReportType:function(v){r.selectedReportType=v}}})(AJS.$);Confluence.Blueprints.JiraReport.StaticDialog=(function(j){var b;var n=Confluence.getContextPath()+"/rest/jirareports/1.0/";var k=401;var p="-1";var F=5;var h=4;var x=255;var E="\u2026";var t={};var l=function(G){G.empty();G.append(Confluence.Blueprints.JiraReports.Dialog.defaultOption({defaultValue:p}));G.auiSelect2("val",p);B(G)};var D=function(G){G.empty();G.auiSelect2("val",p)};var r=function(G){D(G);G.auiSelect2("enable",false)};var i=function(G){G.empty();G.append(Confluence.Blueprints.JiraReports.Dialog.loadingOption());G.auiSelect2("val","loading")};var z=function(G){G.auiSelect2("enable",true)};var s=function(G){G.auiSelect2("enable",false)};var m=function(G,H){AJS.$(G).attr("tabindex",H)};var f=function(G,H){if(H===b.project.val()){b.errorForm.empty();D(b.version);b.version.append(Confluence.Blueprints.JiraReports.Dialog.versionOptions({versions:G}));z(b.version)}};var a=function(H,G){if(G===b.server.val()){b.errorForm.empty();l(b.project);b.project.append(Confluence.Blueprints.JiraReports.Dialog.projectOptions({projects:H}));z(b.project)}};var c=function(){b.project.bind("servers-load-completed",Confluence.Blueprints.JiraReport.StaticDialog.loadProjects);b.project.change(function(){if(b.project.val()===p){D(b.version);o()}else{B(b.project);Confluence.Blueprints.JiraReport.StaticDialog.loadVersions();q(b.project.find("option:selected").text())}});b.project.on("select2-opening",function(){if(b.project.val()===p){b.project.find('option[value="'+p+'"]').addClass("hidden")}});b.version.change(function(){var G=b.project.find("option:selected").text();if(!b.version.val()){q(G)}else{if(b.version.val().length>1){q(G)}else{var H=b.version.find("option:selected").text();q(G+" "+H,true)}}});b.title.change(function(){u()})};var o=function(){b.title.val("");B(b.title)};var u=function(G){if(G===undefined){G=b.title.val()}if(G===""){return true}if(!Confluence.Blueprint.canCreatePage(b.spaceKey,G)){e(b.title,"A page with this name already exists.");return false}B(b.title);return true};var w=function(H,G){if(j.trim(H.val())===p){e(b.project,G);return false}return true};var C=function(H){if(!Confluence.Blueprint.canCreatePage(b.spaceKey,H)){var I;for(var G=1;G<=F;G++){I=H.concat(" (",G,")");if(Confluence.Blueprint.canCreatePage(b.spaceKey,I)){B(b.title);return I}}e(b.title,"A page with this name already exists.")}else{B(b.title)}return H};var q=function(H,G){if(G&&H.length<x-h){b.title.val(C(H));return}if(H.length>x){H=H.substr(0,x-1)+E}b.title.val(H);u(H)};var e=function(G,H){G.focus().siblings(".error").text(H)};var B=function(G){G.siblings(".error").empty()};var g=function(H,G){return{width:"300px",containerCssClass:H,dropdownCssClass:G,formatResult:function(I,J,K){J.attr("title",I.text);return j.fn.select2.defaults.formatResult.apply(this,arguments)}}};var y=function(G,H){AJS.$(G+" .select2-input").attr("placeholder",H)};var v=function(G){if(G==="timeout"){return "Connection Timeout."}return "Can not connect to JIRA server."};var d=function(H,G){l(H);b.errorForm.empty();b.errorForm.append(Confluence.Blueprints.JiraReports.Dialog.showErrorMessage({message:v(G)}));z(H)};var A=function(G){return G.select2("val")};return{init:function(G){b=G;b.project.auiSelect2(g("select2-project-container","select2-project-dropdown"));b.version.auiSelect2(g("select2-version-container","select2-version-dropdown"));y(".select2-project-dropdown","Filter Project ...");y(".select2-version-dropdown","Filter Fix Version ...");m(".select2-project-container > .aui-select2-choice",10);m(".select2-version-container > .aui-select2-choice",10);c(this);t={}},validateForm:function(H){H.$container.find(".error").empty();var I=w(b.project,"Project field is required");var G=u()&&I;if(G){H.pageData["jira-server-name"]=b.server.find("option:selected").text();H.pageData["jira-server-id"]=b.server.find("option:selected").val();return true}return false},onServerChange:function(){this.loadProjects(false);r(b.version);o()},onAuthenticatedSuccess:function(){this.loadProjects(true);o()},loadProjects:function(H){var G=b.server.val();s(b.project);i(b.project);if(!H&&t[G]){a(t[G],G);r(b.version)}else{AJS.$.ajax({dataType:"json",url:n+"appLink/"+G+"/projects",timeout:AJS.Meta.getNumber("connection-timeout")}).done(function(I){t[G]=I;a(I,G)}).fail(function(K,J){if(K.status===k){var I=j.parseJSON(K.responseText);t[G]=I;a(I,G)}else{if(G===b.server.val()){d(b.project,J)}}})}},loadVersions:function(){s(b.version);i(b.version);var G=b.project.val();AJS.$.ajax({dataType:"json",url:n+"appLink/"+b.server.val()+"/project/"+G+"/versions",timeout:AJS.Meta.getNumber("connection-timeout")}).done(function(H){f(H,G)}).fail(function(I,H){if(I.status===k){f(j.parseJSON(I.responseText),G)}else{if(G===b.project.val()){d(b.version,H)}}})},getStaticJiraQuery:function(I){var H="";if(b.project.val()!==p){H+="project = "+b.project.val();if(b.version.val()){var G=[];j(b.version.val()).each(function(J,K){G.push("'"+b.version.find("option[value='"+K+"']").text()+"'")});H+=" and fixVersion in ("+G.join(",")+")"}}return H},getMultiVersion:function(){return A(b.version).join(",")},disableForm:function(){l(b.project);s(b.project);r(b.version);o();b.title.attr("disabled","disabled")},enableForm:function(){z(b.project);z(b.version);b.title.removeAttr("disabled","disabled")}}})(AJS.$);Confluence.Blueprints.JiraReport.DynamicDialog=(function(i){var e,c;var j=/=|!=|~|>|<|!~| is | in | was | changed /i;var n=/\s*([A-Z][A-Z]+)-[0-9]+\s*/;var d=function(q){q.focus().siblings(".error").empty()};var m=function(){c.find("#inforWarning").empty()};var b=function(q){m();c.find("#inforWarning").append(q)};var h=function(q){var r;if(q.serverIndex!==-1){e.server.val(Confluence.Blueprints.JiraReport.servers[q.serverIndex].id);e.server.trigger("change");if(q.jqlQuery.length>0){r=q.jqlQuery}}else{b(Confluence.Blueprints.JiraReports.Dialog.noServerWarning({isAdministrator:AJS.Meta.get("is-confluence-admin"),contentPath:Confluence.getContextPath()}))}return r};var p=function(q){var r=decodeURIComponent(q);var t=AJS.JQLHelper.findServerIndexFromUrl(r,Confluence.Blueprints.JiraReport.servers);if(t!==-1){e.server.val(Confluence.Blueprints.JiraReport.servers[t].id);e.server.trigger("change");var s=function(v){b(Confluence.Blueprints.JiraReports.Dialog.warning({infor:"The URL filter is not available to you, perhaps it has been deleted or had its permissions changed."}));e.textSearch.val('summary ~ "'+q+'" OR description ~ "'+q+'"')};var u=function(v){if(v.jql){e.textSearch.val(v.jql)}else{s()}};AJS.JQLHelper.getJqlQueryFromJiraFilter(r,Confluence.Blueprints.JiraReport.servers[t].id,u,s)}else{b(Confluence.Blueprints.JiraReports.Dialog.noServerWarning({isAdministrator:AJS.Meta.get("is-confluence-admin"),contentPath:Confluence.getContextPath()}));e.textSearch.val('summary ~ "'+q+'" OR description ~ "'+q+'"')}};var g=function(q,r){return q.hasClass("placeholded")&&q.val()===r};var k=function(r){if(i.trim(r)!==""&&!g(e.textSearch,"Search URL, saved filter, JQL ")){if(r.indexOf("http")===0&&AJS.JQLHelper.isFilterUrl(r)){p(r)}else{if(r.indexOf("http")===0&&AJS.JQLHelper.isIssueUrlOrXmlUrl(r)){var q=AJS.JQLHelper.getJqlAndServerIndexFromUrl(decodeURIComponent(r),Confluence.Blueprints.JiraReport.servers);if(h(q)){e.textSearch.val(q.jqlQuery)}else{e.textSearch.val('summary ~ "'+r+'" OR description ~ "'+r+'"')}}else{if(r.indexOf("http")!==0&&r.match(j)){e.textSearch.val(r)}else{if(r.match(n)){e.textSearch.val("key="+r)}else{e.textSearch.val('summary ~ "'+r+'" OR description ~ "'+r+'"')}}}}}};var f=function(){d(e.textSearch);m();setTimeout(function(){var q=e.textSearch.val();k(q)},100)};var o=function(q,r){var s=c.find(q);if(i.trim(s.val())===""){s.focus().siblings(".error").html(r);return false}return true};var a=function(){if(e.title.val()!==""&&!Confluence.Blueprint.canCreatePage(e.spaceKey,e.title.val())){return false}return true};var l=function(){e.textSearch.val("");e.textSearch.siblings(".error").empty();m()};return{init:function(q,r){e=q;c=r;e.textSearch.bind("paste",f);e.textSearch.bind("change",f)},onServerChange:l,validateForm:function(q){if(!o("#jira-query","JIRA Query field is required")){return false}if(!a()){return false}q.pageData["jira-server-name"]=e.server.find("option:selected").text();q.pageData["jira-server-id"]=e.server.find("option:selected").val();if(!e.textSearch.val().match(j)){k(e.textSearch.val());q.pageData["jira-query"]=e.textSearch.val()}return true},disableForm:function(){l();e.textSearch.attr("disabled","disabled")},enableForm:function(){e.textSearch.removeAttr("disabled","disabled")}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources', location = 'com/atlassian/confluence/plugins/jirareports/js/jirareports-wizard.js' */
(function(c){function h(m,l){var k=c("#jirareports-select-type");var j=k.find(".template");if(Confluence.Blueprints.JiraReport.servers.length===0){j.addClass("disable disable-element");var i=Confluence.Blueprints.JiraReports.Dialog.showMessageNoAppLink({isAdministrator:AJS.Meta.get("is-confluence-admin"),contentPath:Confluence.getContextPath()});l.$container.find(".warningAppLink").append(i);c(".create-dialog-create-button:visible").addClass("hidden")}else{j.click(function(){c(this).siblings().removeClass("selected");c(this).addClass("selected")}).dblclick(function(){c(".create-dialog-create-button:visible").click()});k.attr("tabindex",0).keydown(function(o){var n=k.find(".selected");if(o.keyCode==38){o.preventDefault();n.removeClass("selected");n.prev().length?n.prev().addClass("selected"):j.last().addClass("selected")}else{if(o.keyCode==40){o.preventDefault();n.removeClass("selected");n.next().length?n.next().addClass("selected"):j.first().addClass("selected")}}});setTimeout(function(){j.first().click();k.focus()},0)}}function g(k,j){var i=j.$container.find(".selected").attr("id");if(i==="jirareports-select-changelog"){j.nextPageId="changelogPageId";j.wizardData.jiraReportType=Confluence.Blueprints.JiraReport.REPORT_TYPE_CHANGE_LOG}else{if(i==="jirareports-select-statusreport"){j.nextPageId="statusreportPageId";j.wizardData.jiraReportType=Confluence.Blueprints.JiraReport.REPORT_TYPE_STATUS}else{return false}}}function e(k,j){var i=[Confluence.Blueprints.JiraReport.DynamicDialog,Confluence.Blueprints.JiraReport.StaticDialog];Confluence.Blueprints.JiraReport.init(j,i);Confluence.Blueprints.JiraReport.setSelectedReportType(j.wizardData.jiraReportType);Confluence.Blueprints.JiraReport.loadServers()}function f(j,i){e(j,i);c("#jira-report-type").parents(".field-group").addClass("hidden")}function d(j,i){if(Confluence.Blueprints.JiraReport.validateForm(i)){Confluence.Blueprints.JiraReport.setupChangeLogSubmitData(i);return true}return false}function a(j,i){if(!Confluence.Blueprints.JiraReport.validateForm(i)){return false}Confluence.Blueprints.JiraReport.setupStatusReportSubmitData(i);i.pageData["statusreport-type"]="jirareports-statusreport-dynamic";i.pageData["issues-list-type"]="dynamic";i.pageData.contentTemplateKey="jirareports-statusreport"}function b(){Confluence.Blueprints.JiraReport.prepareData()}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-item",function(i){i.on("pre-render.selectreportPageId",b);i.on("post-render.selectreportPageId",h);i.on("submit.selectreportPageId",g);i.on("post-render.changelogPageId",e);i.on("submit.changelogPageId",d);i.on("post-render.statusreportPageId",f);i.on("submit.statusreportPageId",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources', location = 'com/atlassian/confluence/plugins/jirareports/soy/dialogs.soy' */
// This file was automatically generated from dialogs.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.JiraReports == 'undefined') { Confluence.Blueprints.JiraReports = {}; }
if (typeof Confluence.Blueprints.JiraReports.Dialog == 'undefined') { Confluence.Blueprints.JiraReports.Dialog = {}; }


Confluence.Blueprints.JiraReports.Dialog.selectreport = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="template-select-container-body loadable"><div class="warningAppLink"></div><ol id="jirareports-select-type" class="jirareports-templates"><li class="template" id="jirareports-select-changelog"><img class="template-preview" src="', soy.$$escapeHtml(""), '/download/resources/com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources/icon-changelog-48.png"><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Change log"), '</div><div class="template-description">', soy.$$escapeHtml("Create a report with a list of JIRA issues for a project, release or specific query."), '</div></div></li><li class="template" id="jirareports-select-statusreport"><img class="template-preview" src="', soy.$$escapeHtml(""), '/download/resources/com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources/icon-statusreport-48.png"><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Status report"), '</div><div class="template-description">', soy.$$escapeHtml("Create a report with charts to communicate the status of your release with stakeholders."), '</div></div></li></ol></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.changelog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui change-log-form" method="post" action="#"><fieldset><div id="error-form"/><div class="hidden" id="oauth-form"><div class="aui-message-container"><div class="aui-message info"><span class="aui-icon icon-info"></span>', soy.$$escapeHtml("You are viewing this selected server as anonymous. You may want to"), '&nbsp;<a href="#">', soy.$$escapeHtml("Login \x26 Approve"), '</a></div></div></div><div class="field-group"><label for="jira-reports-servers">', soy.$$escapeHtml("Server"), '</label><select id="jira-reports-servers" class="select long-field" name="jira-reports-servers" /></div><div id="simple-jira-search"><div class="field-group"><label for="jira-reports-project">', soy.$$escapeHtml("Project"), '<span class="aui-icon icon-required"> required</span></label><select id="jira-reports-project" name="jira-reports-project"><option value=\'-1\' selected=\'selected\'>', soy.$$escapeHtml("Select"), '</option></select><div class="error"></div></div><div class="field-group" id="versions-field"><label for="jira-reports-fix-version">', soy.$$escapeHtml("Fix version(s)"), '</label><select id="jira-reports-fix-version" multiple="true" class="select long-field" disabled="disabled" placeholder="', soy.$$escapeHtml("Leave empty to get all versions"), '"></select></div></div><div id="advanced-jira-search" class="hidden"><div class="field-group"><label for="jira-query">', soy.$$escapeHtml("JIRA Query"), '<span class="aui-icon icon-required"> required</span></label><input id="jira-query" class="text long-field" type="text" name="jira-query" title="name" placeholder="', soy.$$escapeHtml("Search URL, saved filter, JQL "), '" maxlength="255"><div id="inforWarning" class="error"></div></div></div><div class="field-group"><a id="switch-search-type" href="#" class="simple">', soy.$$escapeHtml("Switch to advanced"), '</a></div><div class="field-group"><br><label for="jira-reports-page-title">', soy.$$escapeHtml("Title"), '</label><input id="jira-reports-page-title" class="text long-field" type="text" name="title" title="title" maxlength="255"><div class="error"></div></div><div id="advanced-jira-search" class="hidden"><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" id="jira-report-type" name="jira-report-type" checked="checked" value="dynamic" /><label for="jira-report-type">', soy.$$escapeHtml("Automatically update issue status and"), '</label></br><label for="jira-report-type">', soy.$$escapeHtml("summaries from JIRA"), '</label></div></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.leftmenuchangelog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="page-menu-item selected" id="simple-jira-search"><button class="item-button">', soy.$$escapeHtml("jirareports.changelog.menu.simple.search"), '</button></li><li class="page-menu-item" id="advanced-jira-search"><button class="item-button">', soy.$$escapeHtml("jirareports.changelog.menu.advanced.search"), '</button></li>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.statusreport = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div><div>Change log report</div><div>Status report</div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.warning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message warning">', soy.$$escapeHtml(opt_data.infor), '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.noServerWarning = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message warning">', (opt_data.isAdministrator == true) ? AJS.format("No server found match with your URL. \x3ca id\x3d\x22open_applinks\x22 target\x3d\x22_blank\x22 href\x3d\x22{0}/admin/listapplicationlinks.action\x22\x3e Click here \x3c/a\x3e to set this up",opt_data.contentPath) : AJS.format("No server found match with your URL. Contact your administrator \x3ca id\x3d\x22open_applinks\x22 target\x3d\x22_blank\x22 href\x3d\x22{0}/wiki/contactadministrators.action\x22\x3e here \x3c/a\x3e to set this up for you.",opt_data.contentPath), '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.showMessageNoAppLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message error">', (opt_data.isAdministrator == true) ? AJS.format("Your confluence has not been configured to connect to JIRA. Click \x3ca id\x3d\x22open_applinks\x22 target\x3d\x22_blank\x22 href\x3d\x22{0}/admin/listapplicationlinks.action\x22\x3e here \x3c/a\x3e to set your connection.",opt_data.contentPath) : AJS.format("Your confluence has not been configured to connect to JIRA. Contact your administrator \x3ca id\x3d\x22open_applinks\x22 target\x3d\x22_blank\x22 href\x3d\x22{0}/wiki/contactadministrators.action\x22\x3e here \x3c/a\x3e to set this up for you.",opt_data.contentPath), '<span class="aui-icon icon-warning"></span></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.showErrorMessage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-message-container"><div class="aui-message error"><p class="title"><span class="aui-icon icon-error"></span><strong>', soy.$$escapeHtml(opt_data.message), '</strong></p></div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.defaultOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<option value="', soy.$$escapeHtml(opt_data.defaultValue), '" selected="selected">', soy.$$escapeHtml("Select"), '</option>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.loadingOption = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<option value="loading" selected="selected">', soy.$$escapeHtml("Loading..."), '</option>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.serverOptions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var serverList91 = opt_data.servers;
  var serverListLen91 = serverList91.length;
  for (var serverIndex91 = 0; serverIndex91 < serverListLen91; serverIndex91++) {
    var serverData91 = serverList91[serverIndex91];
    output.append((serverData91.selected) ? '<option value="' + soy.$$escapeHtml(serverData91.id) + '" selected="selected">' + soy.$$escapeHtml(serverData91.name) + '</option>' : '<option value="' + soy.$$escapeHtml(serverData91.id) + '">' + soy.$$escapeHtml(serverData91.name) + '</option>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.projectOptions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var projectList107 = opt_data.projects;
  var projectListLen107 = projectList107.length;
  for (var projectIndex107 = 0; projectIndex107 < projectListLen107; projectIndex107++) {
    var projectData107 = projectList107[projectIndex107];
    output.append('<option value="', soy.$$escapeHtml(projectData107.key), '">', soy.$$escapeHtml(projectData107.name), '</option>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Dialog.versionOptions = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var versionsLeng__soy115 = opt_data.versions.length;
  output.append((versionsLeng__soy115 > 0) ? '<option value="EMPTY">' + soy.$$escapeHtml("No Version") + '</option>' : '');
  var iLimit121 = versionsLeng__soy115;
  for (var i121 = 0; i121 < iLimit121; i121++) {
    var version__soy122 = opt_data.versions[versionsLeng__soy115 - i121 - 1];
    output.append('<option value="', soy.$$escapeHtml(version__soy122.id), '">', soy.$$escapeHtml(version__soy122.name), '</option>');
  }
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:jirareports-resources', location = 'com/atlassian/confluence/plugins/jirareports/soy/jirareport-templates.soy' */
// This file was automatically generated from jirareport-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.JiraReports == 'undefined') { Confluence.Blueprints.JiraReports = {}; }
if (typeof Confluence.Blueprints.JiraReports.Template == 'undefined') { Confluence.Blueprints.JiraReports.Template = {}; }


Confluence.Blueprints.JiraReports.Template.jiraissues = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="jira"><ac:parameter ac:name="serverId">', soy.$$escapeHtml(opt_data.serverId), '</ac:parameter><ac:parameter ac:name="server">', soy.$$escapeHtml(opt_data.server), '</ac:parameter><ac:parameter ac:name="', soy.$$escapeHtml(opt_data.keyJQL), '">', soy.$$escapeHtml(opt_data.valJQL), '</ac:parameter>', (opt_data.isCount) ? '<ac:parameter ac:name="count">true</ac:parameter>' : '', '</ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Template.piechart = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><h3>', soy.$$escapeHtml(opt_data.titleType), (opt_data.statType == 'statuses') ? opt_data.totalIssues : '', '</h3></p><p><ac:macro ac:name="jirachart"><ac:parameter ac:name="serverId">', soy.$$escapeHtml(opt_data.serverId), '</ac:parameter><ac:parameter ac:name="server">', soy.$$escapeHtml(opt_data.server), '</ac:parameter><ac:parameter ac:name="jql">', soy.$$escapeHtml(opt_data.jql), '</ac:parameter><ac:parameter ac:name="statType">', soy.$$escapeHtml(opt_data.statType), '</ac:parameter><ac:parameter ac:name="width">', soy.$$escapeHtml(opt_data.width), '</ac:parameter><ac:parameter ac:name="border">', soy.$$escapeHtml(opt_data.border), '</ac:parameter><ac:parameter ac:name="chartType">pie</ac:parameter></ac:macro></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Template.createFromTemplateMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="create-from-template"><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.blueprintKey), '</ac:parameter><ac:parameter ac:name="buttonLabel">', soy.$$escapeHtml("Add JIRA Report"), '</ac:parameter><ac:parameter ac:name="spaceKey">', soy.$$escapeHtml(opt_data.spaceKey), '</ac:parameter><ac:parameter ac:name="templateName">', soy.$$escapeHtml(opt_data.blueprintKey), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Template.errortimeout = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ac:placeholder><strong>', soy.$$escapeHtml("Cannot get data from JIRA Server due to connection timeout."), '</strong></ac:placeholder></p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.JiraReports.Template.releaseTitle = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:placeholder>', soy.$$escapeHtml("Insert release name here."), '</ac:placeholder>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:retrospective-resources', location = 'com/atlassian/confluence/plugins/retrospectives/js/retrospectives-wizard.js' */
(function(c){function b(f,d){Confluence.Blueprints.Restrospectives.init(d)}function a(f,d){return Confluence.Blueprints.Restrospectives.validateRetroForm()}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-software-blueprints:retrospectives-item",function(d){d.on("post-render.retrospectivePageId",b);d.on("submit.retrospectivePageId",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:retrospective-resources', location = 'com/atlassian/confluence/plugins/retrospectives/js/retrospectives.js' */
Confluence.Blueprints.Restrospectives=(function(d){var h;var e="YYYY-MM-DD";var c=function(i){i.siblings(".error").empty()};var b=function(i,j){i.focus().siblings(".error").text(j)};var g=function(){if(h.title.val()===""){return true}if(!Confluence.Blueprint.canCreatePage(h.spaceKey,h.title.val())){b(h.title,"A page with this name already exists.");return false}c(h.title);return true};var f=function(){h.title.change(g)};var a=function(){var j=d("meta[name=confluence-request-time]").attr("content");var i=moment(parseFloat(j)).format(e);h.title.val(i+" "+"Retrospective")};return{init:function(i){h={title:i.$container.find("#retro-title"),participants:i.$container.find("#retro-participants"),spaceKey:i.wizardData.spaceKey};f();a()},validateRetroForm:function(){return g()}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:retrospective-resources', location = 'com/atlassian/confluence/plugins/retrospectives/soy/dialogs.soy' */
// This file was automatically generated from dialogs.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Retrospectives == 'undefined') { Confluence.Blueprints.Retrospectives = {}; }
if (typeof Confluence.Blueprints.Retrospectives.Dialog == 'undefined') { Confluence.Blueprints.Retrospectives.Dialog = {}; }


Confluence.Blueprints.Retrospectives.Dialog.retrospective = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form class="aui retrospective" method="post" action="#"><fieldset><div class="field-group"><label for="retro-title">', soy.$$escapeHtml("Title"), '</label><input id="retro-title" class="text long-field" type="text" name="retro-title" title="title" maxlength="255"><div class="error"/></div><div class="field-group"><label for="retro-participants">', soy.$$escapeHtml("Participants"), '</label><input id="retro-participants" class="text long-field autocomplete-multiuser" type="text" name="retro-participants" data-autofill-user="true" placeholder="', soy.$$escapeHtml("Add the participants of this retrospective"), '"></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-software-blueprints:retrospective-resources', location = 'com/atlassian/confluence/plugins/blueprints/common/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Common == 'undefined') { Confluence.Blueprints.Common = {}; }


Confluence.Blueprints.Common.userList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul>');
  var nameList4 = opt_data.names;
  var nameListLen4 = nameList4.length;
  for (var nameIndex4 = 0; nameIndex4 < nameListLen4; nameIndex4++) {
    var nameData4 = nameList4[nameIndex4];
    output.append('<li><ac:link><ri:user ri:username="', soy.$$escapeHtml(nameData4), '" /></ac:link></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Common.userTable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var nameList11 = opt_data.names;
  var nameListLen11 = nameList11.length;
  for (var nameIndex11 = 0; nameIndex11 < nameListLen11; nameIndex11++) {
    var nameData11 = nameList11[nameIndex11];
    output.append('<tr><td><ac:macro ac:name="profile-picture"><ac:parameter ac:name="User">', soy.$$escapeHtml(nameData11), '</ac:parameter></ac:macro><br></br><ac:link><ri:user ri:username="', soy.$$escapeHtml(nameData11), '" /></ac:link></td><td/><td/></tr>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Common.users = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var nameList19 = opt_data.names;
  var nameListLen19 = nameList19.length;
  for (var nameIndex19 = 0; nameIndex19 < nameListLen19; nameIndex19++) {
    var nameData19 = nameList19[nameIndex19];
    output.append('<ac:link><ri:user ri:username="', soy.$$escapeHtml(nameData19), '" /></ac:link>&nbsp;');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Common.createFromTemplateMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="create-from-template"><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.blueprintKey), '</ac:parameter><ac:parameter ac:name="buttonLabel">', soy.$$escapeHtml(opt_data.buttonLabel), '</ac:parameter><ac:parameter ac:name="spaceKey">', soy.$$escapeHtml(opt_data.spaceKey), '</ac:parameter><ac:parameter ac:name="templateName">', soy.$$escapeHtml(opt_data.blueprintKey), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-team-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/team/js/confluence-team-space-blueprints.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function a(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function b(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-space-blueprints:team-space-blueprint-item",function(c){c.on("submit.teamSpaceId",a);c.on("pre-render.teamSpaceId",b);c.on("post-render.teamSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-team-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/team/soy/dialog-page.soy' */
// This file was automatically generated from dialog-page.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.Team == 'undefined') { Confluence.SpaceBlueprints.Team = {}; }


Confluence.SpaceBlueprints.Team.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="decisions-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, spaceKey: opt_data.spaceKey}, output);
  output.append('<fieldset><div class="field-group"><label for="team-members">', soy.$$escapeHtml("Team members"), '</label><input id="team-members" class="text long-field autocomplete-multiuser" type="text" name="members" placeholder="', soy.$$escapeHtml("Add your team members"), '" data-autofill-user="true"/></div><div class="field-group"><label for="team-description">', soy.$$escapeHtml("Description"), '</label><textarea id="team-description" class="textarea long-field" rows="3" type="text" name="description" placeholder="', soy.$$escapeHtml("Let others know what this space is for"), '"></textarea></div></fieldset><input type="hidden" name="atl_token" value="', soy.$$escapeHtml(opt_data.atlToken), '" /></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-documentation-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/documentation/js/confluence-documentation-space-blueprint.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function b(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function a(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-space-blueprints:documentation-space-blueprint-item",function(c){c.on("submit.documentationSpaceId",b);c.on("pre-render.documentationSpaceId",a);c.on("post-render.documentationSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-blueprints:confluence-documentation-space-blueprint-resources', location = 'com/atlassian/confluence/plugins/documentation/soy/dialog-page.soy' */
// This file was automatically generated from dialog-page.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.Documentation == 'undefined') { Confluence.SpaceBlueprints.Documentation = {}; }


Confluence.SpaceBlueprints.Documentation.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="documentation-space-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, key: opt_data.key}, output);
  output.append('<fieldset><div class="field-group"><label for="documentation-description">', soy.$$escapeHtml("Description"), '</label><textarea id="documentation-description" class="textarea long-field" rows="3" type="text" name="spaceDesc" placeholder="', soy.$$escapeHtml("Briefly describe the documentation in this space"), '"></textarea></div></fieldset><input type="hidden" name="noPageTitlePrefix" value="true" /><input type="hidden" name="atl_token" value="', soy.$$escapeHtml(opt_data.atlToken), '" /></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources', location = '/js/confluence-feature-discovery-plugin.js' */
(function(d){Confluence.FeatureDiscovery={};var f,a=false,b=3;function c(g){if(f===undefined){f=JSON.parse(AJS.Meta.get("discovered-plugin-features")||"{}")}if(g){return f[g]||[]}return f}function e(j,l){var k=c(j);for(var h=0,g=k.length;h<g;h++){if(k[h]==l){return true}}return false}Confluence.FeatureDiscovery.forPlugin=function(i,h){var l=Confluence.storageManager("feature-discovery."+i);h=h||b;function k(n){var m=parseInt(l.getItem(n),10);return isNaN(m)?0:m}function j(n,m){return l.setItem(n,m)}function g(m){return l.removeItem(m)}return{addDiscoveryView:function(m){j(m,k(m)+1)},shouldShow:function(m){if(a||e(i,m)){return false}if(k(m)>=h){this.markDiscovered(m);return false}a=true;return true},markDiscovered:function(n,m){if(e(i,n)){return}d.ajax({url:AJS.contextPath()+"/rest/feature-discovery/1.0/discovered/"+i+"/"+n,type:"POST",success:function(){c(i).unshift(n);g(n);AJS.trigger("feature-discovered",{pluginKey:i,featureKey:n});if(m&&d.isFunction(m)){m()}}})},listDiscovered:function(){return c(i).slice(0)}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.support.stp:stp-license-status-resources', location = 'js/stp-licenseStatus.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'templates/anchor.soy' */
// This file was automatically generated from anchor.soy.
// Please don't edit this file by hand.

if (typeof MyWork == 'undefined') { var MyWork = {}; }
if (typeof MyWork.Templates == 'undefined') { MyWork.Templates = {}; }
if (typeof MyWork.Templates.Anchor == 'undefined') { MyWork.Templates.Anchor = {}; }


MyWork.Templates.Anchor.tasksFeatureDiscovery = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p>', soy.$$escapeHtml("See the tasks assigned to you, or created by you, in the Tasks tab of your profile."), '</p><ul class="mw-tasks-discovery-controls"><li><a id="mw-tasks-discovery-view" href="', soy.$$escapeHtml(opt_data.tasksUrl), '" class="aui-button aui-style"><p>', soy.$$escapeHtml("View Tasks"), '</p></a></li><li><a id="mw-tasks-discovery-dismiss" href="#">', soy.$$escapeHtml("Dismiss"), '</a></li></ul>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/miniview-anchor.js' */
var MW=MW||{$:AJS.$||Zepto};
MW.MV={};
AJS.toInit(function(){if(AJS.Meta&&!AJS.Meta.get("remote-user")){return 
}MW.MV.AnchorManager=function(){var K=contextPath,J=K+"/plugins/servlet/notifications-miniview",O=[0,"0"],D={JIRA:"JIRA",CONFLUENCE:"Confluence"},P=/[?&]show-miniview/.test(window.location.search);
function S(U){U=U.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");
var T="[\\?\\#&]"+U+"=([^&#]*)";
var W=new RegExp(T);
var V=W.exec(window.location.search);
if(V!==null){return decodeURIComponent(V[1].replace(/\+/g," "))
}}var B=S("show-miniview");
if(B){J+="#notification/"+B
}function M(){if(typeof (Confluence)!="undefined"){return D.CONFLUENCE
}else{if(typeof (JIRA)!="undefined"){return D.JIRA
}}}function I(){var T="badge-i";
if(MW.$("#notifications-anchor").length===0){Q()
}else{T+=" aui-icon aui-icon-small"
}MW.$("#notifications-anchor").html('<div class="'+T+'"><span class="badge-w"><span class="badge"></span></span></div>')
}function Q(){var U=M(),T;
if(U==D.JIRA){T=MW.$("#header .global .secondary")
}else{if(U==D.CONFLUENCE){T=MW.$("#header-menu-bar")
}}T.children().each(function(){MW.$(this).find("a").click(function(){MW.Dialog.hide()
})
});
T.append("<a href='#' id='notifications-anchor' class='mw-anchor read'></a>")
}function R(V){var U=false,T;
return function(){if(U){return T
}U=true;
T=V.apply(this,arguments);
return T
}
}var L=R(function(){MW.Dialog.getOptions().closeOthers=false;
MW.Dialog.preload=true;
MW.Dialog.show();
MW.Dialog.hide();
MW.Dialog.getOptions().closeOthers=true
});
function E(T,X){var U=MW.$("#notifications-anchor"),V=U.find(".badge");
V.html(X);
var Y=T>0?AJS.format("New Notifications: {0}",T):"Open Notifications",W=U.attr("title")||"";
U.attr("title",Y+W.replace(/.*?\(/," ("));
U.toggleClass("unread",T!==0);
U.toggleClass("read",T===0);
O=[T,X];
if(T>0&&MW.$("#notifications-anchor:visible").length>0&&!P){L()
}}function F(){AJS.log("Creating iframes");
var T="gn";
if(D.CONFLUENCE==M()){T=T.split("")
}G("notifications",J,T);
N()
}function N(){MW.$(document).keydown(function(T){if(AJS.InlineDialog.current&&T.which==27&&!MW.$(T.target).is(":input")){AJS.InlineDialog.current.hide()
}})
}function C(){MW.$("#header-menu-bar").find(".ajs-drop-down").each(function(){this.hide()
})
}function G(a,Y,V){var Z;
var X=function(){Z=this
};
var U=function(){if(this.preload!==true){var b=JSON.stringify({markAllRead:true});
MW.$("#"+a+"-miniview-iframe")[0].contentWindow.postMessage(b,"*")
}};
if(!window.addEventListener){window.attachEvent("onmessage",W)
}else{window.addEventListener("message",W,false)
}function W(d){function f(e){return e===location.protocol+"//"+location.host
}if("escKey"===d.data){Z.hide();
MW.$("#notifications-anchor").focus();
document.activeElement.blur()
}else{if("getParentConfig"===d.data&&f(d.origin)){var c=JSON.stringify({parentConfig:{parentUrl:location.href,preload:MW.Dialog.preload,unread:O[1]}}),b=MW.$("#"+a+"-miniview-iframe")[0].contentWindow;
b.postMessage(c,"*");
if(MW.Dialog.preload){MW.Dialog.preload=false
}else{b.focus()
}}}}MW.Dialog=AJS.InlineDialog(MW.$("#"+a+"-anchor"),a+"-miniview",function(e,c,f){if(MW.$(e).children().length===0){MW.$(e).append(MW.$('<iframe id="'+a+'-miniview-iframe" src="'+Y+'" frameborder="0"></iframe>'))
}else{var d=JSON.stringify({unread:O[1]}),b=MW.$("#"+a+"-miniview-iframe")[0].contentWindow;
b.postMessage(d,"*");
setTimeout(function(){b.focus()
},100)
}C();
f()
},{width:500,height:520,hideDelay:null,initCallback:X,hideCallback:U,noBind:true});
MW.Tasks=(function(){var e=300;
var d=20;
var f=16;
var l;
var h=AJS.$("#user-menu-link");
var g=AJS.$("#user-menu-link-content");
var c=g.find("#view-mytasks-link");
var i=function(o,m,p){var n=MyWork.Templates.Anchor.tasksFeatureDiscovery({tasksUrl:AJS.contextPath()+"/plugins/inlinetasks/mytasks.action"});
o.html(n);
o.find("#mw-tasks-discovery-dismiss").click(function(){l.hide()
});
p()
};
function b(){return"M0,0L8,8L0,16"
}function k(o,q,t,p){var r=q.target.offset();
var n=q.target.height();
var m={top:r.top+n/2-15,left:r.left-e-(2*d)-f,right:"auto"};
var s={top:9,right:-15};
return{displayAbove:false,popupCss:m,arrowCss:s}
}var j=function(){MW.Dialog.hide();
var o=function(){return g.is(":visible")
};
if(!o()){h.trigger("aui-button-invoke")
}var m=function(){l.hide()
};
g.one("aui-dropdown2-hide",m);
l=AJS.InlineDialog(c,"my-tasks-discovery",i,{hideCallback:function(){l.unbind("click focusin mousedown",n);
g.unbind("aui-dropdown2-hide",m);
if(o()){h.trigger("aui-button-invoke")
}MW.$("#inline-dialog-my-tasks-discovery").remove()
},getArrowPath:b,calculatePositions:k,useLiveEvents:true,width:e,noBind:true});
g.find(".user-item.active").removeClass("active");
c.addClass("active");
c.focus();
var n=function(p){p.stopPropagation()
};
l.on("click focusin mousedown",n);
l.show()
};
return{closeAndDiscoverMyTasks:j}
})();
MW.$("#"+a+"-anchor").click(function(b){b.preventDefault();
if(MW.$("#"+a+"-miniview-iframe").is(":visible")){MW.Dialog.hide()
}else{MW.Dialog.show()
}});
var T=function(){AJS.whenIType(V).click(("#"+a+"-anchor"));
E(O[0],O[1])
};
if(window.Confluence){AJS.bind("initialize.keyboardshortcuts",T)
}else{T()
}if(P){MW.$("#"+a+"-anchor").click()
}}function H(){I();
F()
}return{setupAnchors:H,updateNotificationCount:E}
}();
if(AJS.I18n&&AJS.I18n.keys){AJS.I18n.keys["com.atlassian.mywork.keyboard.shortcut.open.notifications.desc"]="Open Notifications"
}MW.MV.AnchorManager.setupAnchors();
anchorUtil=new MW.AnchorUtil(MW.$,contextPath,MW.MV.AnchorManager.updateNotificationCount);
anchorUtil.setupAnchors();
MW.$("#notifications-anchor").click(function(){MW.MV.AnchorManager.updateNotificationCount(0,"0")
});
var A=function(){if(document.hidden){anchorUtil.stopRequests(true)
}else{anchorUtil.startRequests()
}};
document.addEventListener("visibilitychange",A,false);
if(typeof document.hidden==="undefined"){MW.$(window).focus(function(){anchorUtil.startRequests()
})
}MW.$("body").click(function(){anchorUtil.startRequests()
})
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.mywork.mywork-confluence-host-plugin:mw-header-anchor', location = 'js/util/anchor-util.js' */
MW.AnchorUtil=function(D,L,E){var F=30000,J=F,T,Q=L+"/rest/mywork/latest/status/notification/count";
var S=new Date().getTime();
var B=5*60*1000;
var U=1000*60*5;
var H=1.25;
var C=0;
function I(V){return V<=9?V:"9+"
}function R(V){window.clearInterval(T);
T=undefined;
if(V===true){J=F
}}function P(){return(new Date().getTime()-S)<U
}function N(){if(!P()||!T){M()
}S=new Date().getTime()
}function M(){if(T){clearTimeout(T)
}T=setTimeout(function(){G()
},C=O(C))
}function A(X,V){var W=X*1000;
B=V*1000||B;
if(W&&W!=J){J=W;
N()
}}function O(V){return Math.min(P()?J:V*H,B)
}function G(V){MW.$.getJSON(Q+((V)?"?pageid="+V:""),function(X){A(X.timeout,X.maxTimeout);
var W=X.count;
E(W,I(W))
});
M()
}function K(){var V=AJS&&AJS.Meta&&AJS.Meta.get&&(AJS.Meta.get("content-type")==="page"||AJS.Meta.get("content-type")==="blogpost");
if(V){G(AJS.Meta.get("page-id"))
}else{G()
}N()
}return{setupAnchors:K,startRequests:N,stopRequests:R,updateAnchors:G}
};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'templates/recently.soy' */
// This file was automatically generated from recently.soy.
// Please don't edit this file by hand.

if (typeof RY == 'undefined') { var RY = {}; }
if (typeof RY.Templates == 'undefined') { RY.Templates = {}; }


RY.Templates.body = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="recently-viewed" class="aui-group"><div class="aui-item"><div class="top"><div class="filter"><form class="aui"><input class="filter-input text" type="text" placeholder="', soy.$$escapeHtmlAttribute("Filter"), '"></form></div></div><div class="pages"></div><div class="recently-viewed-spinner" id="', soy.$$escapeHtmlAttribute(opt_data.spinnerId), '"></div></div></div>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageCollection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="groups"></div><div class="empty"></div>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageGroup = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h3>', soy.$$escapeHtml(opt_data.title), '</h3><ul/>');
  return opt_sb ? '' : output.toString();
};


RY.Templates.pageItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="page-icon"><a href=', soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)), ' class="icon icon-', soy.$$escapeHtmlAttribute(opt_data.type), '"></a></div><div class="page-title"><a class="ellipsis" href=', soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeUri(opt_data.href)), '>', soy.$$escapeHtml(opt_data.title), ' - ', soy.$$escapeHtml(opt_data.space), '</a></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/util.js' */
var RY=RY||{};(function(){var b=new Date();var c=new Date(b).getTime();var a=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime();var d=new Date(b.getFullYear(),b.getMonth(),b.getDate()-1).getTime();RY.util=RY.Util={analytics:{trackDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-dialog-open"})},trackPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-page-open"})}},quote:function(e){return(e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},diffInDays:function(g,f){var e=1000*60*60*24;return Math.floor((g-f)/e)},daysSince:function(e){if(e>=a){return 0}else{if(e>=d){return 1}else{return RY.util.diffInDays(c,e)}}},wait:function(h,j,f){var i,k,e;var g=function(){k=setTimeout(function(){h.apply(f,e)},j)};return function(){e=arguments;var l=new Date();if(i&&l-i<j){clearTimeout(k)}g();i=l}}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-storage.js' */
var RY=RY||{};RY.RecentPageStorage=function(h){var f="com.atlassian.confluence.plugins.recently.viewed.pages.v1";var d=100;var c={};var b=function(){var i=function(k,l){if(k==="lastSeen"&&_.isString(l)){if(AJS.$.browser.msie){l=l.replace(/\-/g,"/");l=l.replace(/T.*$/,"")}return new Date(l).getTime()}else{return l}};try{c=JSON.parse(h.getItem(f),i)||{}}catch(j){c={}}return c};var g=function(){var i=_.values(c);var k=i.length-d;if(k>0){var j=_.sortBy(i,function(l){return l.lastSeen});_.times(k,function(){var l=j.shift();delete c[l.id]})}};var e=function(){g();try{h.setItem(f,JSON.stringify(c))}catch(i){}};this.addCurrentPage=function(i){if(!(i.id&&i.title)){return}b();a(i);e()};var a=function(i){var j=c[i.id];if(!j){c[i.id]=j={}}j=_.extend(j,i);j.lastSeen=new Date().getTime();j.count=j.count+1||1};this.getPages=function(){return _.values(b())}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/filter.js' */
var RY=RY||{};RY.FilterView=Backbone.View.extend({className:"filter",events:{"input .filter-input":"onInput","keyup .filter-input":"onInput","keydown .filter-input":"onKeydown"},initialize:function(){_.bindAll(this,"render","onInput","onKeydown","search");this.navigationEvents=this.options.navigationEvents;this.onInput=RY.util.wait(this.onInput,100,this)},render:function(){this.$input=this.$(".filter-input");return this},onInput:function(a){if(a&&_.contains([37,38,39,40],a.which)){return}this.search()},onKeydown:function(a){switch(a.which){case 13:this.navigationEvents.trigger("select");a.preventDefault();a.stopPropagation();break;case 38:this.navigationEvents.trigger("previous");a.preventDefault();break;case 40:this.navigationEvents.trigger("next");a.preventDefault();break}},search:function(){var a=this.$input.val();this.collection.search(a)}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page-model.js' */
var RY=RY||{};(function(){var a;if(typeof ConfluenceMobile!="undefined"){a=ConfluenceMobile.AppData.get("confluence-context-path")}else{a=AJS.contextPath()}RY.Page=Backbone.Model.extend({href:function(){return a+this.get("url")},daysSinceLastSeen:function(){return RY.util.daysSince(this.get("lastSeen"))}});RY.PageCollection=Backbone.Collection.extend({model:RY.Page,url:a+"/rest/recentlyviewed/1.0/recent",search:function(c){var b;if(this._queryLength(c)===0){b=this.models}else{var d=c.match(/[^\s-]+/g);b=this.filter(function(g){var h=g.get("title");var f=g.get("space");var e=(h+f).toLowerCase();return _.all(d,function(i){return e.indexOf(i.toLowerCase())!==-1})})}this.trigger("filter",b,c);return b},_queryLength:function(b){if(!String.prototype.trim){return AJS.$.trim(b).length}return b.trim().length},comparator:function(b){return -(b.get("lastSeen"))}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/page.js' */
var RY=RY||{};RY.PageView=Backbone.View.extend({tagName:"li",className:"ry-page",template:RY.Templates.pageItem,initialize:function(){_.bindAll(this,"hide","show","render")},hide:function(){this.$el.hide().removeClass("shown")},show:function(){this.$el.show().addClass("shown")},render:function(){var a=this.model.toJSON();a.href=this.model.href();this.$el.html(this.template(a));return this}});RY.PageGroupView=Backbone.View.extend({className:"group",template:RY.Templates.pageGroup,initialize:function(){_.bindAll(this,"hide","hideAll","show","showBorder","showPages","add","render");this.title=this.options.title;this.modelViews={}},hide:function(){this.$el.hide()},hideAll:function(){this.$el.removeClass("border").hide();_.invoke(_.values(this.modelViews),"hide")},show:function(){this.$el.show()},showBorder:function(){this.$el.addClass("border")},showPages:function(a){var c=this;var b=false;_.each(a,function(e){var d=c.modelViews[e.cid];if(d){b=true;d.show()}});if(b){this.show()}return b},add:function(b){var a=new RY.PageView({model:b});this.modelViews[b.cid]=a;this.$list.append(a.render().el)},render:function(){this.$el.html(this.template({title:this.title}));this.$list=this.$("ul");return this}});RY.PageNavigator=function(a,e,c){var g=null;function f(){return a.find("li.shown")}function b(i){pageItems=f();var h=pageItems.index(pageItems.filter(".highlight"));if(g){g.removeClass("highlight")}i+=h;if(i<0){i=pageItems.length-1}if(i>=pageItems.length){i=0}g=pageItems.eq(i);g.addClass("highlight")}function d(){if(!g.length){return}var k=e;var l=k.children();var j=k.height();var i=g.outerHeight(true);var h=g.position().top;if(h<0){if(f().index(g)===0){k.scrollTop(0);return}k.scrollTop(g.offset().top-l.offset().top)}else{if(h>j){k.scrollTop(g.offset().top-l.offset().top-j+i)}}}c.on("select",function(){if(g&&g.is(":visible")){RY.util.analytics.trackPageOpen();var h=g.find(".page-title a").attr("href");window.location=h}},this);c.on("previous",function(){b(-1);d()},this);c.on("next",function(){b(1);d()},this)};RY.PageCollectionView=Backbone.View.extend({template:RY.Templates.pageCollection,events:{"click .page-title a":RY.util.analytics.trackPageOpen},initialize:function(){_.bindAll(this,"checkEmpty","filter","_groupForPage","addOne","showEmptyMessage","clearEmptyMessage","addAll","render");this.modelViews={};this.collection.on("reset",this.addAll,this);this.collection.on("add",this.addOne,this);this.collection.on("filter",this.filter,this)},checkEmpty:function(a,e){var f=this.collection.isEmpty();var b=a.length===0;if(f||b){var c;if(f){c="Sorry mate, looks like you haven\'t visited any pages yet."}else{var d=AJS.contextPath()+"/dosearchsite.action?queryString="+encodeURIComponent(e);c="We didn\'t find any matching pages in your history."+" "+AJS.format("\u003ca href=\"{0}\"\u003eClick here\u003c/a\u003e to search for this term instead.",d)}this.showEmptyMessage(c)}else{this.clearEmptyMessage()}},filter:function(b,d){d=d||"";this.checkEmpty(b,d);var a=[this.$today,this.$yesterday,this.$older];_.invoke(a,"hideAll");var c=[];_.each(a,function(f){var e=f.showPages(b);if(e){c.push(f)}});if(c.length>1){c.pop();_.invoke(c,"showBorder")}},_groupForPage:function(a){var b=a.daysSinceLastSeen();if(b===0){return this.$today}else{if(b===1){return this.$yesterday}else{return this.$older}}},addOne:function(a){var b=this._groupForPage(a);b.add(a)},showEmptyMessage:function(a){this.$(".empty").html(AJS.$("<p>").html(a))},clearEmptyMessage:function(){this.$(".empty").html("")},addAll:function(){this.collection.each(this.addOne)},render:function(){this.$el.html(this.template());this.$today=new RY.PageGroupView({title:"Today"});this.$yesterday=new RY.PageGroupView({title:"Yesterday"});this.$older=new RY.PageGroupView({title:"Older"});var a=this.$(".groups");a.append(this.$today.render().el);a.append(this.$yesterday.render().el);a.append(this.$older.render().el);_.invoke([this.$today,this.$yesterday,this.$older],"hideAll");return this}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/quicknav/util.js' */
var RYQ=RYQ||{};(function(){RYQ.util={analytics:{trackQuickNavOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-open"})},trackQuickNavPageOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-page"})},trackQuickNavRecentlyDialogOpen:function(){AJS.trigger("analytics",{name:"recently-viewed-quicknav-click-more-recent"})}}}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:app-resources', location = 'js/quicknav/quicknav.js' */
var RYQ=RYQ||{};RYQ.QuickNavEntry=Backbone.Model.extend({classNameByType:{blogpost:"content-type-blogpost",page:"content-type-page"},parse:function(a){return{className:this.classNameByType[a.type],name:a.title,href:AJS.contextPath()+a.url,id:a.id,spaceName:a.space,lastSeen:a.lastSeen}}},{escape:function(b){var a=_.map(b,_.clone);_.each(a,function(c){c.name=_.escape(c.name);c.spaceName=_.escape(c.spaceName)});return a}});RYQ.QuickNavEntryCollection=Backbone.Collection.extend({model:RYQ.QuickNavEntry,url:AJS.contextPath()+"/rest/recentlyviewed/1.0/recent?limit=8",search:function(b){var a;if(AJS.$.trim(b).length===0){a=this.models}else{var c=b.match(/[^\s-]+/g);a=this.filter(function(e){var f=e.get("name");var d=f.toLowerCase();return _.all(c,function(g){return d.indexOf(g.toLowerCase())!==-1})})}this.trigger("filter",a);return a},comparator:function(a){return -(a.get("lastSeen"))}});(function(a){RYQ.QuickNav=Backbone.View.extend({initialize:function(){this.moreLink={className:"recently-viewed",href:"#",name:"More recently viewed pages..."};this.$input=a("#quick-search-query");this.makeDropdown();this.addShowHideHandlers();this.getHistory=_.once(this._getHistory);_.bindAll(this,"makeDropdown","addSearchResultBoostingHandler","_getHistory","render","addShowHideHandlers","_getItemsToShow","showQuickResults","onQuickSearch")},makeDropdown:function(){var c=function(d){a("a",d).each(function(){var g=a(this);var e=g.find("span");var f=AJS.dropDown.getAdditionalPropertyValue(e,"spaceName");if(f&&!g.is(".content-type-spacedesc")){g.after(g.clone().attr("class","space-name").html(f));g.parent().addClass("with-space-name")}})};var b=this;this.$dropdown=AJS.inputDrivenDropdown({dropdownPlacement:function(d){b.$input.closest("form").find(".quick-nav-drop-down").append(d)},dropdownPostprocess:function(d){c(d)},ajsDropDownOptions:{className:"recently-viewed-dropdown"}})},addSearchResultBoostingHandler:function(){var b=this;a(window).on("quicksearch.ajax-success",function(g,f){var d=f.url.match("/json/contentnamesearch.action");var c=f.url.match(/rest\/quicknav\/\d\/search/);if(d||c){b.onQuickSearch(g,f)}})},_getHistory:function(){return this.collection.fetch().done(this.addSearchResultBoostingHandler)},render:function(){var b=this.getHistory();b.done(_.bind(function(){if(AJS.dropDown.current==null&&this.collection.length!==0&&this.$input.val().length===0){this.showQuickResults()}},this));var c=this.$input;c.trigger("quick-search-loading-start");b.always(function(){c.trigger("quick-search-loading-stop")})},addShowHideHandlers:function(){var b=this;this.$input.on("focus",function(){b.render()}).on("click",function(c){c.stopPropagation();b.render()}).on("keyup",function(f){var c=f.which===27;var g=f.which===13;var d=a(this).val().length!==0;if(d||c){if(b.$dropdown.dd&&b.$dropdown.dd.$.is(":visible")){b.$dropdown.hide()}}else{if(!g){b.render()}}})},_getItemsToShow:function(){var c=this.collection.toJSON();var b=c.length>0&&c[0].id==AJS.Meta.get("page-id");if(b){c.shift()}return c},showQuickResults:function(){var b=RYQ.QuickNavEntry.escape(this._getItemsToShow());this.$dropdown.show([b,[this.moreLink]],"","");a(".recently-viewed-dropdown").on("click",".recently-viewed",function(c){c.preventDefault();a("#view-user-history-link").click();RYQ.util.analytics.trackQuickNavRecentlyDialogOpen()});a(".recently-viewed-dropdown").on("click",".with-space-name",function(c){RYQ.util.analytics.trackQuickNavPageOpen()});RYQ.util.analytics.trackQuickNavOpen()},onQuickSearch:function(l,f){var o=f.json.query;var c=_.map(this.collection.search(o),function(e){return e.attributes});c=RYQ.QuickNavEntry.escape(c);if(c.length==0){return}var m=f.json.contentNameMatches;var p=-1;for(var g=0;g<m.length;g++){var n=m[g][0].className;if(n=="content-type-blogpost"||n=="content-type-page"){p=g;break}}if(p!=-1){var h=m[p];var b=Math.min(h.length>4?2:6-h.length,c.length);h.unshift.apply(h,_(c).first(b));m[p]=_.uniq(h,function(e){return +e.id});if(h.length>6){var k=6-b;for(var d=k;d>0;d--){h.pop()}}}else{m.unshift(_(c).first(6))}}})}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/main.js' */
var RY=RY||{};AJS.toInit(function(a){a("#view-user-history-link").unbind("click");a("#view-user-history-link").click(function(i){i.preventDefault();var d=new AJS.Dialog({width:600,height:500,id:"recently-viewed-dialog",closeOnOutsideClick:true});var c="recently-viewed-spinner-"+Math.random();var h=a(RY.Templates.body({spinnerId:c}));d.addHeader("Recently viewed pages");d.addPanel("SinglePanel",h);d.addLink("Close",function(e){e.hide()});var f=a("<div>",{"class":"dialog-tip"}).text("Hint: type \"g\" and then \"r\" anywhere to quickly open this menu");d.popup.element.find(".dialog-button-panel").append(f);var j=new RY.PageCollection();var b=new RY.PageCollectionView({collection:j});h.find(".pages").html(b.render().el);var g=Raphael.spinner(c,16,"#707070");j.fetch({success:function(){g();var k=_.extend({},Backbone.Events);var l=new RY.PageNavigator(b.$el,h.parent(),k);var e=new RY.FilterView({collection:j,el:h.find(".filter"),navigationEvents:k}).render();e.search()}});d.gotoPanel(0);d.show();RY.util.analytics.trackDialogOpen()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.recently-viewed-plugin:main-resources', location = 'js/quicknav/main.js' */
var RYQ=RYQ||{};AJS.toInit(function(){var b=new RYQ.QuickNavEntryCollection();var a=new RYQ.QuickNav({collection:b})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.javahollic.confluence.confluencesu:launch-su-js', location = '/js/launchsu.js' */
console.log("confsu launchsu.js loaded");function launchSuDialog(){AJS.$.get(contextPath+"/rest/confsu/latest/api/remoteDialog/showCondition",function(a){if(a=="ok"){popupSuDialog()}else{console.log("SU: no, due to: "+a)}})}function popupSuDialog(){var d=AJS.Meta.get("atl-token");console.log("atl_token: "+d);AJS.$("#su-popup-dialog").remove();AJS.$("#su-userpicker").remove();var b=new AJS.Dialog({width:400,height:200,id:"su-popup-dialog",closeOnOutsideClick:false});b.addHeader("SU - Be the user you seek!");var c="<form class='aui'>";c=c+"<input type='hidden' id='su-userpicker' style='width:250px' class='input-xlarge' />";c=c+"</form>";b.addPanel("User Picker",c,"panel-body");b.addButton("Submit",function(e){},"su-popup-button");b.addButton("Close",function(e){e.hide();AJS.$("#su-popup-dialog").remove()},"su-popup-cancel-button");b.show();var a=contextPath+"/rest/confsu/latest/api/remoteDialog/search";AJS.$("#su-userpicker").auiSelect2({placeholder:"Select a user",minimumInputLength:2,ajax:{url:a,placeholder:"Search for a user",dataType:"json",minimumInputLength:1,data:function(e,f){return{query:e,page_limit:10,}},results:function(f,e){return{results:f.users,text:function(g){return g},id:function(g){return g}}}},formatResult:function(f,e){return f},formatSelection:function(e){return e},id:function(e){return e}});AJS.tabs.setup();AJS.$(".su-popup-button").click(function(f){var e=AJS.$("#su-userpicker").val();var g=AJS.Meta.get("atl-token");window.location.href=contextPath+"/plugins/confsu/su.action?userId="+e+"&atl_token="+g;return false})};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path', location = 'js/data/context-path.js' */
(function(){var a=null;(window.AJS||(window.AJS={}));AJS.contextPath=function(){if(a===null){a=WRM.data.claim("com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path")}return a};AJS.contextPath._reset=function(){a=null}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.mobile:mobileinterface-redirect', location = 'mobileinterface/js/mobile-redirect-min.js' */
(function(a){AJS.toInit(function(){if(a.browser.mobile){a.ajax({type:"GET",url:contextPath+"/rest/mobileinterface/1.0/settings/global/device-redirect-link",data:{userAgent:navigator.userAgent},cache:false,success:function(c){if(c.value){var d=location.pathname+location.search;if(location.pathname.indexOf("/dashboard.action")>-1){d=""}a("#com-atlassian-confluence").prepend("<a id='mobile_redirect_link' class='mobile_version' href='"+contextPath+"/mobileredirect"+d.replace(contextPath,"")+"' onclick='showRedirectLoader();' >View mobile version</a>")}},error:function(c){}})}});function b(){AJS.$("#mobile_redirect_link").html("<img src='"+contextPath+"/download/resources/com.refinedwiki.confluence.plugins.mobile/images/ajax-loader.gif' /> ")}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.mobile:mobileinterface-redirect', location = 'mobileinterface/js/jquery/jquery.browser.mobile.min.js' */
/**
 * jQuery.browser.mobile (http://detectmobilebrowser.com/)
 *
 * Copyright (c) 2010 Chad Smith (http://twitter.com/chadsmith)
 * Dual licensed under the MIT and GPL licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-license.php
 *
 * jQuery.browser.mobile will be true if the browser is a mobile device
 *
 **/
(function(a){jQuery.browser.mobile=/android|avantgo|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))})(navigator.userAgent||navigator.vendor||window.opera);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.aui.staging:content-ready', location = 'js/content-ready.js' */

// This has been added to directly to confluence to make it into confluence 5.0; it should be remove
// once contentReady is in AUI.

(function($) {

    var EVENT = 'content.ready'; // event name used in underlying event implementation

    // Check it's not already defined, eg when it's added to AUI plugin
    if (AJS.contentReady) {
        return;
    }

    /**
     * Binds an event handler to be called when content is ready.
     *
     * Usage:
     *
     * AJS.contentReady(fn)
     * called whenever content is ready
     *
     * AJS.contentReady(selector, fn)
     * called whenever content has been added that matches the given selector.
     * If the selector matches no elements, the handler will not be called.
     *
     * fn is always called with the first argument as a jQuery element.
     * Optional arguments can be passed by the triggering code.
     */
    AJS.contentReady = function() {
        var handler, boundSelector;
        if (1 === arguments.length) {
            handler = arguments[0];
        }
        else if (2 === arguments.length) {
            boundSelector = arguments[0];
            handler = arguments[1];
        }
        $(AJS).on(EVENT, function(e) {
            var args = Array.prototype.slice.call(arguments, 1),
                $element = args[0];
            if (boundSelector) {
                var $matched;
                if ($element.is(boundSelector)) {
                    $matched = $element;
                }
                else {
                    $matched = $element.find(boundSelector);
                }
                if ($matched.length) {
                    args[0] = $matched;
                    handler.apply(this, args);
                }
            }
            else {
                handler.apply(this, args);
            }
        });
    };

    /**
     * Triggers all bound contentReady event handlers.
     *
     * Usage:
     *
     * AJS.triggerContentReady($el, args...)
     * Calls all contentReady event handlers with the given element.
     * The $el argument is jQuery element and is required.
     * args... are optional arguments passed through to event handlers.
     */
    AJS.triggerContentReady = function() {
        $(AJS).trigger(EVENT, arguments);
    };

    /**
     * contentReady is always triggered on document ready. It is triggered with the body as the context.
     * Developers can set AJS.contentReady.onReadyArgs as a single value or array; these are passed
     * to handlers that are executed on ready.
     */
    $(function() {
        var args = [$("body")];
        if (AJS.contentReady.onReadyArgs) {
            args = args.concat(AJS.contentReady.onReadyArgs);
        }
        AJS.triggerContentReady.apply(this, args);
    });

}(AJS.$));

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugin.notifications.notifications-module:notification-util', location = '/js/notifications-module-util.js' */
if(typeof AJS.namespace==="undefined"){AJS.namespace=function(d,c,e){var f=d.split(".");c=c||window;for(var b=0,g=f.length-1;b<g;b++){var a=c[f[b]];c=(a!=null)?a:c[f[b]]={}}return c[f[b]]=e||{}}}AJS.overrides={};AJS.Meta=jQuery.extend({},AJS.Meta,{set:function(a,b){AJS.overrides[a]=b},get:function(b){if(typeof AJS.overrides[b]!="undefined"){return AJS.overrides[b]}var a=jQuery("meta[name='ajs-"+b+"']");if(!a.length){return undefined}var c=a.attr("content");return AJS.asBooleanOrString(c)},getBoolean:function(a){return this.get(a)===true},getNumber:function(a){return +this.get(a)},getAllAsMap:function(){var a={};jQuery("meta[name^=ajs-]").each(function(){a[this.name.substring(4)]=this.content});return jQuery.extend(a,AJS.overrides)}});if(typeof Class==="undefined"){(function(){begetObject=function(d){var c=function(){};c.prototype=d;return new c()};var a=false,b=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(){var j;var g=this.prototype;if(arguments.length>1){var i=AJS.$.makeArray(arguments);j=i.pop();var h;AJS.$.each(i,function(l,k){if(h){h=h.extend(k)}else{h=k}});return h.extend(this.prototype).extend(j)}else{j=arguments[0]}a=true;var f=new this();a=false;for(var e in j){if(f[e]=typeof j[e]=="function"&&typeof g[e]=="function"&&b.test(j[e])){f[e]=(function(k,l){return function(){var n=this._super;this._super=g[k];var m=l.apply(this,arguments);this._super=n;return m}})(e,j[e])}else{if(typeof g[e]==="object"){var d=begetObject(j[e]);AJS.$.each(g[e],function(l,m){if(!d[l]){d[l]=m}else{if(typeof d[l]==="object"){var k=begetObject(d[l]);AJS.$.each(m,function(o,n){if(!k[o]){k[o]=n}});d[l]=k}}});f[e]=d}else{f[e]=j[e]}}}function c(){if(!a&&this.init){this.init.apply(this,arguments)}}c.fn=c.prototype=f;c.constructor=c;c.extend=arguments.callee;return c}})()};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugin.notifications.notifications-module:notification-util', location = '/js/FormDialog.js' */
(function(){AJS.namespace("Notifications.FormDialog");Notifications.FormDialog=Class.extend({init:function(b){var a=this;this.options=b;this.$trigger=AJS.$(this.options.trigger);this.url=this.$trigger.attr("href");this.options.id=this.options.id||"notifiations-form-dialog";AJS.$(".notifications-form-dialog").remove();this.dialog=new AJS.Dialog({width:this.options.width||810,height:this.options.height||600,id:this.options.id});AJS.$(this.dialog.popup.element).addClass("notifications-form-dialog");this.ajaxOptions=AJS.$.extend({url:this.url,success:function(c){a._renderContents(c);a.dialog.show()},error:function(c){alert("Unknown error occurred. Please reload the page and try again.")},complete:function(d,c){a._hideLoadingIndicator()}},this.options.ajaxOptions)},show:function(){this._showLoadingIndicator();AJS.$.ajax(this.ajaxOptions)},hide:function(){this.dialog.hide()},_getThrobber:function(){if(!this.$throbber){this.$throbber=AJS.$('<span class="icon throbber loading notif-hidden"></span>');this.dialog.popup.element.find(".dialog-button-panel").prepend(this.$throbber)}return this.$throbber},_showThrobber:function(){this._getThrobber().show()},_hideThrobber:function(){this._getThrobber().hide()},_handleSubmit:function(b){var a=this;a._showThrobber();b.addClass("submitting");AJS.$(".error",b).remove();var c=b.serializeArray();AJS.$.ajax({url:b.attr("action"),type:!!this.options.edit?"PUT":"POST",contentType:"application/json",data:JSON.stringify({config:c}),success:function(d){b.removeClass("submitting");window.location.reload()},error:function(f){if(f&&f.responseText){try{var d=JSON.parse(f.responseText);if(d&&d.errors){AJS.$.each(d.errors,function(h,i){AJS.$("input[name='"+h+"']",b).after("<div class='error'>"+i+"</div>")})}if(d&&d.errorMessages){var g="";AJS.$.each(d.errorMessages,function(h,i){g+=i+"<br/>"});if(g!==""){AJS.$("#errorContainer",b).append("<div class='field-group error'>"+g+"</div>")}}}catch(e){alert("Unknown error occurred. Please reload the page and try again.")}}b.removeClass("submitting")},complete:function(e,d){a._hideThrobber()}})},_renderContents:function(f){var e=AJS.$(f),a=this,c=AJS.$(":header:first",e);this.dialog.addHeader(c.text());c.remove();this.dialog.addPanel(this.options.id);var b=this.dialog.getPanel(0,0);b.html(e);e.find("form").submit(function(i){i.preventDefault();var h=AJS.$(this);a._handleSubmit.call(a,h)});var d=AJS.$("div.buttons-container",e);var g=d.find(".button:first");this.dialog.addButton(g.val(),function(){e.find("form").submit()},"aui-button "+g.attr("id"));this.dialog.addLink("Cancel",function(){a.hide()},"cancel-dialog");d.remove();if(this.options.decorateContents){this.options.decorateContents(e)}this.dialog.popup.element.addClass("jira-dialog-content-ready")},_showLoadingIndicator:function(){var a=this,b=440,c=0;clearInterval(this.loadingTimer);this._getLoadingIndicator().show();this.loadingTimer=window.setInterval(function(){if(c===b){c=0}c=c+40;a._getLoadingIndicator().css("backgroundPosition","0 -"+c+"px")},50)},_hideLoadingIndicator:function(){clearInterval(this.loadingTimer);this._getLoadingIndicator().hide()},_getLoadingIndicator:function(){if(!this.loadingIndicator){this.loadingIndicator=AJS.$('<div class="aui-loading"></div>');this.loadingIndicator.appendTo("body")}return this.loadingIndicator}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugin.notifications.notifications-module:notification-prefs-checker', location = 'js/user-notification-prompt.js' */
(function(){AJS.$(function(){var b=AJS.Meta.get("show-notifications-prompt");if(b){var c=AJS.format("New notification servers are available! Please visit your personal {0}notification settings{1} to ensure all your preferences are up to date.","<a href='"+AJS.contextPath()+AJS.Meta.get("show-notifications-url")+"' target='_blank'>","</a>");var a=AJS.$('<div class="notif-global-warning" id="notificationsBanner"/>').html(c);a.prependTo("body")}})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:analytics', location = 'analytics/analytics.js' */
var _gaq=_gaq||[];AJS.$(function(){_gaq.push(["navlinks._setAccount","UA-20272869-14"]);_gaq.push(["navlinks._setDomainName","none"]);_gaq.push(["navlinks._setAllowLinker",true]);_gaq.push(["navlinks._setDetectTitle",false]);_gaq.push(["navlinks._trackPageview",location.pathname]);AJS.$.ajax(AJS.contextPath()+"/rest/nav-links-analytics-data/1.0/",{success:function(a){_gaq.push(["navlinks._setCustomVar",1,"isUserAdmin",a.isUserAdmin?"true":"false",2])}})});(function(a){a.trackEvent=function(c,e,b,d){if(d===undefined){_gaq.push(["navlinks._trackEvent",c,e,b])}else{_gaq.push(["navlinks._trackEvent",c,e,b,d])}if(AJS.EventQueue){AJS.EventQueue.push({name:c+"."+e,properties:{label:b,value:d}})}};a.getCurrentApplication=function(){if(window.Confluence!==undefined){return"confluence"}else{if(window.BAMBOO!==undefined){return"bamboo"}else{if(window.JIRA!==undefined){return"jira"}else{return""}}}}}(window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:analytics', location = 'analytics/help-analytics.js' */
(function(c,b){function a(g,d,f){try{b.trackEvent("helpmenu",g,d,f)}catch(h){AJS.log("failed to track analytics event, category: helpmenu, action: "+g+", label: "+d+", value: "+f)}}c(function(){var d=c("#system-help-menu-content,#help-menu-link-content,#bamboo\\.global\\.header-help\\.menu");d.bind({"aui-dropdown2-show":function(f){a("show","")},"aui-dropdown2-hide":function(f){a("hide","")}}).find("a").unbind(".analytics").bind("click.analytics",function(){var e=this.attributes.href;a("linkFollowed",typeof e==="object"?e.value:e)}).addClass("interactive")})}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.list.length > 0) {
    output.append('<div class="aui-nav-heading sidebar-section-header">', soy.$$escapeHtml(opt_data.title), '</div><ul class="aui-nav nav-links">');
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      navlinks.templates.appswitcher.applicationsItem(linkData8, output);
    }
    output.append('</ul>');
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(opt_data.link), '" class="interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span></a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(opt_data.link), '" class="interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span>', (opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '', '</a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.error = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-error">', "Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">', soy.$$escapeHtml("Application Links"), '</div><div class="app-switcher-loading">', "Loading\x26hellip;", '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">', soy.$$escapeHtml("Shortcuts"), '</div><div class="app-switcher-loading">', "Loading\x26hellip;", '</div></div></nav></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">', soy.$$escapeHtml("Linked Applications"), '</span>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-title">');
  aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}, output);
  output.append('<div class="sidebar-project-name">', soy.$$escapeHtml(opt_data.name), '</div></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var dropdownList__soy74 = new soy.StringBuilder();
  navlinks.templates.appswitcher.dropdownList({list: opt_data.links}, dropdownList__soy74);
  dropdownList__soy74 = dropdownList__soy74.toString();
  aui.dropdown2.dropdown2({menu: {'id': opt_data.id, 'content': dropdownList__soy74, 'extraClasses': 'aui-style-default sidebar-customize-section'}, trigger: {'showIcon': false, 'content': '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', 'container': '#app-switcher'}}, output);
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class="sidebar-admin-links">');
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output.append('<li class="nav-link"><a href="', soy.$$escapeHtml(linkData82.href), '" title="', soy.$$escapeHtml(linkData82.title), '"><span class="nav-link-label">', soy.$$escapeHtml(linkData82.label), '</span></a></li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.switcher = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = new soy.StringBuilder();
      navlinks.templates.appswitcher.sidebarContents(null, sidebarContents__soy97);
      sidebarContents__soy97 = sidebarContents__soy97.toString();
      var triggerContent__soy99 = new soy.StringBuilder();
      navlinks.templates.appswitcher.trigger(null, triggerContent__soy99);
      triggerContent__soy99 = triggerContent__soy99.toString();
      navlinks.templates.appswitcher.sidebar({sidebar: {'id': 'app-switcher', 'content': sidebarContents__soy97}, trigger: {'showIcon': false, 'content': triggerContent__soy99}}, output);
      output.append('<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ', soy.$$escapeHtml(false), '<\/script>');
    } else {
      navlinks.templates.appswitcher_old.switcher(null, output);
    }
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.sidebar.id), '" class="sidebar-trigger app-switcher-trigger" aria-owns="', soy.$$escapeHtml(opt_data.sidebar.id), '" aria-haspopup="true">', opt_data.trigger.content, '</a><div id=', soy.$$escapeHtml(opt_data.sidebar.id), ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">', opt_data.sidebar.content, '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.trackEvent=function(h,f,g){try{a.trackEvent("appswitcher-new",h,f,g)}catch(i){AJS.log("failed to track analytics event, category: appswitcher, action: "+h+", label: "+f+", value: "+g)}};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
(function(d,h){h.AppSwitcher=function(r){var s=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var t=this;this.$dropdown=null;r=d.extend({dropdownContents:null},r);this.getLinks=function(){return d.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=d(r.dropdownContents)}return this.$dropdown};this.updateDropdown=function(u){d(function(){t.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:u,showAdminLink:h.isUserAdmin,adminLink:s}));t.bindAnalyticsHandlers(t.getDropdown(),u);t.processSuggestionApps(u)})};this.processSuggestionApps=function(u){d.ajax({type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",url:AJS.contextPath()+"/rest/menu/latest/isAppSuggestionAvailable",async:false}).done(function(v){if(v){t.handleSuggestionApps(u)}})};this.handleSuggestionApps=function(w){var x=_.map(w,function(y){return y.applicationType.toLowerCase()});$suggestionApps=d("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");$suggestionApps.html(navlinks.templates.appswitcher_old.suggestionApps);var v=$suggestionApps.find(".suggestion-apps");var u=false;_.each(g,function(y){if(!_.contains(x,y.appName)){u=true;v.append(navlinks.templates.appswitcher_old.suggestionApp({appName:y.appName,appDesc:y.appDesc}))}});if(!u){return}d("#app-switcher").append($suggestionApps);d(".app-discovery-suggestion-app").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.user.select."+d(this).find("a").attr("id")});window.open(d(this).find("a").attr("title"),"_blank")});d(".app-discovery-suggestion-app").hover(function(){d(this).find("a").removeClass("active");d(this).find("a").removeClass("aui-dropdown2-active")});d(".app-discovery-cancel-button").click(function(){AJS.trigger("analyticsEvent",{name:"appswitcher.discovery.nothanks.button.click"});p(n,"true");$suggestionApps.remove()})};this.showError=function(){d(function(){t.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",d.proxy(t.retryLoading,t))})};this.retryLoading=function(u){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();u&&u.stopPropagation()};this.trackEvent=function(w,u,v){try{h.trackEvent("appswitcher-new",w,u,v)}catch(x){AJS.log("failed to track analytics event, category: appswitcher, action: "+w+", label: "+u+", value: "+v)}};this.bindAnalyticsHandlers=function(x,w){function v(){var A=0;for(var y in w){var z=w[y];if(z.custom){A+=1}}return A}var u=v();x.on({"aui-dropdown2-show":function(y){t.trackEvent("show",h.getCurrentApplication(),w.length)},"aui-dropdown2-hide":function(y){t.trackEvent("hide",h.getCurrentApplication(),w.length);if(k){if(b&&new Date().getTime()-b>5000){p(l,"true")}k.hide()}}});x.off(".analytics").on("click.analytics","a",function(y){t.trackEvent("appSelected",d(this).attr("href"),w.length)})};this.getLinks()};if(h.onInit){h.onInit()}var f="key-session-start-time";var q=2*60*1000;var b;var n="key-no-thanks";var k;var j=false;var g=[{appName:"jira",appDesc:"Issue & Project Tracking Software"},{appName:"confluence",appDesc:"Collaboration and content sharing"},{appName:"bamboo",appDesc:"Continuous integration"}];var p=function(r,s){d.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:r,value:s})})};var a=function(s){var r=new Date().getTime();if(s&&s.value){var t=r-s.value;if(t>=q){c(r)}}else{p(f,r)}};var c=function(r){d.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,async:true,dataType:"json"}).done(function(s){var t=_.map(s,function(u){return u.applicationType.toLowerCase()});_.each(g,function(u){if(j){return}if(!_.contains(t,u.appName)){d(".app-switcher-trigger").trigger("click");setTimeout(function(){k=AJS.CustomInlineDialog(d("#app-switcher ul").find("li").first(),"app-switcher-tooltip",function(w,v,x){w.css({padding:"20px"}).html(navlinks.templates.appswitcher_old.appswitcherTooltips);x();return false},{width:260,gravity:"w",arrowOffsetY:-60,offsetY:61});k.show();b=new Date().getTime();d("#close-tooltip-button").click(function(){p(l,"true");k.hide()})},20);j=true;return}})})};var o=function(r){if(r){d.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata?key="+f,type:"GET",contentType:"application/json; charset=UTF-8",dataType:"json"}).done(a)}};var e=function(){return window.location.pathname.search(/(createpage|editpage|createblogpost|editblogpost)\.action/)!==-1};var m=function(r){if(r&&r.value!=="true"){d.ajax({type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",url:AJS.contextPath()+"/rest/menu/latest/isAppSuggestionAvailable"}).done(o)}};var i=function(r){d.ajax({type:"GET",dataType:"json",contentType:"application/json; charset=UTF-8",url:AJS.contextPath()+"/rest/menu/latest/userdata?key="+r}).done(m)};var l="key-trigger-open-automatically";AJS.toInit(function(r){if(AJS.Meta.get("remote-user")&&!e()){i(l)}})(AJS.$,_)}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}, output);
  if (opt_data.custom) {
    navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}, output);
  }
  if (opt_data.showAdminLink) {
    navlinks.templates.appswitcher_old.adminSection(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.list.length > 0) {
    var param19 = new soy.StringBuilder('<ul', (opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '', '>');
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentData(linkData27, {showDescription: opt_data.showDescription}), param19);
    }
    param19.append('</ul>');
    aui.dropdown2.section({content: param19.toString()}, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<li class="nav-link', (opt_data.self) ? ' nav-link-local' : '', '"><a href="', soy.$$escapeHtml(opt_data.link), '" class="aui-dropdown2-radio interactive', (opt_data.self) ? ' checked' : '', '" title="', soy.$$escapeHtml(opt_data.link), '"><span class="nav-link-label">', soy.$$escapeHtml(opt_data.label), '</span>', (opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '', '</a></li>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + "Configure\x26hellip;" + '</span></a></li></ul>'}, output);
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.error = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-error">', "Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-switcher-loading">', "Loading\x26hellip;", '</div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">', soy.$$escapeHtml("Linked Applications"), '</span>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (true) {
    var loadingContent__soy81 = new soy.StringBuilder();
    navlinks.templates.appswitcher_old.loading(null, loadingContent__soy81);
    loadingContent__soy81 = loadingContent__soy81.toString();
    var triggerContent__soy83 = new soy.StringBuilder();
    navlinks.templates.appswitcher_old.trigger(null, triggerContent__soy83);
    triggerContent__soy83 = triggerContent__soy83.toString();
    aui.dropdown2.dropdown2({menu: {'id': 'app-switcher', 'content': loadingContent__soy81, 'extraClasses': 'aui-style-default'}, trigger: {'showIcon': false, 'content': triggerContent__soy83, 'extraClasses': 'app-switcher-trigger'}}, output);
    output.append('<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.isUserAdmin = ', soy.$$escapeHtml(false), '<\/script>');
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="app-discovery-suggestion-app"><li><a id="', soy.$$escapeHtml(opt_data.appName), '" href="#" class="app-discovery-link aui-icon-container app-discovery-', soy.$$escapeHtml(opt_data.appName), '-product-icon" title="https://www.atlassian.com/software/', soy.$$escapeHtml(opt_data.appName), '"/><div class="app-discovery-small">', soy.$$escapeHtml(opt_data.appDesc), '</div></li></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.dialogContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h2>', soy.$$escapeHtml("Find your other apps here"), '</h2><p>', soy.$$escapeHtml("The application navigator shows all your connected apps."), '</p><p class="aui-buttons"><button id="dialog-button-showme" class="aui-button">', soy.$$escapeHtml("Show me"), '</button><a id="dialog-button-close" class="aui-button aui-button-link" name="close" accesskey="c" href="#">', soy.$$escapeHtml("Close"), '</a></p>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>', soy.$$escapeHtml("Try other Atlassian apps"), '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>', soy.$$escapeHtml("Don\x27t show this again"), '</button></div></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.appswitcher_old.appswitcherTooltips = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class=\'appswitcher-tooltips\'><span><h2 class=\'appswitcher-tooltips-question\'>', soy.$$escapeHtml("Looking for your other apps?"), '</h2><p class=\'appswitcher-tooltips-content\'>', soy.$$escapeHtml("Find them in the Application Navigator."), '</p>');
  aui.buttons.button({id: 'close-tooltip-button', extraClasses: 'close-button-alignment', text: "Close"}, output);
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/inline-dialog.js' */
(function(d){AJS.CustomInlineDialog=AJS.CustomInlineDialog||function(B,n,r,p){p=p||[];if(p.hasOwnProperty("getArrowAttributes")){getArrowAttributesDeprecationLogger()}if(p.hasOwnProperty("getArrowPath")){getArrowPathDeprecationLogger();if(p.hasOwnProperty("gravity")){getArrowPathWithGravityDeprecationLogger()}}if(p.hasOwnProperty("onTop")){onTopDeprecationLogger();if(p.onTop&&p.gravity===undefined){p.gravity="s"}}if(typeof n==="undefined"){n=String(Math.random()).replace(".","");if(d("#inline-dialog-"+n+", #arrow-"+n+", #inline-dialog-shim-"+n).length){throw"GENERATED_IDENTIFIER_NOT_UNIQUE"}}var z=d.extend(false,AJS.CustomInlineDialog.opts,p);if(z.gravity==="w"){z.offsetX=p.offsetX===undefined?10:p.offsetX;z.offsetY=p.offsetY===undefined?0:p.offsetY}var v=function(){return window.Raphael&&p&&(p.getArrowPath||p.getArrowAttributes)};var j;var q;var K;var u=false;var A=false;var I=false;var J;var x;var g=d('<div id="inline-dialog-'+n+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+n+'" class="aui-inline-dialog-arrow arrow"></div></div>');var m=d("#arrow-"+n,g);var G=g.find(".contents");if(!v()){g.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow")}if(!z.displayShadow){G.addClass("aui-inline-dialog-no-shadow")}if(z.autoWidth){G.addClass("aui-inline-dialog-auto-width")}else{G.css("width",z.width+"px")}G.mouseover(function(O){clearTimeout(q);g.unbind("mouseover")}).mouseout(function(){E()});var D=function(){if(!j){j={popup:g,hide:function(){E(0)},id:n,show:function(){y()},persistent:z.persistent?true:false,reset:function(){function S(U,T){U.css(T.popupCss);if(v()){if(T.gravity==="s"){T.arrowCss.top-=d.browser.msie?10:9}if(!U.arrowCanvas){U.arrowCanvas=Raphael("arrow-"+n,16,16)}var V=z.getArrowPath,W=d.isFunction(V)?V(T):V;U.arrowCanvas.path(W).attr(z.getArrowAttributes())}else{m.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");if(T.gravity==="s"&&!m.hasClass("aui-bottom-arrow")){m.addClass("aui-bottom-arrow")}else{if(T.gravity==="n"){}else{if(T.gravity==="w"){m.addClass("aui-left-arrow")}else{if(T.gravity==="e"){m.addClass("aui-right-arrow")}}}}}m.css(T.arrowCss)}var P=AJS.$(window).height();var Q=Math.round(P*0.75);g.children(".aui-inline-dialog-contents").css("max-height",Q);var O=z.calculatePositions(g,x,J,z);if(O.hasOwnProperty("displayAbove")){displayAboveDeprecationLogger();O.gravity=O.displayAbove?"s":"n"}S(g,O);g.fadeIn(z.fadeTime,function(){});if(d.browser.msie&&~~(d.browser.version)<10){var R=d("#inline-dialog-shim-"+n);if(!R.length){d(g).prepend(d('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+n+'" frameBorder="0" src="javascript:false;"></iframe>'))}R.css({width:G.outerWidth(),height:G.outerHeight()})}}}}return j};var y=function(){if(g.is(":visible")){return}K=setTimeout(function(){if(!I||!A){return}z.addActiveClass&&d(B).addClass("active");u=true;if(!z.persistent){H()}AJS.CustomInlineDialog.current=D();d(document).trigger("showLayer",["inlineDialog",D()]);D().reset()},z.showDelay)};var E=function(O){if(typeof O=="undefined"&&z.persistent){return}A=false;if(u&&z.preHideCallback.call(g[0].popup)){O=(O==null)?z.hideDelay:O;clearTimeout(q);clearTimeout(K);if(O!=null){q=setTimeout(function(){l();z.addActiveClass&&d(B).removeClass("active");g.fadeOut(z.fadeTime,function(){z.hideCallback.call(g[0].popup)});if(g.arrowCanvas){g.arrowCanvas.remove();g.arrowCanvas=null}u=false;A=false;d(document).trigger("hideLayer",["inlineDialog",D()]);AJS.CustomInlineDialog.current=null;if(!z.cacheContent){I=false;w=false}},O)}}};var F=function(R,P){var O=d(P);z.upfrontCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});g.each(function(){if(typeof this.popup!="undefined"){this.popup.hide()}});if(z.closeOthers){d(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()})}x={target:O};if(!R){J={x:O.offset().left,y:O.offset().top}}else{J={x:R.pageX,y:R.pageY}}if(!u){clearTimeout(K)}A=true;var Q=function(){w=false;I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()};if(!w){w=true;if(d.isFunction(r)){r(G,P,Q)}else{d.get(r,function(T,S,U){G.html(z.responseHandler(T,S,U));I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()})}}clearTimeout(q);if(!u){y()}return false};g[0].popup=D();var w=false;var t=false;var s=function(){if(!t){d(z.container).append(g);t=true}};var o=d(B);if(z.onHover){if(z.useLiveEvents){if(o.selector){d(document).on("mousemove",o.selector,function(O){s();F(O,this)}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.mousemove(function(O){s();F(O,this)}).mouseout(function(){E()})}}else{if(!z.noBind){if(z.useLiveEvents){if(o.selector){d(document).on("click",o.selector,function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.click(function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).mouseout(function(){E()})}}}var M=function(){return u&&z.closeOnTriggerClick};var H=function(){k();f()};var l=function(){C();N()};var i=false;var h=n+".inline-dialog-check";var k=function(){if(!i){d("body").bind("click."+h,function(P){var O=d(P.target);if(O.closest("#inline-dialog-"+n+" .contents").length===0){E(0)}});i=true}};var C=function(){if(i){d("body").unbind("click."+h)}i=false};var L=function(O){if(O.keyCode===27){E(0)}};var f=function(){d(document).on("keydown",L)};var N=function(){d(document).off("keydown",L)};g.show=function(P,O){if(P){P.stopPropagation()}s();if(z.noBind&&!(B&&B.length)){F(P,O===undefined?P.target:O)}else{F(P,B)}};g.hide=function(){E(0)};g.refresh=function(){if(u){D().reset()}};g.getOptions=function(){return z};return g};function c(g){var f=d(g);var h=d.extend({left:0,top:0},f.offset());return{left:h.left,top:h.top,width:f.outerWidth(),height:f.outerHeight()}}function b(h,j,t,f){var m=AJS.$.isFunction(f.offsetX)?f.offsetX(h,j,t,f):f.offsetX;var l=AJS.$.isFunction(f.offsetY)?f.offsetY(h,j,t,f):f.offsetY;var q=AJS.$.isFunction(f.arrowOffsetX)?f.arrowOffsetX(h,j,t,f):f.arrowOffsetX;var p=AJS.$.isFunction(f.arrowOffsetY)?f.arrowOffsetY(h,j,t,f):f.arrowOffsetY;var s=f.container.toLowerCase()!=="body";var g=AJS.$(f.container);var o=s?AJS.$(f.container).parent():AJS.$(window);var r=s?g.offset():{left:0,top:0};var k=s?o.offset():{left:0,top:0};var i=j.target;var u=i.offset();var n=i[0].getBBox&&i[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:k.top,left:k.left,scrollTop:o.scrollTop(),scrollLeft:o.scrollLeft(),width:o.width(),height:o.height()},scrollContainer:{width:g.width(),height:g.height()},trigger:{top:u.top-r.top,left:u.left-r.left,width:n?n.width:i.outerWidth(),height:n?n.height:i.outerHeight()},dialog:{width:h.width(),height:h.height(),offset:{top:l,left:m}},arrow:{height:h.find(".arrow").outerHeight(),offset:{top:p,left:q}}}}function e(f,p,G,r){var n=b(f,p,G,r);var j=n.screenPadding;var k=n.window;var t=n.trigger;var D=n.dialog;var i=n.arrow;var z=n.scrollContainer;var E={top:t.top-k.scrollTop,left:t.left-k.scrollLeft};var A=Math.floor(t.height/2);var v=Math.floor(D.height/2);var u=Math.floor(i.height/2);var C=E.left-D.offset.left-j;var H=z.width-E.left-t.width-D.offset.left-j;var B=C>=D.width;var h=H>=D.width;var l=!h&&B?"e":"w";var o=E.top+A-u;var q=k.height-o-i.height;j=Math.min(j,o-n.arrowMargin);j=Math.min(j,q-n.arrowMargin);var g=E.top+A;var x=Math.max(g-j,0);var F=Math.max(k.height-g-j,0);var y=v-D.offset.top>x;var m=v+D.offset.top>F;var w;var s;if(y){w={top:k.scrollTop+j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{if(m){w={top:k.scrollTop+k.height-D.height-j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{w={top:t.top+A-v+D.offset.top,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:v-u+i.offset.top}}}return{gravity:l,popupCss:w,arrowCss:s}}function a(g,o,z,s){var x=AJS.$.isFunction(s.offsetX)?s.offsetX(g,o,z,s):s.offsetX;var v=AJS.$.isFunction(s.offsetY)?s.offsetY(g,o,z,s):s.offsetY;var m=AJS.$.isFunction(s.arrowOffsetX)?s.arrowOffsetX(g,o,z,s):s.arrowOffsetX;var l=AJS.$.isFunction(s.arrowOffsetY)?s.arrowOffsetY(g,o,z,s):s.arrowOffsetY;var f=c(window);var p=c(o.target);var y=c(g);var j=c(g.find(".aui-inline-dialog-arrow"));var i=p.left+p.width/2;var u=(window.pageYOffset||document.documentElement.scrollTop)+f.height;var k=10;y.top=p.top+p.height+~~v;y.left=p.left+~~x;var r=f.width-(y.left+y.width+k);j.left=i-y.left+~~m;j.top=-(j.height/2);var n=p.top>y.height;var h=(y.top+y.height)<u;var q=(!h&&n)||(n&&s.gravity==="s");if(q){y.top=p.top-y.height-(j.height/2);j.top=y.height}if(s.isRelativeToMouse){if(r<0){y.right=k;y.left="auto";j.left=z.x-(f.width-y.width)}else{y.left=z.x-20;j.left=z.x-y.left}}else{if(r<0){y.right=k;y.left="auto";var w=f.width-y.right;var t=w-y.width;j.right="auto";j.left=i-t-j.width/2}else{if(y.width<=p.width/2){j.left=y.width/2;y.left=i-y.width/2}}}return{gravity:q?"s":"n",displayAbove:q,popupCss:{left:y.left,top:y.top,right:y.right},arrowCss:{left:j.left,top:j.top,right:j.right}}}AJS.CustomInlineDialog.opts={onTop:false,responseHandler:function(g,f,h){return g},closeOthers:true,isRelativeToMouse:false,addActiveClass:true,onHover:false,useLiveEvents:false,noBind:false,fadeTime:100,persistent:false,hideDelay:10000,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:true,displayShadow:true,autoWidth:false,gravity:"n",closeOnTriggerClick:false,preHideCallback:function(){return true},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(f,i,j,h){h=h||{};var g=h.gravity==="w"?e:a;return g(f,i,j,h)},getArrowPath:function(f){if(f.gravity==="s"){return"M0,8L8,16,16,8"}else{return"M0,8L8,0,16,8"}},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/js/space-page-picker.js' */
(function(i,c){var t={conf_all:"All spaces",conf_favorites:"Favourite spaces",conf_global:"Site spaces",conf_personal:"Personal spaces",conf_current:"Current space"};var b={data:null,suggestCategories:null};var v="SPACE-PAGE-TRIGGER-VALUE";var f={placeholder:"Select a space or page",multiple:true,formatInputTooShort:function(){return "Start typing to search"},formatResult:function(G,I,L){if(G.children){I.addClass("space-page-picker-result-category");return i.fn.select2.defaults.formatResult.apply(this,arguments)}else{if(G.id){I.attr("title",G.text);I.addClass("space-page-picker-result-label-with-icon");var F=i("<span/>").addClass(G.className+" item-text").html(i.fn.select2.defaults.formatResult.apply(this,arguments));var K=(G.subText)?i("<span/>").addClass("space-name").html(G.subText):i("");var H=i("<span/>").attr(s(G.id),G.id).append(F).append(K);var J=i("<span/>").append(H);return J}else{I.addClass(G.className);return i.fn.select2.defaults.formatResult.apply(this,arguments)}}},formatSelection:function(G,H){H.addClass("space-page-picker-selected-item");H.attr("title",G.text);var F=i("<span/>").attr(s(G.id),G.id).addClass(G.className+" item-text").html(i.fn.select2.defaults.formatSelection.apply(this,arguments));H.append(F)},escapeMarkup:function(F){return F},formatResultCssClass:function(F){return(F.children||F.id)?"":"select2-result-space-page-separator"},containerCssClass:"space-page-picker-container",dropdownCssClass:"space-page-picker-drop"};var B=function(F,H){var G=F.data("select2").opts.manualInit;if(G===true){return}d(F.val(),F,H)};function r(H,G,F){var I=_.map(H,function(J){return G[J]});return(F)?I:((I.length>0)?I[0]:null)}var l=function(F){var G;if(F.suggestCategories){var H={text:"Suggested categories",children:_.map(F.suggestCategories,function(I){return o(I)})}}return function(J){if(G){J.callback(G);return}var I=[];G={results:[]};if(x(F)){var L=i.getJSON(AJS.contextPath()+"/rest/recentlyviewed/1.0/recent/spaces").done(function(M){var N=(H)?[H]:[];(M.length>0)&&N.push({text:"Suggested spaces",children:_.map(M,function(O){return m(O.key,_.escape(O.name),null,true)})});(N.length>0)&&(G.results=G.results.concat(N))}).fail(function(){AJS.debug("Couldn't fetch recent spaces");var M=(H)?[H]:[];(M.length>0)&&(G.results=G.results.concat(M))});I.push(L)}if(j(F)){var K=i.getJSON(AJS.contextPath()+"/rest/recentlyviewed/1.0/recent/pages",{noTrashedContent:true}).done(function(M){if(M.length>0){G.results.push({text:"Suggested pages",children:_.map(M,function(N){return h(N.id,_.escape(N.title),_.escape(N.space),"content-type-page",true)})})}}).fail(function(){AJS.debug("Couldn't fetch recent pages")});I.push(K)}i.when.apply(i,_.map(I,function(N){var M=i.Deferred();N.always(function(){M.resolve()});return M})).done(function(){if(G.results.length===0){G.results=[{text:"",children:[]}]}J.callback(G)})}};var w=function(F){var G="";if(!F||F.length===2&&F.indexOf("space")>=0&&F.indexOf("page")>=0){G="type=spacedesc&type=personalspacedesc&type=page"}else{if(F.length===1&&F[0]==="space"){G="type=spacedesc&type=personalspacedesc"}else{if(F.length===1&&F[0]==="page"){G="type=page"}else{return}}}return window.Select2.query.ajax({url:AJS.contextPath()+"/rest/quicknav/1/search?"+G,data:function(H,I){return{query:H,maxPerCategory:25}},quietMillis:250,results:function(K,O){var N=K.contentNameMatches;if(N.length<=1){return{results:[]}}else{var P=[];var I=function(Q){return E(Q.spaceKey,Q.spaceName,Q.id,Q.name,Q.className)};for(var L=0;L<N.length-1;L++){var M=[];for(var J=0;J<N[L].length;J++){var H=I(N[L][J]);if(H){M.push(H)}}if(M.length>0){P=P.concat(M);P.push({id:"",text:"",subText:"",className:"",disabled:true})}}return{results:[{text:"Search results",children:P}]}}}})};var p=function(G){var F=w(G.contentType);var H=l(G);return function(I){if(I.term.length<2){H(I)}else{F(I)}}};function s(F){return(F.indexOf("page:")===0)?"data-item-id":"data-item-key"}function m(F,I,G,H){G=(G)?G:((F.indexOf("~")===0)?"content-type-personalspacedesc":"content-type-spacedesc");return e("space",F,I,"",G,H)}function o(F){var G=t[F];return e("space-cat",F,G,"","content-type-space-category",G)}function h(J,I,F,G,H){return e("page",J,I,F,G,H)}function e(L,I,K,H,G,J){var F=y(L,I);K=(!K)?I:K;G=(J)?G:(G+" content-not-found");return{id:F,text:K,subText:H,className:G,disabled:(J?false:true)}}function C(F){return"space-cat:"+F}function a(F){return"space:"+F}function D(F){return"page:"+F}function E(J,G,K,H,I){var F;if(I==="content-type-spacedesc"||I==="content-type-personalspacedesc"){F=m(J,G,I,true)}else{if(I==="content-type-page"){F=h(K,H,G,I,true)}}return F}function y(){var F=Array.prototype.slice.apply(arguments);return F.join(":")}function x(F){return((!F.contentType||F.contentType.length===0||F.contentType.indexOf("space")>=0)&&F.showRecentlyViewedSpaces!==false)}function j(F){return((!F.contentType||F.contentType.length===0||F.contentType.indexOf("page")>=0)&&F.showRecentlyViewedPages!==false)}function n(G,F){var H=q("SpaceCat",G,F.inputSpaceCatId,(F.inputSpaceCatName)?F.inputSpaceCatName:F.inputSpaceCatId);return u(G,H.id,H.name)}function g(G,F){var H=q("Space",G,F.inputSpaceId,(F.inputSpaceName)?F.inputSpaceName:F.inputSpaceId);return u(G,H.id,H.name)}function z(G,F){var H=q("Page",G,F.inputPageId,(F.inputPageName)?F.inputPageName:F.inputPageId);return u(G,H.id,H.name)}function q(J,H,K,G){var F;if(!K){F=H.attr("id");if(!F){return null}K=F+J}if(!G){var I=H.attr("name")||F;G=I+J}return{id:K,name:G}}function u(G,I,F){var H=i("#"+I);if(H.length===0){H=i(Confluence.UI.Components.templates.hiddenField({id:I,name:F}));G.after(H)}return H}function k(G,I,H){if(!G){return}var F=_.filter(I,function(J){return J.indexOf(H)===0});F=_.map(F,function(J){return J.substring(H.length,J.length)});G.val(F.join(","))}function A(M,H,I,F){I=(I)?(_.isArray(I)?I:I.split(",")):[];F=(F)?F.split(","):[];var L=_.union(I,F);var G=_.map(L,function(O){return H+O});var J=M.val();var N=J?J.split(","):[];var K=_.union(N,G);if(K.length>0){M.val(K.join(","))}}c.build=function(G){var F=_.extend({},b,f,G);if(!G.data){F=_.extend({},{initSelection:B,query:p(F)},F)}var H=i(F.orgElement);if(!H||H.length!==1){return F}if(!H.val()&&!F.manualInit){H.val(v)}H.addClass("select2-input");return F};c.setValue=function(G,F){d(G,F,function(H){F.auiSelect2("data",H)})};function d(P,G,S){var U=G.data("select2").opts;var Q=U.placeholder||G.data("placeholder");var K=n(G,U);var M=g(G,U);var I=z(G,U);G.on("change",function(V){k(K,V.val,"space-cat:");k(M,V.val,"space:");k(I,V.val,"page:")});G.val("");var T=(G["0"].tagName==="SELECT")?(G.context.multiple):(U.multiple);var N=[];var R=[];var L=[];var F={};var H=(P)?P.split(","):[];H=_.filter(H,function(V){var W=V.split(":");if(W.length===2){return true}else{if(W.length<0||W.length>=3||(W.length===1&&(W[0]!==v&&W[0]!==Q))){AJS.debug("Error value: "+W)}}});P=H.join(",");G.val(P);A(G,"space-cat:",U.spaceCatKeys,(K)?K.val():"");A(G,"space:",U.spaceKeys,(M)?M.val():"");A(G,"page:",U.pageIds,(I)?I.val():"");P=G.val();H=(P)?P.split(","):[];k(K,H,"space-cat:");k(M,H,"space:");k(I,H,"page:");if(H.length===0){return}_.each(H,function(V,W){var Z=V.split(":");if(Z.length===2){var Y=Z[0];var X=Z[1];if(Y==="space-cat"){N.push(X)}else{if(Y==="space"){R.push(X)}else{if(Y==="page"){L.push(X)}}}}});_.each(N,function(V){F[C(V)]=o(V)});var O=[];if(R.length>0){var J=i.getJSON(AJS.contextPath()+"/rest/prototype/1/space",{spaceKey:R}).done(function(X){var V=[];_.each(X.space,function(Y){F[a(Y.key)]=m(Y.key,_.escape(Y.name),null,true);V.push(Y.key)});var W=_.difference(R,V);_.each(W,function(Y){F[a(Y)]=m(Y,Y,null,false)})}).fail(function(){AJS.debug("Couldn't resolve spaceKeys:",R);_.each(R,function(V){F[a(V)]=m(V,V,null,false)})});O.push(J)}_.each(L,function(V){var W=i.getJSON(AJS.contextPath()+"/rest/api/content/"+V,{expand:"space"}).done(function(X){F[D(X.id)]=h(X.id,_.escape(X.title),_.escape(X.space.name),"content-type-page",true)}).fail(function(){AJS.debug("Couldn't resolve pageId:",V);F[D(V)]=h(V,V,"","content-type-page",false)});O.push(W)});i.when.apply(i,_.map(O,function(W){var V=new i.Deferred();W.always(function(){V.resolve()});return V.promise()})).done(function(){S(r(H,F,T))})}}(AJS.$,window.Confluence.UI.Components.SpacePagePicker));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:space-page-picker', location = '/soy/space-page-picker.soy' */
// This file was automatically generated from space-page-picker.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.templates == 'undefined') { Confluence.UI.Components.templates = {}; }


Confluence.UI.Components.templates.hiddenField = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<input type="hidden" id="', soy.$$escapeHtml(opt_data.id), '" name="', soy.$$escapeHtml(opt_data.name), '" />');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-resources', location = 'templates/task-report-blueprint.soy' */
// This file was automatically generated from task-report-blueprint.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.InlineTasks == 'undefined') { Confluence.InlineTasks = {}; }
if (typeof Confluence.InlineTasks.Report == 'undefined') { Confluence.InlineTasks.Report = {}; }
if (typeof Confluence.InlineTasks.Report.Templates == 'undefined') { Confluence.InlineTasks.Report.Templates = {}; }


Confluence.InlineTasks.Report.Templates.taskReportBlueprintForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ol class="report-types" id="task-report-types"><li class="template" id="team-task-report"><span class="template-preview team-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Assigned to my team"), '</div><div class="template-description">', soy.$$escapeHtml("Show tasks assigned to specific people"), '</div></div></li><li class="template" id="location-task-report"><span class="template-preview location-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("In my project"), '</div><div class="template-description">', soy.$$escapeHtml("Show tasks created in specific spaces and pages"), '</div></div></li><li class="template" id="custom-task-report"><span class="template-preview custom-task-report-icon"></span><div class="template-meta"><div class="template-name">', soy.$$escapeHtml("Custom"), '</div><div class="template-description">', soy.$$escapeHtml("Create your own report"), '</div></div></li></ol>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.reportByTeamForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="report-by-team-form" class="aui"><fieldset><div class="field-group"><label for="task-report-page-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your task report"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-team-picker">', soy.$$escapeHtml("Assigned to"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-team-picker" class="text select2-input long-field autocomplete-multiuser" type="text" name="teamMembers" placeholder="', soy.$$escapeHtml("Only show tasks assigned to these people"), '" /><div class="error hidden"></div></div><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="completed" id="task-report-completed-cb"><label for="task-report-completed-cb">', soy.$$escapeHtml("Include completed tasks"), '</label></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.reportByLocationForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="report-by-location-form" class="aui"><fieldset><div class="field-group"><label for="task-report-page-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your task report"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-location-picker">', soy.$$escapeHtml("Created in"), '<span class="aui-icon icon-required">required</span></label><input id="task-report-location-picker" class="text select2-input long-field" type="text" name="locations" placeholder="', soy.$$escapeHtml("Select task locations"), '"/><div class="error hidden"></div></div><div class="field-group"><label for="task-report-label-picker">', soy.$$escapeHtml("Labels"), '</label><input id="task-report-label-picker" class="text select2-input long-field" type="text" name="labels" placeholder="', soy.$$escapeHtml("Only show tasks on pages with these labels"), '"/></div><div class="field-group"><div class="checkbox"><input class="checkbox" type="checkbox" name="completed" id="task-report-completed-cb"><label for="task-report-completed-cb">', soy.$$escapeHtml("Include completed tasks"), '</label></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.assigneeParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.userKeys) {
    output.append('<ac:parameter ac:name="assignees">');
    var keyList48 = opt_data.userKeys;
    var keyListLen48 = keyList48.length;
    for (var keyIndex48 = 0; keyIndex48 < keyListLen48; keyIndex48++) {
      var keyData48 = keyList48[keyIndex48];
      output.append('<ri:user ri:userkey="', soy.$$escapeHtml(keyData48), '" />');
    }
    output.append('</ac:parameter>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.creatorParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.userKeys) {
    output.append('<ac:parameter ac:name="creators">');
    var keyList58 = opt_data.userKeys;
    var keyListLen58 = keyList58.length;
    for (var keyIndex58 = 0; keyIndex58 < keyListLen58; keyIndex58++) {
      var keyData58 = keyList58[keyIndex58];
      output.append('<ri:user ri:userkey="', soy.$$escapeHtml(keyData58), '" />');
    }
    output.append('</ac:parameter>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.macroParam = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.value) ? '<ac:parameter ac:name="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.value) + '</ac:parameter>' : '');
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.teamReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ac:structured-macro ac:name="tasks-report-macro"><!-- assignee-->');
  Confluence.InlineTasks.Report.Templates.assigneeParam({userKeys: opt_data.assignees}, output);
  output.append('<!-- status--><ac:parameter ac:name="status">incomplete</ac:parameter></ac:structured-macro></p>');
  if (opt_data.showCompletedTasks) {
    output.append('<ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">', soy.$$escapeHtml("Completed tasks"), '</ac:parameter><ac:rich-text-body><p><ac:structured-macro ac:name="tasks-report-macro"><!-- assignee-->');
    Confluence.InlineTasks.Report.Templates.assigneeParam({userKeys: opt_data.assignees}, output);
    output.append('<!-- status--><ac:parameter ac:name="status">complete</ac:parameter></ac:structured-macro></p></ac:rich-text-body></ac:structured-macro>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.locationReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><ac:structured-macro ac:name="tasks-report-macro"><!-- space-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'spaces', value: opt_data.spaceKeys}, output);
  output.append('<!-- pages-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'pages', value: opt_data.pageIds}, output);
  output.append('<!-- labels-->');
  Confluence.InlineTasks.Report.Templates.macroParam({name: 'labels', value: opt_data.labels}, output);
  output.append('<!-- status--><ac:parameter ac:name="status">incomplete</ac:parameter></ac:structured-macro></p>');
  if (opt_data.showCompletedTasks) {
    output.append('<ac:structured-macro ac:name="expand"><ac:parameter ac:name="title">', soy.$$escapeHtml("Completed tasks"), '</ac:parameter><ac:rich-text-body><p><ac:structured-macro ac:name="tasks-report-macro"><!-- space-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'spaces', value: opt_data.spaceKeys}, output);
    output.append('<!-- pages-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'pages', value: opt_data.pageIds}, output);
    output.append('<!-- labels-->');
    Confluence.InlineTasks.Report.Templates.macroParam({name: 'labels', value: opt_data.labels}, output);
    output.append('<!-- status--><ac:parameter ac:name="status">complete</ac:parameter></ac:structured-macro></p></ac:rich-text-body></ac:structured-macro>');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.InlineTasks.Report.Templates.customReportContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p><span class="text-placeholder">', soy.$$escapeHtml("Edit the Task Report macro to customise your report."), '</span></p><ac:structured-macro ac:name="tasks-report-macro">');
  if (opt_data.creators) {
    Confluence.InlineTasks.Report.Templates.creatorParam({userKeys: opt_data.creators}, output);
  }
  output.append('</ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-resources', location = 'js/task-report-bp.js' */
(function(d){var c;function e(t){t.addClass("selected").siblings().removeClass("selected");AJS.trigger("selected.task-report-types",t)}function i(w,v){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_blueprint.clicked"});var u=d("#task-report-types");var t=u.find(".template");t.first().addClass("selected");t.click(function(){e(d(this))}).dblclick(function(){d(".create-dialog-create-button:visible").click()});u.attr("tabindex",0).keydown(function(z){if(z.keyCode==38||z.keyCode==40){z.preventDefault();var x=u.find(".selected"),y;if(z.keyCode==38){y=x.prev().length?x.prev():t.last()}else{if(z.keyCode==40){y=x.next().length?x.next():t.first()}}e(y)}});u.focus();AJS.bind("selected.task-report-types",function(y,x){if(d(x).is("#custom-task-report")){p("Create")}else{p("Next")}});p("Next")}function f(v,u){var t=u.$container.find(".selected").attr("id");if(t==="team-task-report"){u.nextPageId="teamTaskReportId";AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_team.clicked"})}else{if(t==="location-task-report"){u.nextPageId="locationTaskReportId";AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_project.clicked"})}else{if(t==="custom-task-report"){c.getSubmissionRestPath=function(){AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_custom.clicked"});return"/rest/create-dialog/1.0/content-blueprint/create-draft"};g(u,"custom-task-report-template")}else{return false}}}}function a(u,t){o()}function m(w,v){var t=d("#report-by-team-form");b(t);var u=true;u=r(d("#task-report-team-picker"),"Assignee is required.")&&u;u=s(v.wizardData.spaceKey)&&u;u?g(v,"team-task-report-template"):h(t);AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_team.created"});return u}function n(u,t){k(d("#task-report-location-picker"),t.wizardData.spaceKey);q(d("#task-report-label-picker"));o()}function j(w,v){var t=d("#report-by-location-form");b(t);var u=true;u=r(d("#task-report-location-picker"),"A space or page is required.")&&u;u=s(v.wizardData.spaceKey)&&u;if(u){g(v,"location-task-report-template")}else{h(t)}AJS.trigger("analyticsEvent",{name:"confluence-spaces.tasks.report_project.created"});return u}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-inline-tasks:task-report-blueprint-item",function(t){t.on("post-render.selectTaskReportId",i);t.on("submit.selectTaskReportId",f);t.on("post-render.teamTaskReportId",a);t.on("submit.teamTaskReportId",m);t.on("post-render.locationTaskReportId",n);t.on("submit.locationTaskReportId",j);c=t});function b(t){t.find(".error").addClass("hidden").empty()}function s(v){var t=d("#task-report-page-title");var u=Confluence.Blueprint.validateTitle(t,v);if(!u){t.siblings(".error").removeClass("hidden")}return u}function r(t,u){var v=d.trim(t.val());if(!v&&u){l(t,u)}return !!v}function h(u){var t=u.find("div.error:not(.hidden)").first();var v=t.siblings("input").eq(0);if(v.hasClass("select2-offscreen")){v.select2("focus")}else{v.focus()}}function g(t,u){t.pageData.contentTemplateKey=u}function l(v,u){var t=v.siblings(".error");t.html(u);t.removeClass("hidden");return u}function q(t){t.auiSelect2(Confluence.UI.Components.LabelPicker.build())}function k(u,t){u.auiSelect2(Confluence.UI.Components.SpacePagePicker.build({spaceKeys:[t],orgElement:u}))}function p(t){d(".create-dialog-create-button:visible").text(t)}function o(){var v;var u=d("#task-report-completed-cb");var t=d("label[for=task-report-completed-cb]").add(u);t.mousedown(function(){v=true});d(".dialog-wizard-page-main").on("mouseup",function(w){if(!t.is(w.target)&&v){u.click()}v=false})}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:space-kb-web-resource', location = 'js/kb-space-dialog-wizard.js' */
AJS.bind("blueprint.wizard-register.ready",function(){function a(d,c){c.pageData.ContentPageTitle=c.pageData.name;return Confluence.SpaceBlueprint.CommonWizardBindings.submit(d,c)}function b(d,c){c.soyRenderContext.atlToken=AJS.Meta.get("atl-token");c.soyRenderContext.showSpacePermission=false}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-blueprint-item",function(c){c.on("submit.kbSpaceId",a);c.on("pre-render.kbSpaceId",b);c.on("post-render.kbSpaceId",Confluence.SpaceBlueprint.CommonWizardBindings.postRender)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:space-kb-web-resource', location = 'soy/space.soy' */
// This file was automatically generated from space.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.SpaceBlueprints == 'undefined') { Confluence.SpaceBlueprints = {}; }
if (typeof Confluence.SpaceBlueprints.KnowledgeBase == 'undefined') { Confluence.SpaceBlueprints.KnowledgeBase = {}; }


Confluence.SpaceBlueprints.KnowledgeBase.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="kb-space-form" class="common-space-form aui">');
  Confluence.Templates.Blueprints.CreateSpace.createSpaceFormFields({showSpacePermission: false, fieldErrors: opt_data.fieldErrors, name: opt_data.name, spaceKey: opt_data.spaceKey}, output);
  output.append('<fieldset><div class="field-group"><label for="kb-space-desc">', soy.$$escapeHtml("Description"), '</label><textarea id="kb-space-desc" class="textarea long-field" rows="3" type="text" name="description" placeholder="', soy.$$escapeHtml("What is this knowledge base for?"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.SpaceBlueprints.KnowledgeBase.livesearchMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="livesearch"><ac:parameter ac:name="additional">page excerpt</ac:parameter><ac:parameter ac:name="placeholder">', soy.$$escapeHtml("Search for a solution"), '</ac:parameter>', (opt_data.spaceKey) ? '<ac:parameter ac:name="spaceKey"><ri:space ri:space-key="' + soy.$$escapeHtml(opt_data.spaceKey) + '"/></ac:parameter>' : '', '<ac:parameter ac:name="type">page</ac:parameter><ac:parameter ac:name="size">large</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/js/label-picker.js' */
(function(c,a){var e=/[:;,\.\?&\[\(\)#\^\*@!<>\]]/g;var b=function(h){var i=_.uniq(h.match(e));return i.join(" ")};var g=function(h){var i=_.map(h.contentNameMatches[0],function(j){return{id:j.name,text:j.name}});return _.sortBy(i,function(j){return j.text.toLowerCase()})};var d=function(h){return function(i){return c.extend({query:i},h)}};var f={placeholder:"Add labels",multiple:true,minimumInputLength:1,maximumSelectionSize:20,tokenSeparators:[" ",","],formatInputTooShort:function(i,h){return "Start typing to search for a label"},formatSelectionTooBig:function(h){return AJS.format("You can only input {0} labels",h)},formatResult:function(h){return Confluence.UI.Components.LabelPicker.templates.labelResult({label:{labelName:h.text,isNew:h.isNew}})},formatNoMatches:function(i){var h=b(i);if(h){return Confluence.UI.Components.LabelPicker.templates.labelInvalid({inputValue:i,invalidCharacters:h})}else{return "Add labels"}},createSearchChoice:function(i){if(!i){return null}var h=b(i);if(h){return null}return{id:i,text:i,isNew:true}},ajax:{data:d(),dataType:"json",url:Confluence.getContextPath()+"/labels/autocompletelabel.action",results:function(h){return{results:g(h)}},quietMillis:300},dropdownCssClass:"labels-dropdown",containerCssClass:"labels-autocomplete"};a.build=function(i){var h=c.extend({},f,i);if(i&&i.queryOpts){h.ajax.data=d(i.queryOpts);delete h.queryOpts}return h}}(AJS.$,window.Confluence.UI.Components.LabelPicker));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-ui-components:label-picker', location = '/soy/label-picker.soy' */
// This file was automatically generated from label-picker.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.UI == 'undefined') { Confluence.UI = {}; }
if (typeof Confluence.UI.Components == 'undefined') { Confluence.UI.Components = {}; }
if (typeof Confluence.UI.Components.LabelPicker == 'undefined') { Confluence.UI.Components.LabelPicker = {}; }
if (typeof Confluence.UI.Components.LabelPicker.templates == 'undefined') { Confluence.UI.Components.LabelPicker.templates = {}; }


Confluence.UI.Components.LabelPicker.templates.labelResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - add a new label",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};


Confluence.UI.Components.LabelPicker.templates.labelInvalid = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var inputValueHtml__soy9 = new soy.StringBuilder('<b>', soy.$$escapeHtml(opt_data.inputValue), '</b>');
  inputValueHtml__soy9 = inputValueHtml__soy9.toString();
  var invalidCharactersHtml__soy13 = new soy.StringBuilder('<b>', soy.$$escapeHtml(opt_data.invalidCharacters), '</b>');
  invalidCharactersHtml__soy13 = invalidCharactersHtml__soy13.toString();
  output.append(AJS.format("{0} contains invalid characters {1}",inputValueHtml__soy9,invalidCharactersHtml__soy13));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:kb-article-resources', location = 'soy/kb-articles.soy' */
// This file was automatically generated from kb-articles.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Plugin == 'undefined') { Confluence.Blueprints.Plugin = {}; }
if (typeof Confluence.Blueprints.Plugin.KnowledgeBaseArticle == 'undefined') { Confluence.Blueprints.Plugin.KnowledgeBaseArticle = {}; }


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.wizardPage = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="kb-article-wizard-page-form" class="aui"><fieldset><div class="field-group"><label for="kb-article-title">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required">', soy.$$escapeHtml("$WIZARD_FORM_FIELD_REQUIRED_I18N"), '</span></label><input id="kb-article-title" class="text  long-field" type="text" name="title" title="title" placeholder="', soy.$$escapeHtml("Title of your article."), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label>', soy.$$escapeHtml("Labels"), '</label><input id="kb-article-labels" class="text select2-input long-field" type="text" name="labelsString" title="labelsString" placeholder="', soy.$$escapeHtml("Topics this article covers (e.g. \x22printer\x22)."), '"><div class="error"></div></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.contentbylabelMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="contentbylabel"><ac:parameter ac:name="showLabels">false</ac:parameter><ac:parameter ac:name="max">5</ac:parameter><ac:parameter ac:name="sort">modified</ac:parameter><ac:parameter ac:name="reverse">true</ac:parameter><ac:parameter ac:name="labels">', soy.$$escapeHtml(opt_data.labels), '</ac:parameter><ac:parameter ac:name="showSpace">false</ac:parameter><ac:parameter ac:name="spaces"><ri:space ri:space-key="', soy.$$escapeHtml(opt_data.spaceKey), '" /></ac:parameter><ac:parameter ac:name="type">page</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Plugin.KnowledgeBaseArticle.jiraIssuesMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:structured-macro ac:name="jira"><ac:parameter ac:name="key">', soy.$$escapeHtml(opt_data.jiraIssueKey), '</ac:parameter><ac:parameter ac:name="serverId">', soy.$$escapeHtml(opt_data.jiraServerId), '</ac:parameter></ac:structured-macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-knowledge-base:kb-article-resources', location = 'js/kb-articles-dialog-wizard.js' */
AJS.toInit(function(c){function a(i,g){var h=g.$container;var f=c("#kb-article-labels",h);f.auiSelect2(Confluence.UI.Components.LabelPicker.build({separator:" ",queryOpts:{spaceKey:g.wizardData.spaceKey}}))}function d(j,h){var i=j,e=i.find("#kb-article-title"),g=c.trim(e.val()),f;i.find(".error").html("");if(!g){f="Title is required."}else{if(!Confluence.Blueprint.canCreatePage(h,g)){f="A page with this name already exists."}}if(f){e.focus().siblings(".error").html(f);return false}return true}function b(g,f){return d(f.$container,f.wizardData.spaceKey)}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-how-to-item",function(e){e.on("post-render.kb-how-to-wizard",a);e.on("submit.kb-how-to-wizard",b)});Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-knowledge-base:kb-troubleshooting-item",function(e){e.on("post-render.kb-troubleshooting-wizard",a);e.on("submit.kb-troubleshooting-wizard",b)})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:common-template-resources', location = 'com/atlassian/confluence/plugins/blueprint/common/soy/common-templates.soy' */
// This file was automatically generated from common-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Common == 'undefined') { Confluence.Blueprints.Common = {}; }
if (typeof Confluence.Blueprints.Common.Index == 'undefined') { Confluence.Blueprints.Common.Index = {}; }


Confluence.Blueprints.Common.Index.detailsSummaryMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="detailssummary"><ac:parameter ac:name="label">', soy.$$escapeHtml(opt_data.label), '</ac:parameter><ac:parameter ac:name="spaces">', soy.$$escapeHtml(opt_data.spaces), '</ac:parameter><ac:parameter ac:name="firstcolumn">', soy.$$escapeHtml(opt_data.firstcolumn), '</ac:parameter><ac:parameter ac:name="headings">', soy.$$escapeHtml(opt_data.headings), '</ac:parameter><ac:parameter ac:name="blankTitle">', soy.$$escapeHtml(opt_data.blankTitle), '</ac:parameter><ac:parameter ac:name="blankDescription">', soy.$$escapeHtml(opt_data.blankDescription), '</ac:parameter><ac:parameter ac:name="contentBlueprintId">', soy.$$escapeHtml(opt_data.contentBlueprintId), '</ac:parameter><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.blueprintModuleCompleteKey), '</ac:parameter><ac:parameter ac:name="createButtonLabel">', soy.$$escapeHtml(opt_data.createButtonLabel), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Common.Index.createFromTemplateMacro = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="create-from-template"><ac:parameter ac:name="blueprintModuleCompleteKey">', soy.$$escapeHtml(opt_data.moduleKey), '</ac:parameter><ac:parameter ac:name="buttonLabel">', soy.$$escapeHtml(opt_data.buttonLabel), '</ac:parameter><ac:parameter ac:name="spaceKey">', soy.$$escapeHtml(opt_data.spaceKey), '</ac:parameter><ac:parameter ac:name="templateName">', soy.$$escapeHtml(opt_data.templateName), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-resources', location = 'com/atlassian/confluence/plugins/filelist/soy/templates.soy' */
// This file was automatically generated from templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.FileList == 'undefined') { Confluence.Templates.FileList = {}; }


Confluence.Templates.FileList.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="file-list-form" class="aui"><fieldset><div class="field-group"><label for="file-list-page-title">', soy.$$escapeHtml("Name"), '<span class="aui-icon icon-required"> required</span></label><input id="file-list-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("Title of your file list"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="file-list-page-description">', soy.$$escapeHtml("Description"), '</label><textarea id="file-list-page-description" class="textarea long-field" name="description" rows="6" placeholder="', soy.$$escapeHtml("Description which will appear at the top of file list"), '"></textarea></div><div class="field-group"><label for="file-list-restrictions">', soy.$$escapeHtml("Restrictions"), '</label><input id="file-list-restrictions" class="text long-field autocomplete-multiuser" type="text" name="viewPermissionsUsers" placeholder="', soy.$$escapeHtml("Restrict to users"), '"></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-resources', location = 'com/atlassian/confluence/plugins/filelist/js/create-file-list-listener.js' */
(function(b){function c(h,g){var d=h.find("#file-list-page-title"),f=b.trim(d.val()),e;if(!f){e="Name is required."}else{if(!Confluence.Blueprint.canCreatePage(g,f)){e="A page with this name already exists."}}if(e){d.focus().siblings(".error").html(e);return false}return true}function a(d,e){return c(e.$container,e.wizardData.spaceKey)}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:file-list-item",function(d){d.on("submit.file-list-page1",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/how-to.soy' */
// This file was automatically generated from how-to.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Meeting == 'undefined') { Confluence.Blueprints.Meeting = {}; }
if (typeof Confluence.Blueprints.Meeting.Notes == 'undefined') { Confluence.Blueprints.Meeting.Notes = {}; }


Confluence.Blueprints.Meeting.Notes.howTo = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<h1>', soy.$$escapeHtml("With meeting notes you can..."), '</h1><ol class="howto-steps"><li class="howto-step"><div><h3>', soy.$$escapeHtml("Crowd-source your agenda"), '</h3><p>', soy.$$escapeHtml("Distribute an agenda and keep meetings focused."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Capture meeting minutes"), '</h3><p>', soy.$$escapeHtml("Take notes and make them available to everyone."), '</p></div></li><li class="howto-step"><div><h3>', soy.$$escapeHtml("Create and assign tasks"), '</h3><p>', soy.$$escapeHtml("Assign action items for attendees to work on afterward."), '</p></div></li></ol>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:meeting-notes-resources', location = 'com/atlassian/confluence/plugins/meetingnotes/soy/user-mention.soy' */
// This file was automatically generated from user-mention.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Meeting == 'undefined') { Confluence.Templates.Meeting = {}; }
if (typeof Confluence.Templates.Meeting.Notes == 'undefined') { Confluence.Templates.Meeting.Notes = {}; }


Confluence.Templates.Meeting.Notes.userMention = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.username) ? '<li><p><ac:link><ri:user ri:username="' + soy.$$escapeHtml(opt_data.username) + '" /></ac:link></p></li><li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml("@mention a person to add them as an attendee and they will be notified.") + '</ac:placeholder></p></li>' : '<li><p><ac:placeholder ac:type="mention">' + soy.$$escapeHtml("@mention a person to add them as an attendee and they will be notified.") + '</ac:placeholder></p></li>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-resources', location = 'com/atlassian/confluence/plugins/decisions/soy/decisions-templates.soy' */
// This file was automatically generated from decisions-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Decisions == 'undefined') { Confluence.Blueprints.Decisions = {}; }


Confluence.Blueprints.Decisions.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="decisions-form" class="aui"><fieldset><div class="field-group"><label for="decisions-status">', soy.$$escapeHtml("Status"), '</label><select class="select long-field" id="decisions-status" name="status"><option value="GREY">', soy.$$escapeHtml("Not started"), '</option><option value="YELLOW">', soy.$$escapeHtml("In progress"), '</option><option value="GREEN">', soy.$$escapeHtml("Decided"), '</option></select></div><div class="field-group"><label for="decisions-page-title">', soy.$$escapeHtml("Decision"), '<span class="aui-icon icon-required"> required</span></label><input id="decisions-page-title" class="text long-field" type="text" name="title" placeholder="', soy.$$escapeHtml("What are you deciding?"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="decisions-owner">', soy.$$escapeHtml("Owner"), '</label><input id="decisions-owner" type="text" class="text long-field autocomplete-multiuser" name="owner" placeholder="', soy.$$escapeHtml("Who should make the final decision?"), '" data-autofill-user="true"></div><div class="field-group"><label for="decisions-stakeholders">', soy.$$escapeHtml("Stakeholders"), '</label><input id="decisions-stakeholders" class="text long-field autocomplete-multiuser" type="text" name="stakeholders" placeholder="', soy.$$escapeHtml("Who needs to help make this decision?"), '"></div><div class="field-group"><label for="decisions-due-date">', soy.$$escapeHtml("Due date"), '</label><input id="decisions-due-date" class="datepicker-field date-field text" type="text" name="due-date" size="10" autocomplete="off"></div><div class="field-group"><label for="decisions-background">', soy.$$escapeHtml("Background"), '</label><textarea id="decisions-background" class="textarea long-field" rows="3" name="background" placeholder="', soy.$$escapeHtml("What details are important in making this decision?"), '"></textarea></div><div class="field-group"><label for="decisions-final-decision">', soy.$$escapeHtml("Outcome"), '</label><textarea id="decisions-final-decision" class="textarea long-field" rows="3" name="final-decision" placeholder="', soy.$$escapeHtml("What did you decide?"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.mentionXml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var nameList35 = opt_data.names;
  var nameListLen35 = nameList35.length;
  for (var nameIndex35 = 0; nameIndex35 < nameListLen35; nameIndex35++) {
    var nameData35 = nameList35[nameIndex35];
    output.append('<ac:link><ri:user ri:username="', soy.$$escapeHtml(nameData35), '" /></ac:link>&nbsp;');
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.mentionsPlaceholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:placeholder ac:type="mention">', soy.$$escapeHtml(opt_data.placeholderText), '</ac:placeholder>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.placeholder = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:placeholder>', soy.$$escapeHtml(opt_data.placeholderText), '</ac:placeholder>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Decisions.statusTemplate = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="status"><ac:parameter ac:name="title">', soy.$$escapeHtml(opt_data.status), '</ac:parameter><ac:parameter ac:name="colour">', soy.$$escapeHtml(opt_data.statusColour), '</ac:parameter></ac:macro>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-resources', location = 'com/atlassian/confluence/plugins/decisions/js/create-decisions-listener.js' */
(function(c){function d(i,h){var e=i.find("#decisions-page-title"),g=c.trim(e.val()),f;if(!g){f="Decision is required."}else{if(!Confluence.Blueprint.canCreatePage(h,g)){f="A page with this name already exists."}}if(f){e.focus().siblings(".error").html(f);return false}return true}function a(e,f){return d(f.$container,f.wizardData.spaceKey)}function b(e,f){c("#decisions-due-date").datepicker({dateFormat:"yy-mm-dd"});c("#decisions-status").on("change",function(){var h=c("#decisions-final-decision");var g=c("label[for=decisions-final-decision]");if(c(this).find(":selected").val()=="GREEN"){h.css({display:"inline"});g.css({display:"inline"})}else{h.css({display:"none"});g.css({display:"none"})}})}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:decisions-blueprint-item",function(e){e.on("post-render.decisions-page1",b);e.on("submit.decisions-page1",a)})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/soy/sharelinks-templates.soy' */
// This file was automatically generated from sharelinks-templates.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Sharelinks == 'undefined') { Confluence.Blueprints.Sharelinks = {}; }


Confluence.Blueprints.Sharelinks.dialogForm = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" id="sharelinks-form" class="aui"><fieldset><div class="field-group"><label for="sharelinks-url">', soy.$$escapeHtml("Link"), '<span class="aui-icon icon-required"> required</span></label><input id="sharelinks-url" class="text long-field" type="text" name="url" placeholder="', soy.$$escapeHtml("Paste a link to any website"), '"/><div class="error"></div></div><div class="field-group"><label for="sharelinks-title">', soy.$$escapeHtml("Title"), '<span class="aui-icon icon-required"> required</span></label><input id="sharelinks-title" class="text long-field" type="text" name="title" title="title" placeholder="', soy.$$escapeHtml("Title of the page"), '" maxlength="255"><div class="error"></div></div><div class="field-group"><label for="sharelinks-label">', soy.$$escapeHtml("Labels"), '</label><input id="sharelinks-label" class="text select2-input long-field" type="text" name="label" placeholder="', soy.$$escapeHtml("Suggest a topic"), '" /></div><div class="field-group"><label for="sharelinks-sharewith">', soy.$$escapeHtml("Share with"), '</label><input id="sharelinks-sharewith" class="text long-field autocomplete-multiuser" type="text" name="sharewith" placeholder="', soy.$$escapeHtml("Share this page with users"), '"/></div><div class="field-group"><label for="sharelinks-comment">', soy.$$escapeHtml("Comment"), '</label><textarea id="sharelinks-comment" class="textarea long-field" rows="4" type="text" name="comment" placeholder="', soy.$$escapeHtml("Share your thoughts about this link"), '"></textarea></div></fieldset></form>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview">');
  if (opt_data.linkMetaData.title) {
    output.append('<h3 class="sharelinks-preview-title">', soy.$$escapeHtml(opt_data.linkMetaData.title), '</h3>');
    if (opt_data.linkMetaData.imageURL) {
      output.append('<div class="sharelinks-preview-image"><img src="', soy.$$escapeHtml(opt_data.linkMetaData.imageURL), '"/></div>');
    } else {
      var noImagePreviewContent__soy37 = new soy.StringBuilder();
      Confluence.Blueprints.Sharelinks.noImagePreview(null, noImagePreviewContent__soy37);
      noImagePreviewContent__soy37 = noImagePreviewContent__soy37.toString();
      output.append(noImagePreviewContent__soy37);
    }
    output.append((opt_data.linkMetaData.description) ? '<p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p>' : '');
  } else {
    var previewUnavailableContent__soy47 = new soy.StringBuilder();
    Confluence.Blueprints.Sharelinks.previewUnavailable(null, previewUnavailableContent__soy47);
    previewUnavailableContent__soy47 = previewUnavailableContent__soy47.toString();
    output.append(previewUnavailableContent__soy47);
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewVideoLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview"><h3 class="sharelinks-preview-title">', soy.$$escapeHtml(opt_data.linkMetaData.title), '</h3><div class="sharelinks-preview-video">');
  if (opt_data.linkMetaData.imageURL) {
    output.append('<span class="sharelinks-preview-image"><img src="', soy.$$escapeHtml(opt_data.linkMetaData.imageURL), '"/><span class="sharelinks-preview-camera-icon sharelinks-camera-with-image"></span></span>');
  } else {
    output.append('<div>');
    var noImagePreviewContent__soy63 = new soy.StringBuilder();
    Confluence.Blueprints.Sharelinks.noImagePreview(null, noImagePreviewContent__soy63);
    noImagePreviewContent__soy63 = noImagePreviewContent__soy63.toString();
    output.append(noImagePreviewContent__soy63, '<span class="sharelinks-preview-camera-icon sharelinks-camera-with-no-image"></span></div>');
  }
  output.append('</div>', (opt_data.linkMetaData.description) ? '<p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p>' : '', '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview-loading"><span class="aui-icon aui-icon-wait"></span>&nbsp;', soy.$$escapeHtml("Loading preview\u2026"), '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.metaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-link-meta-data"><ac:macro ac:name="panel"><ac:rich-text-body>', (opt_data.linkMetaData.imageURL) ? '<h3><ac:image ac:align="right"><ri:url ri:value=\'' + soy.$$escapeHtml(opt_data.linkMetaData.imageURL) + '\' /></ac:image></h3>' : '', '<p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p>', (opt_data.linkMetaData.description) ? '<blockquote><p>' + soy.$$escapeHtml(opt_data.descriptionMessage) + '</p></blockquote>' : '<p style="text-align: left;"><span style="color: rgb(128,128,128);"><em>' + soy.$$escapeHtml(opt_data.descriptionMessage) + '</em></span></p>', '<p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></ac:rich-text-body></ac:macro></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewError = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="sharelinks-preview">');
  var previewUnavailableContent__soy109 = new soy.StringBuilder();
  Confluence.Blueprints.Sharelinks.previewUnavailable(null, previewUnavailableContent__soy109);
  previewUnavailableContent__soy109 = previewUnavailableContent__soy109.toString();
  output.append(previewUnavailableContent__soy109, '</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.videoMetaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ac:macro ac:name="panel"><ac:rich-text-body><ac:macro ac:name="section"><ac:rich-text-body><ac:macro ac:name="column"><ac:parameter ac:name="width">50%</ac:parameter><ac:rich-text-body><p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p>', (opt_data.linkMetaData.description) ? '<blockquote><p>' + soy.$$escapeHtml(opt_data.linkMetaData.description) + '</p></blockquote>' : '', '<p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></ac:rich-text-body></ac:macro><ac:macro ac:name="column"><ac:parameter ac:name="width">50%</ac:parameter><ac:rich-text-body><p>', (opt_data.isSupportedMediaDomain) ? '<ac:macro ac:name="widget"><ac:parameter ac:name="url">' + soy.$$escapeHtml(opt_data.linkMetaData.sourceURL) + '</ac:parameter><ac:parameter ac:name="width">350</ac:parameter><ac:parameter ac:name="height">240</ac:parameter></ac:macro>' : '<ac:image ac:width="300"><ri:url ri:value="' + soy.$$escapeHtml(opt_data.linkMetaData.imageURL) + '" /></ac:image>', '</p></ac:rich-text-body></ac:macro></ac:rich-text-body></ac:macro></ac:rich-text-body></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.twitterMetaDataHtml = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.linkMetaData.description) {
    output.append('<div class="sharelinks-twitter-content"><p><ac:image ac:width=\'16\'><ri:url ri:value="', soy.$$escapeHtml(opt_data.faviconURL), '" /></ac:image>&nbsp;<a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml(opt_data.linkMetaData.excerptedURL), '</a></p><p><ac:macro ac:name="widget"><ac:parameter ac:name="url">', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '</ac:parameter></ac:macro></p><p><strong><a href="', soy.$$escapeHtml(opt_data.linkMetaData.sourceURL), '">', soy.$$escapeHtml("Open link"), '</a></strong></p></div>');
  } else {
    Confluence.Blueprints.Sharelinks.metaDataHtml(opt_data, output);
  }
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.bookmarkletGuideOnWizard = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var bookmarkletLinkParam__soy163 = new soy.StringBuilder();
  Confluence.Blueprints.SharelinksUrlMacro.bookmarkletLink(opt_data, bookmarkletLinkParam__soy163);
  bookmarkletLinkParam__soy163 = bookmarkletLinkParam__soy163.toString();
  output.append('<p>', bookmarkletLinkParam__soy163, '</p><p>', soy.$$escapeHtml("It will appear like this in your browser."), '</p><div class="bookmarklet-guide-picture"></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.bookmarkletGuide = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var bookmarkletMacroParam__soy173 = new soy.StringBuilder('<ac:macro ac:name="sharelinks-urlmacro"/>');
  bookmarkletMacroParam__soy173 = bookmarkletMacroParam__soy173.toString();
  output.append('<ac:macro ac:name="info"><ac:parameter ac:name="icon">false</ac:parameter><ac:rich-text-body><p><ac:emoticon ac:name="information" />&nbsp;', AJS.format("Tip: share a link from anywhere by dragging this button \u2192 {0} to your browser bookmarks toolbar. Once added to your toolbar, click it to share links with your team.",bookmarkletMacroParam__soy173), '</p></ac:rich-text-body></ac:macro>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.noImagePreview = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="image-unavailable"><span class="no-image-picture"></span>', soy.$$escapeHtml("No image available"), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Blueprints.Sharelinks.previewUnavailable = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<p class="link-unavailable"><span class="preview-unavailable-picture"></span>', soy.$$escapeHtml("Link preview unavailable"), '</p>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-creation-wizard.js' */
(function(i){var d=false;function g(s,r){var q=false;if(k(s,!q)){q=true}if(f(s,r,!q)){q=true}return !q}function k(u,q){var t=u.find("#sharelinks-url");var s=i.trim(t.val());var r="";if(!s){r="URL is required"}else{if(d){r="URL syntax is invalid"}}return j(t,r,q)}function f(w,u,s){var r=w.find("#sharelinks-title");var v=i.trim(r.val());var t="";if(!v){t="Title is required"}else{if(!Confluence.Blueprint.canCreatePage(u,v)){t="A page with this name already exists";var q=Confluence.Blueprints.Sharelinks.Analytics.errorTypes.value.duplicatedPage;Confluence.Blueprints.Sharelinks.Analytics.triggerErrorTypes(q)}}return j(r,t,s)}function j(s,r,q){s.siblings(".error").html(r);if(r&&q){s.focus()}return r}var p;function a(u,v){var s=g(v.$container,v.wizardData.spaceKey);if(s){var r=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noComment;var x=i("#sharelinks-comment").val();x=i.trim(x);if(x){r=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.comment}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(r);var q=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noEditTitle;if(p!==i("#sharelinks-title").val()){q=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.editTitle}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(q);var w=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.noShare;var t=i("#sharelinks-sharewith").val();t=i.trim(t);if(t){w=Confluence.Blueprints.Sharelinks.Analytics.submitData.value.share}Confluence.Blueprints.Sharelinks.Analytics.triggerSubmitData(w)}v.wizardData.parentPageId=-1;return s}var e;function h(s,t){e="";i("#sharelinks-url").bind("paste",function(){setTimeout(function(){l(t.$container,t.wizardData.spaceKey,true)},0)});i("#sharelinks-url").change(function(){l(t.$container,t.wizardData.spaceKey,false)});i("#sharelinks-title").change(function(){if(i("#sharelinks-title").siblings(".error").html!=""){f(t.$container,t.wizardData.spaceKey,false)}});var u=i(".dialog-wizard-page-description,.create-dialog-page-description");var q=AJS.Meta.get("base-url")+"/plugins/sharelinksbookmarklet/bookmarklet.action";var r=Confluence.Blueprints.Sharelinks.bookmarkletGuideOnWizard({bookmarkletActionURL:q});i(r).appendTo(u);Confluence.Blueprints.Sharelinks.autocompleteMultiLabel.build(i("#sharelinks-label"));i(".create-dialog-sharelinks-page1 .sharelinks-urlmacro-button").click(function(){alert("Drag this link to your toolbar");return false})}function c(q,r){i.ajax({type:"get",dataType:"json",url:Confluence.getContextPath()+"/rest/sharelinks/1.0/can-create-comment",data:{spaceKey:r.wizardData.spaceKey},success:function(t){if(!t){var s=i("#sharelinks-comment");s.attr("disabled","disabled");s.attr("placeholder","Sorry, you don\'t have permission to add comments in this space")}}})}Confluence.Blueprint.setWizard("com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-blueprint-item",function(q){q.on("post-render.sharelinks-page1",h);q.on("post-render.sharelinks-page1",c);q.on("submit.sharelinks-page1",a)});function b(u){var y=255;var q=180;var t=o(u.title,y);var s=i("#sharelinks-title");s.val(t);s.removeClass("placeholded");var x=i.extend({},u);x.title=o(x.title,q);var w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.noContent;var r;if(u.videoURL){r=Confluence.Blueprints.Sharelinks.previewVideoLink({linkMetaData:x});w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.video}else{r=Confluence.Blueprints.Sharelinks.previewLink({linkMetaData:x});if(u.imageURL){w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.image}else{if(u.title){w=Confluence.Blueprints.Sharelinks.Analytics.linkTypes.value.noVideoImage}}}var v=i(".create-dialog-page-description,.dialog-wizard-page-description");v.empty();i(r).appendTo(v);Confluence.Blueprints.Sharelinks.Analytics.triggerLinkTypes(w)}function o(r,q){if(null!=r&&q<r.length){r=r.substring(0,q-1)+"\u2026"}return r}function m(r,q){r.attr("disabled","disabled");q.attr("disabled","disabled")}function n(r,q){r.removeAttr("disabled");q.removeAttr("disabled")}function l(z,w,s){var r=i("#sharelinks-url"),v=r.val(),q=i("#sharelinks-title");v=i.trim(v);if(v){var x=Confluence.getContextPath()+"/rest/sharelinks/1.0/link";if(v!==e){e=v;var t=i(".create-dialog-page-description,.dialog-wizard-page-description").empty();var y=Confluence.Blueprints.Sharelinks.previewLoading();var A=i(y).appendTo(t);m(r,q);i.ajax({type:"get",url:x,data:{url:v},success:function(B,C){A.remove();b(B);d=false;g(z,w);n(r,q)},error:function(E,B,D){n(r,q);if(400==E.status){A.remove();d=true;k(z,false)}else{A.remove();var C=Confluence.Blueprints.Sharelinks.previewError();i(C).appendTo(t);d=false;g(z,w)}}});var u;if(s){u=Confluence.Blueprints.Sharelinks.Analytics.inputTypes.value.pasteUrl}else{u=Confluence.Blueprints.Sharelinks.Analytics.inputTypes.value.typeUrl}Confluence.Blueprints.Sharelinks.Analytics.triggerInputTypes(u)}}}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-analytics.js' */
Confluence.Blueprints.Sharelinks.Analytics={inputTypes:{name:"blueprints.sharelinks.input",value:{pasteUrl:{type:"paste-url"},typeUrl:{type:"type-url"}}},linkTypes:{name:"blueprints.sharelinks.link",value:{video:{link:"video"},image:{link:"image"},noVideoImage:{link:"no-video-image"},noContent:{link:"no-content"}}},errorTypes:{name:"blueprints.sharelinks.error",value:{duplicatedPage:{error:"page-duplicated"}}},submitData:{name:"blueprints.sharelinks.submit",value:{editTitle:{submit:"edit-title"},noEditTitle:{submit:"no-edit-title"},comment:{submit:"comment"},noComment:{submit:"no-comment"},share:{submit:"share"},noShare:{submit:"no-share"}}},triggerInputTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.inputTypes.name,properties:a})},triggerLinkTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.linkTypes.name,properties:a})},triggerErrorTypes:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.errorTypes.name,properties:a})},triggerSubmitData:function(a){AJS.EventQueue=AJS.EventQueue||[];AJS.EventQueue.push({name:Confluence.Blueprints.Sharelinks.Analytics.submitData.name,properties:a})}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/soy/sharelinks-label.soy' */
// This file was automatically generated from sharelinks-label.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Blueprints == 'undefined') { Confluence.Blueprints = {}; }
if (typeof Confluence.Blueprints.Sharelinks == 'undefined') { Confluence.Blueprints.Sharelinks = {}; }


Confluence.Blueprints.Sharelinks.labelResult = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - add a new topic",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-business-blueprints:sharelinks-resources', location = 'com/atlassian/confluence/plugins/sharelinks/js/sharelinks-label.js' */
Confluence.Blueprints.Sharelinks.autocompleteMultiLabel=(function(a){function b(c){c.auiSelect2(Confluence.UI.Components.LabelPicker.build({formatInputTooShort:function(){return "Start typing to search for a topic"},formatResult:function(d){return Confluence.Blueprints.Sharelinks.labelResult({label:{labelName:d.text,isNew:d.isNew}})}}))}return{build:b}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  var param5 = new soy.StringBuilder('<ul class="aui-list-truncate">');
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5.append('<li><a href="', soy.$$escapeHtml(linkData7.link), '">', soy.$$escapeHtml(linkData7.label), '</a></li>');
  }
  param5.append('</ul>');
  aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5.toString()}, output);
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'adminshortcuts/adminshortcuts-cdn.js' */
AJS.toInit(function(){if(AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("rotp.admin.shortcuts")){NavLinks.AdminShortcuts.render()}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  if (opt_data.localShortcuts && opt_data.localShortcuts.length > 0) {
    navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}, output);
  }
  if (opt_data.remoteShortcuts != null) {
    if (opt_data.remoteShortcuts.length > 0) {
      output.append('<h2 class="projectshortcuts-heading">Related Links</h2>');
      navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentData(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'}), output);
    }
  } else {
    navlinks.templates.projectshortcuts.dialogLoading(null, output);
  }
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="', soy.$$escapeHtml(opt_data.logoUrl), '"><h2 class="dialog-title">', soy.$$escapeHtml(opt_data.title), '</h2></div><div class="project-content-wrapper">', opt_data.contentHtml, '</div></div>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<ul', (opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '', '>');
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output.append('<li', (shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '', '>');
    navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35, output);
    output.append('</li>');
  }
  output.append('</ul>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(opt_data.link), '"', (opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '', '>', soy.$$escapeHtml(opt_data.label), '</a>');
  return opt_sb ? '' : output.toString();
};


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="projectshortcuts-loading">', (opt_data != null && opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '', '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,h){var j,l={},o="key",b="name",k="entity-type";function n(r,p,q){try{h.trackEvent("projectshortcuts",r,p,q)}catch(s){AJS.log("failed to track analytics event, category: projectshortcuts, action: "+r+", label: "+p+", value: "+q)}}function f(u){var p=e(this),q=p.data(o),s=p.data(b),r=p.data(k);if(typeof q==="undefined"){return}u.preventDefault();j=new AJS.Dialog({width:600,keypressListener:function(w){if(w.which==jQuery.ui.keyCode.ESCAPE){j.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){j.remove();n("hide",h.getCurrentApplication())}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:s,logoUrl:i(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(j);if(!l[q]){l[q]={entity:{title:s},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+q,{entityType:r}).done(v);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+q,{entityType:r}).done(t).fail(function(){var w=j.getCurrentPanel().body.find(".project-content-wrapper");w.find(".projectshortcuts-loading").remove();AJS.messages.error(w,{body:"Could not retrieve remote project shortcuts",closeable:false});c(j)})}else{m(l[q])}function v(w){l[q].localShortcuts=w.shortcuts;m(l[q])}function t(w){l[q].remoteShortcuts=w.shortcuts;m(l[q])}n("show",h.getCurrentApplication())}function i(){return e(".project-shortcut-dialog-trigger img").attr("src")}function g(p){p.getCurrentPanel().body.find("a").unbind(".analytics").bind("click.analytics",function(){var q=this.attributes.href;n("navLinkFollowed",typeof q==="object"?q.value:q)})}function m(p){if(p.localShortcuts){j.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:p.entity.title,logoUrl:i(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(p)}));g(j);c(j)}}function a(r){var q=210;if(!r||r.length<=q){return r}var p=q;while(p>0&&r.charAt(p)!=" "){p--}if(p==0){p=q}r=r.substring(0,p);if(r.length>=p){r=r+"..."}return r}function c(p){var s=p.popup.element,r=s.find(".dialog-panel-body"),q=s.find(".dialog-components");r.height("auto");s.height(q.outerHeight()-1);e(".aui-shadow").remove()}function d(p,q){return e.ajax({url:p,cache:false,data:q,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'js/space-menu.js' */
AJS.toInit(function(a){var d=a(Confluence.Templates.BrowseSpaces.spacesLink());a("#space-directory-link").replaceWith(a(d));var b=a("#space-menu-link"),c=function(e){a("#space-menu-link-content").html(e.template);AJS.trigger("spacemenu-loaded");a("#create-space-header").click(function(){AJS.Analytics&&AJS.Analytics.triggerPrivacyPolicySafeEvent&&AJS.Analytics.triggerPrivacyPolicySafeEvent("create-space-from-header",{});Confluence.SpaceBlueprint.Dialog.launch();return false})};b.click(function(){if(!a("#space-menu-link-content .aui-dropdown2-section").length){a.ajax({url:Confluence.getContextPath()+"/rest/ia/1.0/spacesmenu",type:"GET",dataType:"json",cache:false,success:c})}return false});a("#space-menu-link-content").on("aui-dropdown2-show",function(){AJS.Analytics&&AJS.Analytics.triggerPrivacyPolicySafeEvent&&AJS.Analytics.triggerPrivacyPolicySafeEvent("open-space-menu",{})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:spacemenu-resources', location = 'soy/space-menu.soy' */
// This file was automatically generated from space-menu.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.BrowseSpaces == 'undefined') { Confluence.Templates.BrowseSpaces = {}; }


Confluence.Templates.BrowseSpaces.spacesLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a id="space-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="#" aria-haspopup="true" aria-owns="space-menu-link-content" title="', soy.$$escapeHtml("Spaces"), '"><span class="browse">', soy.$$escapeHtml("Spaces"), '</span><span class="aui-icon-dropdown"></span></a><div id="space-menu-link-content" class="aui-dropdown2 aui-style-default aui-dropdown2-in-header" aria-hidden="false"></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-space-ia:space-ia-analytics', location = 'js/space-ia-analytics.js' */
(function(d){var c=RegExp("(.+[?&])src=.+?(&.+|$)");var e;if(AJS.Confluence.Analytics&&AJS.Confluence.Analytics.setAnalyticsSource){e=AJS.Confluence.Analytics.setAnalyticsSource}else{e=function(h,i){if(b()){_.each(h,function(j){d(j).attr("href",g(d(j).attr("href"),i))})}}}function g(h,j){if(h&&(h.charAt(0)!="#")){var i=c.exec(h);if(!i){if(h.indexOf("?")>-1){h=h+"&src="+j}else{h=h+"?src="+j}}else{h=i[1]+"src="+j+i[2]}}return h}function b(){var h=d(document.getElementsByTagName("script"));var i=false;h.each(function(k,j){if(d(j).attr("src")&&d(j).attr("src").indexOf("google-analytics.com/ga.js")!=-1){i=true;return false}});return i}function f(){var i=d(".acs-side-bar a:not(.external_link a, #acs-configure-link)");e(i,"sidebar");var h=d(".quick-links-section li:not(.external_link) a");e(h,"spaceshortcut");var j=d(".ia-secondary-container a:not(.more-children-link)");if(d(".ia-secondary-container").data("tree-type")=="pages"){e(j,"contextnavchildmode")}else{if(d(".ia-secondary-container").data("tree-type")=="page-tree"){e(j,"contextnavpagetreemode")}else{e(j,"contextnav")}}}function a(h){return function(){AJS.Analytics&&AJS.Analytics.triggerPrivacyPolicySafeEvent&&AJS.Analytics.triggerPrivacyPolicySafeEvent("space-ia-nav",{linkType:h})}}AJS.bind("sidebar.exit-configure-mode",f);AJS.bind("sidebar.flyout-triggered",function(i,h){a("flyout-triggered."+h.flyout)()});AJS.bind("spacemenu-loaded",function(){e(d("#space-menu-link-content a"),"spacemenu")});AJS.bind("sidebar.spacetools-loaded",function(){e(d("#inline-dialog-space-tools a:not(.configure-sidebar)"),"spacetools")});AJS.bind("pagetree-children-loaded",f);AJS.toInit(function(h){h(".ia-secondary-container .more-children-link").click(a("context-nav.more-children"));f()})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.adaptavist.confluence.contentFormattingMacros:clickable-resources', location = 'js/clickable.js' */
jQuery(function(a){a(".clickable").live("click",function(c){if(a(c.target).closest("a[href]").length===0&&a(c.target).closest(".clickable").length===1){var b=a(this).attr("href")||a("a[href]:first",this).attr("href");if(b){location.href=b}}})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(f){var j=AJS.$.ajax;var h="atlassian-analytics";var e=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var d=null;var m=null;var c=null;var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var s=Math.random()*16|0,q=t=="x"?s:(s&3|8);return q.toString(16)});var a=function(){var q="unknown";if(document.body.id=="jira"){q="jira"}else{if(document.body.id=="com-atlassian-confluence"){q="confluence"}}m=h+"."+q;c=m+".lock"};var o=function(){if(store.get(c)){return false}store.set(c,b);return(store.get(c)===b)};var k=function(){store.set(c,null)};var g=function(){var r=[],t,u,q,s;if(AJS.EventQueue.length==0){return}r=store.get(m)||r;for(q=0,s=AJS.EventQueue.length;q<s;++q){u=AJS.EventQueue[q];if(u.name){t={name:u.name,properties:u.properties,analyticsEnabled:u.analyticsEnabled,time:u.time||0};r.push(t)}}AJS.EventQueue.length=0;store.set(m,r)};var l=function(){var r;if(!o()){return}g();r=store.get(m);if(r&&r.length){store.remove(m);k();var s=new Date().getTime();for(var q=0;q<r.length;q++){if(r[q].time>0){r[q].timeDelta=r[q].time-s}else{r[q].timeDelta=q-r.length}delete r[q].time}d=j({type:"POST",url:e+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(r),contentType:"application/json",dataType:"json"});d.fail(function(){AJS.EventQueue.concat(r);g()})}else{k()}};var n=function(){if(d&&!(d.state()==="resolved"||d.state()==="rejected")){d.abort()}};AJS.EventQueue=AJS.EventQueue||[];var i=Array.prototype.push;AJS.EventQueue.push=function(q){q.time=new Date().getTime();i.call(AJS.EventQueue,q)};AJS.toInit(function(){a();setTimeout(l,500);setInterval(l,5000);p()});f(window).unload(function(){n();g()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(q,r){AJS.EventQueue.push({name:q,properties:r,analyticsEnabled:true})}};AJS.bind("analytics",function(q,r){AJS.EventQueue.push({name:r.name,properties:r.data})});AJS.bind("analyticsEvent",function(q,r){AJS.EventQueue.push({name:r.name,properties:r.data})});var p=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var r=AJS.$(":contains(Enable Atlassian analytics)");if(r.size()>0){var q=r[r.size()-2];if(q){q.remove()}}}}}}(AJS.$));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.analytics.analytics-client:policy-update', location = 'js/policy-update.js' */

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/js/request-access.js' */
AJS.toInit(function(e){var b=AJS.Meta.get("page-id"),c=e("#page-restricted-container"),a=AJS.Meta.get("remote-user"),d=e("#page-restricted-container button");if(c.length){e("#breadcrumbs").hide();e("#title-text.with-breadcrumbs").hide();if(d.length){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.request.access.to.page.view",data:{pageId:b,requestAccessUser:a}})}}d.click(function(){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.request.access.to.page",data:{pageId:b,requestAccessUser:a}});d.attr("aria-disabled","true");var f,g=e(Confluence.Request.Access.loading({}));d.replaceWith(g);e.ajax({url:Confluence.getContextPath()+"/rest/request-access/latest/page/restriction/"+b,success:function(h){f=e(Confluence.Request.Access.result({success:true,recipient:h}));c.removeClass("page-restricted");c.addClass("access-requested")},error:function(h,i){f=e(Confluence.Request.Access.result({success:false}))},complete:function(){g.replaceWith(f);Confluence.Binder.userHover()}})})})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/js/grant-access.js' */
AJS.toInit(function(d){var a=AJS.Meta.get("page-id"),f=AJS.Meta.get("remote-user"),h=j("username"),e=j("userFullName");var c=e.split("+");e=c.join(" ");var g=d("#system-content-items");var k=d("#content-metadata-page-restrictions").is(":visible");if(!g.length||!k||!j("grantAccess")){return}var b=d(Confluence.Request.Access.loading());var i=AJS.InlineDialog(g,"grantAccessDialog",function(m,l,n){m.css({padding:"20px"}).html(Confluence.Grant.Access.dialog({requestAccessUsername:h,requestAccessUserFullName:e}));m.on("click",".aui-button.grant-access",function(q){q.stopPropagation();var p=m.find(".actions-result");p.replaceWith(b);AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.grant.access.to.page",data:{pageId:a,grantAccessUser:f,requestAccessUser:h}});var o="",r=true;d.ajax({url:Confluence.getContextPath()+"/rest/request-access/latest/page/restriction/"+a,type:"POST",contentType:"application/json; charset=utf-8",data:h,success:function(t,u,s){if(s.status==202){o="Access was already granted to the user."}else{o="Access was granted, a notification to the user will be sent."}},error:function(s){r=false;if(s.status==412){o="Access was granted, but there is not a mail server configured so the notification could not be sent."}else{if(s.status==502){o="Access was granted, but an unexpected error happened while sending the notification."}else{o="Sorry, there was an unexpected error while granting access."}}},complete:function(s){b.replaceWith(d(Confluence.Grant.Access.result({success:r,message:o})));setTimeout(function(){i.hide()},4000)}})});m.on("click",".aui-button.deny-access",function(o){AJS.trigger("analyticsEvent",{name:"confluence.request.access.plugin.deny.access.to.page",data:{pageId:a,grantAccessUser:f,requestAccessUser:h}});i.hide()});n();return false},{offsetY:2,offsetX:0,width:350,hideDelay:null,noBind:true,hideCallback:function(){setTimeout(i.hide(),5000)}});i.show();function j(l){l=l.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+l+"=([^&#]*)"),m=n.exec(location.search);return m==null?"":decodeURIComponent(m[1].replace(/\+/g," "))}})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/templates/soy/request-access.soy' */
// This file was automatically generated from request-access.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Request == 'undefined') { Confluence.Request = {}; }
if (typeof Confluence.Request.Access == 'undefined') { Confluence.Request.Access = {}; }


Confluence.Request.Access.result = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="request-access">');
  if (opt_data.success) {
    var usernameLink__soy6 = new soy.StringBuilder();
    Confluence.Request.Access.usernameLink({user: opt_data.recipient}, usernameLink__soy6);
    usernameLink__soy6 = usernameLink__soy6.toString();
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-approve" data-unicode="UTF+E005" original-title=""></span><p class="title">', AJS.format("Your request has been sent to {0}. If approved you will receive an email shortly.",usernameLink__soy6), '</p>');
  } else {
    output.append('<span class="aui-icon aui-icon-small aui-iconfont-error" data-unicode="UTF+E011" original-title=""></span><p class="title">', soy.$$escapeHtml("Your request for access has not been sent. Contact your space admin."), '</p>');
  }
  output.append('</div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Request.Access.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(""), '/display/~', soy.$$escapeUri(opt_data.user.name), '" class="url fn confluence-userlink" title data-username="', soy.$$escapeHtml(opt_data.user.name), '">', soy.$$escapeHtml(opt_data.user.fullName), '</a>');
  return opt_sb ? '' : output.toString();
};


Confluence.Request.Access.loading = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class=\'aui-icon aui-icon-wait\'>', soy.$$escapeHtml("Loading, please wait"), '</span>"');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-request-access-plugin:confluence-request-access-plugin-resources', location = '/templates/soy/grant-access.soy' */
// This file was automatically generated from grant-access.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Grant == 'undefined') { Confluence.Grant = {}; }
if (typeof Confluence.Grant.Access == 'undefined') { Confluence.Grant.Access = {}; }


Confluence.Grant.Access.dialog = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="grant-access-dialog">');
  var usernameLink__soy4 = new soy.StringBuilder();
  Confluence.Grant.Access.usernameLink({username: opt_data.requestAccessUsername, userFullName: opt_data.requestAccessUserFullName}, usernameLink__soy4);
  usernameLink__soy4 = usernameLink__soy4.toString();
  output.append('<h2 class="grant-access-title">', AJS.format("{0} requested access to view the page",usernameLink__soy4), '</h2><p class="grant-access-message">', soy.$$escapeHtml("Grant access to the page, or deny it explicitly."), '</p><div class="actions-result"><button class="aui-button grant-access">', soy.$$escapeHtml("Grant access"), '</button><button class="aui-button aui-button-link deny-access">', soy.$$escapeHtml("Deny"), '</button><div></div>');
  return opt_sb ? '' : output.toString();
};


Confluence.Grant.Access.result = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<span class="aui-icon aui-icon-small aui-iconfont-', (opt_data.success) ? 'approve' : 'error', '" data-unicode="UTF+E011" original-title=""></span><p class="title">', soy.$$escapeHtml(opt_data.message), '</p>');
  return opt_sb ? '' : output.toString();
};


Confluence.Grant.Access.usernameLink = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<a href="', soy.$$escapeHtml(""), '/display/~', soy.$$escapeHtml(opt_data.username), '" class="url fn" title data-username="', soy.$$escapeHtml(opt_data.username), '">', soy.$$escapeHtml(opt_data.userFullName), '</a>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-spinner', location = 'js-vendor/spin/spin.js' */
!function(I,K,A){var E=["webkit","Moz","ms","O"],P={},O;function G(Q,T){var R=K.createElement(Q||"div"),S;for(S in T){R[S]=T[S]}return R}function H(R){for(var Q=1,S=arguments.length;Q<S;Q++){R.appendChild(arguments[Q])}return R}var J=function(){var Q=G("style",{type:"text/css"});H(K.getElementsByTagName("head")[0],Q);return Q.sheet||Q.styleSheet}();function C(U,Q,V,Y){var R=["opacity",Q,~~(U*100),V,Y].join("-"),S=0.01+V/Y*100,X=Math.max(1-(1-U)/Q*(100-S),U),W=O.substring(0,O.indexOf("Animation")).toLowerCase(),T=W&&"-"+W+"-"||"";if(!P[R]){J.insertRule("@"+T+"keyframes "+R+"{0%{opacity:"+X+"}"+S+"%{opacity:"+U+"}"+(S+0.01)+"%{opacity:1}"+(S+Q)%100+"%{opacity:"+U+"}100%{opacity:"+X+"}}",J.cssRules.length);P[R]=1}return R}function N(T,U){var S=T.style,Q,R;if(S[U]!==A){return U}U=U.charAt(0).toUpperCase()+U.slice(1);for(R=0;R<E.length;R++){Q=E[R]+U;if(S[Q]!==A){return Q}}}function F(Q,S){for(var R in S){Q.style[N(Q,R)||R]=S[R]}return Q}function M(S){for(var Q=1;Q<arguments.length;Q++){var R=arguments[Q];for(var T in R){if(S[T]===A){S[T]=R[T]}}}return S}function L(Q){var R={x:Q.offsetLeft,y:Q.offsetTop};while((Q=Q.offsetParent)){R.x+=Q.offsetLeft,R.y+=Q.offsetTop}return R}var D={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",speed:1,trail:100,opacity:1/4,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};var B=function B(Q){if(!this.spin){return new B(Q)}this.opts=M(Q||{},B.defaults,D)};B.defaults={};M(B.prototype,{spin:function(X){this.stop();var b=this,Q=b.opts,R=b.el=F(G(0,{className:Q.className}),{position:Q.position,width:0,zIndex:Q.zIndex}),a=Q.radius+Q.length+Q.width,c,Z;if(X){X.insertBefore(R,X.firstChild||null);Z=L(X);c=L(R);F(R,{left:(Q.left=="auto"?Z.x-c.x+(X.offsetWidth>>1):parseInt(Q.left,10)+a)+"px",top:(Q.top=="auto"?Z.y-c.y+(X.offsetHeight>>1):parseInt(Q.top,10)+a)+"px"})}R.setAttribute("aria-role","progressbar");b.lines(R,b.opts);if(!O){var U=0,S=Q.fps,W=S/Q.speed,V=(1-Q.opacity)/(W*Q.trail/100),Y=W/Q.lines;(function T(){U++;for(var d=Q.lines;d;d--){var e=Math.max(1-(U+d*Y)%W*V,Q.opacity);b.opacity(R,Q.lines-d,e,Q)}b.timeout=b.el&&setTimeout(T,~~(1000/S))})()}return b},stop:function(){var Q=this.el;if(Q){clearTimeout(this.timeout);if(Q.parentNode){Q.parentNode.removeChild(Q)}this.el=A}return this},lines:function(S,U){var R=0,Q;function T(V,W){return F(G(),{position:"absolute",width:(U.length+U.width)+"px",height:U.width+"px",background:V,boxShadow:W,transformOrigin:"left",transform:"rotate("+~~(360/U.lines*R+U.rotate)+"deg) translate("+U.radius+"px,0)",borderRadius:(U.corners*U.width>>1)+"px"})}for(;R<U.lines;R++){Q=F(G(),{position:"absolute",top:1+~(U.width/2)+"px",transform:U.hwaccel?"translate3d(0,0,0)":"",opacity:U.opacity,animation:O&&C(U.opacity,U.trail,R,U.lines)+" "+1/U.speed+"s linear infinite"});if(U.shadow){H(Q,F(T("#000","0 0 4px #000"),{top:2+"px"}))}H(S,H(Q,T(U.color,"0 0 1px rgba(0,0,0,.1)")))}return S},opacity:function(R,Q,S){if(Q<R.childNodes.length){R.childNodes[Q].style.opacity=S}}});(function(){function Q(T,S){return G("<"+T+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',S)}var R=F(G("group"),{behavior:"url(#default#VML)"});if(!N(R,"transform")&&R.adj){J.addRule(".spin-vml","behavior:url(#default#VML)");B.prototype.lines=function(U,T){var S=T.length+T.width,a=2*S;function Z(){return F(Q("group",{coordsize:a+" "+a,coordorigin:-S+" "+-S}),{width:a,height:a})}var V=-(T.width+T.length)*2+"px",Y=F(Z(),{position:"absolute",top:V,left:V}),X;function W(c,b,d){H(Y,H(F(Z(),{rotation:360/T.lines*c+"deg",left:~~b}),H(F(Q("roundrect",{arcsize:T.corners}),{width:S,height:T.width,left:T.radius,top:-T.width>>1,filter:d}),Q("fill",{color:T.color,opacity:T.opacity}),Q("stroke",{opacity:0}))))}if(T.shadow){for(X=1;X<=T.lines;X++){W(X,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(X=1;X<=T.lines;X++){W(X)}return H(U,Y)};B.prototype.opacity=function(T,S,V,U){var W=T.firstChild;U=U.shadow&&U.lines||0;if(W&&S+U<W.childNodes.length){W=W.childNodes[S+U];W=W&&W.firstChild;W=W&&W.firstChild;if(W){W.opacity=V}}}}else{O=N(R,"animation")}})();if(typeof define=="function"&&define.amd){define(function(){return B})}else{I.Spinner=B}}(window,document);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.auiplugin:aui-experimental-spinner', location = 'js-vendor/jquery/jquery.spin.js' */
(function(A){A.fn.spin=function(E,D){var C,B;if(typeof E==="string"){if(!E in A.fn.spin.presets){throw new Error("Preset '"+E+"' isn't defined")}C=A.fn.spin.presets[E];B=D||{}}else{if(D){throw new Error("Invalid arguments. Accepted arguments:\n$.spin([String preset[, Object options]]),\n$.spin(Object options),\n$.spin(Boolean shouldSpin)")}C=A.fn.spin.presets.small;B=A.isPlainObject(E)?E:{}}if(window.Spinner){return this.each(function(){var G=A(this),F=G.data();if(F.spinner){F.spinner.stop();delete F.spinner}if(E===false){return }B=A.extend({color:G.css("color")},C,B);F.spinner=new Spinner(B).spin(this)})}else{throw"Spinner class not available."}};A.fn.spin.presets={small:{lines:12,length:3,width:2,radius:3,trail:60,speed:1.5},medium:{lines:12,length:5,width:3,radius:8,trail:60,speed:1.5},large:{lines:12,length:8,width:4,radius:10,trail:60,speed:1.5}};A.fn.spinStop=function(){if(window.Spinner){return this.each(function(){var C=A(this),B=C.data();if(B.spinner){B.spinner.stop();delete B.spinner}})}else{throw"Spinner class not available."}}})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/js/page-loading-indicator.js' */
Confluence.PageLoadingIndicator=function(b){function a(){return $(".confluence-page-loading-blanket",b)}function c(){return $(".confluence-loading-indicator",b)}return{show:function(){if(a().length===0){$(b).append(Confluence.Templates.pageLoadingIndicator())}a().show();c().spin({lines:12,length:8,width:4,radius:10,trail:60,speed:1.5,color:"#F0F0F0"})},hide:function(){c().stop();a().hide()},showUntilResolved:function(d,e){this.show();d.always(_.bind(this.hide,this));e&&d.fail(function(){AJS.messages.error(".confluence-page-loading-errors",{body:e})})},showUntilDialogVisible:function(d,f){var e=this,f=f||"An error has occurred connecting to the server. Please try again.";var g=$(".aui-dialog:visible");if(!g.length){e.show()}d.fail(function(){e.hide();AJS.messages.error(".confluence-page-loading-errors",{body:f})});AJS.bind("show.dialog",function(){e.hide()})},destroy:function(){b.remove(".confluence-page-loading-blanket")}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:page-loading-indicator', location = '/includes/soy/page-loading-indicator.soy' */
// This file was automatically generated from page-loading-indicator.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }


Confluence.Templates.pageLoadingIndicator = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="confluence-page-loading-errors"></div><div class="confluence-page-loading-blanket"><div class="aui-blanket"></div><div class="confluence-loading-indicator"></div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/deferred-dialog-loader.js' */
AJS.$(function(){var b={userStatus:{resource:"confluence.userstatus:userstatus-resources",selector:"#create-user-status-link",event:"deferred.userstatus.click"},movePageDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-page-dialog-link",event:"deferred.page-move.tools-menu"},movePageDialogEditor:{resource:"confluence.web.resources:page-move-resources",selector:"#rte-button-location",event:"deferred.page-move.editor"},moveBlogDialogTools:{resource:"confluence.web.resources:page-move-resources",selector:"#action-move-blogpost-dialog-link",event:"deferred.blog-move.tools-menu"}};var a=Confluence.PageLoadingIndicator($("body"));_.each(b,function(c){$("body").on("click",c.selector,function(g){var f=WRM.require("wr!"+c.resource,function(){AJS.trigger(c.event)});a.showUntilDialogVisible(f);var d=c.resource+".requested";AJS.Analytics?AJS.Analytics.triggerPrivacyPolicySafeEvent(d):AJS.trigger("analyticsEvent",{name:d});g.preventDefault()})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'confluence.web.resources:deferred-loaders', location = '/includes/js/page-permissions-deferred-loader.js' */
AJS.$(function(){var c=Confluence.PageLoadingIndicator($("body")),a="confluence.web.resources:page-permissions-editor";var b=function(f){var d=WRM.require("wr!"+a,function(){AJS.trigger("deferred.page.permissions")});c.showUntilDialogVisible(d,"There was an error loading the page restrictions. Please try again later.");f.preventDefault()};AJS.$("body").on("click","#rte-button-restrictions,#action-page-permissions-link",b);AJS.bind("system-content-metadata.open-restrictions-dialog",b)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.whatsnew:whats-new-resources', location = 'js/whats-new.js' */
AJS.toInit(function(d){var j=d("#whats-new-menu-link"),f,c,a,m,i,h,l=function(q){var o=!d(this).prop("checked");var n=AJS.Meta.get("context-path")+"/plugins/whatsnew/set.action";var p={isShownForUser:o};AJS.log("whatsnew > toggleDontShow > setting isShownForUser to: "+p.isShownForUser);AJS.safe.post(n,p,function(s,r){AJS.log("whatsnew > toggleDontShow > isShownForUser set to: "+s.isShownForUser)})},e=function(){if(!c){return}h&&clearTimeout(h);g();AJS.setVisible(c,true)},k=function(o){var n=new AJS.ConfluenceDialog({width:880,height:585,id:"whats-new-dialog",onCancel:function(){n.hide().remove();h&&clearTimeout(h)}});var q="What\u2019s New in Confluence {0}";var p=AJS.Meta.get("version-number").match(/^\d+\.\d+/);var s=AJS.format(q,p);n.addHeader(s);n.addPanel("default",Confluence.Templates.Whatsnew.dialogPanel());n.addCancel("Close",function(){n.hide().remove();h&&clearTimeout(h);return false});a=n.popup.element;if(AJS.Meta.get("remote-user")){n.page[n.curpage].buttonpanel.append(Confluence.Templates.Whatsnew.dialogTipPanel());a.find("#dont-show-whats-new").change(l).prop("checked",!o)}c=a.find("iframe");var r=AJS.Meta.get("whats-new-iframe-src-override");if(typeof(r)=="undefined"){r=j[0].href}c[0].src=r;c.load(e);m=a.find(".whats-new-timeout");return n},g=function(){if(i){i();i=null}f.addClass("hidden")},b=function(){var n=AJS.Meta.get("context-path")+"/plugins/whatsnew/get.action";d.getJSON(n,function(o){k(o.isShownForUser).show();f=a.find(".whats-new-throbber.hidden");f.removeClass("hidden");i=Raphael.spinner(f[0],80,"#666");h=setTimeout(function(){c=null;g();AJS.setVisible(m,true)},10000)})};j.click(function(n){n.preventDefault();d(this).removeClass("interactive");b()});AJS.Meta.getBoolean("show-whats-new")&&b()});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.whatsnew:whats-new-resources', location = 'templates/whats-new.soy' */
// This file was automatically generated from whats-new.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Whatsnew == 'undefined') { Confluence.Templates.Whatsnew = {}; }


Confluence.Templates.Whatsnew.dialogPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="whats-new-dialog-text"><div class="whats-new-throbber hidden"></div><div class="whats-new-timeout hidden"><div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span><strong>', soy.$$escapeHtml("Oops."), '</strong></p><p>', soy.$$escapeHtml(AJS.format("We\u2019re having trouble downloading the \x3ca target\x3d\x22_blank\x22 href\x3d\x22{0}\x22\x3eWhat\u2019s New content\x3c/a\x3e from the Atlassian website. This may be because you have a slow internet connection or that no internet connection is available.","https://docs.atlassian.com/confluence/docs-56/whatsnew/full")), '</p><p><a target="_blank" href="$req.contextPath/contactadministrators.action">', soy.$$escapeHtml("Contact an administrator"), '</a> &raquo;</p></div></div></div><iframe id="whats-new-iframe" class="hidden" frameborder="0"></iframe>');
  return opt_sb ? '' : output.toString();
};


Confluence.Templates.Whatsnew.dialogTipPanel = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="dialog-tip"><input id="dont-show-whats-new" type="checkbox" name="dontshow"><label for="dont-show-whats-new" type="checkbox"><span class="checkbox-label">', soy.$$escapeHtml("Don\u2019t show again"), ' </span></label><span>', soy.$$escapeHtml("(Access from \u2018Help\u2019 menu)"), '</span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.share-page:share-keyboard-shortcut-js-resources', location = 'js/resourceloader.js' */
AJS.toInit(function(a){AJS.I18n.get("com.atlassian.confluence.plugins.share-page")});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.refinedwiki.confluence.plugins.theme.original:shortcut-i18n', location = 'originaltheme/js/originaltheme.shortcut.help.js' */
(function(){AJS.toInit(function(){AJS.I18n.get("com.refinedwiki.confluence.plugins.theme.original")})})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.userprofile:profile-resource', location = 'javascript/userfield-autosuggest.js' */
AJS.toInit(function(a){jQuery(".upp-userfield-autosuggest").each(function(){var b=jQuery(this);b.autocomplete(contextPath+"/json/usersearch.action?query=",2,function(c){b.val(c.username)})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.userprofile:profile-webpanel-ressource', location = 'javascript/upp-webpanel.js' */
jQuery(document).ready(function(){if(jQuery("#com-atlassian-confluence.admin-body").length>0){return}if(jQuery("#personal-info-sidebar").length>0){jQuery(".sidebar-content").children().first().after(jQuery("#user-space-org-chart"));jQuery(".sidebar-collapse").height(jQuery("#personal-info-sidebar").height())}else{if(jQuery(".page-item.profile-info").length>0){jQuery(".profile-view-mode").after(jQuery("#user-space-org-chart"))}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-almond', location = 'gliffy/amd/AlmondNoConflictPrefix.js' */
window.__require=window.require;window.__requirejs=window.requirejs;window.__define=window.define;
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-almond', location = 'thirdparty/almond.js' */
var requirejs,require,define;(function(e){var h,a,l,m,d={},c={},s={},p={},k=Object.prototype.hasOwnProperty,i=[].slice,j=/\.js$/;function t(u,v){return k.call(u,v)}function n(x,v){var F,B,z,C,G,y,I,J,E,D,A,H=v&&v.split("/"),w=s.map,u=(w&&w["*"])||{};if(x&&x.charAt(0)==="."){if(v){x=x.split("/");G=x.length-1;if(s.nodeIdCompat&&j.test(x[G])){x[G]=x[G].replace(j,"")}x=H.slice(0,H.length-1).concat(x);for(E=0;E<x.length;E+=1){A=x[E];if(A==="."){x.splice(E,1);E-=1}else{if(A===".."){if(E===1&&(x[2]===".."||x[0]==="..")){break}else{if(E>0){x.splice(E-1,2);E-=2}}}}}x=x.join("/")}else{if(x.indexOf("./")===0){x=x.substring(2)}}}if((H||u)&&w){F=x.split("/");for(E=F.length;E>0;E-=1){B=F.slice(0,E).join("/");if(H){for(D=H.length;D>0;D-=1){z=w[H.slice(0,D).join("/")];if(z){z=z[B];if(z){C=z;y=E;break}}}}if(C){break}if(!I&&u&&u[B]){I=u[B];J=E}}if(!C&&I){C=I;y=J}if(C){F.splice(0,y,C);x=F.join("/")}}return x}function r(u,v){return function(){var w=i.call(arguments,0);if(typeof w[0]!=="string"&&w.length===1){w.push(null)}return a.apply(e,w.concat([u,v]))}}function o(u){return function(v){return n(v,u)}}function f(u){return function(v){d[u]=v}}function g(v){if(t(c,v)){var u=c[v];delete c[v];p[v]=true;h.apply(e,u)}if(!t(d,v)&&!t(p,v)){throw new Error("No "+v)}return d[v]}function q(v){var w,u=v?v.indexOf("!"):-1;if(u>-1){w=v.substring(0,u);v=v.substring(u+1,v.length)}return[w,v]}l=function(v,u){var w,y=q(v),x=y[0];v=y[1];if(x){x=n(x,u);w=g(x)}if(x){if(w&&w.normalize){v=w.normalize(v,o(u))}else{v=n(v,u)}}else{v=n(v,u);y=q(v);x=y[0];v=y[1];if(x){w=g(x)}}return{f:x?x+"!"+v:v,n:v,pr:x,p:w}};function b(u){return function(){return(s&&s.config&&s.config[u])||{}}}m={require:function(u){return r(u)},exports:function(u){var v=d[u];if(typeof v!=="undefined"){return v}else{return(d[u]={})}},module:function(u){return{id:u,uri:"",exports:d[u],config:b(u)}}};h=function(v,F,E,D){var y,C,z,u,x,A=[],w=typeof E,B;D=D||v;if(w==="undefined"||w==="function"){F=!F.length&&E.length?["require","exports","module"]:F;for(x=0;x<F.length;x+=1){u=l(F[x],D);C=u.f;if(C==="require"){A[x]=m.require(v)}else{if(C==="exports"){A[x]=m.exports(v);B=true}else{if(C==="module"){y=A[x]=m.module(v)}else{if(t(d,C)||t(c,C)||t(p,C)){A[x]=g(C)}else{if(u.p){u.p.load(u.n,r(D,true),f(C),{});A[x]=d[C]}else{throw new Error(v+" missing "+C)}}}}}}z=E?E.apply(d[v],A):undefined;if(v){if(y&&y.exports!==e&&y.exports!==d[v]){d[v]=y.exports}else{if(z!==e||!B){d[v]=z}}}}else{if(v){d[v]=E}}};requirejs=require=a=function(x,y,u,v,w){if(typeof x==="string"){if(m[x]){return m[x](y)}return g(l(x,y).f)}else{if(!x.splice){s=x;if(s.deps){a(s.deps,s.callback)}if(!y){return}if(y.splice){x=y;y=u;u=null}else{x=e}}}y=y||function(){};if(typeof u==="function"){u=v;v=w}if(v){h(e,x,y,u)}else{setTimeout(function(){h(e,x,y,u)},4)}return a};a.config=function(u){return a(u)};requirejs._defined=d;define=function(u,v,w){if(typeof u!=="string"){throw new Error("See almond README: incorrect module build, no module name")}if(!v.splice){w=v;v=[]}if(!t(d,u)&&!t(c,u)){c[u]=[u,v,w]}};define.amd={jQuery:true}}());
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-almond', location = 'gliffy/amd/AlmondNoConflictPostfix.js' */
if(window.__require){window.require=window.__require;window.requirejs=window.__requirejs;window.define=window.__define}else{delete window.define.amd};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-almond', location = 'gliffy/amd/ApexModuleManager.js' */
define("gliffy/amd/apexModuleManager",function(){var a=[];return{reset:function(){a=[]},define:function(){a.push(arguments[0]);window.define.apply(window,arguments)},instantiateAll:function(){a.forEach(function(b){require(b)})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-almond', location = 'gliffy/confluence/AlmondRegistrations.js' */
delete define.amd;define("jquery",[],function(){return jQuery});define("underscore",[],function(){return _});define("selectize",[],function(){return Selectize});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/Util.js' */
define("gliffy/util",[],function(){return{format:function(b){var a=Array.prototype.slice.call(arguments,1);return b.replace(/{(\d+)}/g,function(c,d){return(typeof a[d]!="undefined")?a[d]:"undefined"})},htmlDecode:function(a){var b=document.createElement("div");b.innerHTML=a;return b.childNodes.length===0?"":b.childNodes[0].nodeValue}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/Url.js' */
define("gliffy/url",{buildPath:function(a){return a.reduce(function(b,c){if(c==null){return b}else{if(b){return b+"/"+encodeURIComponent(c)}}return encodeURIComponent(c)},"")},buildQuery:function(a){return _.reduce(a,function(b,d,c){if(d==null){return b}else{if(b){return b+"&"+encodeURIComponent(c)+"="+encodeURIComponent(d)}}return encodeURIComponent(c)+"="+encodeURIComponent(d)},"")},buildPathAndQuery:function(a,c){var b=[this.buildPath(a)];if((typeof c!=="undefined")&&Object.keys(c).length>0){b.push(this.buildQuery(c))}return b.join("?")},buildRootedPathAndQuery:function(b,a,c){return b+"/"+this.buildPathAndQuery(a,c)},parse:function(b){var f=/^(?:([a-z]*):)?(?:\/\/)?(?:([^:@]*)(?::([^@]*))?@)?([0-9a-z-._]+)?(?::([0-9]*))?(\/[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/i;var g=b.match(f)||[];var e={url:b,scheme:g[1],user:g[2],pass:g[3],host:g[4],port:g[5]&&+g[5],path:g[6],query:g[7],hash:g[8]};e.queryParams={};var c=e.query.split("&");for(var a=0;a<c.length;a++){var d=c[a].split("=");e.queryParams[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return e}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/controls/alert/Alert.soy' */
// This file was automatically generated from Alert.soy.
// Please don't edit this file by hand.

if (typeof gliffySoy == 'undefined') { var gliffySoy = {}; }
if (typeof gliffySoy.controls == 'undefined') { gliffySoy.controls = {}; }
if (typeof gliffySoy.controls.alert == 'undefined') { gliffySoy.controls.alert = {}; }


gliffySoy.controls.alert.CompleteAlert = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="gliffy-alert-save-as-complete" class="alert alert-success gliffy-alert"><a href="#" class="close" data-dismiss="alert">&times;</a><strong>', soy.$$escapeHtml(opt_data.diagramName), '</strong>&nbsp;', soy.$$escapeHtml("successfully saved to page"), '&nbsp;<a class="gliffy-alert-link" href="', soy.$$escapeHtml(opt_data.linkUrl), '" target="_blank"><img class="page-icon"/><strong>&nbsp;', soy.$$escapeHtml(opt_data.pageName), '</strong></a><br/>', soy.$$escapeHtml("in space"), '&nbsp;<strong>', soy.$$escapeHtml(opt_data.spaceName), '</strong></div>');
  return opt_sb ? '' : output.toString();
};


gliffySoy.controls.alert.ErrorAlert = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div id="gliffy-alert-save-as-error" class="alert alert-error gliffy-alert"><a href="#" class="close" data-dismiss="alert">&times;</a>', opt_data.errorDetail, '</div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/ObjectValidatorFactory.js' */
define("gliffy/objectValidatorFactory",["jquery","underscore","gliffy/util"],function(d,b,a){var c=function(f){var e=function(g,i,h){throw new Error(a.format("{0} {1} value ({2}) failed predicate: {3}",f.description,g,d.isFunction(i)?"[function]":i,h))};if(!b.isString(f.description)){f.description="ObjectValidator construction parameters";e("description",f.description,"Expected value to be a string.")}if(typeof f.keyToPredicateMap==="undefined"){f.description="ObjectValidator construction parameters";e("keyToPredicateMap",f.keyToPredicateMap,"Expected value to be defined.")}d.each(f.keyToPredicateMap,function(h,g){if(!b.isFunction(g.func)){e("keyToPredicateMap "+h+".func",g.func,"Expected value to be a function.")}if(!b.isString(g.failureMessage)){e("keyToPredicateMap "+h+".failureMessage",g.failureMessage,"Expected value to be a string.")}});this._={keyToPredicateMap:f.keyToPredicateMap,fail:e}};c.prototype.validate=function(f){var e=this;if(f==null){throw new Error("ObjectValidator.validate() requires non-null input.")}d.each(e._.keyToPredicateMap,function(h,g){if(!g.func(f[h])){e._.fail(h,f[h],g.description)}})};return{create:function(e){return new c(e)},predicates:{isString:{func:b.isString,failureMessage:"Expected value to be a string."},isNumber:{func:b.isNumber,failureMessage:"Expected value to be a number."},isFunction:{func:b.isFunction,failureMessage:"Expected value to be a function."},isArray:{func:b.isArray,failureMessage:"Expected value to be an array."},isTruthy:{func:function(e){return e==true},failureMessage:"Expected value to be truthy."},isFalsey:{func:function(e){return e==false},failureMessage:"Expected value to be falsey."},isDefinedAndNotNull:{func:function(e){return e!=null},failureMessage:"Expected value to be defined and not null."},containsAnyKey:{func:function(e){return Object.keys(e).length>0},failureMessage:"Expected value to contain at least one key."}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/confluence/PageFacade.js' */
define("gliffy/confluence/pageFacade",["jquery","gliffy/confluence/rest/webRequestPromiseFactory"],function(g,h){var i=function(m){var o=h.buildGetPageContentPromise(AJS.params.pageId);var p=function(u){var t=u.body.storage.value;var v=g("<div/>").append(t);var r=v.find("ac\\:parameter[ac\\:name='']");r.remove();var s=v.find("p:has(ac\\:parameter[ac\\:name='version'])p:has(ac\\:parameter[ac\\:name='name'])").filter(function(){var y=g(this).find("ac\\:parameter[ac\\:name='version']").text()===m.version.toString();var x=g(this).find("ac\\:parameter[ac\\:name='name']").text()===m.name;var w=g(this).find("ac\\:parameter[ac\\:name='pageid']");var z=((w.length===0)&&(AJS.params.pageId===m.ownerPageId))||(w.text()===m.ownerPageId.toString());return y&&x&&z});var q=s.find("ac\\:parameter[ac\\:name='version']");q.remove();u.body.storage.value=v.html();u.version.number=u.version.number+1;if(u.ancestors){if(u.ancestors.length===0){delete u.ancestors}else{if(u.ancestors.length>1){u.ancestors=[u.ancestors.pop()]}}}return h.buildPutPageContentPromise(AJS.params.pageId,u)};var n=function(){window.location.reload()};g.when(o).then(p).then(n)};var c=function(m){var o=AJS.format("{0}/rpc/json-rpc/confluenceservice-v2",AJS.Confluence.getContextPath());var p=o+"/getPage";var n=[AJS.params.pageId];g.ajax({type:"POST",url:p,contentType:"application/json",data:JSON.stringify(n),success:function(r){var u=r.content;var w=g("<div/>").append(u);var t=w.find("ac\\:parameter[ac\\:name='']");t.remove();var v=w.find("p:has(ac\\:parameter[ac\\:name='version'])p:has(ac\\:parameter[ac\\:name='name'])").filter(function(){var z=g(this).find("ac\\:parameter[ac\\:name='version']").text()===String(m.version);var y=g(this).find("ac\\:parameter[ac\\:name='name']").text()===m.name;var x=g(this).find("ac\\:parameter[ac\\:name='pageid']");var A=((x.length===0)&&(AJS.params.pageId===m.ownerPageId))||(x.text()===m.ownerPageId.toString());return z&&y&&A});var s=v.find("ac\\:parameter[ac\\:name='version']");s.remove();var q={jsonrpc:"2.0",method:"updatePage",params:[{id:r.id,space:r.space,title:r.title,parentId:r.parentId,version:r.version,content:w.html()},{versionComment:"Unpinned macro version",minorEdit:false}],id:AJS.params.pageId};g.ajax({type:"POST",contentType:"application/json",url:o,data:JSON.stringify(q),success:function(){window.location.reload()}})}})};var d=function(m){if(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor()){var n;if(m.ownerPageId===AJS.params.pageId){n=AJS.format('.editor-inline-macro[data-macro-parameters="name={0}|version={1}"]',m.name,m.version)}else{n=AJS.format('.editor-inline-macro[data-macro-parameters="name={0}|pageid={2}|version={1}"]',m.name,m.version,m.ownerPageId)}var o=AJS.Rte.getEditor().dom.select(n);AJS.$.each(o,function(r,p){var q=k(g(p));q.version=undefined;a(q,p)})}};var f=function(m){var n=g.extend(true,{},m);if(n.ownerPageId!==AJS.params.pageId){n.pageid=n.ownerPageId}delete n.ownerPageId;if(n.version===0){delete n.version}if(n.size==="O"||n.size==="L"){delete n.size}if(!n.border){delete n.border}if(n.chrome==="full"){delete n.chrome}if(!!n.html5){delete n.html5}return n};var b=function(m){return{ownerPageId:m.pageid||AJS.params.pageId,name:m.name,version:m.version,size:m.size,border:m.border,chrome:m.chrome,html5:m.html5}};var e=function(m){return{ownerPageId:m.data("ceoid")||AJS.params.pageId,name:m.data("filename"),version:m.data("version"),size:m.data("size"),border:m.data("border"),chrome:m.data("chrome"),html5:m.data("html5")}};var a=function(n,o){if(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor()){var m,p={contentId:Confluence.Editor.getContentId(),macro:{name:"gliffy",params:f(n),defaultParameterValue:"",body:""}};if(g.browser.msie&&AJS.$.Deferred){tinymce.confluence.NodeUtils.replaceNode=replaceNode}AJS.Rte.BookmarkManager.restoreBookmark();m=tinymce.confluence.MacroUtils.insertMacro(p,o);if(m&&m.then){m.then(function(){if(g.browser.msie){tinymce.confluence.NodeUtils.replaceNode=j}},function(){if(g.browser.msie){tinymce.confluence.NodeUtils.replaceNode=j}})}l();return m}else{throw"addDiagramReference not yet implemented for non-RTE"}};var k=function(o){if(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor()){var n={};var m=o.data&&o.data("macro-parameters");m=m||(o.dataset&&o.dataset.macroParameters);if(m){g.each(m.split("|"),function(p,q){var r=q.split("=");n[r[0]]=r[1]})}return b(n)}else{return e(o)}};var l=function(){if(AJS.Rte&&typeof AJS.Rte.getEditorFrame==="function"&&AJS.Rte.getEditorFrame()){g(AJS.Rte.getEditorFrame()).focus()}var m=g("#gliffy-editor")[0];if(m){m.contentWindow.focus()}};var j=(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor())?tinymce.confluence.NodeUtils.replaceNode:null;return{unpinDiagramReferenceVersion:function(m){if(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor()){d(m)}else{var o=AJS.version.split(".");var n=!(parseInt(o[0])>=5&&parseInt(o[1])>=4);if(n){c(m)}else{i(m)}}},addDiagramReference:a,getDiagramReference:k,getDiagramReferences:function(){var m=[];var n;if(AJS.Rte&&typeof AJS.Rte.getEditor==="function"&&AJS.Rte.getEditor()){n=g("iframe").contents().find(".editor-inline-macro[data-macro-name='gliffy']")}else{n=g(".gliffy-container")}n.each(function(o,p){m.push(k(g(p)))});return m}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/confluence/rest/UrlFactory.js' */
define("gliffy/confluence/rest/urlFactory",["gliffy/url"],function(a){var c;if(typeof GLIFFY!=="undefined"&&GLIFFY.baseConfluenceUrl!==undefined&&GLIFFY.baseConfluenceUrl!==null){c=GLIFFY.baseConfluenceUrl}else{c=AJS.params.baseUrl}var b=c+"/rest/gliffy/1.0";return{buildPrependDiagramToPageUrl:function(d){return a.buildRootedPathAndQuery(b,["diagrams","saveas",d.sourcePageId,d.sourceDiagramName],{sourceDiagramVersion:d.sourceDiagramVersion,targetPageId:d.targetPageId,space:d.targetSpaceKey,targetDiagramName:d.targetDiagramName,targetPageTitle:d.targetPageTitle,includeAlertLinkUrlParams:d.includeAlertLinkUrlParams})},buildGetSpacesUrl:function(e,d){return a.buildRootedPathAndQuery(b,["spaces"],{start:e,limit:d})},buildSpaceSearchUrl:function(e,f,d){return a.buildRootedPathAndQuery(b,["spaces"],{searchTerm:e,start:f,limit:d});return b+"/"+pathAndQuery},buildPageSearchUrl:function(e,f,g,d){return a.buildRootedPathAndQuery(b,["page","search"],{searchTerm:e||"",start:g,limit:d,expand:"space",spaceKeys:f&&f.join(",")})},buildPageEditPermissionUrl:function(e,d){return AJS.format("{0}/ceo/{1}/permission",e,d)},buildGetDiagramsInPageUrl:function(d){return a.buildRootedPathAndQuery(b,["page",d,"diagrams"])},buildPageWithTitleExistsInSpaceUrl:function(e,d){return a.buildRootedPathAndQuery(b,["spaces",d,"pageExists"],{title:e})},buildUnlinkDiagramUrl:function(d){return a.buildRootedPathAndQuery(b,["diagrams","unlink",d.sourcePageId,d.sourceDiagramName],{sourceDiagramVersion:d.sourceDiagramVersion,targetPageId:d.targetPageId,targetDiagramName:d.targetDiagramName})},buildPageContentUrl:function(d){return AJS.format("{0}/rest/api/content/{1}?expand=body.storage,version,space,ancestors",c,d)},buildEditDiagramPermissionUrl:function(d,e){return a.buildRootedPathAndQuery(b,["ceo",d,"diagrams",e,"permission"])},buildCreateAttachmentPermissionUrl:function(d){return a.buildRootedPathAndQuery(b,["ceo",d,"permission"])},buildPropertyUrl:function(d){return a.buildRootedPathAndQuery(b,["properties",d])},buildDiagramPreviewImageUrl:function(e,f,d){return a.buildRootedPathAndQuery(b,["diagrams","preview"],{name:f,pageId:e,version:d})},buildDiagramThumbnailImageUrl:function(e,f,d){return a.buildRootedPathAndQuery(b,["diagrams","thumbnail"],{name:f,pageId:e,version:d})},buildGetDiagramVersionsUrl:function(d,e){return a.buildRootedPathAndQuery(b,["diagrams","allVersionInformation"],{pageId:d,name:e})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-basics', location = 'gliffy/confluence/rest/WebRequestPromiseFactory.js' */
define("gliffy/confluence/rest/webRequestPromiseFactory",["jquery","gliffy/confluence/rest/urlFactory"],function(a,b){return{buildPrependDiagramToPagePromise:function(e){var g=b.buildPrependDiagramToPageUrl(e);if(window.GLIFFY&&window.GLIFFY.Mouse&&window.GLIFFY.Mouse.editor){var f=window.GLIFFY.Mouse.editor;var c=f.getDocumentManager().getActiveDocument().toObject();var d=f.getDocumentManager().getActiveStage();if(window.GLIFFY.Spinner){window.GLIFFY.Spinner.show(a("body"))}return f.getDocumentManager().getImageData(d,"image/png",function(h,i){c.image=h;i.resolve(c)},false,1).then(function(h){return a.ajax({type:"POST",contentType:"application/json",data:JSON.stringify(h),url:g})})}else{return a.post(g)}},buildGetSpacesPromise:function(d,c){return a.get(b.buildGetSpacesUrl(d,c))},buildSpaceSearchPromise:function(d,e,c){return a.get(b.buildSpaceSearchUrl(d,e,c))},buildPageSearchPromise:function(d,e,f,c){return a.get(b.buildPageSearchUrl(d,e,f,c))},buildGetDiagramsInPagePromise:function(c){return a.get(b.buildGetDiagramsInPageUrl(c))},buildPageWithTitleExistsInSpacePromise:function(d,c){return a.get(b.buildPageWithTitleExistsInSpaceUrl(d,c))},buildUnlinkDiagramPromise:function(c){return a.post(b.buildUnlinkDiagramUrl(c))},buildGetPageContentPromise:function(c){return a.ajax(b.buildPageContentUrl(c))},buildPutPageContentPromise:function(c,d){return a.ajax({type:"PUT",contentType:"application/json; charset=utf-8",url:b.buildPageContentUrl(c),data:JSON.stringify(d),dataType:"text",processData:false})},buildGetEditPagePermissionPromise:function(d,c){return a.ajax({type:"GET",url:b.buildPageEditPermissionUrl(d,c),dataType:"json",cache:false})},buildGetEditDiagramPermissionPromise:function(c,d){return a.ajax({type:"GET",url:b.buildEditDiagramPermissionUrl(c,d),dataType:"json",cache:false})},buildGetCreateAttachmentPermissionPromise:function(c){return a.ajax({type:"GET",url:b.buildCreateAttachmentPermissionUrl(c),dataType:"json",cache:false})},buildGetPropertyValuePromise:function(d){var c=new a.Deferred();a.get(b.buildPropertyUrl(d)).then(function(e){c.resolve(e[d])});return c},buildGetDiagramVersionsPromise:function(c,d){return a.get(b.buildGetDiagramVersionsUrl(c,d))}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/controls/imageselection/ImageSelectionControl.soy' */
// This file was automatically generated from ImageSelectionControl.soy.
// Please don't edit this file by hand.

if (typeof gliffySoy == 'undefined') { var gliffySoy = {}; }
if (typeof gliffySoy.widget == 'undefined') { gliffySoy.widget = {}; }
if (typeof gliffySoy.widget.image == 'undefined') { gliffySoy.widget.image = {}; }


gliffySoy.widget.image.gliffyImageSelectionWidget = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="gliffy-image-selection"><div class="gliffy-image-selection-inner-panel" title="', soy.$$escapeHtml(opt_data.labelText), '"><div class="gliffy-image-selection-spinner"/><div><img class="gliffy-image-selection-image" src="', soy.$$escapeHtml(opt_data.imageUrl), '"/><div class="gliffy-image-selection-icon gliffy-image-selection-zoom"><img/></div></div></div><div class="gliffy-image-selection-label">', soy.$$escapeHtml(opt_data.labelText), '</div></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/controls/imageselection/ImageSelectionControlFactory.js' */
define("gliffy/controls/imageselection/imageSelectionControlFactory",["jquery","gliffy/objectValidatorFactory"],function(c,b){var a=function(h){var e=this;b.create({description:"ListTable constructor parameters",keyToPredicateMap:{parent:b.predicates.isDefinedAndNotNull,labelText:b.predicates.isString,imageUrl:b.predicates.isString}}).validate(h);var h=c.extend({isSelected:false},h);var f=gliffySoy.widget.image.gliffyImageSelectionWidget(h);var d=c(f).appendTo(h.parent);d.on("click",function(j){e.setIsSelected(true)});var i=d.find(".gliffy-image-selection-image");var g=d.find(".gliffy-image-selection-zoom");if(i.previewer){g.previewer({src:i.attr("src"),type:"image/png",zindex:10000})}else{g.on("click",function(k){var j=i.clone();j.removeClass("gliffy-image-selection-image");j.addClass("gliffy-image-selection-fancybox-image");c.fancybox({orig:i,content:j,showCloseButton:true,hideOnOverlayClick:true,hideOnContentClick:true})})}this._={domRoot:d,labelText:h.labelText,imageUrl:h.imageUrl,isSelected:!h.isSelected,selectionChangedListeners:[],};this.setIsSelected(h.isSelected)};a.prototype.getIsSelected=function(){return this._.isSelected};a.prototype.setIsSelected=function(e){if(this._.isSelected===e){return}this._.isSelected=e;if(e){this._.domRoot.addClass("gliffy-image-selected")}else{this._.domRoot.removeClass("gliffy-image-selected")}var d=this;this._.selectionChangedListeners.forEach(function(f){f({source:d,isSelected:e})})};a.prototype.getDomRoot=function(){return this._.domRoot};a.prototype.addSelectionChangedListener=function(d){this._.selectionChangedListeners.push(d)};return{create:function(d){return new a(d)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/confluence/versionselection/VersionSelectionDialog.soy' */
// This file was automatically generated from VersionSelectionDialog.soy.
// Please don't edit this file by hand.

if (typeof gliffySoy == 'undefined') { var gliffySoy = {}; }
if (typeof gliffySoy.dialog == 'undefined') { gliffySoy.dialog = {}; }
if (typeof gliffySoy.dialog.version == 'undefined') { gliffySoy.dialog.version = {}; }


gliffySoy.dialog.version.versionSelectionDialogBody = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<form action="#" method="post" class="aui top-label"><div class="gliffy-version-dialog-panel"><div class="gliffy-version-dialog-description">', soy.$$escapeHtml(opt_data.promptText), '</div><div class="gliffy-image-selection-widget-area"/></div></form>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/confluence/versionselection/VersionSelectionDialogFactory.js' */
define("gliffy/confluence/versionselection/versionSelectionDialogFactory",["jquery","gliffy/controls/imageselection/imageSelectionControlFactory","gliffy/objectValidatorFactory"],function(c,d,b){var a=function(f){var e=this;var f=c.extend({onCancel:function(){}},f);b.create({description:"VersionSelectionDialog constructor parameters",keyToPredicateMap:{headerText:b.predicates.isString,promptText:b.predicates.isString,attachmentVersion:b.predicates.isNumber,diagramName:b.predicates.isString,ownerPageId:b.predicates.isDefinedAndNotNull,referencePageId:b.predicates.isDefinedAndNotNull,pinnedIsDefault:b.predicates.isDefinedAndNotNull,onComplete:b.predicates.isFunction}}).validate(f);this._={hasBeenShown:false,parameters:f,pinnedVersionIsSelected:f.pinnedIsDefault,buildDom:function(){var h=gliffySoy.dialog.version.versionSelectionDialogBody({promptText:f.promptText});var k=c(h);var j=k.find(".gliffy-image-selection-widget-area");var i=d.create({parent:j,labelText:AJS.format("Version {0}",f.attachmentVersion),imageUrl:AJS.format("{0}/download/attachments/{1}/{2}.png?api=v2&version={3}&modificationDate=0",e._.parameters.contextPath,e._.parameters.ownerPageId,encodeURIComponent(e._.parameters.diagramName),e._.parameters.attachmentVersion),isSelected:f.pinnedIsDefault});var g=d.create({parent:j,labelText:"Latest",imageUrl:AJS.format("{0}/download/attachments/{1}/{2}.png?api=v2&timestamp={3}",e._.parameters.contextPath,e._.parameters.ownerPageId,encodeURIComponent(e._.parameters.diagramName),new Date().getTime()),isSelected:!f.pinnedIsDefault});i.getDomRoot().addClass("left");g.getDomRoot().addClass("right");i.addSelectionChangedListener(function(l){if(l.isSelected){g.setIsSelected(false);e._.pinnedVersionIsSelected=true}});g.addSelectionChangedListener(function(l){if(l.isSelected){i.setIsSelected(false);e._.pinnedVersionIsSelected=false}});return k}}};a.prototype.show=function(){var e=this;if(e._.hasBeenShown){throw new Error("versionSelectionDialogFactory can be shown only once per instance lifetime.")}var f=new AJS.Dialog({width:600,height:380,closeOnOutsideClick:false});f.addHeader(e._.parameters.headerText);f.addPanel("",e._.buildDom(),"panel-body");f.addLink("Cancel",function(g){g.remove()},"aui-button gliffy-dialog-cancel");f.addButton("Select",function(g){g.remove();e._.parameters.onComplete(e._.pinnedVersionIsSelected)});f.show();e._.hasBeenShown=true};return{create:function(e){return new a(e)}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/confluence/versionselection/VersionSelectionDialogController.js' */
define("gliffy/confluence/versionselection/versionSelectionDialogController",["jquery","gliffy/objectValidatorFactory","gliffy/confluence/versionselection/versionSelectionDialogFactory"],function(b,a,c){return{showUnpinMacroDiagramVersionDialog:function(d){c.create(b.extend({headerText:"Select Diagram Version to Display",promptText:AJS.format("Version {0} is currently pinned to this page. Which version would you like to display?",d.attachmentVersion),pinnedIsDefault:false},d)).show()},showSelectVersionToEditDialog:function(d){c.create(b.extend({headerText:"Select Diagram Version to Edit",promptText:AJS.format("Version {0} is currently pinned to this page. Which version you would like to edit?",d.attachmentVersion),pinnedIsDefault:true},d)).show()}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/confluence/versionselection/VersionSelectionController.js' */
require("gliffy/amd/apexModuleManager").define("gliffy/confluence/versionselection/versionSelectionController",["jquery","gliffy/url","gliffy/confluence/pageFacade","gliffy/confluence/versionselection/versionSelectionDialogController"],function(d,c,b,a){var e=function(){var h=window.localStorage.getItem("com.gliffy.confluence.diagram.edited");if(h){window.localStorage.removeItem("com.gliffy.confluence.diagram.edited");var j=JSON.parse(h);if(j){var g=c.parse(j.url).queryParams;var k=0;if(g.originalAttachmentVersion){k=parseInt(g.originalAttachmentVersion)}else{if(g.attachmentVersion){k=parseInt(g.attachmentVersion)}}var i=b.getDiagramReferences().filter(function(l){return(l.name===g.name)});if(k>0&&(g.inline==="true"||i.length>0)){var f={ownerPageId:g.ceoid,name:g.name,version:k};a.showUnpinMacroDiagramVersionDialog({ownerPageId:f.ownerPageId,diagramName:f.name,attachmentVersion:f.version,referencePageId:AJS.params.pageId,contextPath:AJS.Confluence.getContextPath(),onComplete:function(l){if(!l){b.unpinDiagramReferenceVersion(f)}}})}}}};AJS.bind("gliffy.confluence.inlineEditorClosed",function(){e()});d(function(){e()})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-confluence-editor-launcher', location = 'gliffy/confluence/editor/EditorLauncher.js' */
define("gliffy/confluence/editor/editorLauncher",["jquery","gliffy/objectValidatorFactory","gliffy/confluence/versionselection/versionSelectionDialogController"],function(d,c,a){var b=function(e,g,f,i,h){if(i&&i>0){d.ajax({url:e+"/rest/gliffy/1.0/diagrams/allVersionInformation",type:"GET",data:{name:g,pageId:f},success:function(j){h(j.numRevisions!==parseInt(i))},error:function(j){h(false)}})}else{h(false)}};return{launchEditorFromViewPage:function(e){var e=d.extend({contextPath:AJS.Confluence.getContextPath()},e);b(e.contextPath,e.diagramName,e.ownerPageId,e.attachmentVersion,function(f){if(f){a.showSelectVersionToEditDialog(d.extend({onComplete:function(g){var h;if(g){h=e.url}else{h=e.url.replace("attachmentVersion=","originalAttachmentVersion=")}window.open(h,"_self")}},e))}else{window.open(e.url,"_self")}})},launchEditorFromEditPage:function(e){var e=d.extend({contextPath:AJS.Confluence.getContextPath()},e);b(e.contextPath,e.diagramName,e.ownerPageId,e.attachmentVersion,function(f){if(f){a.showSelectVersionToEditDialog(d.extend({onComplete:function(g){if(!g){e.originalAttachmentVersion=e.attachmentVersion;e.attachmentVersion=0}AJS.trigger("gliffy.confluence.launchInlineEditor",[e])}},e))}else{AJS.trigger("gliffy.confluence.launchInlineEditor",[e])}})}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-spinner', location = 'gliffy/GliffySpinner.js' */
define("GliffySpinner",["thirdparty/spinjs"],function(a){var c=function(e){var f;var d=0;do{f=$(e).css("z-index");e=$(e).parent()[0];d++}while(isNaN(f)&&e.tagName);if(isNaN(f)){f=0}return f};var b=function(e,d){d=d||{};d.radius=d.radius||20;d.color=d.color||"#000";$(e).prepend("<span></span>");this.container=$(e).find("span").get(0);$(this.container).addClass("gliffy-spinner-container");if(d.inline){$(this.container).css("position","relative");this.inline=true}else{var i=c(e);$(this.container).css("position","absolute").css("z-index",i+1)}var f=d.radius;d.length=0.5*f;d.radius=0.5*f;d.lines=12;d.corners=1;d.width=0.4*d.length;var h=a();var g=new h.Spinner(d).spin();this.container.appendChild(g.el);if(!d.inline){$(this.container).css("left",$(e).width()/2-$(this.container).width()/2).css("top",$(e).height()/2-$(this.container).height()/2)}$(this.container).hide();this.start=function(){if($(this.container).parent().css("position")==="static"){if(!this.inline){$(this.container).parent().css("position","relative");this.positioned=true}}$(this.container).show()};this.stop=function(){if(this.positioned){$(e).parent().css("position","static");this.positioned=false}$(this.container).hide()}};return b});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-spinner', location = 'thirdparty/spin.js' */
define("thirdparty/spinjs",[],function(){return function(){var a=new Object();(function(b,c){if(typeof exports=="object"){module.exports=c()}else{if(typeof define=="function"&&define.amd){define(c)}else{b.Spinner=c()}}}(a,function(){var f=["webkit","Moz","ms","O"],p={},o,j;function h(q,t){var r=document.createElement(q||"div"),s;for(s in t){r[s]=t[s]}return r}function i(r){for(var q=1,s=arguments.length;q<s;q++){r.appendChild(arguments[q])}return r}function d(u,q,v,y){var r=["opacity",q,~~(u*100),v,y].join("-"),s=0.01+v/y*100,x=Math.max(1-(1-u)/q*(100-s),u),w=o.substring(0,o.indexOf("Animation")).toLowerCase(),t=w&&"-"+w+"-"||"";if(!p[r]){j.insertRule("@"+t+"keyframes "+r+"{0%{opacity:"+x+"}"+s+"%{opacity:"+u+"}"+(s+0.01)+"%{opacity:1}"+(s+q)%100+"%{opacity:"+u+"}100%{opacity:"+x+"}}",j.cssRules.length);p[r]=1}return r}function m(u,v){var t=u.style,q,r;v=v.charAt(0).toUpperCase()+v.slice(1);if(t[v]!==undefined){return v}for(r=0;r<f.length;r++){q=f[r]+v;if(t[q]!==undefined){return q}}}function g(q,s){for(var r in s){q.style[m(q,r)||r]=s[r]}return q}function k(s){for(var q=1;q<arguments.length;q++){var r=arguments[q];for(var t in r){if(s[t]===undefined){s[t]=r[t]}}}return s}function n(r,q){return typeof r=="string"?r:r[q%r.length]}var e={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:1/4,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2000000000,className:"spinner",top:"50%",left:"50%",shadow:false,hwaccel:false,position:"absolute"};function c(q){this.opts=k(q||{},c.defaults,e)}c.defaults={};k(c.prototype,{spin:function(z){this.stop();var B=this,r=B.opts,s=B.el=h(null,{className:r.className});g(s,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top});if(z){z.insertBefore(s,z.firstChild||null)}s.setAttribute("role","progressbar");B.lines(s,B.opts);if(!o){var w=0,q=(r.lines-1)*(1-r.direction)/2,v,t=r.fps,y=t/r.speed,x=(1-r.opacity)/(y*r.trail/100),A=y/r.lines;(function u(){w++;for(var C=0;C<r.lines;C++){v=Math.max(1-(w+(r.lines-C)*A)%y*x,r.opacity);B.opacity(s,C*r.direction+q,v,r)}B.timeout=B.el&&setTimeout(u,~~(1000/t))})()}return B},stop:function(){var q=this.el;if(q){clearTimeout(this.timeout);if(q.parentNode){q.parentNode.removeChild(q)}this.el=undefined}return this},lines:function(s,u){var r=0,v=(u.lines-1)*(1-u.direction)/2,q;function t(w,x){return g(h(),{position:"absolute",width:u.scale*(u.length+u.width)+"px",height:u.scale*u.width+"px",background:w,boxShadow:x,transformOrigin:"left",transform:"rotate("+~~(360/u.lines*r+u.rotate)+"deg) translate("+u.scale*u.radius+"px,0)",borderRadius:(u.corners*u.scale*u.width>>1)+"px"})}for(;r<u.lines;r++){q=g(h(),{position:"absolute",top:1+~(u.scale*u.width/2)+"px",transform:u.hwaccel?"translate3d(0,0,0)":"",opacity:u.opacity,animation:o&&d(u.opacity,u.trail,v+r*u.direction,u.lines)+" "+1/u.speed+"s linear infinite"});if(u.shadow){i(q,g(t("#000","0 0 4px #000"),{top:"2px"}))}i(s,i(q,t(n(u.color,r),"0 0 1px rgba(0,0,0,.1)")))}return s},opacity:function(r,q,s){if(q<r.childNodes.length){r.childNodes[q].style.opacity=s}}});function l(){function q(s,r){return h("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',r)}j.addRule(".spin-vml","behavior:url(#default#VML)");c.prototype.lines=function(v,u){var t=u.scale*(u.length+u.width),B=u.scale*2*t;function A(){return g(q("group",{coordsize:B+" "+B,coordorigin:-t+" "+-t}),{width:B,height:B})}var w=-(u.width+u.length)*u.scale*2+"px",z=g(A(),{position:"absolute",top:w,left:w}),y;function x(s,r,C){i(z,i(g(A(),{rotation:360/u.lines*s+"deg",left:~~r}),i(g(q("roundrect",{arcsize:u.corners}),{width:t,height:u.scale*u.width,left:u.scale*u.radius,top:-u.scale*u.width>>1,filter:C}),q("fill",{color:n(u.color,s),opacity:u.opacity}),q("stroke",{opacity:0}))))}if(u.shadow){for(y=1;y<=u.lines;y++){x(y,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(y=1;y<=u.lines;y++){x(y)}return i(v,z)};c.prototype.opacity=function(s,r,u,t){var v=s.firstChild;t=t.shadow&&t.lines||0;if(v&&r+t<v.childNodes.length){v=v.childNodes[r+t];v=v&&v.firstChild;v=v&&v.firstChild;if(v){v.opacity=u}}}}if(typeof document!=="undefined"){j=(function(){var q=h("style",{type:"text/css"});i(document.getElementsByTagName("head")[0],q);return q.sheet||q.styleSheet}());var b=g(h("group"),{behavior:"url(#default#VML)"});if(!m(b,"transform")&&b.adj){l()}else{o=m(b,"animation")}}return c}));return a}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-global-resources', location = 'js/gliffy-on-confluence-init.js' */
AJS.toInit(function(){AJS.$("table.attachments tr").each(function(a,b){AJS.$(b).find("td.attachment-actions a").each(function(c,d){if(AJS.$(d).attr("href").indexOf("/plugins/gliffy/view")!=-1){AJS.$(b).find("td.filename-column span").removeClass("icon-file-xml icon-file-unknown").addClass("gliffy-document-icon").attr("title","Gliffy File").text("Gliffy File")}})})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-global-resources', location = 'js/gliffy-blueprint-registration.js' */
AJS.toInit(function(){if(Confluence&&Confluence.Blueprint&&Confluence.Blueprint.register){Confluence.Blueprint.register("com.gliffy.integration.confluence:gliffy-blueprint-item-main",function(e,f,d){window.location=Confluence.getContextPath()+"/pages/createpage.action?showGliffyMacro=true&fromCreateDialog=true&spaceKey="+encodeURIComponent(f)+"&newSpaceKey="+encodeURIComponent(f)+(e.getParentPageId()?"&fromPageId="+e.getParentPageId():"")});var c=function(d){Confluence.Blueprint.register("com.gliffy.integration.confluence:gliffy-blueprint-item-"+d,function(f,g,e){window.location=Confluence.getContextPath()+"/pages/createpage.action?showGliffyMacro=true&createDiagramType="+d+"&spaceKey="+encodeURIComponent(g)+"&newSpaceKey="+encodeURIComponent(g)+(f.getParentPageId()?"&fromPageId="+f.getParentPageId():"")})};var b=["org","network","software"];for(var a=0;a<b.length;a++){c(b[a])}Confluence.Blueprint.register("com.gliffy.integration.confluence:gliffy-blueprint-item-pack",function(e,h,d){var i=e.addPage("myplugin-step-2"),g=function(){var k=$("#my-title").val();var j=$("#my-text-field").val();d(k,{myName:j})};var f='<div class="template-select-container-body"><ol class="templates" tabindex="100"><li class="template selected"data-item-module-complete-key="com.gliffy.integration.confluence:gliffy-blueprint-item-main"><imgclass="template-preview"src="/confluence/s/en_GB-1988229788/4103/31cc10c48352e244f00edd8fa27d95566a28e0c5.1/0.0-SNAPSHOT/_/download/resources/com.gliffy.integration.confluence:gliffy-blueprint-item-main/icon"><div class="template-meta"><div class="template-name" title="Gliffy Diagram">Corporate Org Chart</div><div class="template-description" title="Add a blank page with a Gliffy Diagram.">Add a page with a Corporate Org Chart</div></div></li><li class="template"data-item-module-complete-key="com.gliffy.integration.confluence:gliffy-blueprint-item-pack"><imgclass="template-preview"src="/confluence/s/en_GB-1988229788/4103/31cc10c48352e244f00edd8fa27d95566a28e0c5.1/0.0-SNAPSHOT/_/download/resources/com.gliffy.integration.confluence:gliffy-blueprint-item-pack/icon"><div class="template-meta"><div class="template-name" title="Gliffy Human Resources Pack">Reimbursement Process</div><div class="template-description" title="Choose from a list of diagrams relating to Human Resources.">Add a page with that shows a Reimbursement Process in your organization</div></div></li><li class="template"data-item-module-complete-key="com.gliffy.integration.confluence:gliffy-blueprint-item-pack"><imgclass="template-preview"src="/confluence/s/en_GB-1988229788/4103/31cc10c48352e244f00edd8fa27d95566a28e0c5.1/0.0-SNAPSHOT/_/download/resources/com.gliffy.integration.confluence:gliffy-blueprint-item-pack/icon"><div class="template-meta"><div class="template-name" title="Gliffy Human Resources Pack">Termination Process</div><div class="template-description" title="Choose from a list of diagrams relating to Human Resources.">Shows you how to fire the guy who had ten too many tequila shots at the last company party.</div></div></li></ol></div>';i.addHeader("Gliffy Human Resources Pack").addPanel("SinglePanel",f,"singlePanel").addButton("Previous",function(j){j.prevPage();j.page.pop()},"").addButton("Create",g,"aui-button-primary create-dialog-create-button").addLink("Close",function(j){j.remove()},"");i.getPanel(0).setPadding(0);$("#my-title").focus();$("#myplugin-form").submit(function(){g(e);return false});return false})}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-global-resources', location = 'js/gliffy-footer.js' */
AJS.toInit(function(){if(AJS.version>="3.0"){var a=AJS.$("#poweredby:visible");if(a.length>0){a.before(AJS.template.load("gliffy-webpanel-footer"))}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.gliffy.integration.confluence:gliffy-global-resources', location = 'gliffy/confluence/ContextFinalizer.js' */
(function(b,a){b(function(){a.instantiateAll();a.reset()})})(require("jquery"),require("gliffy/amd/apexModuleManager"));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.doctheme:splitter', location = 'doctheme/splitter-1.5.1/splitter.js' */
/*
 * jQuery.splitter.js - two-pane splitter window plugin
 *
 * version 1.51 (2009/01/09)
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

/**
 * The splitter() plugin implements a two-pane resizable splitter window.
 * The selected elements in the jQuery object are converted to a splitter;
 * each selected element should have two child elements, used for the panes
 * of the splitter. The plugin adds a third child element for the splitbar.
 *
 * For more details see: http://methvin.com/splitter/
 *
 *
 * @example $('#MySplitter').splitter();
 * @desc Create a vertical splitter with default settings
 *
 * @example $('#MySplitter').splitter({type: 'h', accessKey: 'M'});
 * @desc Create a horizontal splitter resizable via Alt+Shift+M
 *
 * @name splitter
 * @type jQuery
 * @param Object options Options for the splitter (not required)
 * @cat Plugins/Splitter
 * @return jQuery
 * @author Dave Methvin (dave.methvin@gmail.com)
 */
 ;(function($){
 var Z_INDEX = 4; // This is a hackish number, set somewhere in-between some page panels vs. the z-index of the browse menu.
 $.fn.splitter = function(args){
    args = args || {};
    return this.each(function() {
        var zombie;        // left-behind splitbar for outline resizes
        function startSplitMouse(evt) {
            if ( opts.outline )
                zombie = zombie || bar.clone(false).insertAfter(A);
            panes.css("-webkit-user-select", "none");    // Safari selects A/B text on a move
            bar.addClass(opts.activeClass);
            A._posSplit = A[0][opts.pxSplit] - evt[opts.eventPos];
            $(document)
                .bind("mousemove", doSplitMouse)
                .bind("mouseup", endSplitMouse);
        }
        function doSplitMouse(evt) {
            var newPos = A._posSplit+evt[opts.eventPos];
            if ( opts.outline ) {
                newPos = Math.max(0, Math.min(newPos, splitter._DA - bar._DA));
                bar.css(opts.origin, newPos);
            } else {
                resplit(newPos);
            }
        }
        function endSplitMouse(evt) {
            bar.removeClass(opts.activeClass);
            var newPos = A._posSplit+evt[opts.eventPos];
            if ( opts.outline ) {
                zombie.remove(); zombie = null;
                resplit(newPos);
            }
            panes.css("-webkit-user-select", "text");    // let Safari select text again
            $(document)
                .unbind("mousemove", doSplitMouse)
                .unbind("mouseup", endSplitMouse);
        }
        function resplit(newPos) {
            // Constrain new splitbar position to fit pane size limits
            newPos = Math.max(A._min, splitter._DA - B._max,
                    Math.min(newPos, A._max, splitter._DA - bar._DA - B._min));
            // Resize/position the two panes
            bar._DA = bar[0][opts.pxSplit];        // bar size may change during dock
            bar.css(opts.origin, newPos).css(opts.fixed, splitter._DF);
            A.css(opts.origin, 0).css(opts.split, newPos).css(opts.fixed,  splitter._DF);
            B.css(opts.origin, newPos+bar._DA)
                .css(opts.split, splitter._DA-bar._DA-newPos).css(opts.fixed,  splitter._DF);
            // IE fires resize for us; all others pay cash
            if ( !$.browser.msie )
                panes.trigger("resize");
        }
        function dimSum(jq, dims) {
            // Opera returns -1 for missing min/max width, turn into 0
            var sum = 0;
            for ( var i=1; i < arguments.length; i++ )
                sum += Math.max(parseInt(jq.css(arguments[i])) || 0, 0);
            return sum;
        }

        // Determine settings based on incoming opts, element classes, and defaults
        var vh = (args.splitHorizontal? 'h' : args.splitVertical? 'v' : args.type) || 'v';
        var opts = $.extend({
            activeClass: 'active',    // class name for active splitter
            pxPerKey: 8,            // splitter px moved per keypress
            tabIndex: 0,            // tab order indicator
            accessKey: ''            // accessKey for splitbar
        },{
            v: {                    // Vertical splitters:
                keyLeft: 39, keyRight: 37, cursor: ($.browser.msie) ? "e-resize" : "ew-resize",
                splitbarClass: "vsplitbar", outlineClass: "voutline",
                type: 'v', eventPos: "pageX", origin: "left",
                split: "width",  pxSplit: "offsetWidth",  side1: "Left", side2: "Right",
                fixed: "height", pxFixed: "offsetHeight", side3: "Top",  side4: "Bottom"
            },
            h: {                    // Horizontal splitters:
                keyTop: 40, keyBottom: 38,  cursor: ($.browser.msie) ? "n-resize" : "ns-resize",
                splitbarClass: "hsplitbar", outlineClass: "houtline",
                type: 'h', eventPos: "pageY", origin: "top",
                split: "height", pxSplit: "offsetHeight", side1: "Top",  side2: "Bottom",
                fixed: "width",  pxFixed: "offsetWidth",  side3: "Left", side4: "Right"
            }
        }[vh], args);

        // Create jQuery object closures for splitter and both panes
        var splitter = $(this).css({position: "relative"});
        var panes = splitter.children().css({
            position: "absolute",             // positioned inside splitter container
            "-moz-outline-style": "none"    // don't show dotted outline
        });
        var A = $(panes[0]);        // left  or top
        var B = $(panes[1]);        // right or bottom

        // Focuser element, provides keyboard support; title is shown by Opera accessKeys
        var focuser = $('<a href="javascript:void(0)"></a>')
            .attr({accessKey: opts.accessKey, tabIndex: opts.tabIndex, title: opts.splitbarClass})
            .bind($.browser.opera?"click":"focus", function(){ this.focus(); bar.addClass(opts.activeClass) })
            .bind("keydown", function(e){
                var key = e.which || e.keyCode;
                var dir = key==opts["key"+opts.side1]? 1 : key==opts["key"+opts.side2]? -1 : 0;
                if ( dir )
                    resplit(A[0][opts.pxSplit]+dir*opts.pxPerKey, false);
            })
            .bind("blur", function(){ bar.removeClass(opts.activeClass) });

        // Splitbar element, can be already in the doc or we create one
        var bar = $(panes[2] || '<div></div>')
            .insertAfter(A).css("z-index", Z_INDEX).append(focuser)
            .attr({"class": opts.splitbarClass, unselectable: "on"})
            .css({position: "absolute",    "user-select": "none", "-webkit-user-select": "none",
                "-khtml-user-select": "none", "-moz-user-select": "none"})
            .bind("mousedown", startSplitMouse);
        // Use our cursor unless the style specifies a non-default cursor
        if ( /^(auto|default|)$/.test(bar.css("cursor")) )
            bar.css("cursor", opts.cursor);

        // Cache several dimensions for speed, rather than re-querying constantly
        bar._DA = bar[0][opts.pxSplit];
        splitter._PBF = $.boxModel? dimSum(splitter, "border"+opts.side3+"Width", "border"+opts.side4+"Width") : 0;
        splitter._PBA = $.boxModel? dimSum(splitter, "border"+opts.side1+"Width", "border"+opts.side2+"Width") : 0;
        A._pane = opts.side1;
        B._pane = opts.side2;
        $.each([A,B], function(){
            this._min = opts["min"+this._pane] || dimSum(this, "min-"+opts.split);
            this._max = opts["max"+this._pane] || dimSum(this, "max-"+opts.split) || 9999;
            this._init = opts["size"+this._pane]===true ?
                parseInt($.curCSS(this[0],opts.split)) : opts["size"+this._pane];
        });

        // Determine initial position, get from cookie if specified
        var initPos = A._init;
        if ( !isNaN(B._init) )    // recalc initial B size as an offset from the top or left side
            initPos = splitter[0][opts.pxSplit] - splitter._PBA - B._init - bar._DA;
        if ( opts.cookie ) {
            if ( !$.cookie )
                alert('jQuery.splitter(): jQuery cookie plugin required');
            var ckpos = parseInt($.cookie(opts.cookie));
            if ( !isNaN(ckpos) )
                initPos = ckpos;
            /*
                CONF-27142 - Store sidebar width as soon as resize occurs so that new width is reflected
                in new tabs. 'A' is the jQuery object for the #splitter-sidebar div.
             */
            A.bind('resize', _.debounce(function(){
                var state = String(bar.css(opts.origin));    // current location of splitbar
                $.cookie(opts.cookie, state, {expires: opts.cookieExpires || 365,
                    path: opts.cookiePath || document.location.pathname});
            }, 300));
        }
        if ( isNaN(initPos) )    // King Solomon's algorithm
            initPos = Math.round((splitter[0][opts.pxSplit] - splitter._PBA - bar._DA)/2);

        var resizeHandler = function(e){
            var top = splitter.offset().top;
            //TODO: a quick hack to get the splitter to be the right height in ondemand due to the footer difference
            var footer = $("#footer, #studio-footer").outerHeight(true);
            if (!footer)
                footer = 24;
            var wh = $(window).height()-footer;
            splitter.css("height", Math.max(wh-top-splitter._hadjust, splitter._hmin)+"px");
            // ATLASSIAN - only resize components if the window has been resized, or this has been called directly.
            if (!e || e.target == window) splitter.trigger("resize");
        };
        args.update = function (isBound) {
            splitter._hadjust = dimSum(splitter, "borderTopWidth", "borderBottomWidth", "marginBottom");
            splitter._hmin = Math.max(dimSum(splitter, "minHeight"), 20);
            isBound && $(window).bind("resize", resizeHandler);
            resizeHandler();
        };
        // Resize event propagation and splitter sizing
        if ( opts.anchorToWindow ) {
            // Account for margin or border on the splitter container and enforce min height
            args.update(true);
        }
        else if ( opts.resizeToWidth && !$.browser.msie )
            $(window).bind("resize", function(){
                splitter.trigger("resize");
            });

        // Resize event handler; triggered immediately to set initial position
        splitter.bind("resize", function(e, size){
            // Custom events bubble in jQuery 1.3; don't Yo Dawg
            if ( e.target != this ) return;
            // Determine new width/height of splitter container
            splitter._DF = splitter[0][opts.pxFixed] - splitter._PBF;
            splitter._DA = splitter[0][opts.pxSplit] - splitter._PBA;
            // Bail if splitter isn't visible or content isn't there yet
            if ( splitter._DF <= 0 || splitter._DA <= 0 ) return;
            // Re-divvy the adjustable dimension; maintain size of the preferred pane
            resplit(!isNaN(size)? size : (!(opts.sizeRight||opts.sizeBottom)? A[0][opts.pxSplit] :
                splitter._DA-B[0][opts.pxSplit]-bar._DA));
        }).trigger("resize" , [initPos]);
    });
};
})(jQuery);

/*Places focus on the main content section of pages*/
/* TODO - CONFDEV-2045 Clean up this code */
window.placeFocus = function () {

    var mainSection = document.getElementById('splitter-content');
    // Don't focus when there is an editor on the page.
    if(mainSection && AJS.$("#wysiwyg").length == 0)
    {
        mainSection.focus();
    }
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.doctheme:splitter', location = 'doctheme/space-specific-quicknav.js' */
AJS.toInit(function($) {
    // This code runs on every page, but we only want it to run in the Doc theme.
    if ($("#com-atlassian-confluence").hasClass("theme-documentation")) {
        var quickSearchQuery = $("#quick-search-query");

        var siteSearchForm = quickSearchQuery.closest("form");
        var spaceKey = $("fieldset input[name='spaceSearch']", siteSearchForm).val() === "true" ? $("#confluence-space-key").attr("content") : "";

        siteSearchForm.submit(function() {
            var query = quickSearchQuery.val();

            if (query.search(/all:/gi) >= 0) {
                quickSearchQuery.val($.trim(query.replace(/all:/gi, '')));
            }
        });

        var quickNav = AJS.defaultIfUndefined("Atlassian.SearchableApps.QuickNav", { defaultValue: Confluence.QuickNav });

        AJS.log("Applying doc-theme quick search");
        quickNav.addDropDownPostProcess(function (dropDown) {
            if (spaceKey) {
                var searchFor = $("a.search-for", dropDown);
                searchFor.attr("href", searchFor.attr("href") + "&where=" + encodeURIComponent(spaceKey));
            }
        });
        quickNav.setMakeParams(function(value) {
            var params = { query : value };

            if (params.query.search(/all:/gi) >= 0) {
                $("input[name='where']", siteSearchForm).val("");
                params.query = $.trim(params.query.replace(/all:/gi, ''));
                if (!params.query)
                    params.query = "ALL";
            } else if (spaceKey) {
                params.spaceKey = spaceKey;
            }

            return params;
        });

        // DOC-79 - We need to overwrite the tooltip that Confluence appended to the quick search box when each page finish loading.
        quickSearchQuery.mouseover(function() {
            if(spaceKey) {
                quickSearchQuery.attr("title", $("input[name='tooltip']", siteSearchForm).val());
            }
        });
    }
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-resource', location = 'communardo_plugins/javascript/linktree.js' */
AJS.toInit(function(){jQuery(".edit_link").click(function(){var D=jQuery(this).attr("id").replace("edit_link_","");
jQuery(this).hide();
jQuery("#save_link_"+D).removeClass("hidden");
A(D);
return false
});
jQuery(".save_link").click(function(){var D=jQuery(this).attr("id").replace("save_link_","");
B(D);
return false
});
function A(D){jQuery("#link_alias_"+D).removeClass("readonly");
jQuery("#link_alias_"+D).removeAttr("readonly");
jQuery("#link_target_"+D).removeClass("readonly");
jQuery("#link_target_"+D).removeAttr("readonly")
}function B(E){var D=jQuery("#doeditlinkform");
D.append('<input type="text" name="id" value="'+E+'"/>');
D.append('<input type="text" name="alias" value="'+jQuery("#link_alias_"+E).val()+'"/>');
D.append('<input type="text" name="target" value="'+jQuery("#link_target_"+E).val()+'"/>');
D.submit()
}jQuery(".button").each(function(D){jQuery(this).css("cursor","pointer");
C(jQuery(this))
});
function C(D){if(D.hasClass("up")||D.hasClass("indent")){if(D.parent().prev().size()==0){D.hide()
}}else{if(D.hasClass("down")){if(D.parent().next().size()==0){D.hide()
}}else{if(D.hasClass("unindent")){if(D.parents("li").size()==1){D.hide()
}}}}}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-resource', location = 'communardo_plugins/javascript/subspaces.js' */
AJS.toInit(function(){if(jQuery.browser.msie&&jQuery.browser.version=="7.0"){jQuery("div.subspaces-menu li ul").hover(function(){jQuery(this).children("li").children("a").css("width",jQuery(this).width()-40+"px")
})
}});
var operationInProgressArray=new Array();
function subspacesToggleStar(C){var A=C.src;
var B=jQuery("#confluence-context-path").attr("content");
if(C.src.indexOf("star_grey.gif")!=-1){C.src=B+"/images/icons/star_yellow.gif"
}else{C.src=B+"/images/icons/star_grey.gif"
}}function subspacesAddOrRemoveFromFavourites(E,F,A){if(operationInProgressArray[F.id]==null){operationInProgressArray[F.id]=true;
var C;
var B=jQuery("#confluence-context-path").attr("content");
var D="json";
if(A){D="labels"
}if(F.src.indexOf("star_yellow.gif")!=-1){C=B+"/"+D+"/removespacefromfavourites.action"
}else{C=B+"/"+D+"/addspacetofavourites.action"
}AJS.safe.ajax({url:C,type:"POST",data:{key:E},success:function(){subspacesToggleStar(F);
operationInProgressArray[F.id]=null
},error:function(I,H,G){if(A){alert("Error : "+H);
operationInProgressArray[F.id]=null
}else{operationInProgressArray[F.id]=null;
subspacesAddOrRemoveFromFavourites(E,F,true)
}}})
}}function subspacesGotoUrl(B){for(var A in operationInProgressArray){if(operationInProgressArray[A]==true){return 
}}window.location=B
};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-resource', location = 'communardo_plugins/javascript/jquery.corner.2.09.js' */
/*
 * jQuery corner plugin: simple corner rounding
 * Examples and documentation at: http://jquery.malsup.com/corner/
 * version 2.11 (15-JUN-2010)
 * Requires jQuery v1.3.2 or later
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 * Authors: Dave Methvin and Mike Alsup
 */
(function(C){var A=document.createElement("div").style,H=A.MozBorderRadius!==undefined,J=A.WebkitBorderRadius!==undefined,E=A.borderRadius!==undefined||A.BorderRadius!==undefined,D=document.documentMode||0,L=C.browser.msie&&((C.browser.version<8&&!D)||D<8),I=C.browser.msie&&(function(){var N=document.createElement("div");
try{N.style.setExpression("width","0+0");
N.style.removeExpression("width")
}catch(M){return false
}return true
})();
C.support=C.support||{};
C.support.borderRadius=H||J||E;
function G(M,N){return parseInt(C.css(M,N))||0
}function K(M){var M=parseInt(M).toString(16);
return(M.length<2)?"0"+M:M
}function B(O){while(O){var M=C.css(O,"backgroundColor"),N;
if(M&&M!="transparent"&&M!="rgba(0, 0, 0, 0)"){if(M.indexOf("rgb")>=0){N=M.match(/\d+/g);
return"#"+K(N[0])+K(N[1])+K(N[2])
}return M
}if(O.nodeName.toLowerCase()=="html"){break
}O=O.parentNode
}return"#ffffff"
}function F(O,M,N){switch(O){case"round":return Math.round(N*(1-Math.cos(Math.asin(M/N))));
case"cool":return Math.round(N*(1+Math.cos(Math.asin(M/N))));
case"sharp":return Math.round(N*(1-Math.cos(Math.acos(M/N))));
case"bite":return Math.round(N*(Math.cos(Math.asin((N-M-1)/N))));
case"slide":return Math.round(N*(Math.atan2(M,N/M)));
case"jut":return Math.round(N*(Math.atan2(N,(N-M-1))));
case"curl":return Math.round(N*(Math.atan(M)));
case"tear":return Math.round(N*(Math.cos(M)));
case"wicked":return Math.round(N*(Math.tan(M)));
case"long":return Math.round(N*(Math.sqrt(M)));
case"sculpt":return Math.round(N*(Math.log((N-M-1),N)));
case"dogfold":case"dog":return(M&1)?(M+1):N;
case"dog2":return(M&2)?(M+1):N;
case"dog3":return(M&3)?(M+1):N;
case"fray":return(M%2)*N;
case"notch":return N;
case"bevelfold":case"bevel":return M+1
}}C.fn.corner=function(M){if(this.length==0){if(!C.isReady&&this.selector){var N=this.selector,O=this.context;
C(function(){C(N,O).corner(M)
})
}return this
}return this.each(function(V){var U=C(this),f=[U.attr(C.fn.corner.defaults.metaAttr)||"",M||""].join(" ").toLowerCase(),p=/keep/.test(f),b=((f.match(/cc:(#[0-9a-f]+)/)||[])[1]),P=((f.match(/sc:(#[0-9a-f]+)/)||[])[1]),k=parseInt((f.match(/(\d+)px/)||[])[1])||10,g=/round|bevelfold|bevel|notch|bite|cool|sharp|slide|jut|curl|tear|fray|wicked|sculpt|long|dog3|dog2|dogfold|dog/,R=((f.match(g)||["round"])[0]),S=/dogfold|bevelfold/.test(f),Q={T:0,B:1},Y={TL:/top|tl|left/.test(f),TR:/top|tr|right/.test(f),BL:/bottom|bl|left/.test(f),BR:/bottom|br|right/.test(f)},l,s,h,m,X,t,a,q,n,W,r,u,Z,T;
if(!Y.TL&&!Y.TR&&!Y.BL&&!Y.BR){Y={TL:1,TR:1,BL:1,BR:1}
}if(C.fn.corner.defaults.useNative&&R=="round"&&(E||H||J)&&!b&&!P){if(Y.TL){U.css(E?"border-top-left-radius":H?"-moz-border-radius-topleft":"-webkit-border-top-left-radius",k+"px")
}if(Y.TR){U.css(E?"border-top-right-radius":H?"-moz-border-radius-topright":"-webkit-border-top-right-radius",k+"px")
}if(Y.BL){U.css(E?"border-bottom-left-radius":H?"-moz-border-radius-bottomleft":"-webkit-border-bottom-left-radius",k+"px")
}if(Y.BR){U.css(E?"border-bottom-right-radius":H?"-moz-border-radius-bottomright":"-webkit-border-bottom-right-radius",k+"px")
}return 
}l=document.createElement("div");
C(l).css({overflow:"hidden",height:"1px",minHeight:"1px",fontSize:"1px",backgroundColor:P||"transparent",borderStyle:"solid"});
s={T:parseInt(C.css(this,"paddingTop"))||0,R:parseInt(C.css(this,"paddingRight"))||0,B:parseInt(C.css(this,"paddingBottom"))||0,L:parseInt(C.css(this,"paddingLeft"))||0};
if(typeof this.style.zoom!=undefined){this.style.zoom=1
}if(!p){this.style.border="none"
}l.style.borderColor=b||B(this.parentNode);
h=C(this).outerHeight();
for(m in Q){X=Q[m];
if((X&&(Y.BL||Y.BR))||(!X&&(Y.TL||Y.TR))){l.style.borderStyle="none "+(Y[m+"R"]?"solid":"none")+" none "+(Y[m+"L"]?"solid":"none");
t=document.createElement("div");
C(t).addClass("jquery-corner");
a=t.style;
X?this.appendChild(t):this.insertBefore(t,this.firstChild);
if(X&&h!="auto"){if(C.css(this,"position")=="static"){this.style.position="relative"
}a.position="absolute";
a.bottom=a.left=a.padding=a.margin="0";
if(I){a.setExpression("width","this.parentNode.offsetWidth")
}else{a.width="100%"
}}else{if(!X&&C.browser.msie){if(C.css(this,"position")=="static"){this.style.position="relative"
}a.position="absolute";
a.top=a.left=a.right=a.padding=a.margin="0";
if(I){q=G(this,"borderLeftWidth")+G(this,"borderRightWidth");
a.setExpression("width","this.parentNode.offsetWidth - "+q+'+ "px"')
}else{a.width="100%"
}}else{a.position="relative";
a.margin=!X?"-"+s.T+"px -"+s.R+"px "+(s.T-k)+"px -"+s.L+"px":(s.B-k)+"px -"+s.R+"px -"+s.B+"px -"+s.L+"px"
}}for(n=0;
n<k;
n++){W=Math.max(0,F(R,n,k));
r=l.cloneNode(false);
r.style.borderWidth="0 "+(Y[m+"R"]?W:0)+"px 0 "+(Y[m+"L"]?W:0)+"px";
X?t.appendChild(r):t.insertBefore(r,t.firstChild)
}if(S&&C.support.boxModel){if(X&&L){continue
}for(u in Y){if(!Y[u]){continue
}if(X&&(u=="TL"||u=="TR")){continue
}if(!X&&(u=="BL"||u=="BR")){continue
}Z={position:"absolute",border:"none",margin:0,padding:0,overflow:"hidden",backgroundColor:l.style.borderColor};
T=C("<div/>").css(Z).css({width:k+"px",height:"1px"});
switch(u){case"TL":T.css({bottom:0,left:0});
break;
case"TR":T.css({bottom:0,right:0});
break;
case"BL":T.css({top:0,left:0});
break;
case"BR":T.css({top:0,right:0});
break
}t.appendChild(T[0]);
var v=C("<div/>").css(Z).css({top:0,bottom:0,width:"1px",height:k+"px"});
switch(u){case"TL":v.css({left:k});
break;
case"TR":v.css({right:k});
break;
case"BL":v.css({left:k});
break;
case"BR":v.css({right:k});
break
}t.appendChild(v[0])
}}}}})
};
C.fn.uncorner=function(){if(E||H||J){this.css(E?"border-radius":H?"-moz-border-radius":"-webkit-border-radius",0)
}C("div.jquery-corner",this).remove();
return this
};
C.fn.corner.defaults={useNative:true,metaAttr:"data-corner"}
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-resource', location = 'communardo_plugins/javascript/move.js' */
AJS.toInit(function(){var A=jQuery("#subspace-configuration #subspace-global-navigation");
if(A.length>0&&jQuery("#com-atlassian-confluence.contenteditor").length==0){jQuery("#header").append(A);
A.find(".subspaces-menu ul.level_0").corner("top 10px");
var B=A.find(".subspaces-menu ul.level_0 > li:first");
B.css("border-left","none")
}});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-breadcrumbs-resource', location = 'communardo_plugins/javascript/subspace_breadcrumbs.js' */
AJS.toInit(function(){modifyConfluenceBreadCrumbs()
});
jQuery.fn.reverse=[].reverse;
function modifyConfluenceBreadCrumbs(){var A=jQuery("#confluence-context-path").attr("content");
var D=jQuery("#subspace-breadcrumb-path");
if(jQuery("#subspace-breadcrumb-path").length>0){var E=AJS.Meta.get("version-number")[0];
var C=(E=="4")?1:0;
jQuery('#breadcrumbs > li > span > a[href*="/collector/pages.action?"]').closest("li").hide();
var B=jQuery("#subspace-breadcrumb-path li:last .space-url").text();
jQuery('#breadcrumbs a[href$="'+B+'"]').closest("li").remove();
if(jQuery("#breadcrumbs").children().length==0){D.children("li.breadcrumb").each(function(){jQuery("#breadcrumbs").append("<li> <span> <a href='"+A+jQuery(this).children(".space-url").text()+"'>"+jQuery(this).children(".space-name").text()+"</a> </span> </li>")
})
}else{D.children("li.breadcrumb").reverse().each(function(){jQuery("#breadcrumbs").children().eq(C).before("<li> <span> <a href='"+A+jQuery(this).children(".space-url").text()+"'>"+jQuery(this).children(".space-name").text()+"</a> </span> </li>")
})
}}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-search-resource', location = 'communardo_plugins/javascript/subspaces-search.js' */
AJS.toInit(function(){initSubspacesQuickSearch();
initSubspacesSearchCheckboxToggle()
});
function initSubspacesQuickSearch(){jQuery(".subspaces-quicksearch .subspaces-quick-search-query").each(function(){var C=jQuery(this);
C.focus(function(){if(jQuery(this).hasClass("placeholded")){jQuery(this).val("");
jQuery(this).removeClass("placeholded")
}});
C.change(function(){if(jQuery(this).val()==""){jQuery(this).val(jQuery(this).attr("placeholder"));
jQuery(this).addClass("placeholded")
}});
AJS.subspacequicksearch=AJS.quicksearch||{};
AJS.subspacequicksearch.dropdownPostprocess=function(E){jQuery("a span",E).each(function(){var F=jQuery(this);
var G=AJS.dropDown.getAdditionalPropertyValue(F,"spaceName")||"";
if(G){G=" ("+AJS("i").html(G).text()+")"
}F.attr("title",F.text()+G)
})
};
var D=function(E,F){E.closest("form").find(".quick-nav-drop-down").append(F)
};
var A=C.parent().children(".subspacesSpaceKey").val();
var B=C.parent().children(".includeSubspaces").val();
C.subspacesquicksearch("/communardo_plugins/quicksearch/subspacesQuickSearch.action?spaceKey="+A+"&includeSubspaces="+B,null,{dropdownPostprocess:AJS.subspacequicksearch.dropdownPostprocess,dropdownPlacement:D})
})
}function initSubspacesSearchCheckboxToggle(){var A=jQuery("#topspaces_holder .checkbox_topLevelSpaces");
A.click(function(){if(jQuery(this).is(":checked")){A.attr("checked",false);
jQuery(this).attr("checked",true)
}enableDisableSubspacesSearchElements()
});
enableDisableSubspacesSearchElements()
}function enableDisableSubspacesSearchElements(){if(jQuery("#topspaces_holder .checkbox_topLevelSpaces").is(":checked")){jQuery("#search-filter-by-space").attr("disabled",true);
jQuery("#checkbox_include_subspaces").attr("disabled",true)
}else{jQuery("#search-filter-by-space").attr("disabled",false);
jQuery("#checkbox_include_subspaces").attr("disabled",false)
}};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'de.communardo.confluence.plugins.subspace:subspace-search-resource', location = 'communardo_plugins/javascript/subspaces-quicksearch-dropdown.js' */
(function(A){A.fn.subspacesquicksearch=function(L,G,M){M=M||{};
var F={cache_size:30,max_length:1,effect:"appear"};
var I,C={},H=[],E;
if(typeof L=="function"){var B=L();
var K=function(){var N=L();
if(N!=B){C={};
H=[];
B=N
}return N
}
}else{var K=function(){return L
}
}var J=A(this);
var D=function(V,Q){var T=V.statusMessage?true:false;
var P=T?[[{html:V.statusMessage,className:"error"}]]:V.contentNameMatches;
if(!T){var S=V.query;
if(!C[S]&&Q=="success"){C[S]=V;
H.push(S);
if(H.length>F.cache_size){delete C[H.shift()]
}}}if(V.query!=J.val()){return 
}var N=I;
I=AJS.dropDown(P,M.ajsDropDownOptions)[0];
I.jsonResult=V;
if(M.dropdownPlacement){M.dropdownPlacement(J,I.$)
}else{J.closest("form").find(".quick-nav-drop-down").append(I.$)
}I.onhide=function(W){if(W=="escape"){J.focus()
}};
var R=A("span",I.$);
for(var O=0,U=R.length-1;
O<U;
O++){(function(){var X=A(this),W=X.html();
W=W.replace(new RegExp("("+V.queryTokens.join("|")+")","gi"),"<strong>$1</strong>");
X.html(W)
}).call(R[O])
}if(M.dropdownPostprocess){M.dropdownPostprocess(I.$);
I.hider=function(){M.dropdownPostprocess(I.$)
}
}A("a span",I.$).each(function(){var Z=A(this),X=AJS("var","&#8230;"),b=X[0].offsetWidth,Y=this.parentNode.parentNode.parentNode.parentNode.offsetWidth,a=false,W=20;
AJS.dropDown.removeAllAdditionalProperties(Z);
Z.wrapInner(A("<em>"));
Z.append(X);
this.elpss=X;
A("em",Z).each(function(){var c=A(this);
c.show();
if(this.offsetLeft+this.offsetWidth+b>Y-W){var k=this.childNodes;
var i=false;
for(var e=k.length-1;
e>=0;
e--){var f=k[e];
var d=1;
var h=(f.nodeType==3)?"nodeValue":"innerHTML";
var g=f[h];
do{if(d<=g.length){f[h]=g.substr(0,g.length-d++)
}else{break
}}while(this.offsetLeft+this.offsetWidth+b>Y-W);
if(d<=g.length){i=true;
break
}}if(i){a=true
}else{c.hide()
}}});
if(!a){X.hide()
}});
if(N){I.show();
I.method=F.effect;
N.$.remove()
}else{I.show(F.effect)
}if(typeof G=="function"){G.apply(I)
}};
J.oldval=J.val();
J.keyup(function(O){if(O.which==13||O.which==9){return 
}var P=J.val();
if(P!=J.oldval){J.oldval=P;
if(!J.hasClass("placeholded")){clearTimeout(E);
if(AJS.params.quickNavEnabled&&(/[\S]{2,}/).test(P)){if(C[P]){D(C[P])
}else{var N=jQuery("#confluence-context-path").attr("content");
E=setTimeout(function(){return AJS.$.ajax({type:"GET",url:N+K(),data:{query:AJS.escape(P)},success:D,dataType:"json",global:false,timeout:5000,error:function(R,Q,S){if(Q=="timeout"){D({statusMessage:"Timeout",query:P},Q)
}}})
},200)
}}else{I&&I.hide()
}}}});
return this
}
})(jQuery);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'soy/pagetree.soy' */
// This file was automatically generated from pagetree.soy.
// Please don't edit this file by hand.

if (typeof Confluence == 'undefined') { var Confluence = {}; }
if (typeof Confluence.Templates == 'undefined') { Confluence.Templates = {}; }
if (typeof Confluence.Templates.Pagetree == 'undefined') { Confluence.Templates.Pagetree = {}; }
if (typeof Confluence.Templates.Pagetree.Macro == 'undefined') { Confluence.Templates.Pagetree.Macro = {}; }


Confluence.Templates.Pagetree.Macro.loadingIndicator = function(opt_data, opt_sb) {
  var output = opt_sb || new soy.StringBuilder();
  output.append('<div class="plugin_pagetree_children_loading_wrapper"><div class="spinner"/><span class="plugin_pagetree_children_loading">', soy.$$escapeHtml("Loading..."), '</span></div>');
  return opt_sb ? '' : output.toString();
};

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree.js' */
(function(){var A=function(M){this.$=M;
var H=this.$;
var b=999;
var c=true;
var K=false;
var W={};
var D={};
var N=function(k,j,f,i,e){if(j==undefined||j==null){j=!B(k)
}if(f==undefined||f==null){f=0
}if(!L(k,j)){var h=H("#children"+k);
if(Z(h)){var g=H("#plusminus"+k);
if(j==c){g.removeClass("icon-section-closed").addClass("icon-section-opened")
}else{g.removeClass("icon-section-opened").addClass("icon-section-closed")
}if(j==c){if(e==false){h.slideDown(300)
}else{h.removeClass("plugin-pagetree-hide-children");
h.animate({opacity:1})
}}else{if(e==false){h.slideUp(300)
}else{h.animate({opacity:0},{complete:function(){h.addClass("plugin-pagetree-hide-children")
}})
}}if(i){R(k)
}}else{J(k,new Array(),f,"",i,e)
}}if(i){R(k)
}};
var Z=function(e){return e.children("ul[id]").length>0
};
var B=function(f){var e=H("#plusminus"+f);
return(e.length>0)?(e.hasClass("icon-minus")||e.hasClass("icon-section-opened")):K
};
var L=function(f,e){return B(f)==e
};
var I=function(h,g,f){a(h,c,g,f)
};
var X=function(h,g,f){a(h,K,g,f)
};
var a=function(k,i,h,g){G(k);
var j=H("#"+k);
var f=j.find("div.plugin_pagetree_children_container");
f.each(function(e){var l=V(this.id);
N(l,i,b,e==f.length-1,g)
});
h.preventDefault();
h.stopPropagation()
};
var V=function(e){if(!e||e==undefined){return null
}if(e.indexOf("plusminus")!=-1){return e.substring("plusminus".length)
}if(e.indexOf("children")!=-1){return e.substring("children".length)
}return null
};
var C=function(e){if(!e||e==undefined){return null
}return S(e)[1]
};
var S=function(e){if(!e||e==undefined){return null
}return e.split("-")
};
var G=function(f){var e=C(f);
H("div.plugin_pagetree").each(function(g){if(g==e){H(this).find("span.plugin_pagetree_status").removeClass("hidden");
H(this).find("div.plugin_pagetree_expandcollapse").addClass("hidden")
}})
};
var R=function(f){var e=C(f);
H("div.plugin_pagetree").each(function(g){if(g==e){H(this).find("span.plugin_pagetree_status").addClass("hidden");
H(this).find("div.plugin_pagetree_expandcollapse").removeClass("hidden")
}})
};
var F=function(l,f,i,h,k,e,g){var j=W[l];
if(f=="Orphan"){j+="&hasRoot=false&spaceKey="+k
}else{j+="&hasRoot=true&pageId="+f
}j+="&treeId="+l+"&startDepth="+h+"&mobile="+g;
H.each(i,function(){j+="&ancestors="+this
});
j+="&treePageId="+e;
if(g==false){j=(AJS.params.serverUrl||"")+j
}return j
};
var Q=function(g){var f=g;
var e=null;
H("div.plugin_pagetree").each(function(h){if(h==f){e=H(this)
}});
return e
};
var P=function(e){var f=e.children("fieldset");
var g=new Object();
if(f.length>0){f.children("input").each(function(){g[this.name]=this.value
})
}return g
};
var O=function(e){var g=e.children("fieldset");
var h=new Array();
if(g.length>0){var f=g.children("fieldset");
if(f.length>0){f.children("input").each(function(){h.push(this.value)
})
}}return h
};
var E=function(g,f){var e=H("a.plugin_pagetree_childtoggle",g);
e.each(function(){var h=H(this);
h.attr("href","#").bind("click",function(k){var i=h.parent().parent().children("div.plugin_pagetree_children_container");
var j=i.attr("id");
var l=j.substring(8);
N(l,null,null,null,f);
k.preventDefault();
k.stopPropagation()
})
})
};
var U=function(e){var f=H(document.createElement("div"));
f.html(e);
return f.find("ul[id^='child_ul']").length
};
var J=function(m,g,q,o,i,f){var p=m;
var j=i;
var e=S(m);
var h=e[0];
var l=e[1];
var k=H("#children"+m);
var n=P(Q(l));
k.append(Confluence.Templates.Pagetree.Macro.loadingIndicator());
Raphael.spinner(k.find(".plugin_pagetree_children_loading_wrapper .spinner")[0],7,"#666");
H.ajax({type:"GET",url:F(l,h,g,q,o,n.treePageId,f),dataType:"text",success:function(r){if(U(r)){k.html(r);
if(k.children().length&&k.hasClass("hidden")){k.removeClass("hidden")
}E(k,f);
H("#plusminus"+p).addClass("icon-section-opened").removeClass("icon-section-closed");
H("#childrenspan"+D[parseInt(l)]+"-"+l).addClass("plugin_pagetree_current");
if(j){R(p)
}T(k);
if(AJS.PageGadget&&AJS.PageGadget.contentsUpdated){AJS.PageGadget.contentsUpdated()
}}else{window.location=n.loginUrl
}AJS.trigger("pagetree-children-loaded")
},error:function(r){if(r.status=="403"){k.text(n["i18n-pagetree.error.permission"])
}else{k.text(n["i18n-pagetree.error.general"])
}}})
};
var T=function(e){H("div.plugin_pagetree_children_container:empty",e).addClass("hidden")
};
var Y=function(e,j){var h=P(e);
var k=h.noRoot=="true";
var g=k?"Orphan-"+j:h.rootPageId+"-"+j;
var f=h.mobile=="true";
W[j]=h.treeRequestId;
if(f==false){D[j]=AJS.params.pageId
}else{D[j]=H("div.content-container").parent().attr("data-content-id")
}e.children("fieldset").each(function(){var l=H(this);
l.children("input[treeId]").attr("value",j);
l.children("input[rootPage]").attr("value",g)
});
if(k){e.find("div.plugin_pagetree_children").attr("id","childrenOrphan-"+j);
e.find("a.plugin_pagetree_expandall").click(function(l){I("childrenOrphan-"+j,l,f);
return false
});
e.find("a.plugin_pagetree_collapseall").click(function(l){X("childrenOrphan-"+j,l,f);
return false
})
}else{e.find("div.plugin_pagetree_children").attr("id","children"+g);
e.find("a.plugin_pagetree_expandall").click(function(l){I("children"+g,l,f);
return false
});
e.find("a.plugin_pagetree_collapseall").click(function(l){X("children"+g,l,f);
return false
})
}var i=O(e);
J(g,i,h.startDepth,h.spaceKey,"",f)
};
this.initPageTrees=function(){H("div.plugin_pagetree").each(function(e){Y(H(this),e)
});
d()
};
var d=function(){var e=self.placeFocus;
if(e){self.placeFocus=function(){var f=H("form[name='pagetreesearchform']");
f.attr("name","inlinecommentform");
e();
f.attr("name","pagetreesearchform")
}
}};
H(".open-flyout-to-search").bind("click",function(e){if(H(".fly-out-open").length){setTimeout(function(){ConfluenceMobile.flyout.hide()
},400)
}else{setTimeout(function(){ConfluenceMobile.flyout.show()
},400)
}e.stopPropagation();
e.preventDefault()
})
};
Confluence=Confluence||{};
Confluence.Plugins=Confluence.Plugins||{};
Confluence.Plugins.PagetreeMacro={bind:function(B){var C=new A(B);
C.initPageTrees()
}}
})();
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.pagetree:pagetree-js-resources', location = 'com/atlassian/confluence/plugins/pagetree/resource/javascript/pagetree-desktop.js' */
AJS.toInit(function(A){Confluence.Plugins.PagetreeMacro.bind(A)
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/editor-loader.js' */
AJS.Confluence.EditorLoader = (function($) {

    var DEFAULT_LOADING_TIMEOUT = 12000; // ms

    var editorLoadingStatus = {
        loaded: false,
        inProgress: false,
        errorMessage: null,
        
        started: function() {
            this.inProgress = true;
        },
        
        successful: function() {
            this.inProgress = false;
            this.loaded = true;
        },
        
        error: function(message) {
            this.inProgress = false;
            this.errorMessage = message;
        },
        
        /**
         * Should we attempt to load or is there a load already in progress, already completed 
         * or previously failed?
         * 
         * @return true if loading should be attempted.
         */
        allowLoad : function() {
            return !this.loaded
                && !this.inProgress
                && this.errorMessage == null;
        }
    };
    
    /**
     * An object that tracks events that should change the state of the editor which occur
     * when the editor is deactivated. These changes will apply to the editor when it is
     * next activated.
     */
    var stateChangeEventListener = {
        _listening: false,
            
        _queuedHandlers: [],
            
        _watchHandler: function() {
            Confluence.Editor.UI.toggleWatchPage(false);            
        },
        
        _unwatchHandler: function() {
            Confluence.Editor.UI.toggleWatchPage(true);
        },
        
        _createQueueAdder: function(handler) {
            return function() {
                if (stateChangeEventListener._listening) {
                    stateChangeEventListener._queuedHandlers.push(handler);
                }
            }  
        },
            
        /**
         * bind to all the relevant events. 
         */
        bind: function() {
            AJS.bind("watchpage.pageoperation", this._createQueueAdder(this._watchHandler));
            AJS.bind("unwatchpage.pageoperation", this._createQueueAdder(this._unwatchHandler));
        },
        
        /**
         * @param listening if true then listen and queue handlers (i.e. the editor is deactivated). If false
         * then ignore any events. The editor is active and will handle them itself.
         */
        setListening: function(listening) {
            this._listening = listening;
        },
        
        /**
         * Apply and then clear all the queued handlers. 
         */
        applyHandlers: function() {
            var handler = this._queuedHandlers.pop();
            while (handler) {
                handler();
                handler = this._queuedHandlers.pop();
            }
        }
    };
    
    stateChangeEventListener.setListening(true);
    stateChangeEventListener.bind();
    
    /** An array of functions to be called when an Editor load completes successfully. */
    var onLoadSuccess = [];

    /** An array of functions to be called when an Editor load fails. */
    var onLoadError = [];
            
    /**
     * Check if a _load should be allowed and make the appropriate callback if it shouldn't.
     * 
     * @return true if load is guarded (shouldn't be allowed); false if a load should be permitted.
     */
    var loadGuard = function(successCallback, errorCallback) {
        if (!editorLoadingStatus.allowLoad()) {
            if (editorLoadingStatus.errorMessage) {
                if (errorCallback) {
                    errorCallback(editorLoadingStatus.errorMessage);
                } else {
                    AJS.trigger('analyticsEvent', { name: 'rte.editor-loader.previous-load-failed' });
                    AJS.log("EditorLoader: loadGuard - previous load failed.");
                }
            } else if (editorLoadingStatus.inProgress) {
                // record the other callbacks for later (if they were supplied)
                if (successCallback) {
                    onLoadSuccess.push(successCallback);                        
                }
                
                if (errorCallback) {
                    onLoadError.push(errorCallback);
                }
            } else if (editorLoadingStatus.loaded) {
                if (successCallback) {
                    //So that the promise has time to have callbacks registered.
                    setTimeout(successCallback, 0);
                } else {
                    AJS.trigger('analyticsEvent', { name: 'rte.editor-loader.editor-already-loaded' });
                    AJS.log("EditorLoader: loadGuard - editor is already loaded.");
                }
            }
            
            return true;
        }            
    };
    
    /**
     * @return an object with two properties; jsUrls is an array of Javascript URLs and cssTags is an array of HTML formatted CSS
     * Link elements (including conditional comments)
     */
    var getResources = function() {
        // TODO conditionals are basically comments - is inserting comment nodes into the DOM 
        // a valid way to load them. Test on IE, etc
        var resourceTags = AJS.Meta.get("editor.loader.resources");
        var $resources = $(resourceTags);
        var jsUrls = [];
        var cssTags = []; // link elements and comments containing conditional CSS
        
        // Separate the resources into CSS tags and JS urls.
        for (var i = 0; i < $resources.length; i++) {
            var resource = $resources[i];
            // nodeType 8 is Node.COMMENT_NODE
            if (resource.nodeType == 8 && resource.nodeValue.indexOf("text/css") != -1) {
                cssTags.push(resource);
            } else if (resource.nodeType == 1) {
                if (resource.nodeName == "LINK") {
                    cssTags.push(resource);
                } else if (resource.nodeName == "SCRIPT" && resource.getAttribute("type") == "text/javascript") {
                    jsUrls.push(resource.src);
                }
            }
        }
        
        return {
            "jsUrls": jsUrls,
            "cssTags" : cssTags
        };
    };
    
    /**
     * Derive the base url for the Editor based on the array of urls provided.
     * 
     * @param urls an array of Javascript urls for the Editor
     * @return the baseUrl.
     */
    var getBaseUrl = function(urls) {
        var baseUrl = null;
        for (var i = 0; i < urls.length && baseUrl == null; i++) {
            var url = urls[i];
            // try to use part of a URL that would indicate this is definitely the editor scripts (but which couldn't be
            // confused with context part, etc)
            if (/editor,/.test(url)) {
                baseUrl = url;
            }
        }
        
        return baseUrl;
    };
    
    /**
     * Load the HTML and resources required by the Editor. (Note that the Editor is not necessarily initialised unless
     * the provided callback does it.)
     * 
     * @param successCallback a function called if the Editor is successfully loaded.
     * @param errorCallback a function called if there is a failure while loading the Editor (takes a message string parameter).
     */
    var loadEditor = function(successCallback, errorCallback) {

        if (loadGuard(successCallback, errorCallback)) {
            return;
        }

        editorLoadingStatus.started();
        
        if (successCallback) {
            onLoadSuccess.push(successCallback);                        
        }
        
        if (errorCallback) {
            onLoadError.push(errorCallback);
        }            
        
        var resources = getResources();
            
        AJS.Meta.set("rte.src.url", getBaseUrl(resources.jsUrls));

        // An object providing tracking of the various AJAX requests involved in loading
        var loadTracker = {
            countDown: resources.jsUrls.length + 1, // the number of scripts to be loaded plus the template
            errorMessages: [],
            success: function() {
                this.loaded();
            },
            
            error: function(message) {
                this.errorMessages.push(message);
                this.loaded();
            },
            
            loaded: function() {
                this.countDown--;
                if (this.countDown == 0) {
                    if (this.errorMessages.length == 0) {
                        editorLoadingStatus.successful();
                        
                        $.each(onLoadSuccess, function(i, func) {
                            func();
                        });                                            
                    } else {
                        var joinedMessages = this.errorMessages.join();
                        editorLoadingStatus.error(joinedMessages);   

                        $.each(onLoadError, function(i, func) {
                            func(joinedMessages);
                        });                                        
                    }

                    // can clear callback arrays - we don't need them any more
                    onLoadSuccess = null;
                    onLoadError = null;                        
                }
            } 
        };
        
        var loadCallback = function() {
            loadTracker.success();
        };
        
        var loadErrorCallback = function(jqXHR, textStatus, errorThrown) {
            var message = "";
            if (textStatus) {
                message = textStatus;
            }
            
            if (errorThrown) {
                message = message + ": " + errorThrown;                    
            }
            
            loadTracker.error(message);
        };
        
        var originalTimeout = $.ajaxSetup().timeout;
        $.ajaxSetup({ timeout: AJS.Confluence.EditorLoader.loadingTimeout });
        
        // Create a hidden container to load the Editor DOM into
        var $preloadContainer = AJS.Confluence.EditorLoader.getPreloadContainer();
        $("body").append($preloadContainer);

        // Load the Editor template if on a page
        if (AJS.Meta.get("page-id")) {
            var onLoadCallback = function(response, status, xhr) {
                if (status == "success" || status == "notmodified") {
                    //Put markup into dom
                    $preloadContainer.append(response);
                    // move any metadata into the head (which is the only legal place for meta tags).
                    var metadataTemplate = AJS.renderTemplate("dynamic-editor-metadata");
                    $("head").append(metadataTemplate);
                    AJS.populateParameters();
                    loadCallback();
                } else {
                    AJS.trigger('analyticsEvent', { name: 'rte.editor-loader.editor-action-xhr-failed' });
                    loadErrorCallback(xhr, "Error loading the Editor template: " + xhr.status + " - " + xhr.statusText, null);
                }
            };

            this.getEditorPreloadMarkup().done(onLoadCallback);
        } else {
            loadCallback();
        }
        
        AJS.debug("EditorLoader: " + resources.jsUrls.length + " scripts to be loaded.");

        var originalCacheSetting = $.ajaxSetup().cache;
        $.ajaxSetup({ cache: true });

        dispatchScriptLoader(loadCallback, loadErrorCallback, resources);

        $.ajaxSetup({
            cache: originalCacheSetting,
            timeout: originalTimeout 
        });
        
        // TODO don't append the CSS until the Editor is actually activated to avoid risk of style clashes
        $.each(resources.cssTags, function(index, tag) {
            $("head").append(tag);
        });
    };

    /**
     * Load the scripts for the editor. If the dark feature is enabled it uses a new approach where we fetch the scripts
     * via ajax and then eval them in order when they all returned. Otherwise we fall back to the old approach where we
     * would fetch the scripts via ajax when there is only 1, otherwise append them via scripts tags to the DOM.
     *
     * @param loadCallback
     * @param loadErrorCallback
     * @param resources
     */
    var dispatchScriptLoader = function(loadCallback, loadErrorCallback, resources) {

        if (AJS.DarkFeatures.isEnabled("editor.async-script-loading")) {
            AJS.trigger('analyticsEvent', { name: 'rte.editor-loader.dispatch-script-loader.eval' });
            loadScripts(resources.jsUrls, loadCallback, loadErrorCallback);
        } else {

            AJS.trigger('analyticsEvent', { name: 'rte.editor-loader.dispatch-script-loader.script-tag' });

            var ajaxSettings = {
                dataType: "script",
                error: loadErrorCallback,
                success: loadCallback
            };

            if ($.browser.msie) {
                // without this setting window.execScript would be used which makes debugging
                // very difficult.
                ajaxSettings.crossDomain = true;
            }

            if (resources.jsUrls.length > 1) {
                var $head = $("head");
                $.each(resources.jsUrls, function(index, jsUrl) {
                    var $script = $("<script></script>");
                    $script.attr("src", jsUrl);
                    $head.append($script);
                    setTimeout(loadCallback); // calling loadCallback in the same 'event' seems to cause weird problems in Firefox on Linux.
                });
            } else {
                // To avoid CONFDEV-8038 prefer this mechanism for the normal (single batched resource) case.
                $.each(resources.jsUrls, function(index, jsUrl) {
                    ajaxSettings.url = jsUrl;
                    $.ajax(ajaxSettings);
                });
            }
        }
    };

    /**
     * Loads a list of scripts via XHR asynchronously but evaluates them in the order passed into the function.
     * Solves CONFDEV-7632 and CONF-27796 at the same time.
     *
     */
    var loadScripts = function(urls, loadCallback, loadErrorCallback) {
        AJS.debug('EditorLoader: Loading scripts via dark feature "editor.async-script-loading"', urls, urls.length);
        var countdown = urls.length;
        var scripts = [];
        var ajaxSettings = {
            dataType: "text",
            timeout: 30 * 1000
        };

        $.each(urls, function(index, url) {
            $.ajax(url, ajaxSettings)
                .done(function (data) {
                    scripts[index] = data;
                })
                .always(function () {
                    countdown--;

                    if (countdown === 0) {
                        evalScripts(scripts);
                    }
                })
                .done(loadCallback)
                .error(loadErrorCallback);
        });

        function evalScripts(scripts) {
            $.each(scripts, function(i, script) {
                try {
                    $.globalEval(script);
                } catch (e) {
                    AJS.log("Error evaling script in editor-loader", urls[i], e);
                }
            });
        }
    };

    var cachedGetPreloadContentDeferred;

    return {

        /**
         * @returns the jQuery wrapped Element that contains the editor DOM, or create and return a new hidden div
         * if there is none found
         */
        getPreloadContainer : function () {
            var $container = $("#editor-preload-container");
            if (!$container.length) {
                $container = $("<div id=\"editor-preload-container\" style=\"display: none;\"></div>");
            }
            return $container;
        },

        getEditorPreloadMarkup: function (){
            if (cachedGetPreloadContentDeferred) {
                return cachedGetPreloadContentDeferred;
            }
            var url = Confluence.getContextPath() + "/plugins/editor-loader/editor.action";
            // cache deferred.
            cachedGetPreloadContentDeferred = $.get(url, {
                pageId: AJS.Data.get("page-id"),
                spaceKey: AJS.Data.get("space-key"),
                atl_after_login_redirect: window.location.pathname // the URL that an anonymous user will be redirect to after logging in
            });
            return cachedGetPreloadContentDeferred;
        },

        /**
         * Check if the resources need to load the editor have been already loaded in the page.
         */
        resourcesLoaded: function (){ return editorLoadingStatus.loaded },

        /** The maximum wait in milliseconds for the Editor to load */
        loadingTimeout: DEFAULT_LOADING_TIMEOUT,
        
        /**
         * @returns true if there is already an active editor; otherwise false
         */
        isEditorActive: function() {
           var $container = $("#editor-preload-container");
           return $container.length && $container.is(":visible");
        },
        
        /**
         * Load the Editor into a hidden Element on the page if it hasn't already been loaded. 
         * The Editor is not initialised, its HTML, CSS and Javascript is simply loaded ready for
         * later activation.
         */
        load: loadEditor,

        /**
         * @return the immediate parent of the currently active editor as a jQuery wrapped Element. If an editor is not
         * currently active then null will be returned.
         */
        getEditorForm: function() {
            if (this.isEditorActive()) {
                return $(tinymce.activeEditor.getContainer()).closest('form');
            } else {
                return null;
            }
        }        
    };

})(AJS.$);


} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.editor-loader:background-loading-editor', location = 'jscripts/block-and-buffer-keys.js' */
// TODO Move this to core Confluence and modify it to also take a TinyMCE Editor as a block object
// This could then also be used by the find and replace plugin (which is currently duplicating
// most of this).
AJS.Confluence.BlockAndBuffer = {
        
        _cancelKeyboardFunction: function(e) {
            e.preventDefault();
            e.stopPropagation();
        },
        
        /* Handle UTF-16 surrogate pair character codes */
        _surrogatePairFixedFromCharCode: function(code) {  
            if (code > 0xFFFF) {  
                code -= 0x10000;  
                return String.fromCharCode(0xD800 + (code >> 10), 0xDC00 +  (code & 0x3FF));  
            }  
            else {  
                return String.fromCharCode(code);  
            }  
        },
        
        /*
         * Buffer any character codes being typed and also prevent
         * the event that is instigating them. 
         */
        _bufferTextFunction: function(e, buffer) {
            AJS.Confluence.BlockAndBuffer._cancelKeyboardFunction(e);
            
            var keyCode = e.which;
            // IE8 doesn't have charCode for keypress event
            if (!keyCode) {
                keyCode = e.charCode ? e.charCode : e.keyCode;
            }

            // Firefox and Opera wrongly raise keypress for control characters
            if (keyCode !== 13 && keyCode < 48) {
                return;
            }

            buffer.push(keyCode);
        },
        
        
        /**
         * @return the buffered text the user may have entered
         */
        _unblock: function($jq, keycodeBuffer, blockFunc) {
            
            $jq.unbind("keypress", blockFunc);
            
            var bufferedText = "";
            for (var i = 0; i < keycodeBuffer.length; i++) {
                bufferedText += AJS.Confluence.BlockAndBuffer._surrogatePairFixedFromCharCode(keycodeBuffer[i]);
            }

            return bufferedText;
        },
        
        /* -------------------------- Public API -------------------------- */
        
        /**
         * Block keys on the supplied jQuery DOM object. 
         * 
         * @param $jq jQuery wrapped Element.
         * @return the zero argument unblock function you should run when you want to cancel the block. This will return
         * the buffer as a String.
         */
        block: function($jq) {
            var keycodeBuffer = [];

            var bufferText = function(e) {
                AJS.Confluence.BlockAndBuffer._bufferTextFunction(e, keycodeBuffer);
                e.preventDefault();
            };
            
            $jq.keypress(bufferText);
            
            return function() {
                return AJS.Confluence.BlockAndBuffer._unblock($jq, keycodeBuffer, bufferText);
            };
        }
};
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/quick-edit.js' */
// Note: unit tests in confluence-test/confluence-qunit-test/src/main/resources/test/unit/
/**
 * Quick edit plugin entry point
 */
(function($){

    "use strict";

    // Quicker comments undarken, leaving the chance to turn it off
    var disableQuickerComments = AJS.DarkFeatures.isEnabled("editor.quicker.quick.comment.disable");
    var DEFAULT_LOAD_CONTENT_TIMEOUT = 4000; // ms

    /**
     * Start resource loading
     * @returns {$.Deferred} Promise to keep tracking of resource loading
     */
    function getResourcesPromise(){
        var loadResources = new $.Deferred();
        AJS.Confluence.EditorLoader.load(function(){
            setTimeout(function(){
                // the only reason for defering resolution to the next event loop
                // is to be able to reproduce a timeout when automated testing by setting loadingTimeout to 0.
                loadResources.resolve();
            },0)

        }, function(){
            loadResources.reject();
        });
        return loadResources;
    }

    /**
     * Default pre initialisation.
     * This will be called after fetching editor resources and hence before tinymce is initialised
     *
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function preInitialise (options){
        $(".quick-comment-prompt", options.$container).hide();

        // TODO this only applies to comments, should it go into a comment preInitialise method?
        $(".quick-comment-body", options.$container).addClass("comment-body");

        var $preloadContainer = AJS.Confluence.EditorLoader.getPreloadContainer();
        options.$form.append($preloadContainer.children());
        $preloadContainer.show();
    }

    /**
     * If provided, set editor content.
     * @param editor
     * @param initialContent the initialContent to load into the editor, e.g. the current state of an existing page.
     */
    function setEditorContent(editor, initialContent, replayBufferedKeys) {
        if (initialContent) {
            // set initial content
            editor.setContent(initialContent);
            // CONFDEV-19832 - Since we are setting the editor content we also need to updated its start value
            // startContent is what tinymce uses with isDirty to determine if changes occurred
            editor.startContent = editor.getContent({ format: 'raw', no_events : 1 });

            //Ensure first undo step doesn't blow away the content we just set.  This isn't related to the startContent.
            editor.undoManager.clear();
        }
        replayBufferedKeys();
        editor.undoManager.add();
    }

    /**
     * Called after editor initialisation
     *
     * @param {object} options.editor Editor instance
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function postInitialise(options) {

        if (disableQuickerComments) {
            // if quick comments is not enable, we disable all the handlers, so every next actions will be executed the "slow" way
            AJS.Confluence.QuickEdit.disableHandlers();
            AJS.Confluence.QuickEdit.QuickComment.TopLevel.bindCommentAreaFallbackHandler(); // bind top level comment fallback
        }

        // hiding loading container
        var $loadingContainer = options.$container.find(".quick-comment-loading-container"); // the big grey comment-shaped box
        $loadingContainer.hide(); // hide the placeholder if it is shown

        options.$form.show();
        options.$form.addClass("fadeIn");

        var editorContent = options.content ? options.content.editorContent : '';
        setEditorContent (options.editor, editorContent, options.replayBufferedKeys);
        triggerEditorReadyEvents();

        // Ensuring that aui-message dialogues with class closeable have their close button when the html is loaded dynamicly via javascript
        // since the hook to create them already have run.
        makeAuiDialoguesCloseable();
    }

    /**
     *  IMPORTANT NOTE
     *
     *  - This function is a temporary workaround for 'AJS.messages.makeCloseable'. The current Confluence AUI
     *  version (5.4.4-CONFDEV-21873) has a bug where dynamic markup doesn't show a close button which is added
     *  when AUI code is first initialised.
     *
     *  This function should be removed and replaced when issue 'AUI-2653' is resolved and we upgrade to a version
     *  of AUI that has the fix. At that time, we can either replace this with a call to 'AJS.messages.makeCloseable'
     *  or we can manually add the span.icon-close to the template engine. We can't do it right now because
     *  the current AJS.messages.makeCloseable implementation doesn't check if a span.icon-close already exists,
     *  and will add it anyway, resulting in 2 spans.
     *
     *  The following function is the fix provided as a PR to AUI for 'AJS.messages.makeCloseable'.
     */
    function makeAuiDialoguesCloseable() {
        $("div.aui-message.closeable").each(function () {
            var $this = $(this),
                $icon,
                closeElementClass = "icon-close";

            if(!$this.find("." + closeElementClass).length) {
                $icon = $('<span class="aui-icon '+ closeElementClass +'" role="button" tabindex="0"></span>').click(function () {
                    $this.closeMessage();
                }).keypress(function (event) {
                    if ((event.which === AJS.keyCode.ENTER) || (event.which === AJS.keyCode.SPACE)) {
                        $this.closeMessage();
                        event.preventDefault(); // this is especially important when handling the space bar, as we don't want to page down
                    }
                });

                $this.append($icon);
            }
        });
    }

    var handlers = [];

    function triggerEditorReadyEvents() {
        AJS.trigger('quickedit.success');
        AJS.trigger('quickedit.visible');
        AJS.trigger("add-bindings.keyboardshortcuts");
        AJS.trigger("active.dynamic.rte");
    }

    AJS.Confluence.QuickEdit = {

        /**
         * Timeout on the xhr request that loads content (edit page or edit comment)
         * before we fallback to slow edit.
         */

        loadingContentTimeout: DEFAULT_LOAD_CONTENT_TIMEOUT,

        /**
         * Register a quick edit handler (top-level, reply handler, etc)
         * @param handler
         */

        register: function(handler){
            handlers.push(handler);
        },

        /**
         * Disable all handlers.
         * When activate a top-level comment, for example, we may want to disable the comment reply handlers
         * @param handler
         */

        disableHandlers: function(){
            $.each(handlers, function(i, current){
                return current.disable();
            })
        },

        /**
         * Enables all handlers
         * @param handler
         */

        enableHandlers: function(){
            $.each(handlers, function(i, current){
                return current.enable();
            })
        },


        /**
         * An object that binds actions to the save bar as necessary
         */

        SaveBarBinder: {
            bind: function(saveHandler, cancelHandler) {
                if (saveHandler){
                    Confluence.Editor.removeAllSaveHandlers();
                    Confluence.Editor.addSaveHandler(saveHandler);
                }

                if (cancelHandler) {
                    Confluence.Editor.removeAllCancelHandlers();
                    Confluence.Editor.addCancelHandler(cancelHandler);
                }
            }
        },

        /**
         * Activates the editor
         *
         * @param options.fetchContent {object} Deferred object
         * @param options.fallbackUrl {object} Url to fall back to in case of failure.
         * @param options.$container {object} The container containing the necessary structure to activate the editor within.
         * @param options.saveHandler {object} Save handler.
         * @param options.cancelHandler {object} Cancel handler.
         * @param options.loadedCallback {object} Successfully Loaded handler.
         * @param options.preActivate {object} (optional) Pre-activation handler. Gets executed before the call to fetch resources.
         * @param options.preInitialise {object} (optional) Pre-initialisation handler. Gets executed after the resources are fetched but before the editor gets loaded.
         * @param options.postInitialise {object} (optional) Post-initialisation handler. Gets executed after editor has loaded.
         * @param options.plugins {Array} (optional) List of additional plugins to load
         *
         * @returns promise tracking editor activation
         */
        activateEditor: function(options) {
            var replayBufferedKeys;
            var $deferredInitialisation = new $.Deferred();

            if (!options.fallbackUrl || !options.$container) {
                AJS.logError("activateEditor could not be initialsed: bad arguments", options);
                return options.errorCallback && options.errorCallback('bad parameters');
            }

            // start capturing typed keys until editor shows up so we can replay them
            replayBufferedKeys = AJS.Confluence.BlockAndBuffer.block($(document));

            options.preActivate && options.preActivate();

            /**
             * Called when all the necessary deferred objects to load the editor get resolved
             *
             * @param resources {object} object returned by resource loader
             * @param content {object} Content, if any
             */
            function loadEditor (resources, content){

                var initOptions = {
                    $container: options.$container,
                    content: content,
                    $form: options.$form,
                    replayBufferedKeys: replayBufferedKeys
                }

                // custom, injected pre-initialisation (top-level, reply, page, etc)
                options.preInitialise && options.preInitialise(initOptions);

                // default, common preInitialise. Goes after custom preinitialisation
                preInitialise(initOptions);

                var onInit = function() { // editor ready!
                    // custom and default post-initialisation
                    initOptions.editor = AJS.Rte.getEditor();
                    postInitialise(initOptions);
                    options.postInitialise && options.postInitialise(initOptions);

                    AJS.Confluence.QuickEdit.SaveBarBinder.bind(options.saveHandler,
                        options.cancelHandler);

                    AJS.trigger('rte-quick-edit-ready');
                    AJS.unbind('rte-ready', onInit);
                    $deferredInitialisation.resolve();
                };

                AJS.bind("rte-ready", onInit);

                AJS.Rte.BootstrapManager.initialise({
                    plugins: options.plugins
                });
            }

            function handleErrorActivatingEditor(e){
                $deferredInitialisation.reject(e);
                AJS.logError('Error loading page quick edit. Falling back to normal edit URL...');
                AJS.trigger('analytics', { name: 'rte.quick-edit.activate-editor.failed' });
                options.errorCallback && options.errorCallback();
                window.location = options.fallbackUrl;
            }

            /**
             * .-
             *  Main
             *  Loads the editor when the dependent deferred objects get resolved
             *  -.
             */
            var timeoutLoadingEditorResources = AJS.Confluence.EditorLoader.loadingTimeout;
            var timeoutLoadingContent = AJS.Confluence.QuickEdit.loadingContentTimeout;

            var timeoutFn = AJS.Confluence.QuickEdit.Util.timeoutDeferred;
            $.when(
                    timeoutFn(getResourcesPromise(), timeoutLoadingEditorResources),
                    timeoutFn(options.fetchContent || $.when(), timeoutLoadingContent)) // fetch content or use empty deferred (will resolve immediately)

                .done(loadEditor)
                .fail(handleErrorActivatingEditor);

            return $deferredInitialisation.promise();
        }
    };

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/shortcut.js' */
(function () {
    "use strict";

    AJS.Confluence.QuickEdit = AJS.Confluence.QuickEdit || {};

    AJS.Confluence.QuickEdit.KeyboardShortcuts = {

        /**
         * Given a keyboard shortcut key and an element to click, returns an object
         * with bind and unbind functions that will listen to Atlassian Keyboard Shortcut
         * plugin events and event bind appropriately.
         */
        createShortcut: function(key, elementSelectorToClick) {
            var shortcut;

            function bind() {
                shortcut = shortcut || AJS.whenIType(key).moveToAndClick(elementSelectorToClick);
            }

            function unbind() {
                shortcut && shortcut.unbind();
                shortcut = null;
            }

            var bindShortcuts = function() {
                AJS.bind("initialize.keyboardshortcuts", bind);
                AJS.bind("add-bindings.keyboardshortcuts", bind);
                AJS.bind("remove-bindings.keyboardshortcuts", unbind);
            };

            var unbindShortcuts = function() {
                AJS.unbind("initialize.keyboardshortcuts", bind);
                AJS.unbind("add-bindings.keyboardshortcuts", bind);
                AJS.unbind("remove-bindings.keyboardshortcuts", unbind);
            };

            return {
                bind: bindShortcuts,
                unbind: unbindShortcuts
            }
        }
    }
})();


} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/util.js' */
/**
 * Quick edit utilities
 */
(function($){

    "use strict";

    AJS.Confluence.QuickEdit.Util = {

        /**
         * Generates unique identifier, used for comments.
         *
         * @returns a UUID.
         */
        generateUUID : function () {
            var s4 = function() {
                return Math.floor((1 + Math.random()) * 0x10000)
                    .toString(16)
                    .substring(1);
            };

            return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
                s4() + '-' + s4() + s4() + s4();
        },

        /**
         * Return an object representing the base URL.
         */
        getBaseUrl : function() {
            // stripping ':' from protocol and '/' from pathname to handle cross browser inconsistency
            var baseUrl = window.location.protocol.replace(/:$/,"") + "://" + window.location.host + "/" +  window.location.pathname.replace(/^\//,"");

            var search = window.location.search.replace(/^\?/,""); // drop the leading '?'
            search = search.replace(/\&?focusedCommentId=\d+/,"");
            search = search.replace(/^\&/,"");

            return {
                url : baseUrl,

                search: search,

                addQueryParam : function(name, value) {
                    if (!this.search) {
                        this.search = name + "=" + value;
                    } else {
                        this.search = this.search + "&" + name + "=" + value;
                    }
                },

                toString: function() {
                    return this.url + "?" + this.search;
                }
            };
        },

        /**
         * Wrapper to reject a deferred object after a certain time if it has not been resolved.
         * @param obj
         * @param timeout
         */
        timeoutDeferred : function (obj, timeout) {
            setTimeout(function(){
                if (obj.state() === 'pending'){
                    obj.reject('timeout');
                }
            }, timeout);
            return obj;
        }

    };

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment.js' */
/**
 * Base functionality for comments.
 * For specific behaviour, check comment/reply.js and comment/top-level.js
 */

(function($) {

    "use strict";

    /**
     * Common QuickComment code, for actual handler implementations see the comment/ directory
     */
    $(function() {
        //TODO: understand WTH is this. If this is important, we need a test for this
        // Customise the initialisation of AppLinks so that it won't start until the editor is initialised.
        AJS.AppLinksInitialisationBinder = function(f) {
            AJS.bind("init.rte", f);
        };
    });

    function fixSaveBar(){
        var saveBar = $('#rte-savebar');
        saveBar.find('.toolbar-split-left').hide();
        //ensures that the row containing draft status & hints doesn't take up space
        saveBar.find('#draft-status').parent().parent().hide();
        saveBar.find('#notifyWatchers').parent().hide();
        saveBar.find('#versionComment').parent().hide();

        // Required for chrome as it will add 10px padding if this is not hidden when effectively empty
        var minorEdit = saveBar.find('#toolbar-group-minor-edit');
        var minorEditChildren = minorEdit.children();
        // Can't use :hidden selector in jQuery as the editor is not visible yet.
        function isHidden() {
            return $(this).css('display') === 'none';
        }
        if(minorEditChildren.length === minorEditChildren.filter(isHidden).length) {
            minorEdit.hide();
        }
    }

    function adaptUIToComment() {
        // CONFDEV-10529 Make sure edit is loaded before trying to manipulate it's DOM.
        $('#rte-button-save-draft').parent().remove();
        $('#editor-precursor').children().eq(0).hide();
        $('#pagelayout-menu').parent().hide();
        $('#page-layout-2-group').hide();
        $('#rte-button-tasklist').remove();
        $('#rte-insert-tasklist').parent().remove();

        fixSaveBar();
    }

    function assignMetaData() {
        // CONFDEV-10526 - Change to 'comment' as it is by default page or blog
        AJS.Meta.set('content-type', 'comment');
        AJS.Meta.set('draft-type', '');
        AJS.Meta.set('save-drafts', false);

        // make sure AJS.params and AJS.Meta share the same value (until CONFDEV-15654 is resolved)
        // TODO: do we still need to maintain both ways?
        AJS.params.contentType = 'comment';
        AJS.params.draftType = '';
        AJS.params.saveDrafts = false;

        // Update other values accordingly
        AJS.Meta.set('use-inline-tasks', 'false'); //TODO: why? which test will break if we comment this out?
    }

    function getIntParameter(url, paramName) {
        var regex = new RegExp("[?&]" + paramName +"=(\\d+)");
        var match = url.match(regex);
        return (match && match.length > 1) ? parseInt(match[1]) : 0;
    }

    AJS.Confluence.QuickEdit.QuickComment = {

        /**
         * This is called after we fetch the editor resources and before the editor gets displayed
         *
         * @param {object} options.content Content retrieved by the REST end-point, if any.
         * @param {object} options.$form Form (jquery object)
         * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
         */
        preInitialise : function (options){
            // when a comment is loaded, we disable quick edit for a page.
            // maintaining both quick comment and quick edit with reloadable editor is
            //achievable, but outside of the scope of this shipit.
            AJS.Confluence.QuickEdit.QuickEditPage.disable();

            assignMetaData();
            adaptUIToComment();
        },

        /**
         * Called by reply and top-level when editor gets loaded
         *
         * @param {object} options.editor Editor instance
         * @param {object} options.$container Editor main container (jquery object)
         * @param {object} options.content Content retrieved by the REST end-point, if any.
         * @param {object} options.$form Form (jquery object)
         * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
         */
        postInitialise: function(options){
            $("head").append(AJS.Meta.get("editor.loader.comment.resources"));

            // Making sure the editor has the focus
            AJS.Rte.editorFocus(options.editor);
        },

        delegatingSaveCommentHandler: function(data) {
            if (data.asyncRenderSafe)
                return AJS.Confluence.QuickEdit.QuickComment.ajaxSaveCommentHandler(data);

            return AJS.Confluence.QuickEdit.QuickComment.reloadPageSaveCommentHandler(data);
        },

        /**
         * A success handler that will reload the page focused on the new comment.
         */
        reloadPageSaveCommentHandler: function(data) {
            var baseUrl = AJS.Confluence.QuickEdit.Util.getBaseUrl();
            baseUrl.addQueryParam("focusedCommentId", data.id);
            baseUrl.addQueryParam("refresh", +new Date()); // CONFDEV-25213 otherwise, we are navigating to the current URL (it does nothing)
            window.location.href = baseUrl.toString() + "#comment-" + data.id;
        },

        ajaxSaveCommentHandler: function(data) {
            var comment = data;
            var userProfilePicture = {
                isDefault: true,
                path: AJS.Meta.get("static-resource-url-prefix") + "/images/icons/profilepics/default.png"
            };
            if (AJS.Meta.get("current-user-avatar-url") !== "/images/icons/profilepics/default.png") {
                userProfilePicture = {
                    isDefault: false,
                    path: AJS.contextPath() + AJS.Meta.get("current-user-avatar-url")
                }
            }
            var username = AJS.Meta.get("remote-user");
            var commenter = {
                userName: username == "" ? null : username, // Soy functions expect username to be null not "" for anonymous
                displayName: AJS.Meta.get("current-user-fullname"),
                profilePicture: userProfilePicture
            };
            var highlight = true;

            var deferredCancel = AJS.Confluence.QuickEdit.QuickComment.cancelComment();
            deferredCancel.done(function(){
                Confluence.CommentDisplayManager.addOrUpdateComment(commenter, comment, highlight, false);
                AJS.trigger("page.commentAddedOrUpdated", {commentId: comment.id});
            });
        },

        cancelHandler: function() {
            AJS.Rte.Content.editorResetContentChanged(); // reset dirty flag
            AJS.Confluence.QuickEdit.QuickComment.deactivateEditor();
        },

        /**
         * Most templates require a commenter parameter. This function creates it.
         * 
         * @param $userLogoImg an img representing a user logo to create commenter details from
         * @param remoteUser the username of commenter, if missing then the current user is used
         * @param userDisplayName the display name of commenter, if missing then the current user is used
         */
        createCommenterParam: function($userLogoImg, remoteUser, userDisplayName) {
            return {
                userName: remoteUser || AJS.Meta.get("remote-user") || null,
                displayName: userDisplayName || AJS.Meta.get("user-display-name"),
                profilePicture: {
                    isDefault: $userLogoImg.hasClass("defaultLogo"),
                    path: $userLogoImg.attr("src")
                }
            };
        },
        
        /**
         * Create a save handler which is a function taking a single event that is to be called
         * when the save operation is activated on the editor.
         * 
         * @param successHandler the function to be called if save is successful. Takes a single argument which is the 
         * data returned from the save. 
         * @param errorHandler a function taking a single message parameter which is called if the save fails.
         * @return a function taking an event parameter which is suitable for use as a save handler for the editor
         */
        createSaveHandler: function(successHandler, errorHandler) {

            var uuid = Confluence.QuickEdit.Util.generateUUID();

            return function(e) {

                e.preventDefault();

                if (AJS.Rte.Content.isEmpty()) {
                    AJS.Confluence.EditorNotification.clear();
                    AJS.Confluence.EditorNotification.notify("warning", "Comment text is empty. Cannot create empty comments.", 8);
                    return;
                }

                if (!Confluence.Editor.UI.toggleSavebarBusy(true)) {
                    AJS.log("QuickComment: subsequent save operation attempted but ignored.");
                    return;
                }

                // TODO add better progress indication rather than just changing save button to "saving"

                // TODO Not required because we aren't dynamically adding comments yet
                // Learn about the users current profile picture from their avatar already rendered beside the editor
                // var commenter = quickComment.createCommenterParam(AJS.Confluence.EditorLoader.getEditorForm().closest(".quick-comment-container").find(".userLogo"));

                // Check for a parent comment id and comment id if any
                var parentCommentId = 0,
                    commentId = 0;

                var $form = AJS.Confluence.EditorLoader.getEditorForm();
                if ($form.is("form")) {
                    var action = $form.attr("action");
                    parentCommentId = getIntParameter(action, "parentId");
                    commentId = getIntParameter(action, "commentId");
                }

                var captchaManager = new AJS.Confluence.QuickEditCaptchaManager($form);

                var changeCaptchaErrorHandler = function(message) {
                    errorHandler(message);
                    captchaManager.refreshCaptcha();
                };

                var watchPage = $('#watchPage').is(':checked');
                if (commentId > 0) {
                    Confluence.Editor.CommentManager.updateComment(Confluence.getContentId(), commentId, AJS.Rte.Content.getHtml(),
                        watchPage, captchaManager.getCaptchaData(), successHandler, changeCaptchaErrorHandler);
                } else {
                    Confluence.Editor.CommentManager.saveComment(Confluence.getContentId(), parentCommentId, AJS.Rte.Content.getHtml(),
                        watchPage, uuid, captchaManager.getCaptchaData(), successHandler, changeCaptchaErrorHandler);
                }
            };
        },
        
        saveCommentErrorHandler: function(message) {
            Confluence.Editor.UI.toggleSavebarBusy(false);
            // recognise some common error conditions
            var displayMessage;
            if (message && message.search(/captcha/i) != -1) {
                displayMessage = "The typed word did not match the text in the picture.";
            }
            else {
                displayMessage = "Failed to save the comment. Please try again later.";
            }
            AJS.logError("Error saving comment", message);

            AJS.Confluence.EditorNotification.clear();
            AJS.Confluence.EditorNotification.notify("error", displayMessage, 30);
        },

        /**
         * Cancel any open comments (either reply or top-level), wrapping the editor
         * and doing the necessary changes in the page.
         */
        cancelComment: function() {
            var deferred;
            if ($("#rte",".quick-comment-container.reply").length){
                deferred = AJS.Confluence.QuickEdit.QuickComment.Reply.cancelComment();
            } else if ($("#rte",".quick-comment-container.edit").length) {
                deferred = AJS.Confluence.QuickEdit.QuickComment.Edit.cancelComment();
            } else {
                deferred = AJS.Confluence.QuickEdit.QuickComment.TopLevel.cancelComment();
            }
            return deferred;
        },

        /**
         * Close and deactivate the editor.
         */
        deactivateEditor : function () {
            tinymce.execCommand('mceRemoveControl', true, 'wysiwygTextarea');

            Confluence.Editor.UI.toggleSavebarBusy(false);

            // ensure cleanup
            var $preloadContainer = AJS.Confluence.EditorLoader.getPreloadContainer().empty();

            $('.editor-container').remove();
            $('#editor-precursor').remove();
            $(".quick-comment-prompt").show();
            $('.bottom-comment-panels').show(); // show top level comment
            $("#anonymous-warning").remove();

            $('#editor-notification-container').empty();

            // enable all reply links back
            $('.action-reply-comment').removeAttr('reply-disabled');

            // wrapping the editor back
            return AJS.Confluence.EditorLoader.getEditorPreloadMarkup().done(function(markup){
                $preloadContainer.append(markup);
                $preloadContainer.hide();

                // refresh captcha, if needed
                var captchaManager = new AJS.Confluence.QuickEditCaptchaManager($preloadContainer);
                captchaManager.refreshCaptcha();

                AJS.trigger("rte-destroyed");
            });
        },

        proceedWithActivation: function (){
            var deferred = new $.Deferred();
            var openEditor = AJS.Rte && AJS.Rte.getEditor();
            if (openEditor){
                if (openEditor.isDirty()){
                    if (!confirm("Your comment will be lost.")){
                        return deferred.reject();
                    } else {
                        deferred = AJS.Confluence.QuickEdit.QuickComment.cancelComment();
                    }
                }
                else {
                    deferred = AJS.Confluence.QuickEdit.QuickComment.cancelComment();
                }
            } else {
                deferred.resolve();
            }
            return deferred;
        }
    }

})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/top-level.js' */
/**
 * Handler to launch the editor to add a new (?) top level comment.
 */
(function($){

    "use strict";

    /**
     * This will customize the default editor so it looks something like the target editor: a top-level comment editor
     * This is called after we fetch the editor resources and before the editor gets displayed
     *
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function preInitialise(options){
        AJS.Confluence.QuickEdit.QuickComment.preInitialise(options);
    }

    /**
     * Called when editor gets loaded
     *
     * @param {object} options.editor Editor instance
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function postInitialise (options){
        $('#rte-savebar').scrollWindowToElement();
        AJS.Confluence.QuickEdit.QuickComment.postInitialise(options);
    }

    /**
     * Pre-activation handler. Gets executed before the call to fetch resources.
     */
    function preActivate() {
        if (!AJS.Confluence.EditorLoader.resourcesLoaded()) {
            showLoadingContainer();
        }
    }

    function showLoadingContainer() {
        AJS.trigger('analytics', { name: 'rte.quick-edit.top-comment.spinner' });
        $('.quick-comment-prompt').hide(); // hide "write a comment" placeholder
        var $loadingContainer = $('.quick-comment-loading-container');
        $loadingContainer.fadeIn().spin('medium');
    }

    /**
     * topLevelHandler for use by QuickEdit
     */
    var topLevelHandler = {
        commentShortcut: AJS.Confluence.QuickEdit.KeyboardShortcuts.createShortcut('m', ".quick-comment-prompt"),

        /**
         * Called to handle the triggering of a top level comment editor.
         * This is expected to called in the context where 'this' is the activated element.
         *
         * @param e the event triggering the activation
         */
        activateEventHandler: function(e) {
            e.preventDefault();
            AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){
                //we can activate now
                var saveHandler = AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,
                    AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler);

                return AJS.Confluence.QuickEdit.activateEditor({
                    preActivate : preActivate,
                    fallbackUrl : $("#add-comment-rte").attr("href"),
                    $container : $('form[name=inlinecommentform]').closest(".quick-comment-container"),
                    $form : $('form[name=inlinecommentform]'),
                    preInitialise: preInitialise,
                    saveHandler: saveHandler,
                    cancelHandler: AJS.Confluence.QuickEdit.QuickComment.cancelHandler,
                    postInitialise: postInitialise
                });
            });
        },

        /**
         * Enables handlers for top-level comment
         */
        enable: function() {
            $("#comments-section").delegate(".quick-comment-prompt", "click", topLevelHandler.activateEventHandler);
            $("#add-comment-rte").removeClass("full-load"); //Ensure that the original shortcut isn't also activated.

            this.commentShortcut.bind();
        },

        /**
         * Ensure all top level comment place holders are disable and remove all handlers.
         */
        disable: function() {
            $("#comments-section").undelegate(".quick-comment-prompt", "click");

            this.commentShortcut.unbind();
        }
    };

    function fallBackToAddCommentUrl(e) {
        e.preventDefault();
        window.location = $("#add-comment-rte").attr("href");
    }

    function cancelTopLevelHandler() {
        return AJS.Confluence.QuickEdit.QuickComment.deactivateEditor();
    }

    AJS.Confluence.QuickEdit.QuickComment.TopLevel = {
        bindCommentAreaFallbackHandler : function(){
            $("#comments-section").delegate(".quick-comment-prompt", "click", fallBackToAddCommentUrl);
        },
        cancelComment : function (){
            return cancelTopLevelHandler();
        }
    }

    AJS.Confluence.QuickEdit.register(topLevelHandler);

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/reply.js' */
/**
 * Reply to comment.
 */
(function($){

    "use strict";

    /**
     * This will customize the default editor so it looks something like the target editor: a reply comment editor
     * This is called after we fetch the editor resources and before the editor gets displayed
     *
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function preInitialise(options){
        AJS.Confluence.QuickEdit.QuickComment.preInitialise(options);
        options.$container.scrollWindowToElement(); //use scroll-util jquery plugin
    }

    /**
     * Called after editor initialisation
     *
     * @param {object} options.editor Editor instance
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function postInitialise (options){
        AJS.Confluence.QuickEdit.QuickComment.postInitialise(options);
    }

    function getCommentId($comment) {
        var match = $comment.attr("id").match(/comment-(\d+)/);
        var parentCommentId = 0;
        if (match) {
            parentCommentId = parseInt(match[1]);
        } else {
            AJS.trigger('analytics', { name: 'rte.quick-edit.get-reply-parent.failed' });
            AJS.logError("replyHandler: activateEventHandler - could not extract a parent comment Id from the comment id " + $comment.attr("id"));
        }
        return parentCommentId;
    }

    /**
     * Handle transition when opening the editor
     * Insert the html elements necessary to instantiate an editor on it.
     * Display the gray container with spinner if resources have not been loaded yet
     * @param $comment
     */
    function handleTransition($comment) {
        var $placeHolderLogo = $(".quick-comment-container img.userLogo");
        var commenter = AJS.Confluence.QuickEdit.QuickComment.createCommenterParam($placeHolderLogo);
        var params = {
            "contentId": Confluence.getContentId(),
            "parentCommentId": getCommentId($comment),
            "commenter": commenter,
            "context": {
                "contextPath": AJS.Meta.get("context-path"),
                "staticResourceUrlPrefix": AJS.Meta.get("static-resource-url-prefix")
            }
        };

        var template = $(Confluence.Templates.Comments.displayReplyEditorLoadingContainer(params));
        var $loadingContainer = $('.quick-comment-loading-container', template);

        $loadingContainer.hide(); // we don't want to show the loading transition if we have the resources ready
        $comment.after(template);

        if (!AJS.Confluence.EditorLoader.resourcesLoaded()) {
            AJS.trigger('analytics', { name: 'rte.quick-edit.reply-comment.spinner' });
            $comment.after(template);
            $loadingContainer.fadeIn();
            $loadingContainer.spin('medium');
            $loadingContainer[0].scrollIntoView();
        }
        else {
            AJS.trigger('analytics', { name: 'rte.quick-edit.reply-comment.no-spinner' });
        }
    }

    function cancelReplyHandler(){
        var $comment = $('#wysiwyg').closest(".comment.reply");
        var $commentThread = $comment.closest('.comment-threads');
        return AJS.Confluence.QuickEdit.QuickComment.deactivateEditor().done(function(){
            $commentThread.remove();
        });
    }

    /**
     * replyHandler for use by QuickEdit
     */
    var replyHandler = {

        /**
         * Will display the editor structure when reply is activated. Expects 'this' to be the DOM element
         * that was activated.
         *
         * @param e the event triggering the activation
         */
        activateEventHandler: function(e) {

            e.preventDefault();
            e.stopPropagation();

            var self = this;

            if ($(self).attr('reply-disabled')){
                return false;
            }

            AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){
                var $comment = $(self).closest("div.comment");

                //since we're creating a new quick-comment-form from template we should ensure the old one isn't found by selectors.
                $(".quick-comment-form").removeClass("quick-comment-form");

                handleTransition($comment);

                var $container = $(self).closest(".comment-thread").find(".quick-comment-container");

                // TODO why do we need this? documentation? tests?
                AJS.Meta.set("form-name", $("form", $container).attr("name"));
                AJS.Confluence.QuickEdit.activateEditor({
                    fallbackUrl : $("#reply-comment-" + getCommentId($comment)).attr("href"),
                    $container : $container,
                    $form: $container.find(".quick-comment-form"),
                    preInitialise: preInitialise,
                    postInitialise: postInitialise,
                    saveHandler: AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,
                        AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler),
                    cancelHandler: cancelReplyHandler
                });

                $(self).attr('reply-disabled', true);
            });
        },

        /**
         * Enables handlers for reply comment
         */

        enable: function() {
            $("#comments-section").delegate(".action-reply-comment", "click", replyHandler.activateEventHandler);
        },

        /**
         * Disables handlers for reply comment
         */

        disable: function() {
            $("#comments-section").undelegate(".action-reply-comment", "click");
        }
    };

    AJS.Confluence.QuickEdit.QuickComment.Reply = {
        cancelComment : function (){
            return cancelReplyHandler();
        }
    }

    AJS.Confluence.QuickEdit.register(replyHandler);

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/comment/edit.js' */
/**
 * Edit existing comment.
 */
(function($){

    "use strict";

    var disableQuickEditComment = AJS.DarkFeatures.isEnabled("editor.quicker.quick.comment.edit.disable");

    /**
     * This will customize the default editor so it looks something like the target editor: a edit comment editor
     * This is called after we fetch the editor resources and before the editor gets displayed
     *
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function preInitialise(options){
        AJS.Confluence.QuickEdit.QuickComment.preInitialise(options);
        options.$container.scrollWindowToElement(); //use scroll-util jquery plugin
    }

    /**
     * Called after editor initialisation
     *
     * @param {object} options.editor Editor instance
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function postInitialise (options){
        AJS.Confluence.QuickEdit.QuickComment.postInitialise(options);
    }

    function getCommentId($comment) {
        var match = $comment.attr("id").match(/comment-(\d+)/);
        return match ? parseInt(match[1]) : 0;
    }

    /**
     * Create commenter from a comment UI. The author of the comment may not be the current logged in user.
     *
     * @param $comment the existing comment element
     * @return commenter object
     */
    function createCommenterFromComment($comment) {
        var $link = $comment.find(".author .confluence-userlink"),
            $userLogoImg = $comment.find(".comment-user-logo img.userLogo");

        return AJS.Confluence.QuickEdit.QuickComment.createCommenterParam($userLogoImg,
                $link.attr("data-username"), $link.text());
    }

    /**
     * Handle transition when opening the editor to edit a comment. The existing comment is temporarily hidden so that
     * we can show it after saving new content (to be replaced), or after cancelling editing.
     * Insert the html elements necessary to instantiate an editor on it.
     * Display the gray container with spinner if resources have not been loaded yet
     * @param $comment
     */
    function handleTransition($comment) {
        var commenter = createCommenterFromComment($comment);
        var params = {
            "contentId": Confluence.getContentId(),
            "commentId": getCommentId($comment),
            "commenter": commenter,
            "context": {
                "contextPath": AJS.Meta.get("context-path"),
                "staticResourceUrlPrefix": AJS.Meta.get("static-resource-url-prefix")
            },
            "mode": "edit"
        };

        var template = $(Confluence.Templates.Comments.displayEditEditorContainer(params));
        var $loadingContainer = $('.quick-comment-loading-container', template);
        $comment.hide();
        $comment.after(template);
        $loadingContainer.fadeIn().spin('medium');
        $loadingContainer[0].scrollIntoView();
    }

    /**
     * Retrieve an existing comment's editor format
     *
     * @param commentId the id of the comment to retrieve content
     * @returns {$.Deferred} resolved with the comment's editor format when AJAX call returns successfully
     */
    function fetchCommentContent(commentId) {
        var responseDeferred = new $.Deferred();

        $.ajax({
            url: Confluence.getContextPath() + "/rest/api/content/" + commentId + "?expand=body.editor",
            cache: false
        }).done(function(data){
            if (!data || !data.body || !data.body.editor){
                responseDeferred.reject('invalid response from loading comment rest endpoint');
            }
            else{
                responseDeferred.resolve({editorContent: data.body.editor.value});
            }
        }).fail(function(xhr, status, ex){
            responseDeferred.reject('error fetching content');
        });

        return responseDeferred;
    }

    /**
     * Close the editing editor, and show back the original comment after users finish editing
     */
    function cancelEditHandler() {
        var $commentEditing = $('#wysiwyg').closest(".comment.edit");
        return AJS.Confluence.QuickEdit.QuickComment.deactivateEditor().done(function(){
            $commentEditing.prev(".comment").show();
            $commentEditing.remove();
        });
    }

    /**
     * editHandler for use by QuickEdit
     */
    var editHandler = {

        /**
         * Will display the editor structure when edit is activated. Expects 'this' to be the DOM element
         * that was activated.
         *
         * @param e the event triggering the activation
         */
        activateEventHandler: function(e) {
            var self = this;
            e.preventDefault();
            e.stopPropagation(); // in case parent handlers are relying on us not allowing the click through.

            AJS.Confluence.QuickEdit.QuickComment.proceedWithActivation().done(function(){
                var $comment = $(self).closest("div.comment");

                //since we're creating a new quick-comment-form from template we should ensure the old one isn't found by selectors.
                $(".quick-comment-form").removeClass("quick-comment-form");

                handleTransition($comment);

                var $container = $comment.next(".quick-comment-container");

                // TODO why do we need this? documentation? tests?
                AJS.Meta.set("form-name", $("form", $container).attr("name"));

                AJS.Confluence.QuickEdit.activateEditor({
                    fallbackUrl : $("#edit-comment-" + getCommentId($comment)).attr("href"),
                    $container : $container,
                    $form: $container.find(".quick-comment-form"),
                    fetchContent: fetchCommentContent(getCommentId($comment)),
                    preInitialise: preInitialise,
                    postInitialise: postInitialise,
                    saveHandler: AJS.Confluence.QuickEdit.QuickComment.createSaveHandler(AJS.Confluence.QuickEdit.QuickComment.delegatingSaveCommentHandler,
                        AJS.Confluence.QuickEdit.QuickComment.saveCommentErrorHandler),
                    cancelHandler: cancelEditHandler
                });
            });
        },

        /**
         * Enables handlers for edit comment
         */

        enable: function() {
            $("#comments-section").delegate(".comment-action-edit", "click", editHandler.activateEventHandler);
        },

        /**
         * Disables handlers for edit comment
         */

        disable: function() {
            $("#comments-section").undelegate(".comment-action-edit", "click");
        }
    };

    AJS.Confluence.QuickEdit.QuickComment.Edit = {
        cancelComment : function () {
            return cancelEditHandler();
        }
    };

    if (!disableQuickEditComment) {
        AJS.Confluence.QuickEdit.register(editHandler);
    }

})(AJS.$);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/handlers/page.js' */
(function ($) {

    "use strict";

    var $deferredActivation; // used to track editor activation state.

    /**
     * Sets an spinner for the edit button while we transition to edit mode
     */
    function showEditSpinner() {
        var $editPageLink = $('#editPageLink');
        $editPageLink.removeClass('edit'); // remove current icon
        $editPageLink.parent().spin({ left: '10px'});
    }

    function updatePermissionFields(data){ //CONFDEV-13487 - Update permissions fields
        if (data.permissions) {
            for (var perm in data.permissions) {
                $("#" + perm).attr('value', data.permissions[perm]);
            }
        }
    }

    /**
     * This will customize the default editor so it looks something like the target: a page editor
     * This is called after we fetch the editor resources and before the editor gets displayed
     *
     * @param {object} options.$container Editor main container (jquery object)
     * @param {object} options.content Content retrieved by the REST end-point, if any.
     * @param {object} options.$form Form (jquery object)
     * @param {function} options.replayBufferedKeys  Key buffer unblocker function (will replay typed keys)
     */
    function preInitialise (options){

        // prevent to trigger quick edit again. CONFDEV-27904
        AJS.Confluence.QuickEdit.QuickEditPage.disable();

        AJS.populateParameters();

        var $form = options.$container.find(".quick-comment-form");

        var formActionTarget = AJS.Data.get('content-type') === 'page' ? 'doeditpage' : 'doeditblogpost';
        var formAction = Confluence.getContextPath() + '/pages/' + formActionTarget + '.action?pageId=' + Confluence.getContentId();

        $('.ia-splitter-left').remove();

        try {
            $('#main').unwrap();
        } catch (e) {
            //this try catch is here in case a plugin puts scripts in the body which throw exceptions on unwrap.
        }

        //Don't need the editor to resize
        $("#wysiwyg").removeClass('resize');
        $('#rte').removeClass('editor-default').addClass('editor-fullheight');
        //hide stuff we don't need
        $('#watchPage').parent().parent().hide();
        options.$container.children().remove();
        //There should be a way to remove editor-container all together but I don't have time to look into it right now.
        $('.editor-container').children().eq(0).unwrap();
        //we have to modify a lot of stuff here, would be better if the vm or soy templates set these things correctly.
        $form.attr({"class": "editor aui", "action": formAction, "name": "editpageform", "id": "editpageform", "style": ""});
        options.$container.append($form);
        options.$container.removeClass('view').addClass('edit');
        $('body').addClass('contenteditor edit');
    }

    /**
     ** Update token in case of session timeout and user is using "remember me"
     * @param options
     */
    function setAtlToken(token) {
        AJS.Meta.set('atl-token', token);
        $('input[name="atl_token"]').val(token);
    }

    /**
     *
     * @param options.editor
     * @param options.$container
     * @param options.content - content retrieved, if any
     * @param options.form
     */
    function postInitialise (options){

        function pushState() {
            var editLink = $("#editPageLink").attr("href");
            var currentRelativeUrl = window.location.pathname + window.location.search;
            if (editLink != currentRelativeUrl) {
                history.pushState({ quickEdit: true }, "", editLink);
                AJS.trigger("rte-quick-edit-push-state", editLink);
            }
        }

        function pushHash() {
            window.location.hash = "editor";
        }

        if (!!window.history.pushState) {
            pushState();
        } else {
            pushHash();
        }

        updatePermissionFields(options.content);

        // TODO: why are we using this for? Do we have tests that break if this is not here?
        $('#originalVersion').val(options.content.pageVersion);

        setAtlToken(options.content.atlToken);

        AJS.trigger('analyticsEvent', {name: 'quick-edit-success' });

        // We can get rid of the page edit navigation now, since we can not go back to the view page
        // once we are in quick-edit mode without a new page load.
        // By removing the edit button inside this element we will prevent the user triggering navigation to the edit page
        // using key shortcuts.
        // We can only remove this element once we are not doing any further use of $("#editPageLink")
        $('#navigation').remove();
    }


    /**
     * Returns a deferred object that will be resolved when content gets fetched.
     * Ideally, this should call the new Confluence API.
     * @returns {$.Deferred}
     */
    function fetchContent() {
        var responseDeferred = new $.Deferred();

        var xhr = $.ajax({
            url: Confluence.getContextPath() + "/rest/tinymce/1/content/" + Confluence.getContentId() + ".json",
            cache: false
        });

        xhr.success(function(data){
            responseDeferred.resolve(data);
        });

        xhr.error(function(xhr, status, ex){
            responseDeferred.reject('error fetching content');
        });

        return responseDeferred;
    }

    function isThemeQuickEditEnabled(){
        return $('body').is('.theme-default');
    }

    function isEditorBeingActivated($activationPromise){
        return ($activationPromise && $activationPromise.state() === "pending");
    }

    var QuickPageEdit = {
        editShortcut: AJS.Confluence.QuickEdit.KeyboardShortcuts.createShortcut('e', "#editPageLink"),

        /**
         * Handle the triggering of edit
         *
         * @param e the event triggering the activation
         */
        activateEventHandler:function (e) {

            if (e.metaKey || e.shiftKey || e.ctrlKey || e.altKey || e.which == 2 || e.which == 3) {
                return;
            }

            e.preventDefault();

            if (isEditorBeingActivated($deferredActivation)){
                AJS.debug('Editor is being activated. Ignoring handler...');
                return;
            }

            $deferredActivation = QuickPageEdit.activateEditor();
            showEditSpinner();
        },

        enable: function () {
            // enable quick-edit unless using default theme. note that we can't check the theme until
            // DOM ready
            if (isThemeQuickEditEnabled()) {
                var $editPageLink = $("#editPageLink");
                $editPageLink.bind('click', QuickPageEdit.activateEventHandler);
                $editPageLink.removeClass('full-load');
                QuickPageEdit.editShortcut.bind();
                AJS.debug("QuickPageEdit enabled");
            } else {
                AJS.debug("QuickPageEdit not enabled");
            }
        },

        activateEditor: function() {
            return AJS.Confluence.QuickEdit.activateEditor({
                fetchContent: fetchContent(),
                fallbackUrl: $("#editPageLink").attr("href"),
                $container: $('#content'),
                $form : $('#content').find(".quick-comment-form"),
                preInitialise: preInitialise,
                postInitialise: postInitialise,
                saveHandler: function() {
                    if (Confluence.Editor.getNumConcurrentEditors() > 1) {
                        AJS.Confluence.Analytics.publish('rte.notification.concurrent-editing.save', {numEditors: Confluence.Editor.getNumConcurrentEditors(), pageId: AJS.params.pageId, draftType: AJS.params.draftType});
                    }
                },
                cancelHandler: function() {
                    if (Confluence.Editor.getNumConcurrentEditors() > 1) {
                        AJS.Confluence.Analytics.publish('rte.notification.concurrent-editing.cancel', {numEditors: Confluence.Editor.getNumConcurrentEditors(), pageId: AJS.params.pageId, draftType: AJS.params.draftType});
                    }
                },
                plugins : ['confluencedrafts']
            });
        },

        disable: function () {
            AJS.debug("QuickPageEdit disabled.");
            QuickPageEdit.editShortcut.unbind();
            var $editPageLink = $("#editPageLink");
            $editPageLink.unbind("click", QuickPageEdit.activateEventHandler);
            // restore back css class so slow edit can be triggered
            if (!$editPageLink.hasClass('full-load')){
                $editPageLink.addClass('full-load');
            }
        }
    };

    AJS.Confluence.QuickEdit.QuickEditPage = {

        /**
         * Disable quick edit page handlers
         */
        disable: QuickPageEdit.disable
    };

    var browserSupportsQuickEdit = !($.browser.msie && +$.browser.version < 9); // not IE8
    if (browserSupportsQuickEdit) {
        AJS.Confluence.QuickEdit.register(QuickPageEdit);
    }

})(AJS.$);

} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/init.js' */
(function ($){

    /**
     * Depends on AJS.Confluence.EditorLoader.
     */
    var init = function(){
        var preloadEditorResources = !AJS.DarkFeatures.isEnabled('shipit25.quick.edit.defer');
        if (preloadEditorResources) {
            /* CONFDEV-26003
             * This seems to be the cause of the performance regression, but any attempt that doesn't involve a
             * setTimeout with 1s delay doesn't fix it.
             *
             * Deferring editor async preloading until page load, as it shouldn't affect perceived performance,
             * and rebasing the affected performance build.
             */
            $(window).load(function() {
                AJS.debug("QuickComment: instigated background loading of the comment editor.");
                AJS.Confluence.EditorLoader.load();
            });
        }
        else {
            AJS.debug("QuickComment: editor preload is disabled");
        }

        AJS.Confluence.QuickEdit.enableHandlers();
        AJS.trigger("rte-quick-edit-enable-handlers");
    };

    // Pre-load the editor (is there actually any point in having this delayed/in a different event loop?)
    // Useful for development if you have batching turned off and aren't testing Comments.
    if (AJS.DarkFeatures.isEnabled('disable-quick-edit')) {
        AJS.log("disable-quick-edit is turned on; run AJS.Confluence.EditorLoader.load() manually.");
    }
    else {
        AJS.toInit(init);
    }

}($));
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/editor-comment-manager.js' */
AJS.bind("init.rte", function() {

    /**
     * A Manager that handles comment operations, as instigated by the Editor. This caveat basically means that
     * this manager deals with Editor formatted content. This Manager will deal with both handling the server side
     * operations involved in working with comments as well as also handling the displaying of comment operations by
     * delegating to the Confluence.CommentDisplayManager.
     */
    Confluence.Editor.CommentManager = (function($) {
        
        function getAddNewCommentUrl(contentId) {
            return Confluence.getContextPath() + "/rest/tinymce/1/content/" + contentId + "/comment?actions=true";
        };
        
        function getReplyToCommentUrl(contentId, parentCommentId) {
            return Confluence.getContextPath() + "/rest/tinymce/1/content/" + contentId + "/comments/" + parentCommentId + "/comment?actions=true";
        };

        function getEditCommentUrl(contentId, commentId) {
            return Confluence.getContextPath() + "/rest/tinymce/1/content/" + contentId + "/comments/" + commentId + "?actions=true";
        };

        function doAjaxSaveComment(url, editorHtml, watch, uuid, captcha, successCallback, errorCallback) {
            var saveCommentSuccessHandler = function(data, textStatus, jqXHR) {
                successCallback(data);
            };

            var saveCommentErrorHandler = function(jqXhr, textStatus, errorThrown) {
                var message = textStatus + ": " + errorThrown;
                if (jqXhr.responseText) {
                    message = message + " - " + jqXhr.responseText;
                }
                errorCallback(message);
            };

            var ajaxData = {
                type: "POST",
                url: url,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                data: {
                    "html": editorHtml,
                    "watch": watch,
                    "uuid": uuid
                },
                dataType : "json",
                cache: false,
                headers: {
                    "X-Atlassian-Token" : "nocheck"
                },
                success : saveCommentSuccessHandler,
                error : saveCommentErrorHandler,
                timeout: 120000
            };

            if (captcha && captcha.id) {
                ajaxData.headers["X-Atlassian-Captcha-Id"] = captcha.id;
                ajaxData.headers["X-Atlassian-Captcha-Response"] = captcha.response;
            }

            $.ajax(ajaxData);
        }

        return {
            
            /**
             * Save a new comment and display it if successful.
             * 
             * @param contentId the id of the content being commented on
             * @param parentId the of the comment being replied to. This should be 0 if this is not a reply
             * @param editorHtml editor formatted HTML which is the body of the comment
             * @param watch if true then start watching the content that is being commented on.
             * @param captcha the supplied captcha value (may be null if there is none supplied).
             * @param highlight true if you want the comment to appear highlighted
             * @param commenter the person making the comment. This is an object with the following structure:
             * {
             *     userName: (string),
             *     displayName: (string),
             *     profilePicture: {
             *         isDefault: (boolean),
             *         path: (string)
             *     }
             * }
             * @param successCallback a function taking a single parameter which represents the server returned comment that 
             * is called on success. The parameter has the structure:
             * {
             *    id: (number) the id of the comment
             *    html: (HTML string) the rendered content of the comment
             *    ownerId: (number) the id of the content commented upon
             *    parentId: (number) the id of the comment this one is in reply to
             * }
             * @param errorCallback a function taking a single parameters which describes the error returned
             */
            addComment: function(contentId, parentId, editorHtml, watch, captcha, highlight, commenter, successCallback, errorCallback) {
                var saveCommentSuccessHandler = function(data) {
                    Confluence.CommentDisplayManager.addComment(commenter, data, highlight);                
                    successCallback(data);
                };
                
                Confluence.Editor.CommentManager.saveComment(contentId, parentId, editorHtml, saveCommentSuccessHandler, errorCallback);                
            },
            
            /**
             * Save a new comment. If you also want to display the saved comment you should call addComment.
             * 
             * @param contentId the id of the content being commented on
             * @param parentId the of the comment being replied to. This should be 0 if this is not a reply
             * @param editorHtml editor formatted HTML which is the body of the comment
             * @param watch if true then start watching the content that is being commented on.
             * @param uuid a unique identifier for the comment
             * @param captcha the supplied captcha object
             * @param successCallback a function taking a single parameter which represents the server returned comment that 
             * is called on success. The parameter has the structure:
             * {
             *    id: (number) the id of the comment
             *    html: (HTML string) the rendered content of the comment
             *    ownerId: (number) the id of the content commented upon
             *    parentId: (number) the id of the comment this one is in reply to
             * }
             * @param errorCallback a function taking a single parameters which describes the error returned
             */            
            saveComment: function(contentId, parentId, editorHtml, watch, uuid, captcha, successCallback, errorCallback) {
                var url = null;
                if (parentId) {
                    url = getReplyToCommentUrl(contentId, parentId);
                } else {
                    url = getAddNewCommentUrl(contentId);
                }

                doAjaxSaveComment(url, editorHtml, watch, uuid, captcha, successCallback, errorCallback);
            },

            /**
             * Update an existing comment
             *
             * @param contentId the id of the content being commented on
             * @param commentId the id of the comment to be updated
             * @param editorHtml editor formatted HTML which is the body of the comment
             * @param watch if true then start watching the content that is being commented on.
             * @param captcha the supplied captcha object
             * @param successCallback a function taking a single parameter which represents the server returned comment that
             * is called on success. The parameter has the structure:
             * {
             *    id: (number) the id of the comment
             *    html: (HTML string) the rendered content of the comment
             *    ownerId: (number) the id of the content commented upon
             *    parentId: (number) the id of the comment this one is in reply to
             * }
             * @param errorCallback a function taking a single parameters which describes the error returned
             */
            updateComment: function(contentId, commentId, editorHtml, watch, captcha, successCallback, errorCallback) {
                var url = getEditCommentUrl(contentId, commentId);
                doAjaxSaveComment(url, editorHtml, watch, null, captcha, successCallback, errorCallback)
            }
        };

    })(AJS.$);
});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.confluence.plugins.quickedit:quick-comment-initial', location = 'jscripts/captcha-manager.js' */
(function($) {

    "use strict";

    /**
     * Handles common captcha operations
     * @constructor
     */
    AJS.Confluence.QuickEditCaptchaManager = function (container) {

        var CAPTCHA_ID_SELECTOR = 'input[name="captchaId"]';
        var CAPTCHA_RESPONSE_SELECTOR = 'input[name="captchaResponse"]';
        var CAPTCHA_IMAGE_SELECTOR = 'img.captcha-image';

        function findInContainer(selector){
            return $(container || 'body').find(selector);
        }

        function setCaptchaID(id){
            findInContainer(CAPTCHA_ID_SELECTOR).val(id);
        }

        function setCaptchaImg($img, id){
            $img.attr("src", AJS.contextPath() + "/jcaptcha?id=" + id);
        }

        function cleanCaptchaResponseInput() {
            findInContainer(CAPTCHA_RESPONSE_SELECTOR).val('');
        }

        return {
            /**
             * If captcha is enabled, it generates a random new captcha, sets the right ID
             * and fetches the corresponding image for it from the server
             */
            refreshCaptcha: function () {
                var $img = findInContainer(CAPTCHA_IMAGE_SELECTOR);
                if ($img.length > 0) { // captcha enabled
                    var newCaptchaId = Math.random();
                    setCaptchaImg($img, newCaptchaId);
                    setCaptchaID(newCaptchaId);
                    cleanCaptchaResponseInput();
                }
            },

            /**
             * Returns an object encapsulating the captcha challenge information
             * (image id and user response)
             *
             * @returns {{id: *, response: *}}
             */
            getCaptchaData: function () {
                return {
                    id: findInContainer(CAPTCHA_ID_SELECTOR).val(),
                    response: findInContainer(CAPTCHA_RESPONSE_SELECTOR).val()
                };
            }
        }
    }

})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
